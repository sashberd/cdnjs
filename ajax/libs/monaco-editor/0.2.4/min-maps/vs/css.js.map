{"version":3,"sources":["c:/Alex/src/vscode/out-build/vs/css.js"],"names":["__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","Object","create","_cssPluginGlobal","CSSLoaderPlugin","global","BrowserCSSLoader","_pendingLoads","attachListeners","name","linkNode","callback","errorback","unbind","removeEventListener","loadEventListener","errorEventListener","e","addEventListener","_onLoad","_onLoadError","err","_insertLinkNode","head","document","getElementsByTagName","other","length","insertBefore","appendChild","createLinkTag","cssUrl","externalCallback","externalErrorback","_this","createElement","setAttribute","_linkTagExists","i","len","nameAttr","hrefAttr","links","getAttribute","load","IE9CSSLoader","_super","call","_blockedLoads","_mergeStyleSheetsTimeout","_styleSheetCount","push","_handleBlocked","linkCount","styleCount","blockedLoadsCount","window","setTimeout","_mergeStyleSheets","_mergeStyleSheet","dstPath","dst","srcPath","src","rules","insertRule","Utilities","rewriteUrls","cssText","_asIE9HTMLLinkElement","linkElement","linkDomNodes","linkDomNodesCount","mergeCandidates","readyState","rulesLength","styleSheet","mergeCandidatesCount","mergeCount","Math","min","floor","sort","a","srcIndex","dstIndex","href","parentNode","removeChild","styleSheetCount","shift","IE8CSSLoader","onload","NodeCSSLoader","fs","require","nodeRequire","contents","readFileSync","charCodeAt","BOM_CHAR_CODE","substring","CSSPlugin","cssLoader","req","config","toUrl","isBuild","BUILD_MAP","error","write","pluginName","moduleName","entryPoint","getEntryPoint","cssPluginEntryPoints","asModule","writeFile","fileName","entries","join","startsWith","haystack","needle","substr","pathOf","filename","lastSlash","lastIndexOf","joinPaths","findSlashIndexAfterPrefix","prefix","max","indexOf","pushPiece","pieces","piece","prevPiece","pop","path","slashIndex","aPathStartIndex","charAt","commonPrefix","str1","str2","commonFolderPrefix","fromPath","toPath","relativePath","upCount","split","result","originalFile","newFile","replace","_","matches","_i","arguments","url","absoluteUrl","isElectron","process","versions","node","navigator","userAgent","define"],"mappings":"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","file":"vs/css.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/*---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n * Please make sure to make edits in the .ts file at https://github.com/Microsoft/vscode-loader/\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *---------------------------------------------------------------------------------------------\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar _cssPluginGlobal = this;\nvar CSSLoaderPlugin;\n(function (CSSLoaderPlugin) {\n    var global = _cssPluginGlobal;\n    /**\n     * Known issue:\n     * - In IE there is no way to know if the CSS file loaded successfully or not.\n     */\n    var BrowserCSSLoader = (function () {\n        function BrowserCSSLoader() {\n            this._pendingLoads = 0;\n        }\n        BrowserCSSLoader.prototype.attachListeners = function (name, linkNode, callback, errorback) {\n            var unbind = function () {\n                linkNode.removeEventListener('load', loadEventListener);\n                linkNode.removeEventListener('error', errorEventListener);\n            };\n            var loadEventListener = function (e) {\n                unbind();\n                callback();\n            };\n            var errorEventListener = function (e) {\n                unbind();\n                errorback(e);\n            };\n            linkNode.addEventListener('load', loadEventListener);\n            linkNode.addEventListener('error', errorEventListener);\n        };\n        BrowserCSSLoader.prototype._onLoad = function (name, callback) {\n            this._pendingLoads--;\n            callback();\n        };\n        BrowserCSSLoader.prototype._onLoadError = function (name, errorback, err) {\n            this._pendingLoads--;\n            errorback(err);\n        };\n        BrowserCSSLoader.prototype._insertLinkNode = function (linkNode) {\n            this._pendingLoads++;\n            var head = document.head || document.getElementsByTagName('head')[0];\n            var other = head.getElementsByTagName('link') || document.head.getElementsByTagName('script');\n            if (other.length > 0) {\n                head.insertBefore(linkNode, other[other.length - 1]);\n            }\n            else {\n                head.appendChild(linkNode);\n            }\n        };\n        BrowserCSSLoader.prototype.createLinkTag = function (name, cssUrl, externalCallback, externalErrorback) {\n            var _this = this;\n            var linkNode = document.createElement('link');\n            linkNode.setAttribute('rel', 'stylesheet');\n            linkNode.setAttribute('type', 'text/css');\n            linkNode.setAttribute('data-name', name);\n            var callback = function () { return _this._onLoad(name, externalCallback); };\n            var errorback = function (err) { return _this._onLoadError(name, externalErrorback, err); };\n            this.attachListeners(name, linkNode, callback, errorback);\n            linkNode.setAttribute('href', cssUrl);\n            return linkNode;\n        };\n        BrowserCSSLoader.prototype._linkTagExists = function (name, cssUrl) {\n            var i, len, nameAttr, hrefAttr, links = document.getElementsByTagName('link');\n            for (i = 0, len = links.length; i < len; i++) {\n                nameAttr = links[i].getAttribute('data-name');\n                hrefAttr = links[i].getAttribute('href');\n                if (nameAttr === name || hrefAttr === cssUrl) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        BrowserCSSLoader.prototype.load = function (name, cssUrl, externalCallback, externalErrorback) {\n            if (this._linkTagExists(name, cssUrl)) {\n                externalCallback();\n                return;\n            }\n            var linkNode = this.createLinkTag(name, cssUrl, externalCallback, externalErrorback);\n            this._insertLinkNode(linkNode);\n        };\n        return BrowserCSSLoader;\n    }());\n    /**\n     * Prior to IE10, IE could not go above 31 stylesheets in a page\n     * http://blogs.msdn.com/b/ieinternals/archive/2011/05/14/internet-explorer-stylesheet-rule-selector-import-sheet-limit-maximum.aspx\n     *\n     * The general strategy here is to not write more than 31 link nodes to the page at the same time\n     * When stylesheets get loaded, they will get merged one into another to free up\n     * some positions for new link nodes.\n     */\n    var IE9CSSLoader = (function (_super) {\n        __extends(IE9CSSLoader, _super);\n        function IE9CSSLoader() {\n            _super.call(this);\n            this._blockedLoads = [];\n            this._mergeStyleSheetsTimeout = -1;\n        }\n        IE9CSSLoader.prototype.load = function (name, cssUrl, externalCallback, externalErrorback) {\n            if (this._linkTagExists(name, cssUrl)) {\n                externalCallback();\n                return;\n            }\n            var linkNode = this.createLinkTag(name, cssUrl, externalCallback, externalErrorback);\n            if (this._styleSheetCount() < 31) {\n                this._insertLinkNode(linkNode);\n            }\n            else {\n                this._blockedLoads.push(linkNode);\n                this._handleBlocked();\n            }\n        };\n        IE9CSSLoader.prototype._styleSheetCount = function () {\n            var linkCount = document.getElementsByTagName('link').length;\n            var styleCount = document.getElementsByTagName('style').length;\n            return linkCount + styleCount;\n        };\n        IE9CSSLoader.prototype._onLoad = function (name, callback) {\n            _super.prototype._onLoad.call(this, name, callback);\n            this._handleBlocked();\n        };\n        IE9CSSLoader.prototype._onLoadError = function (name, errorback, err) {\n            _super.prototype._onLoadError.call(this, name, errorback, err);\n            this._handleBlocked();\n        };\n        IE9CSSLoader.prototype._handleBlocked = function () {\n            var _this = this;\n            var blockedLoadsCount = this._blockedLoads.length;\n            if (blockedLoadsCount > 0 && this._mergeStyleSheetsTimeout === -1) {\n                this._mergeStyleSheetsTimeout = window.setTimeout(function () { return _this._mergeStyleSheets(); }, 0);\n            }\n        };\n        IE9CSSLoader.prototype._mergeStyleSheet = function (dstPath, dst, srcPath, src) {\n            for (var i = src.rules.length - 1; i >= 0; i--) {\n                dst.insertRule(Utilities.rewriteUrls(srcPath, dstPath, src.rules[i].cssText), 0);\n            }\n        };\n        IE9CSSLoader.prototype._asIE9HTMLLinkElement = function (linkElement) {\n            return linkElement;\n        };\n        IE9CSSLoader.prototype._mergeStyleSheets = function () {\n            this._mergeStyleSheetsTimeout = -1;\n            var blockedLoadsCount = this._blockedLoads.length;\n            var i, linkDomNodes = document.getElementsByTagName('link');\n            var linkDomNodesCount = linkDomNodes.length;\n            var mergeCandidates = [];\n            for (i = 0; i < linkDomNodesCount; i++) {\n                if (linkDomNodes[i].readyState === 'loaded' || linkDomNodes[i].readyState === 'complete') {\n                    mergeCandidates.push({\n                        linkNode: linkDomNodes[i],\n                        rulesLength: this._asIE9HTMLLinkElement(linkDomNodes[i]).styleSheet.rules.length\n                    });\n                }\n            }\n            var mergeCandidatesCount = mergeCandidates.length;\n            // Just a little legend here :)\n            // - linkDomNodesCount: total number of link nodes in the DOM (this should be kept <= 31)\n            // - mergeCandidatesCount: loaded (finished) link nodes in the DOM (only these can be merged)\n            // - blockedLoadsCount: remaining number of load requests that did not fit in before (because of the <= 31 constraint)\n            // Now comes the heuristic part, we don't want to do too much work with the merging of styles,\n            // but we do need to merge stylesheets to free up loading slots.\n            var mergeCount = Math.min(Math.floor(mergeCandidatesCount / 2), blockedLoadsCount);\n            // Sort the merge candidates descending (least rules last)\n            mergeCandidates.sort(function (a, b) {\n                return b.rulesLength - a.rulesLength;\n            });\n            var srcIndex, dstIndex;\n            for (i = 0; i < mergeCount; i++) {\n                srcIndex = mergeCandidates.length - 1 - i;\n                dstIndex = i % (mergeCandidates.length - mergeCount);\n                // Merge rules of src into dst\n                this._mergeStyleSheet(mergeCandidates[dstIndex].linkNode.href, this._asIE9HTMLLinkElement(mergeCandidates[dstIndex].linkNode).styleSheet, mergeCandidates[srcIndex].linkNode.href, this._asIE9HTMLLinkElement(mergeCandidates[srcIndex].linkNode).styleSheet);\n                // Remove dom node of src\n                mergeCandidates[srcIndex].linkNode.parentNode.removeChild(mergeCandidates[srcIndex].linkNode);\n                linkDomNodesCount--;\n            }\n            var styleSheetCount = this._styleSheetCount();\n            while (styleSheetCount < 31 && this._blockedLoads.length > 0) {\n                this._insertLinkNode(this._blockedLoads.shift());\n                styleSheetCount++;\n            }\n        };\n        return IE9CSSLoader;\n    }(BrowserCSSLoader));\n    var IE8CSSLoader = (function (_super) {\n        __extends(IE8CSSLoader, _super);\n        function IE8CSSLoader() {\n            _super.call(this);\n        }\n        IE8CSSLoader.prototype.attachListeners = function (name, linkNode, callback, errorback) {\n            linkNode.onload = function () {\n                linkNode.onload = null;\n                callback();\n            };\n        };\n        return IE8CSSLoader;\n    }(IE9CSSLoader));\n    var NodeCSSLoader = (function () {\n        function NodeCSSLoader() {\n            this.fs = require.nodeRequire('fs');\n        }\n        NodeCSSLoader.prototype.load = function (name, cssUrl, externalCallback, externalErrorback) {\n            var contents = this.fs.readFileSync(cssUrl, 'utf8');\n            // Remove BOM\n            if (contents.charCodeAt(0) === NodeCSSLoader.BOM_CHAR_CODE) {\n                contents = contents.substring(1);\n            }\n            externalCallback(contents);\n        };\n        NodeCSSLoader.BOM_CHAR_CODE = 65279;\n        return NodeCSSLoader;\n    }());\n    // ------------------------------ Finally, the plugin\n    var CSSPlugin = (function () {\n        function CSSPlugin(cssLoader) {\n            this.cssLoader = cssLoader;\n        }\n        CSSPlugin.prototype.load = function (name, req, load, config) {\n            config = config || {};\n            var cssUrl = req.toUrl(name + '.css');\n            this.cssLoader.load(name, cssUrl, function (contents) {\n                // Contents has the CSS file contents if we are in a build\n                if (config.isBuild) {\n                    CSSPlugin.BUILD_MAP[name] = contents;\n                }\n                load({});\n            }, function (err) {\n                if (typeof load.error === 'function') {\n                    load.error('Could not find ' + cssUrl + ' or it was empty');\n                }\n            });\n        };\n        CSSPlugin.prototype.write = function (pluginName, moduleName, write) {\n            // getEntryPoint is a Monaco extension to r.js\n            var entryPoint = write.getEntryPoint();\n            // r.js destroys the context of this plugin between calling 'write' and 'writeFile'\n            // so the only option at this point is to leak the data to a global\n            global.cssPluginEntryPoints = global.cssPluginEntryPoints || {};\n            global.cssPluginEntryPoints[entryPoint] = global.cssPluginEntryPoints[entryPoint] || [];\n            global.cssPluginEntryPoints[entryPoint].push({\n                moduleName: moduleName,\n                contents: CSSPlugin.BUILD_MAP[moduleName]\n            });\n            write.asModule(pluginName + '!' + moduleName, 'define([\\'vs/css!' + entryPoint + '\\'], {});');\n        };\n        CSSPlugin.prototype.writeFile = function (pluginName, moduleName, req, write, config) {\n            if (global.cssPluginEntryPoints && global.cssPluginEntryPoints.hasOwnProperty(moduleName)) {\n                var fileName = req.toUrl(moduleName + '.css');\n                var contents = [\n                    '/*---------------------------------------------------------',\n                    ' * Copyright (c) Microsoft Corporation. All rights reserved.',\n                    ' *--------------------------------------------------------*/'\n                ], entries = global.cssPluginEntryPoints[moduleName];\n                for (var i = 0; i < entries.length; i++) {\n                    contents.push(Utilities.rewriteUrls(entries[i].moduleName, moduleName, entries[i].contents));\n                }\n                write(fileName, contents.join('\\r\\n'));\n            }\n        };\n        CSSPlugin.BUILD_MAP = {};\n        return CSSPlugin;\n    }());\n    CSSLoaderPlugin.CSSPlugin = CSSPlugin;\n    var Utilities = (function () {\n        function Utilities() {\n        }\n        Utilities.startsWith = function (haystack, needle) {\n            return haystack.length >= needle.length && haystack.substr(0, needle.length) === needle;\n        };\n        /**\n         * Find the path of a file.\n         */\n        Utilities.pathOf = function (filename) {\n            var lastSlash = filename.lastIndexOf('/');\n            if (lastSlash !== -1) {\n                return filename.substr(0, lastSlash + 1);\n            }\n            else {\n                return '';\n            }\n        };\n        /**\n         * A conceptual a + b for paths.\n         * Takes into account if `a` contains a protocol.\n         * Also normalizes the result: e.g.: a/b/ + ../c => a/c\n         */\n        Utilities.joinPaths = function (a, b) {\n            function findSlashIndexAfterPrefix(haystack, prefix) {\n                if (Utilities.startsWith(haystack, prefix)) {\n                    return Math.max(prefix.length, haystack.indexOf('/', prefix.length));\n                }\n                return 0;\n            }\n            var aPathStartIndex = 0;\n            aPathStartIndex = aPathStartIndex || findSlashIndexAfterPrefix(a, '//');\n            aPathStartIndex = aPathStartIndex || findSlashIndexAfterPrefix(a, 'http://');\n            aPathStartIndex = aPathStartIndex || findSlashIndexAfterPrefix(a, 'https://');\n            function pushPiece(pieces, piece) {\n                if (piece === './') {\n                    // Ignore\n                    return;\n                }\n                if (piece === '../') {\n                    var prevPiece = (pieces.length > 0 ? pieces[pieces.length - 1] : null);\n                    if (prevPiece && prevPiece === '/') {\n                        // Ignore\n                        return;\n                    }\n                    if (prevPiece && prevPiece !== '../') {\n                        // Pop\n                        pieces.pop();\n                        return;\n                    }\n                }\n                // Push\n                pieces.push(piece);\n            }\n            function push(pieces, path) {\n                while (path.length > 0) {\n                    var slashIndex = path.indexOf('/');\n                    var piece = (slashIndex >= 0 ? path.substring(0, slashIndex + 1) : path);\n                    path = (slashIndex >= 0 ? path.substring(slashIndex + 1) : '');\n                    pushPiece(pieces, piece);\n                }\n            }\n            var pieces = [];\n            push(pieces, a.substr(aPathStartIndex));\n            if (b.length > 0 && b.charAt(0) === '/') {\n                pieces = [];\n            }\n            push(pieces, b);\n            return a.substring(0, aPathStartIndex) + pieces.join('');\n        };\n        Utilities.commonPrefix = function (str1, str2) {\n            var len = Math.min(str1.length, str2.length);\n            for (var i = 0; i < len; i++) {\n                if (str1.charCodeAt(i) !== str2.charCodeAt(i)) {\n                    break;\n                }\n            }\n            return str1.substring(0, i);\n        };\n        Utilities.commonFolderPrefix = function (fromPath, toPath) {\n            var prefix = Utilities.commonPrefix(fromPath, toPath);\n            var slashIndex = prefix.lastIndexOf('/');\n            if (slashIndex === -1) {\n                return '';\n            }\n            return prefix.substring(0, slashIndex + 1);\n        };\n        Utilities.relativePath = function (fromPath, toPath) {\n            if (Utilities.startsWith(toPath, '/') || Utilities.startsWith(toPath, 'http://') || Utilities.startsWith(toPath, 'https://')) {\n                return toPath;\n            }\n            // Ignore common folder prefix\n            var prefix = Utilities.commonFolderPrefix(fromPath, toPath);\n            fromPath = fromPath.substr(prefix.length);\n            toPath = toPath.substr(prefix.length);\n            var upCount = fromPath.split('/').length;\n            var result = '';\n            for (var i = 1; i < upCount; i++) {\n                result += '../';\n            }\n            return result + toPath;\n        };\n        Utilities.rewriteUrls = function (originalFile, newFile, contents) {\n            // Use \")\" as the terminator as quotes are oftentimes not used at all\n            return contents.replace(/url\\(\\s*([^\\)]+)\\s*\\)?/g, function (_) {\n                var matches = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    matches[_i - 1] = arguments[_i];\n                }\n                var url = matches[0];\n                // Eliminate starting quotes (the initial whitespace is not captured)\n                if (url.charAt(0) === '\"' || url.charAt(0) === '\\'') {\n                    url = url.substring(1);\n                }\n                // The ending whitespace is captured\n                while (url.length > 0 && (url.charAt(url.length - 1) === ' ' || url.charAt(url.length - 1) === '\\t')) {\n                    url = url.substring(0, url.length - 1);\n                }\n                // Eliminate ending quotes\n                if (url.charAt(url.length - 1) === '\"' || url.charAt(url.length - 1) === '\\'') {\n                    url = url.substring(0, url.length - 1);\n                }\n                if (!Utilities.startsWith(url, 'data:') && !Utilities.startsWith(url, 'http://') && !Utilities.startsWith(url, 'https://')) {\n                    var absoluteUrl = Utilities.joinPaths(Utilities.pathOf(originalFile), url);\n                    url = Utilities.relativePath(newFile, absoluteUrl);\n                }\n                return 'url(' + url + ')';\n            });\n        };\n        return Utilities;\n    }());\n    CSSLoaderPlugin.Utilities = Utilities;\n    (function () {\n        var cssLoader = null;\n        var isElectron = (typeof process !== 'undefined' && typeof process.versions !== 'undefined' && typeof process.versions['electron'] !== 'undefined');\n        if (typeof process !== 'undefined' && process.versions && !!process.versions.node && !isElectron) {\n            cssLoader = new NodeCSSLoader();\n        }\n        else if (typeof navigator !== 'undefined' && navigator.userAgent.indexOf('MSIE 9') >= 0) {\n            cssLoader = new IE9CSSLoader();\n        }\n        else if (typeof navigator !== 'undefined' && navigator.userAgent.indexOf('MSIE 8') >= 0) {\n            cssLoader = new IE8CSSLoader();\n        }\n        else {\n            cssLoader = new BrowserCSSLoader();\n        }\n        define('vs/css', new CSSPlugin(cssLoader));\n    })();\n})(CSSLoaderPlugin || (CSSLoaderPlugin = {}));\n"]}