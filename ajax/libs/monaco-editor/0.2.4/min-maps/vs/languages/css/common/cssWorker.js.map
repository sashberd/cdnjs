{"version":3,"sources":["vs/languages/css/common/cssWorker.js","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/level.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/parser/cssNodes.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/parser/cssScanner.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/parser/cssSymbols.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/services/languageFacts.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/services/selectorPrinting.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/services/occurrences.ts","vs/languages/css/common/fake","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/parser/cssErrors.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/parser/cssParser.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/services/intelliSense.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/services/lintRules.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/services/lint.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/services/cssLanguageService.ts","vs/languages/css/common/file:/C:/Alex/src/vscode/src/vs/languages/css/common/cssWorker.ts"],"names":["define","require","exports","toLevel","level","Level","Ignore","Warning","Error","__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","Object","create","types","getNodeAtOffset","node","offset","candidate","length","accept","getNodePath","path","unshift","parent","getParentDeclaration","decl","findParent","NodeType","Declaration","getValue","encloses","ReferenceType","Node","len","nodeType","defineProperty","get","Undefined","set","type","enumerable","configurable","getTextProvider","textProvider","getText","matches","str","startsWith","endsWith","visitor","isFunction","visitNode","bind","children","forEach","child","adoptChild","index","idx","indexOf","splice","push","attachTo","collectIssues","results","issues","apply","addIssue","issue","hasIssue","rule","some","i","getRule","isErroneous","setNode","field","addChild","updateOffsetAndLength","hasChildren","getChildren","slice","getChild","addChildren","nodes","_this","findFirstChildBeforeOffset","current","findChildAtOffset","goDeep","getParent","result","Nodelist","setData","key","value","options","getData","_super","call","Identifier","containsInterpolation","Stylesheet","setName","name","Declarations","BodyDeclaration","getDeclarations","declarations","setDeclarations","decls","RuleSet","Ruleset","getSelectors","selectors","isNested","Selector","SimpleSelector","AbstractDeclaration","setProperty","getProperty","property","getFullPropertyName","propertyName","getName","NestedProperties","parentDecl","getNonPrefixedPropertyName","charAt","vendorPrefixEnd","substring","setValue","setNestedProperties","getNestedProperties","nestedProprties","Property","setIdentifier","getIdentifier","identifier","Invocation","getArguments","arguments","Function","FunctionParameter","setDefaultValue","getDefaultValue","defaultValue","FunctionArgument","IfStatement","If","setExpression","setElseClause","elseClause","ForStatement","For","setVariable","EachStatement","Each","WhileStatement","While","ElseStatement","Else","FunctionDeclaration","getParameters","parameters","ViewPort","FontFace","Keyframe","setKeyword","keyword","getKeyword","KeyframeSelector","Import","setMedialist","medialist","Namespace","Media","Document","Medialist","getMediums","mediums","MediaQuery","Page","PageBoxMarginBox","Expression","BinaryExpression","setLeft","left","getLeft","setRight","right","getRight","setOperator","getOperator","operator","Term","getExpression","expression","Operator","HexColorValue","NumericValue","code","raw","unitIdx","_dot","charCodeAt","_0","_9","unit","undefined","VariableDeclaration","variable","getVariable","Interpolation","Variable","VariableName","ExtendsReference","setSelector","getSelector","selector","MixinReference","setContent","getContent","content","MixinDeclaration","setGuard","guard","LessGuard","getConditions","conditions","GuardCondition","Marker","message","getLevel","getOffset","getLength","getNode","getMessage","ParseErrorCollector","entries","TokenType","MultiLineStream","source","position","from","to","eos","pos","goBackTo","goBack","n","advance","nextChar","peekChar","lookbackChar","advanceIfChar","ch","advanceIfChars","advanceWhileChar","condition","posNow","_a","_e","_f","_i","_l","_p","_r","_u","_x","_z","_A","_E","_F","_I","_L","_P","_R","_U","_X","_Z","_TLD","_HAT","_EQS","_PIP","_MIN","_USC","_PRC","_MUL","_LPA","_RPA","_LAN","_RAN","_ATS","_HSH","_DLR","_BSL","_FSL","_NWL","_CAR","_LFD","_DQO","_SQO","_WSP","_TAB","_SEM","_COL","_CUL","_CUR","_BRL","_BRR","_CMA","_DOT","_BNG","_url","_url_prefix","staticTokenTable","SemiColon","Colon","CurlyL","CurlyR","BracketR","BracketL","ParenthesisL","ParenthesisR","Comma","staticUnitTable","EMS","EXS","Length","Angle","Time","Freq","Percentage","Resolution","Scanner","ignoreComment","ignoreWhitespace","setSource","input","stream","finishToken","text","scan","triviaToken","trivia","EOF","CDO","CDC","tokenType","ident","Ident","join","_name","keywordText","Charset","AtKeyword","Delim","Hash","Exclamation","_number","dim","toLowerCase","Dimension","Num","_string","Includes","Dashmatch","SubstringOperator","PrefixOperator","SuffixOperator","_matchWordAnyCase","characters","_whitespace","Whitespace","comment","Comment","success_1","hot_1","npeek","_newline","String","fromCharCode","_escape","includeNewLines","hexNumCount","hexVal","parseInt","e","_stringChar","closeQuote","BadString","URI","stringType","BadUri","matched","_identChar","hasMinus","_minus","hasContent","_identFirstChar","arrays","Scope","symbols","scope","setParent","findScope","findInScope","end","findFirst","s","res","addSymbol","symbol","getSymbol","getSymbols","GlobalScope","Number","MAX_VALUE","Symbol","ScopeBuilder","addScope","newScope","addSymbolToChildScope","scopeNode","visitDeclarationNode","visitVariableDeclarationNode","visitRuleSet","Mixin","forOrEachNode","Rule","Symbols","isCssVariable","addCSSVariable","globalScope","getGlobalScope","global","findSymbolsAtOffset","referenceType","names","internalFindSymbol","referenceTypes","funcId","functionSymbol","evaluateReferenceTypes","extendsRef","findSymbolFromNode","matchesSymbol","nodeSymbol","findSymbol","test","browsers","strings","isColorConstructor","equalsIgnoreCase","isColorValue","candidateColor","colors","isKnownProperty","getProperties","isCommonValue","entry","count","getPageBoxDirectives","getEntryDescription","desc","description","browserLabel","getBrowserLabel","all","curr","browserNames","version","evalBrowserEntry","browserEntry","onCodeComplete","split","trim","propertySet","properties","rawEntry","EntryImpl","getAtDirectives","atDirectiveList","atDirectives","getPseudoElements","pseudoElementList","pseudoElements","pseudoClassesList","getPseudoClasses","pseudoClasses","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rebeccapurple","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","colorKeywords","currentColor","transparent","positionKeywords","bottom","center","top","repeatStyleKeywords","no-repeat","repeat","repeat-x","repeat-y","round","space","lineStyleKeywords","dashed","dotted","double","groove","hidden","inset","none","outset","ridge","solid","lineWidthKeywords","boxKeywords","border-box","content-box","padding-box","geometryBoxKeywords","margin-box","fill-box","stroke-box","view-box","cssWideKeywords","initial","inherit","unset","imageFunctions","url()","image()","-webkit-image-set()","image-set()","-moz-element()","element()","cross-fade()","-webkit-gradient()","-webkit-linear-gradient()","-moz-linear-gradient()","-o-linear-gradient()","linear-gradient()","-webkit-repeating-linear-gradient()","-moz-repeating-linear-gradient()","-o-repeating-linear-gradient()","repeating-linear-gradient()","-webkit-radial-gradient()","-moz-radial-gradient()","radial-gradient()","-webkit-repeating-radial-gradient()","-moz-repeating-radial-gradient()","repeating-radial-gradient()","transitionTimingFunctions","ease","ease-in","ease-in-out","ease-out","linear","step-end","step-start","steps()","cubic-bezier()","cubic-bezier(0.6, -0.28, 0.735, 0.045)","cubic-bezier(0.68, -0.55, 0.265, 1.55)","cubic-bezier(0.175, 0.885, 0.32, 1.275)","cubic-bezier(0.6, 0.04, 0.98, 0.335)","cubic-bezier(0.785, 0.135, 0.15, 0.86)","cubic-bezier(0.075, 0.82, 0.165, 1)","cubic-bezier(0.55, 0.055, 0.675, 0.19)","cubic-bezier(0.645, 0.045, 0.355, 1)","cubic-bezier(0.215, 0.610, 0.355, 1)","cubic-bezier(0.95, 0.05, 0.795, 0.035)","cubic-bezier(1, 0, 0, 1)","cubic-bezier(0.19, 1, 0.22, 1)","cubic-bezier(0.47, 0, 0.745, 0.715)","cubic-bezier(0.445, 0.05, 0.55, 0.95)","cubic-bezier(0.39, 0.575, 0.565, 1)","cubic-bezier(0.55, 0.085, 0.68, 0.53)","cubic-bezier(0.455, 0.03, 0.515, 0.955)","cubic-bezier(0.25, 0.46, 0.45, 0.94)","cubic-bezier(0.895, 0.03, 0.685, 0.22)","cubic-bezier(0.77, 0, 0.175, 1)","cubic-bezier(0.165, 0.84, 0.44, 1)","cubic-bezier(0.755, 0.05, 0.855, 0.06)","cubic-bezier(0.86, 0, 0.07, 1)","cubic-bezier(0.23, 1, 0.320, 1)","basicShapeFunctions","circle()","ellipse()","inset()","polygon()","units","angle","time","frequency","resolution","percentage","html5Tags","svgElements","ValueImpl","data","descriptions","restriction","map","values","Array","isArray","v","css","atdirectives","pseudoelements","pseudoclasses","E","FF","S","C","IE","O","toElement","parentElement","Element","SelectorCombinator","segments","cloneWithParent","root","findRoot","clone","SelectorPlaceholder","ElementNameSelector","ClassSelector","addAttr","IdentifierSelector","PseudoSelector","empty","AttributeSelector","expr","format","quotes","remove","simpleSelectorToHtml","element","body","HtmlPrinter","print","tagName","className","isNewSelectorContext","selectorToElement","RootElement","parentRuleSets","builder","SelectorElementBuilder","processSelector","selectorToHtml","removeChild","attributes","cloneChildren","elem","parentClone","LabelElement","label","quote","doPrint","elements","shift","doPrintElement","isText","keys","attr","ensure","which","prev","c","selectorChild","labelElement","thisElement","SelectorCombinatorParent","SelectorCombinatorSibling","SelectorCombinatorAllSiblings","_symbols","modes_1","findDeclaration","stylesheet","findOccurrences","kind","getKind","Unknown","DocumentHighlightKind","Write","Read","nls","CSSIssueType","id","ParseError","NumberExpected","localize","ConditionExpected","RuleOrSelectorExpected","DotExpected","ColonExpected","SemiColonExpected","TermExpected","ExpressionExpected","OperatorExpected","IdentifierExpected","PercentageExpected","URIOrStringExpected","URIExpected","VariableNameExpected","VariableValueExpected","PropertyValueExpected","LeftCurlyExpected","RightCurlyExpected","LeftSquareBracketExpected","RightSquareBracketExpected","LeftParenthesisExpected","RightParenthesisExpected","CommaExpected","PageDirectiveOrDeclarationExpected","UnknownAtRule","UnknownKeyword","SelectorExpected","StringLiteralExpected","scanner","_level","errors","languageFacts","Parser","scnr","token","prevToken","peek","ignoreCase","peekRegExp","regEx","hasWhitespace","consumeToken","mark","restoreAtMark","acceptOne","resync","resyncTokens","resyncStopTokens","createNode","ctor","finish","error","markError","prevEnd","lastErrorToken","parseStylesheet","model","versionId","getVersionId","range","getRangeFromOffsetAndLength","getValueInRange","internalParse","_parseStylesheet","parseFunc","substr","_parseCharset","inRecovery","hasMatch","statement","_parseStylesheetStatement","_needsSemicolonAfter","_parseRuleset","_parseImport","_parseMedia","_parsePage","_parseFontFace","_parseKeyframe","_parseViewPort","_parseNamespace","_parseDocument","_tryParseRuleset","_parseSelector","_parseBody","_parseRuleSetDeclaration","_parseDeclaration","MixinContent","ReturnStatement","Debug","_parseDeclarations","parseDeclaration","_parseCombinator","_parseSimpleSelector","_parseProperty","colonPosition","_parseExpr","_parsePrio","semicolonPosition","_tryToParseDeclaration","_parseIdent","_parseMediaList","atNode","_parseKeyframeSelector","_parseMediaDeclaration","_parseMediaQuery","resyncStopToken","parseExpression","_parseMediaFeatureName","_parseMedium","_parsePageDeclaration","_parsePageMarginBox","_parsePageSelector","_parseOperator","_parseUnaryOperator","_parseElementName","_parseSimpleSelectorBody","_parsePseudo","_parseHash","_parseClass","_parseAttrib","_parseSelectorIdent","_parseBinaryExpr","Prio","stopOnComma","preparsedLeft","preparsedOper","_parseTerm","_parseFunction","_parseURILiteral","_parseStringLiteral","_parseNumeric","_parseHexColor","_parseOperation","StringLiteral","URILiteral","_parseFunctionIdentifier","_parseFunctionArgument","cssSymbols","isDefined","obj","CSSIntellisense","variablePrefix","getSymbolContext","symbolContext","styleSheet","getCompletionsAtPosition","languageService","resource","getOffsetFromPosition","currentWord","getWordUntilPosition","word","getStylesheet","nodepath","isIncomplete","getCompletionsForDeclarationProperty","getCompletionsForExpression","parentRuleSet","getCompletionsForSelector","getCompletionsForDeclarations","getCompletionsForVariableDeclaration","getCompletionsForRuleSet","getCompletionsForInterpolation","getCompletionsForFunctionArgument","getCompletionsForFunctionDeclaration","suggestions","incomplete","getCompletionsForStylesheet","getVariableProposals","getAllUniqueWords","codeSnippet","getPropertyProposals","documentationLabel","getCompletionsForDeclarationValue","getColorProposals","getPositionProposals","getRepeatStyleProposals","getLineProposals","getBoxProposals","getImageProposals","getTimingFunctionProposals","getBasicShapeProposals","getValueEnumProposals","getCSSWideKeywordProposals","getUnitProposals","existingValues","Set","ValuesCollector","getEntries","existingValue","getTermProposals","keywords","getVariableProposalsForCSSVarFunction","filter","numMatch","match","restrictions","color","colorValues","ColorValueCollector","colorFunctions","func","typeLabel","replace","lineStyle","lineWidth","geometryBox","box","image","timing","shape","getCompletionForTopLevel","ruleSet","isAfter","isInSelectors","visited","declaration","arg","allFunctions","functionDecl","params","add","InternalValueCollector","matchesProperty","getConfigurationProperties","keyPrefix","default","ruleName","Rules","getConfiguration","sanitize","conf","settings","enum","AllVendorPrefixes","IncludeStandardPropertyWhenUsingVendorPrefix","DuplicateDeclarations","EmptyRuleSet","ImportStatemement","NoWidthOrHeightWhenPaddingOrBorder","UniversalSelector","ZeroWithUnit","RequiredPropertiesForFontFace","HexColorLength","ArgsInColorFunction","UnknownProperty","IEStarHack","UnknownVendorSpecificProperty","PropertyIgnoredDueToDisplay","AvoidImportant","AvoidFloat","AvoidIdSelector","lintRules","NodesByRootMap","LintVisitor","warnings","configuration","ruleKey","fetch","fetchWithValue","findValueInExpression","found","fetchWithin","addEntry","details","getMissingNames","expected","actual","k","visitStylesheet","visitFontFace","visitSimpleSelector","visitFunction","visitNumericValue","visitImport","visitUnknownNode","keyframes","addVendorSpecificWarnings","needsStandard","missingVendorSpecific","self","propertyTable","displayElems","prop","propertiesBySuffix","containsUnknowns","isCSSDeclaration","firstChar","nonPrefixedName","suffix","prefixes","prefix","parseFloat","definesSrc","definesFontFamily","toLocaleLowerCase","fnName","expectedAttrCount","actualAttrCount","winjs","resourceService","lifecycle_1","PromiseWithTrigger","_valueCallback","_errorCallback","resolve","reject","err","TPromise","CSSLanguageService","service","createParser","_cssModeId","callOnDispose","updateResources","addListener2_","ResourceEvents","ADDED","onResourceAdded","REMOVED","onResourceRemoved","CHANGED","onResourceChange","dispose","clearTimeout","onChangeHandle","_isMyMirrorModel","addedElement","_scheduleRefreshLanguageService","url","toString","_isMyModel","activeDelay","setTimeout","as","getMode","getId","uri","hasEntry","__decorate","decorators","target","r","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","severity_1","occurrences","cssIntellisense","modes","parser","selectorPrinting","lint","markers_1","range_1","resourceService_1","suggestSupport_1","validationHelper_1","CSSWorker","modeId","markerService","_modeId","_validationHelper","ValidationHelper","toValidate","doValidate","createLanguageService","lintSettings","validationEnabled","navigateValueSet","up","then","lineNumber","startLineNumber","column","startColumn","isColor","concat","getOwnPropertyNames","nextIdx","_range","_doConfigure","validate","triggerDueToConfigurationChange","enableValidator","enable","resources","doValidate1","modelMirror","collectLintEntries","markerData","_createMarkerData","changeOne","marker","severity","endLineNumber","endColumn","createIntellisense","provideCompletionItems","doSuggest","filterSuggestions","provideDocumentSymbols","SymbolKind","Class","location","Method","provideHover","htmlContent","provideDefinition","provideDocumentHighlights","occurrence","provideReferences","findColorDeclarations","getPositionFromOffset","getFixesForUnknownProperty","score","difference","command","title","Range","lift","newText","sort","a","appendFixesForMarker","bucket","provideCodeActions","read","containsRange","IResourceService","IMarkerService"],"mappings":"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","file":"vs/languages/css/common/cssWorker.js","sourcesContent":["/*!-----------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.2.3(84e204b238a1eff25d4c6f611fdcd76a494005a7)\n * Released under the MIT license\n * https://github.com/Microsoft/vscode/blob/master/LICENSE.txt\n *-----------------------------------------------------------*/\n\ndefine(\"vs/languages/css/common/level\", [\"require\", \"exports\"], function (require, exports) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    (function (Level) {\r\n        Level[Level[\"Ignore\"] = 1] = \"Ignore\";\r\n        Level[Level[\"Warning\"] = 2] = \"Warning\";\r\n        Level[Level[\"Error\"] = 4] = \"Error\";\r\n    })(exports.Level || (exports.Level = {}));\r\n    var Level = exports.Level;\r\n    function toLevel(level) {\r\n        switch (level) {\r\n            case 'ignore': return Level.Ignore;\r\n            case 'warning': return Level.Warning;\r\n            case 'error': return Level.Error;\r\n        }\r\n        return null;\r\n    }\r\n    exports.toLevel = toLevel;\r\n});\r\n\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\ndefine(\"vs/languages/css/common/parser/cssNodes\", [\"require\", \"exports\", 'vs/base/common/types'], function (require, exports, types) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    /// <summary>\r\n    /// Nodes for the css 2.1 specification. See for reference:\r\n    /// http://www.w3.org/TR/CSS21/grammar.html#grammar\r\n    /// </summary>\r\n    (function (NodeType) {\r\n        NodeType[NodeType[\"Undefined\"] = 0] = \"Undefined\";\r\n        NodeType[NodeType[\"Identifier\"] = 1] = \"Identifier\";\r\n        NodeType[NodeType[\"Stylesheet\"] = 2] = \"Stylesheet\";\r\n        NodeType[NodeType[\"Ruleset\"] = 3] = \"Ruleset\";\r\n        NodeType[NodeType[\"Selector\"] = 4] = \"Selector\";\r\n        NodeType[NodeType[\"SimpleSelector\"] = 5] = \"SimpleSelector\";\r\n        NodeType[NodeType[\"SelectorInterpolation\"] = 6] = \"SelectorInterpolation\";\r\n        NodeType[NodeType[\"SelectorCombinator\"] = 7] = \"SelectorCombinator\";\r\n        NodeType[NodeType[\"SelectorCombinatorParent\"] = 8] = \"SelectorCombinatorParent\";\r\n        NodeType[NodeType[\"SelectorCombinatorSibling\"] = 9] = \"SelectorCombinatorSibling\";\r\n        NodeType[NodeType[\"SelectorCombinatorAllSiblings\"] = 10] = \"SelectorCombinatorAllSiblings\";\r\n        NodeType[NodeType[\"Page\"] = 11] = \"Page\";\r\n        NodeType[NodeType[\"PageBoxMarginBox\"] = 12] = \"PageBoxMarginBox\";\r\n        NodeType[NodeType[\"ClassSelector\"] = 13] = \"ClassSelector\";\r\n        NodeType[NodeType[\"IdentifierSelector\"] = 14] = \"IdentifierSelector\";\r\n        NodeType[NodeType[\"ElementNameSelector\"] = 15] = \"ElementNameSelector\";\r\n        NodeType[NodeType[\"PseudoSelector\"] = 16] = \"PseudoSelector\";\r\n        NodeType[NodeType[\"AttributeSelector\"] = 17] = \"AttributeSelector\";\r\n        NodeType[NodeType[\"Declaration\"] = 18] = \"Declaration\";\r\n        NodeType[NodeType[\"Declarations\"] = 19] = \"Declarations\";\r\n        NodeType[NodeType[\"Property\"] = 20] = \"Property\";\r\n        NodeType[NodeType[\"Expression\"] = 21] = \"Expression\";\r\n        NodeType[NodeType[\"BinaryExpression\"] = 22] = \"BinaryExpression\";\r\n        NodeType[NodeType[\"Term\"] = 23] = \"Term\";\r\n        NodeType[NodeType[\"Operator\"] = 24] = \"Operator\";\r\n        NodeType[NodeType[\"Value\"] = 25] = \"Value\";\r\n        NodeType[NodeType[\"StringLiteral\"] = 26] = \"StringLiteral\";\r\n        NodeType[NodeType[\"URILiteral\"] = 27] = \"URILiteral\";\r\n        NodeType[NodeType[\"EscapedValue\"] = 28] = \"EscapedValue\";\r\n        NodeType[NodeType[\"Function\"] = 29] = \"Function\";\r\n        NodeType[NodeType[\"NumericValue\"] = 30] = \"NumericValue\";\r\n        NodeType[NodeType[\"HexColorValue\"] = 31] = \"HexColorValue\";\r\n        NodeType[NodeType[\"MixinDeclaration\"] = 32] = \"MixinDeclaration\";\r\n        NodeType[NodeType[\"MixinReference\"] = 33] = \"MixinReference\";\r\n        NodeType[NodeType[\"VariableName\"] = 34] = \"VariableName\";\r\n        NodeType[NodeType[\"VariableDeclaration\"] = 35] = \"VariableDeclaration\";\r\n        NodeType[NodeType[\"Prio\"] = 36] = \"Prio\";\r\n        NodeType[NodeType[\"Interpolation\"] = 37] = \"Interpolation\";\r\n        NodeType[NodeType[\"NestedProperties\"] = 38] = \"NestedProperties\";\r\n        NodeType[NodeType[\"ExtendsReference\"] = 39] = \"ExtendsReference\";\r\n        NodeType[NodeType[\"SelectorPlaceholder\"] = 40] = \"SelectorPlaceholder\";\r\n        NodeType[NodeType[\"Debug\"] = 41] = \"Debug\";\r\n        NodeType[NodeType[\"If\"] = 42] = \"If\";\r\n        NodeType[NodeType[\"Else\"] = 43] = \"Else\";\r\n        NodeType[NodeType[\"For\"] = 44] = \"For\";\r\n        NodeType[NodeType[\"Each\"] = 45] = \"Each\";\r\n        NodeType[NodeType[\"While\"] = 46] = \"While\";\r\n        NodeType[NodeType[\"MixinContent\"] = 47] = \"MixinContent\";\r\n        NodeType[NodeType[\"Media\"] = 48] = \"Media\";\r\n        NodeType[NodeType[\"Keyframe\"] = 49] = \"Keyframe\";\r\n        NodeType[NodeType[\"FontFace\"] = 50] = \"FontFace\";\r\n        NodeType[NodeType[\"Import\"] = 51] = \"Import\";\r\n        NodeType[NodeType[\"Namespace\"] = 52] = \"Namespace\";\r\n        NodeType[NodeType[\"Invocation\"] = 53] = \"Invocation\";\r\n        NodeType[NodeType[\"FunctionDeclaration\"] = 54] = \"FunctionDeclaration\";\r\n        NodeType[NodeType[\"ReturnStatement\"] = 55] = \"ReturnStatement\";\r\n        NodeType[NodeType[\"MediaQuery\"] = 56] = \"MediaQuery\";\r\n        NodeType[NodeType[\"FunctionParameter\"] = 57] = \"FunctionParameter\";\r\n        NodeType[NodeType[\"FunctionArgument\"] = 58] = \"FunctionArgument\";\r\n        NodeType[NodeType[\"KeyframeSelector\"] = 59] = \"KeyframeSelector\";\r\n        NodeType[NodeType[\"ViewPort\"] = 60] = \"ViewPort\";\r\n        NodeType[NodeType[\"Document\"] = 61] = \"Document\";\r\n    })(exports.NodeType || (exports.NodeType = {}));\r\n    var NodeType = exports.NodeType;\r\n    (function (ReferenceType) {\r\n        ReferenceType[ReferenceType[\"Mixin\"] = 0] = \"Mixin\";\r\n        ReferenceType[ReferenceType[\"Rule\"] = 1] = \"Rule\";\r\n        ReferenceType[ReferenceType[\"Variable\"] = 2] = \"Variable\";\r\n        ReferenceType[ReferenceType[\"Function\"] = 3] = \"Function\";\r\n        ReferenceType[ReferenceType[\"Keyframe\"] = 4] = \"Keyframe\";\r\n        ReferenceType[ReferenceType[\"Unknown\"] = 5] = \"Unknown\";\r\n    })(exports.ReferenceType || (exports.ReferenceType = {}));\r\n    var ReferenceType = exports.ReferenceType;\r\n    function getNodeAtOffset(node, offset) {\r\n        var candidate = null;\r\n        if (!node || offset < node.offset || offset > node.offset + node.length) {\r\n            return null;\r\n        }\r\n        // Find the shortest node at the position\r\n        node.accept(function (node) {\r\n            if (node.offset === -1 && node.length === -1) {\r\n                return true;\r\n            }\r\n            if (node.offset <= offset && node.offset + node.length >= offset) {\r\n                if (!candidate) {\r\n                    candidate = node;\r\n                }\r\n                else if (node.length <= candidate.length) {\r\n                    candidate = node;\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return candidate;\r\n    }\r\n    exports.getNodeAtOffset = getNodeAtOffset;\r\n    function getNodePath(node, offset) {\r\n        var candidate = getNodeAtOffset(node, offset), path = [];\r\n        while (candidate) {\r\n            path.unshift(candidate);\r\n            candidate = candidate.parent;\r\n        }\r\n        return path;\r\n    }\r\n    exports.getNodePath = getNodePath;\r\n    function getParentDeclaration(node) {\r\n        var decl = node.findParent(NodeType.Declaration);\r\n        if (decl && decl.getValue() && decl.getValue().encloses(node)) {\r\n            return decl;\r\n        }\r\n        return null;\r\n    }\r\n    exports.getParentDeclaration = getParentDeclaration;\r\n    var Node = (function () {\r\n        function Node(offset, len, nodeType) {\r\n            if (offset === void 0) { offset = -1; }\r\n            if (len === void 0) { len = -1; }\r\n            this.parent = null;\r\n            this.offset = offset;\r\n            this.length = len;\r\n            if (nodeType) {\r\n                this.nodeType = nodeType;\r\n            }\r\n        }\r\n        Object.defineProperty(Node.prototype, \"type\", {\r\n            get: function () {\r\n                return this.nodeType || NodeType.Undefined;\r\n            },\r\n            set: function (type) {\r\n                this.nodeType = type;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Node.prototype.getTextProvider = function () {\r\n            var node = this;\r\n            while (node && !node.textProvider) {\r\n                node = node.parent;\r\n            }\r\n            if (node) {\r\n                return node.textProvider;\r\n            }\r\n            return function () { return 'unknown'; };\r\n        };\r\n        Node.prototype.getText = function () {\r\n            return this.getTextProvider()(this.offset, this.length);\r\n        };\r\n        Node.prototype.matches = function (str) {\r\n            return this.length === str.length && this.getTextProvider()(this.offset, this.length) === str;\r\n        };\r\n        Node.prototype.startsWith = function (str) {\r\n            return this.length >= str.length && this.getTextProvider()(this.offset, str.length) === str;\r\n        };\r\n        Node.prototype.endsWith = function (str) {\r\n            return this.length >= str.length && this.getTextProvider()(this.offset + this.length - str.length, str.length) === str;\r\n        };\r\n        Node.prototype.accept = function (visitor) {\r\n            if (!types.isFunction(visitor)) {\r\n                visitor = visitor.visitNode.bind(visitor);\r\n            }\r\n            if (visitor(this) && this.children) {\r\n                this.children.forEach(function (child) {\r\n                    child.accept(visitor);\r\n                });\r\n            }\r\n        };\r\n        Node.prototype.adoptChild = function (node, index) {\r\n            if (index === void 0) { index = -1; }\r\n            if (node.parent && node.parent.children) {\r\n                var idx = node.parent.children.indexOf(node);\r\n                if (idx >= 0) {\r\n                    node.parent.children.splice(idx, 1);\r\n                }\r\n            }\r\n            node.parent = this;\r\n            var children = this.children;\r\n            if (!children) {\r\n                children = this.children = [];\r\n            }\r\n            if (index !== -1) {\r\n                children.splice(idx, 0, node);\r\n            }\r\n            else {\r\n                children.push(node);\r\n            }\r\n            return node;\r\n        };\r\n        Node.prototype.attachTo = function (parent, index) {\r\n            if (index === void 0) { index = -1; }\r\n            if (parent) {\r\n                parent.adoptChild(this, index);\r\n            }\r\n            return this;\r\n        };\r\n        Node.prototype.collectIssues = function (results) {\r\n            if (this.issues) {\r\n                results.push.apply(results, this.issues);\r\n            }\r\n        };\r\n        Node.prototype.addIssue = function (issue) {\r\n            if (!this.issues) {\r\n                this.issues = [];\r\n            }\r\n            this.issues.push(issue);\r\n        };\r\n        Node.prototype.hasIssue = function (rule) {\r\n            return this.issues && this.issues.some(function (i) { return i.getRule() === rule; });\r\n        };\r\n        Node.prototype.isErroneous = function () {\r\n            return this.issues && this.issues.length > 0;\r\n        };\r\n        Node.prototype.setNode = function (field, node, index) {\r\n            if (index === void 0) { index = -1; }\r\n            if (node) {\r\n                node.attachTo(this, index);\r\n                this[field] = node;\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        Node.prototype.addChild = function (node) {\r\n            if (node) {\r\n                if (!this.children) {\r\n                    this.children = [];\r\n                }\r\n                node.attachTo(this);\r\n                this.updateOffsetAndLength(node);\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        Node.prototype.updateOffsetAndLength = function (node) {\r\n            if (node.offset < this.offset || this.offset === -1) {\r\n                this.offset = node.offset;\r\n            }\r\n            if ((node.offset + node.length > this.offset + this.length) || this.length === -1) {\r\n                this.length = node.offset + node.length - this.offset;\r\n            }\r\n        };\r\n        Node.prototype.hasChildren = function () {\r\n            return this.children && this.children.length > 0;\r\n        };\r\n        Node.prototype.getChildren = function () {\r\n            return this.children ? this.children.slice(0) : [];\r\n        };\r\n        Node.prototype.getChild = function (index) {\r\n            if (this.children && index < this.children.length) {\r\n                return this.children[index];\r\n            }\r\n            return null;\r\n        };\r\n        Node.prototype.addChildren = function (nodes) {\r\n            var _this = this;\r\n            nodes.forEach(function (node) { return _this.addChild(node); });\r\n        };\r\n        Node.prototype.findFirstChildBeforeOffset = function (offset) {\r\n            if (this.children) {\r\n                var current = null;\r\n                for (var i = this.children.length - 1; i >= 0; i--) {\r\n                    // iterate until we find a child that has a start offset smaller than the input offset\r\n                    current = this.children[i];\r\n                    if (current.offset <= offset) {\r\n                        return current;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        Node.prototype.findChildAtOffset = function (offset, goDeep) {\r\n            var current = this.findFirstChildBeforeOffset(offset);\r\n            if (current && current.offset + current.length >= offset) {\r\n                if (goDeep) {\r\n                    return current.findChildAtOffset(offset, true) || current;\r\n                }\r\n                return current;\r\n            }\r\n            return null;\r\n        };\r\n        Node.prototype.encloses = function (candidate) {\r\n            return this.offset <= candidate.offset && this.offset + this.length >= candidate.offset + candidate.length;\r\n        };\r\n        Node.prototype.getParent = function () {\r\n            var result = this.parent;\r\n            while (result instanceof Nodelist) {\r\n                result = result.parent;\r\n            }\r\n            return result;\r\n        };\r\n        Node.prototype.findParent = function (type) {\r\n            var result = this;\r\n            while (result && result.type !== type) {\r\n                result = result.parent;\r\n            }\r\n            return result;\r\n        };\r\n        Node.prototype.setData = function (key, value) {\r\n            if (!this.options) {\r\n                this.options = {};\r\n            }\r\n            this.options[key] = value;\r\n        };\r\n        Node.prototype.getData = function (key) {\r\n            if (!this.options || !this.options.hasOwnProperty(key)) {\r\n                return null;\r\n            }\r\n            return this.options[key];\r\n        };\r\n        return Node;\r\n    }());\r\n    exports.Node = Node;\r\n    var Nodelist = (function (_super) {\r\n        __extends(Nodelist, _super);\r\n        function Nodelist(parent, index) {\r\n            if (index === void 0) { index = -1; }\r\n            _super.call(this, -1, -1);\r\n            this.attachTo(parent, index);\r\n            this.offset = -1;\r\n            this.length = -1;\r\n        }\r\n        return Nodelist;\r\n    }(Node));\r\n    exports.Nodelist = Nodelist;\r\n    var Identifier = (function (_super) {\r\n        __extends(Identifier, _super);\r\n        function Identifier(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Identifier.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Identifier;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Identifier.prototype.containsInterpolation = function () {\r\n            return this.hasChildren();\r\n        };\r\n        return Identifier;\r\n    }(Node));\r\n    exports.Identifier = Identifier;\r\n    var Stylesheet = (function (_super) {\r\n        __extends(Stylesheet, _super);\r\n        function Stylesheet(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Stylesheet.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Stylesheet;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Stylesheet.prototype.setName = function (value) {\r\n            this.name = value;\r\n        };\r\n        return Stylesheet;\r\n    }(Node));\r\n    exports.Stylesheet = Stylesheet;\r\n    var Declarations = (function (_super) {\r\n        __extends(Declarations, _super);\r\n        function Declarations(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Declarations.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Declarations;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Declarations;\r\n    }(Node));\r\n    exports.Declarations = Declarations;\r\n    var BodyDeclaration = (function (_super) {\r\n        __extends(BodyDeclaration, _super);\r\n        function BodyDeclaration(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        BodyDeclaration.prototype.getDeclarations = function () {\r\n            return this.declarations;\r\n        };\r\n        BodyDeclaration.prototype.setDeclarations = function (decls) {\r\n            return this.setNode('declarations', decls);\r\n        };\r\n        return BodyDeclaration;\r\n    }(Node));\r\n    exports.BodyDeclaration = BodyDeclaration;\r\n    var RuleSet = (function (_super) {\r\n        __extends(RuleSet, _super);\r\n        function RuleSet(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(RuleSet.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Ruleset;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        RuleSet.prototype.getSelectors = function () {\r\n            if (!this.selectors) {\r\n                this.selectors = new Nodelist(this);\r\n            }\r\n            return this.selectors;\r\n        };\r\n        RuleSet.prototype.isNested = function () {\r\n            return this.parent && this.parent.findParent(NodeType.Ruleset) !== null;\r\n        };\r\n        return RuleSet;\r\n    }(BodyDeclaration));\r\n    exports.RuleSet = RuleSet;\r\n    var Selector = (function (_super) {\r\n        __extends(Selector, _super);\r\n        function Selector(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Selector.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Selector;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Selector;\r\n    }(Node));\r\n    exports.Selector = Selector;\r\n    var SimpleSelector = (function (_super) {\r\n        __extends(SimpleSelector, _super);\r\n        function SimpleSelector(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(SimpleSelector.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.SimpleSelector;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return SimpleSelector;\r\n    }(Node));\r\n    exports.SimpleSelector = SimpleSelector;\r\n    var AbstractDeclaration = (function (_super) {\r\n        __extends(AbstractDeclaration, _super);\r\n        function AbstractDeclaration(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        return AbstractDeclaration;\r\n    }(Node));\r\n    exports.AbstractDeclaration = AbstractDeclaration;\r\n    var Declaration = (function (_super) {\r\n        __extends(Declaration, _super);\r\n        function Declaration(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Declaration.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Declaration;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Declaration.prototype.setProperty = function (node) {\r\n            return this.setNode('property', node);\r\n        };\r\n        Declaration.prototype.getProperty = function () {\r\n            return this.property;\r\n        };\r\n        Declaration.prototype.getFullPropertyName = function () {\r\n            var propertyName = this.property ? this.property.getName() : 'unknown';\r\n            if (this.parent instanceof Declarations && this.parent.getParent() instanceof NestedProperties) {\r\n                var parentDecl = this.parent.getParent().getParent();\r\n                if (parentDecl instanceof Declaration) {\r\n                    return parentDecl.getFullPropertyName() + propertyName;\r\n                }\r\n            }\r\n            return propertyName;\r\n        };\r\n        Declaration.prototype.getNonPrefixedPropertyName = function () {\r\n            var propertyName = this.getFullPropertyName();\r\n            if (propertyName && propertyName.charAt(0) === '-') {\r\n                var vendorPrefixEnd = propertyName.indexOf('-', 1);\r\n                if (vendorPrefixEnd !== -1) {\r\n                    return propertyName.substring(vendorPrefixEnd + 1);\r\n                }\r\n            }\r\n            return propertyName;\r\n        };\r\n        Declaration.prototype.setValue = function (value) {\r\n            return this.setNode('value', value);\r\n        };\r\n        Declaration.prototype.getValue = function () {\r\n            return this.value;\r\n        };\r\n        Declaration.prototype.setNestedProperties = function (value) {\r\n            return this.setNode('nestedProprties', value);\r\n        };\r\n        Declaration.prototype.getNestedProperties = function () {\r\n            return this.nestedProprties;\r\n        };\r\n        return Declaration;\r\n    }(AbstractDeclaration));\r\n    exports.Declaration = Declaration;\r\n    var Property = (function (_super) {\r\n        __extends(Property, _super);\r\n        function Property(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Property.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Property;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Property.prototype.setIdentifier = function (value) {\r\n            return this.setNode('identifier', value);\r\n        };\r\n        Property.prototype.getIdentifier = function () {\r\n            return this.identifier;\r\n        };\r\n        Property.prototype.getName = function () {\r\n            return this.getText();\r\n        };\r\n        return Property;\r\n    }(Node));\r\n    exports.Property = Property;\r\n    var Invocation = (function (_super) {\r\n        __extends(Invocation, _super);\r\n        function Invocation(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Invocation.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Invocation;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Invocation.prototype.getArguments = function () {\r\n            if (!this.arguments) {\r\n                this.arguments = new Nodelist(this);\r\n            }\r\n            return this.arguments;\r\n        };\r\n        return Invocation;\r\n    }(Node));\r\n    exports.Invocation = Invocation;\r\n    var Function = (function (_super) {\r\n        __extends(Function, _super);\r\n        function Function(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Function.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Function;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Function.prototype.setIdentifier = function (node) {\r\n            return this.setNode('identifier', node, 0);\r\n        };\r\n        Function.prototype.getIdentifier = function () {\r\n            return this.identifier;\r\n        };\r\n        Function.prototype.getName = function () {\r\n            return this.identifier ? this.identifier.getText() : '';\r\n        };\r\n        return Function;\r\n    }(Invocation));\r\n    exports.Function = Function;\r\n    var FunctionParameter = (function (_super) {\r\n        __extends(FunctionParameter, _super);\r\n        function FunctionParameter(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(FunctionParameter.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.FunctionParameter;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        FunctionParameter.prototype.setIdentifier = function (node) {\r\n            return this.setNode('identifier', node, 0);\r\n        };\r\n        FunctionParameter.prototype.getIdentifier = function () {\r\n            return this.identifier;\r\n        };\r\n        FunctionParameter.prototype.getName = function () {\r\n            return this.identifier ? this.identifier.getText() : '';\r\n        };\r\n        FunctionParameter.prototype.setDefaultValue = function (node) {\r\n            return this.setNode('defaultValue', node, 0);\r\n        };\r\n        FunctionParameter.prototype.getDefaultValue = function () {\r\n            return this.defaultValue;\r\n        };\r\n        return FunctionParameter;\r\n    }(Node));\r\n    exports.FunctionParameter = FunctionParameter;\r\n    var FunctionArgument = (function (_super) {\r\n        __extends(FunctionArgument, _super);\r\n        function FunctionArgument(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(FunctionArgument.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.FunctionArgument;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        FunctionArgument.prototype.setIdentifier = function (node) {\r\n            return this.setNode('identifier', node, 0);\r\n        };\r\n        FunctionArgument.prototype.getIdentifier = function () {\r\n            return this.identifier;\r\n        };\r\n        FunctionArgument.prototype.getName = function () {\r\n            return this.identifier ? this.identifier.getText() : '';\r\n        };\r\n        FunctionArgument.prototype.setValue = function (node) {\r\n            return this.setNode('value', node, 0);\r\n        };\r\n        FunctionArgument.prototype.getValue = function () {\r\n            return this.value;\r\n        };\r\n        return FunctionArgument;\r\n    }(Node));\r\n    exports.FunctionArgument = FunctionArgument;\r\n    var IfStatement = (function (_super) {\r\n        __extends(IfStatement, _super);\r\n        function IfStatement(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(IfStatement.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.If;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        IfStatement.prototype.setExpression = function (node) {\r\n            return this.setNode('expression', node, 0);\r\n        };\r\n        IfStatement.prototype.setElseClause = function (elseClause) {\r\n            return this.setNode('elseClause', elseClause);\r\n        };\r\n        return IfStatement;\r\n    }(BodyDeclaration));\r\n    exports.IfStatement = IfStatement;\r\n    var ForStatement = (function (_super) {\r\n        __extends(ForStatement, _super);\r\n        function ForStatement(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(ForStatement.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.For;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ForStatement.prototype.setVariable = function (node) {\r\n            return this.setNode('variable', node, 0);\r\n        };\r\n        return ForStatement;\r\n    }(BodyDeclaration));\r\n    exports.ForStatement = ForStatement;\r\n    var EachStatement = (function (_super) {\r\n        __extends(EachStatement, _super);\r\n        function EachStatement(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(EachStatement.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Each;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        EachStatement.prototype.setVariable = function (node) {\r\n            return this.setNode('variable', node, 0);\r\n        };\r\n        return EachStatement;\r\n    }(BodyDeclaration));\r\n    exports.EachStatement = EachStatement;\r\n    var WhileStatement = (function (_super) {\r\n        __extends(WhileStatement, _super);\r\n        function WhileStatement(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(WhileStatement.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.While;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return WhileStatement;\r\n    }(BodyDeclaration));\r\n    exports.WhileStatement = WhileStatement;\r\n    var ElseStatement = (function (_super) {\r\n        __extends(ElseStatement, _super);\r\n        function ElseStatement(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(ElseStatement.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Else;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return ElseStatement;\r\n    }(BodyDeclaration));\r\n    exports.ElseStatement = ElseStatement;\r\n    var FunctionDeclaration = (function (_super) {\r\n        __extends(FunctionDeclaration, _super);\r\n        function FunctionDeclaration(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(FunctionDeclaration.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.FunctionDeclaration;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        FunctionDeclaration.prototype.setIdentifier = function (node) {\r\n            return this.setNode('identifier', node, 0);\r\n        };\r\n        FunctionDeclaration.prototype.getIdentifier = function () {\r\n            return this.identifier;\r\n        };\r\n        FunctionDeclaration.prototype.getName = function () {\r\n            return this.identifier ? this.identifier.getText() : '';\r\n        };\r\n        FunctionDeclaration.prototype.getParameters = function () {\r\n            if (!this.parameters) {\r\n                this.parameters = new Nodelist(this);\r\n            }\r\n            return this.parameters;\r\n        };\r\n        return FunctionDeclaration;\r\n    }(BodyDeclaration));\r\n    exports.FunctionDeclaration = FunctionDeclaration;\r\n    var ViewPort = (function (_super) {\r\n        __extends(ViewPort, _super);\r\n        function ViewPort(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(ViewPort.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.ViewPort;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return ViewPort;\r\n    }(BodyDeclaration));\r\n    exports.ViewPort = ViewPort;\r\n    var FontFace = (function (_super) {\r\n        __extends(FontFace, _super);\r\n        function FontFace(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(FontFace.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.FontFace;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return FontFace;\r\n    }(BodyDeclaration));\r\n    exports.FontFace = FontFace;\r\n    var NestedProperties = (function (_super) {\r\n        __extends(NestedProperties, _super);\r\n        function NestedProperties(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(NestedProperties.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.NestedProperties;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return NestedProperties;\r\n    }(BodyDeclaration));\r\n    exports.NestedProperties = NestedProperties;\r\n    var Keyframe = (function (_super) {\r\n        __extends(Keyframe, _super);\r\n        function Keyframe(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Keyframe.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Keyframe;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Keyframe.prototype.setKeyword = function (keyword) {\r\n            return this.setNode('keyword', keyword, 0);\r\n        };\r\n        Keyframe.prototype.getKeyword = function () {\r\n            return this.keyword;\r\n        };\r\n        Keyframe.prototype.setIdentifier = function (node) {\r\n            return this.setNode('identifier', node, 0);\r\n        };\r\n        Keyframe.prototype.getIdentifier = function () {\r\n            return this.identifier;\r\n        };\r\n        Keyframe.prototype.getName = function () {\r\n            return this.identifier ? this.identifier.getText() : '';\r\n        };\r\n        return Keyframe;\r\n    }(BodyDeclaration));\r\n    exports.Keyframe = Keyframe;\r\n    var KeyframeSelector = (function (_super) {\r\n        __extends(KeyframeSelector, _super);\r\n        function KeyframeSelector(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(KeyframeSelector.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.KeyframeSelector;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return KeyframeSelector;\r\n    }(BodyDeclaration));\r\n    exports.KeyframeSelector = KeyframeSelector;\r\n    var Import = (function (_super) {\r\n        __extends(Import, _super);\r\n        function Import(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Import.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Import;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Import.prototype.setMedialist = function (node) {\r\n            if (node) {\r\n                node.attachTo(this);\r\n                this.medialist = node;\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        return Import;\r\n    }(Node));\r\n    exports.Import = Import;\r\n    var Namespace = (function (_super) {\r\n        __extends(Namespace, _super);\r\n        function Namespace(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Namespace.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Namespace;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Namespace;\r\n    }(Node));\r\n    exports.Namespace = Namespace;\r\n    var Media = (function (_super) {\r\n        __extends(Media, _super);\r\n        function Media(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Media.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Media;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Media;\r\n    }(BodyDeclaration));\r\n    exports.Media = Media;\r\n    var Document = (function (_super) {\r\n        __extends(Document, _super);\r\n        function Document(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Document.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Document;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Document;\r\n    }(BodyDeclaration));\r\n    exports.Document = Document;\r\n    var Medialist = (function (_super) {\r\n        __extends(Medialist, _super);\r\n        function Medialist(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Medialist.prototype.getMediums = function () {\r\n            if (!this.mediums) {\r\n                this.mediums = new Nodelist(this);\r\n            }\r\n            return this.mediums;\r\n        };\r\n        return Medialist;\r\n    }(Node));\r\n    exports.Medialist = Medialist;\r\n    var MediaQuery = (function (_super) {\r\n        __extends(MediaQuery, _super);\r\n        function MediaQuery(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(MediaQuery.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.MediaQuery;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return MediaQuery;\r\n    }(Node));\r\n    exports.MediaQuery = MediaQuery;\r\n    var Page = (function (_super) {\r\n        __extends(Page, _super);\r\n        function Page(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Page.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Page;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Page;\r\n    }(BodyDeclaration));\r\n    exports.Page = Page;\r\n    var PageBoxMarginBox = (function (_super) {\r\n        __extends(PageBoxMarginBox, _super);\r\n        function PageBoxMarginBox(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(PageBoxMarginBox.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.PageBoxMarginBox;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return PageBoxMarginBox;\r\n    }(BodyDeclaration));\r\n    exports.PageBoxMarginBox = PageBoxMarginBox;\r\n    var Expression = (function (_super) {\r\n        __extends(Expression, _super);\r\n        function Expression(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Expression.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Expression;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Expression;\r\n    }(Node));\r\n    exports.Expression = Expression;\r\n    var BinaryExpression = (function (_super) {\r\n        __extends(BinaryExpression, _super);\r\n        function BinaryExpression(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(BinaryExpression.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.BinaryExpression;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        BinaryExpression.prototype.setLeft = function (left) {\r\n            return this.setNode('left', left);\r\n        };\r\n        BinaryExpression.prototype.getLeft = function () {\r\n            return this.left;\r\n        };\r\n        BinaryExpression.prototype.setRight = function (right) {\r\n            return this.setNode('right', right);\r\n        };\r\n        BinaryExpression.prototype.getRight = function () {\r\n            return this.right;\r\n        };\r\n        BinaryExpression.prototype.setOperator = function (value) {\r\n            return this.setNode('operator', value);\r\n        };\r\n        BinaryExpression.prototype.getOperator = function () {\r\n            return this.operator;\r\n        };\r\n        return BinaryExpression;\r\n    }(Node));\r\n    exports.BinaryExpression = BinaryExpression;\r\n    var Term = (function (_super) {\r\n        __extends(Term, _super);\r\n        function Term(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Term.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Term;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Term.prototype.setOperator = function (value) {\r\n            return this.setNode('operator', value);\r\n        };\r\n        Term.prototype.getOperator = function () {\r\n            return this.operator;\r\n        };\r\n        Term.prototype.setExpression = function (value) {\r\n            return this.setNode('expression', value);\r\n        };\r\n        Term.prototype.getExpression = function () {\r\n            return this.expression;\r\n        };\r\n        return Term;\r\n    }(Node));\r\n    exports.Term = Term;\r\n    var Operator = (function (_super) {\r\n        __extends(Operator, _super);\r\n        function Operator(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Operator.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Operator;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Operator;\r\n    }(Node));\r\n    exports.Operator = Operator;\r\n    var HexColorValue = (function (_super) {\r\n        __extends(HexColorValue, _super);\r\n        function HexColorValue(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(HexColorValue.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.HexColorValue;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return HexColorValue;\r\n    }(Node));\r\n    exports.HexColorValue = HexColorValue;\r\n    var NumericValue = (function (_super) {\r\n        __extends(NumericValue, _super);\r\n        function NumericValue(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(NumericValue.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.NumericValue;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        NumericValue.prototype.getValue = function () {\r\n            var raw = this.getText();\r\n            var unitIdx = 0, code, _dot = '.'.charCodeAt(0), _0 = '0'.charCodeAt(0), _9 = '9'.charCodeAt(0);\r\n            for (var i = 0, len = raw.length; i < len; i++) {\r\n                code = raw.charCodeAt(i);\r\n                if (!(_0 <= code && code <= _9 || code === _dot)) {\r\n                    break;\r\n                }\r\n                unitIdx += 1;\r\n            }\r\n            return {\r\n                value: raw.substring(0, unitIdx),\r\n                unit: unitIdx < len ? raw.substring(unitIdx) : undefined\r\n            };\r\n        };\r\n        return NumericValue;\r\n    }(Node));\r\n    exports.NumericValue = NumericValue;\r\n    var VariableDeclaration = (function (_super) {\r\n        __extends(VariableDeclaration, _super);\r\n        function VariableDeclaration(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(VariableDeclaration.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.VariableDeclaration;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        VariableDeclaration.prototype.setVariable = function (node) {\r\n            if (node) {\r\n                node.attachTo(this);\r\n                this.variable = node;\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        VariableDeclaration.prototype.getVariable = function () {\r\n            return this.variable;\r\n        };\r\n        VariableDeclaration.prototype.getName = function () {\r\n            return this.variable ? this.variable.getName() : '';\r\n        };\r\n        VariableDeclaration.prototype.setValue = function (node) {\r\n            if (node) {\r\n                node.attachTo(this);\r\n                this.value = node;\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        return VariableDeclaration;\r\n    }(AbstractDeclaration));\r\n    exports.VariableDeclaration = VariableDeclaration;\r\n    var Interpolation = (function (_super) {\r\n        __extends(Interpolation, _super);\r\n        function Interpolation(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Interpolation.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.Interpolation;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Interpolation;\r\n    }(Node));\r\n    exports.Interpolation = Interpolation;\r\n    var Variable = (function (_super) {\r\n        __extends(Variable, _super);\r\n        function Variable(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(Variable.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.VariableName;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Variable.prototype.getName = function () {\r\n            return this.getText();\r\n        };\r\n        return Variable;\r\n    }(Node));\r\n    exports.Variable = Variable;\r\n    var ExtendsReference = (function (_super) {\r\n        __extends(ExtendsReference, _super);\r\n        function ExtendsReference(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(ExtendsReference.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.ExtendsReference;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        ExtendsReference.prototype.setSelector = function (node) {\r\n            return this.setNode('selector', node, 0);\r\n        };\r\n        ExtendsReference.prototype.getSelector = function () {\r\n            return this.selector;\r\n        };\r\n        ExtendsReference.prototype.getName = function () {\r\n            return this.selector ? this.selector.getText() : '';\r\n        };\r\n        return ExtendsReference;\r\n    }(Node));\r\n    exports.ExtendsReference = ExtendsReference;\r\n    var MixinReference = (function (_super) {\r\n        __extends(MixinReference, _super);\r\n        function MixinReference(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(MixinReference.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.MixinReference;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        MixinReference.prototype.setIdentifier = function (node) {\r\n            return this.setNode('identifier', node, 0);\r\n        };\r\n        MixinReference.prototype.getIdentifier = function () {\r\n            return this.identifier;\r\n        };\r\n        MixinReference.prototype.getName = function () {\r\n            return this.identifier ? this.identifier.getText() : '';\r\n        };\r\n        MixinReference.prototype.getArguments = function () {\r\n            if (!this.arguments) {\r\n                this.arguments = new Nodelist(this);\r\n            }\r\n            return this.arguments;\r\n        };\r\n        MixinReference.prototype.setContent = function (node) {\r\n            return this.setNode('content', node);\r\n        };\r\n        MixinReference.prototype.getContent = function () {\r\n            return this.content;\r\n        };\r\n        return MixinReference;\r\n    }(Node));\r\n    exports.MixinReference = MixinReference;\r\n    var MixinDeclaration = (function (_super) {\r\n        __extends(MixinDeclaration, _super);\r\n        function MixinDeclaration(offset, length) {\r\n            _super.call(this, offset, length);\r\n        }\r\n        Object.defineProperty(MixinDeclaration.prototype, \"type\", {\r\n            get: function () {\r\n                return NodeType.MixinDeclaration;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        MixinDeclaration.prototype.setIdentifier = function (node) {\r\n            return this.setNode('identifier', node, 0);\r\n        };\r\n        MixinDeclaration.prototype.getIdentifier = function () {\r\n            return this.identifier;\r\n        };\r\n        MixinDeclaration.prototype.getName = function () {\r\n            return this.identifier ? this.identifier.getText() : '';\r\n        };\r\n        MixinDeclaration.prototype.getParameters = function () {\r\n            if (!this.parameters) {\r\n                this.parameters = new Nodelist(this);\r\n            }\r\n            return this.parameters;\r\n        };\r\n        MixinDeclaration.prototype.setGuard = function (node) {\r\n            if (node) {\r\n                node.attachTo(this);\r\n                this.guard = node;\r\n            }\r\n            return false;\r\n        };\r\n        return MixinDeclaration;\r\n    }(BodyDeclaration));\r\n    exports.MixinDeclaration = MixinDeclaration;\r\n    var LessGuard = (function (_super) {\r\n        __extends(LessGuard, _super);\r\n        function LessGuard() {\r\n            _super.apply(this, arguments);\r\n        }\r\n        LessGuard.prototype.getConditions = function () {\r\n            if (!this.conditions) {\r\n                this.conditions = new Nodelist(this);\r\n            }\r\n            return this.conditions;\r\n        };\r\n        return LessGuard;\r\n    }(Node));\r\n    exports.LessGuard = LessGuard;\r\n    var GuardCondition = (function (_super) {\r\n        __extends(GuardCondition, _super);\r\n        function GuardCondition() {\r\n            _super.apply(this, arguments);\r\n        }\r\n        GuardCondition.prototype.setVariable = function (node) {\r\n            return this.setNode('variable', node);\r\n        };\r\n        return GuardCondition;\r\n    }(Node));\r\n    exports.GuardCondition = GuardCondition;\r\n    var Marker = (function () {\r\n        function Marker(node, rule, level, message, offset, length) {\r\n            if (offset === void 0) { offset = node.offset; }\r\n            if (length === void 0) { length = node.length; }\r\n            this.node = node;\r\n            this.rule = rule;\r\n            this.level = level;\r\n            this.message = message || rule.message;\r\n            this.offset = offset;\r\n            this.length = length;\r\n        }\r\n        Marker.prototype.getRule = function () {\r\n            return this.rule;\r\n        };\r\n        Marker.prototype.getLevel = function () {\r\n            return this.level;\r\n        };\r\n        Marker.prototype.getOffset = function () {\r\n            return this.offset;\r\n        };\r\n        Marker.prototype.getLength = function () {\r\n            return this.length;\r\n        };\r\n        Marker.prototype.getNode = function () {\r\n            return this.node;\r\n        };\r\n        Marker.prototype.getMessage = function () {\r\n            return this.message;\r\n        };\r\n        return Marker;\r\n    }());\r\n    exports.Marker = Marker;\r\n    /*\r\n    export class DefaultVisitor implements IVisitor {\r\n    \r\n        public visitNode(node:Node):boolean {\r\n            switch (node.type) {\r\n                case NodeType.Stylesheet:\r\n                    return this.visitStylesheet(<Stylesheet> node);\r\n                case NodeType.FontFace:\r\n                    return this.visitFontFace(<FontFace> node);\r\n                case NodeType.Ruleset:\r\n                    return this.visitRuleSet(<RuleSet> node);\r\n                case NodeType.Selector:\r\n                    return this.visitSelector(<Selector> node);\r\n                case NodeType.SimpleSelector:\r\n                    return this.visitSimpleSelector(<SimpleSelector> node);\r\n                case NodeType.Declaration:\r\n                    return this.visitDeclaration(<Declaration> node);\r\n                case NodeType.Function:\r\n                    return this.visitFunction(<Function> node);\r\n                case NodeType.FunctionDeclaration:\r\n                    return this.visitFunctionDeclaration(<FunctionDeclaration> node);\r\n                case NodeType.FunctionParameter:\r\n                    return this.visitFunctionParameter(<FunctionParameter> node);\r\n                case NodeType.FunctionArgument:\r\n                    return this.visitFunctionArgument(<FunctionArgument> node);\r\n                case NodeType.Term:\r\n                    return this.visitTerm(<Term> node);\r\n                case NodeType.Declaration:\r\n                    return this.visitExpression(<Expression> node);\r\n                case NodeType.NumericValue:\r\n                    return this.visitNumericValue(<NumericValue> node);\r\n                case NodeType.Page:\r\n                    return this.visitPage(<Page> node);\r\n                case NodeType.PageBoxMarginBox:\r\n                    return this.visitPageBoxMarginBox(<PageBoxMarginBox> node);\r\n                case NodeType.Property:\r\n                    return this.visitProperty(<Property> node);\r\n                case NodeType.NumericValue:\r\n                    return this.visitNodelist(<Nodelist> node);\r\n                case NodeType.Import:\r\n                    return this.visitImport(<Import> node);\r\n                case NodeType.Namespace:\r\n                    return this.visitNamespace(<Namespace> node);\r\n                case NodeType.Keyframe:\r\n                    return this.visitKeyframe(<Keyframe> node);\r\n                case NodeType.KeyframeSelector:\r\n                    return this.visitKeyframeSelector(<KeyframeSelector> node);\r\n                case NodeType.MixinDeclaration:\r\n                    return this.visitMixinDeclaration(<MixinDeclaration> node);\r\n                case NodeType.MixinReference:\r\n                    return this.visitMixinReference(<MixinReference> node);\r\n                case NodeType.Variable:\r\n                    return this.visitVariable(<Variable> node);\r\n                case NodeType.VariableDeclaration:\r\n                    return this.visitVariableDeclaration(<VariableDeclaration> node);\r\n            }\r\n            return this.visitUnknownNode(node);\r\n        }\r\n    \r\n        public visitFontFace(node:FontFace):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitKeyframe(node:Keyframe):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitKeyframeSelector(node:KeyframeSelector):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitStylesheet(node:Stylesheet):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitProperty(Node:Property):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitRuleSet(node:RuleSet):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitSelector(node:Selector):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitSimpleSelector(node:SimpleSelector):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitDeclaration(node:Declaration):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitFunction(node:Function):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitFunctionDeclaration(node:FunctionDeclaration):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitInvocation(node:Invocation):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitTerm(node:Term):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitImport(node:Import):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitNamespace(node:Namespace):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitExpression(node:Expression):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitNumericValue(node:NumericValue):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitPage(node:Page):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitPageBoxMarginBox(node:PageBoxMarginBox):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitNodelist(node:Nodelist):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitVariableDeclaration(node:VariableDeclaration):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitVariable(node:Variable):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitMixinDeclaration(node:MixinDeclaration):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitMixinReference(node:MixinReference):boolean {\r\n            return true;\r\n        }\r\n    \r\n        public visitUnknownNode(node:Node):boolean {\r\n            return true;\r\n        }\r\n    }\r\n    */\r\n    var ParseErrorCollector = (function () {\r\n        function ParseErrorCollector() {\r\n            this.entries = [];\r\n        }\r\n        ParseErrorCollector.entries = function (node) {\r\n            var visitor = new ParseErrorCollector();\r\n            node.accept(visitor);\r\n            return visitor.entries;\r\n        };\r\n        ParseErrorCollector.prototype.visitNode = function (node) {\r\n            if (node.isErroneous()) {\r\n                node.collectIssues(this.entries);\r\n            }\r\n            return true;\r\n        };\r\n        return ParseErrorCollector;\r\n    }());\r\n    exports.ParseErrorCollector = ParseErrorCollector;\r\n});\r\n\ndefine(\"vs/languages/css/common/parser/cssScanner\", [\"require\", \"exports\"], function (require, exports) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    (function (TokenType) {\r\n        TokenType[TokenType[\"Ident\"] = 0] = \"Ident\";\r\n        TokenType[TokenType[\"AtKeyword\"] = 1] = \"AtKeyword\";\r\n        TokenType[TokenType[\"String\"] = 2] = \"String\";\r\n        TokenType[TokenType[\"BadString\"] = 3] = \"BadString\";\r\n        TokenType[TokenType[\"BadUri\"] = 4] = \"BadUri\";\r\n        TokenType[TokenType[\"Hash\"] = 5] = \"Hash\";\r\n        TokenType[TokenType[\"Num\"] = 6] = \"Num\";\r\n        TokenType[TokenType[\"Percentage\"] = 7] = \"Percentage\";\r\n        TokenType[TokenType[\"Dimension\"] = 8] = \"Dimension\";\r\n        TokenType[TokenType[\"URI\"] = 9] = \"URI\";\r\n        TokenType[TokenType[\"UnicodeRange\"] = 10] = \"UnicodeRange\";\r\n        TokenType[TokenType[\"CDO\"] = 11] = \"CDO\";\r\n        TokenType[TokenType[\"CDC\"] = 12] = \"CDC\";\r\n        TokenType[TokenType[\"Colon\"] = 13] = \"Colon\";\r\n        TokenType[TokenType[\"SemiColon\"] = 14] = \"SemiColon\";\r\n        TokenType[TokenType[\"CurlyL\"] = 15] = \"CurlyL\";\r\n        TokenType[TokenType[\"CurlyR\"] = 16] = \"CurlyR\";\r\n        TokenType[TokenType[\"ParenthesisL\"] = 17] = \"ParenthesisL\";\r\n        TokenType[TokenType[\"ParenthesisR\"] = 18] = \"ParenthesisR\";\r\n        TokenType[TokenType[\"BracketL\"] = 19] = \"BracketL\";\r\n        TokenType[TokenType[\"BracketR\"] = 20] = \"BracketR\";\r\n        TokenType[TokenType[\"Whitespace\"] = 21] = \"Whitespace\";\r\n        TokenType[TokenType[\"Includes\"] = 22] = \"Includes\";\r\n        TokenType[TokenType[\"Dashmatch\"] = 23] = \"Dashmatch\";\r\n        TokenType[TokenType[\"SubstringOperator\"] = 24] = \"SubstringOperator\";\r\n        TokenType[TokenType[\"PrefixOperator\"] = 25] = \"PrefixOperator\";\r\n        TokenType[TokenType[\"SuffixOperator\"] = 26] = \"SuffixOperator\";\r\n        TokenType[TokenType[\"Delim\"] = 27] = \"Delim\";\r\n        TokenType[TokenType[\"EMS\"] = 28] = \"EMS\";\r\n        TokenType[TokenType[\"EXS\"] = 29] = \"EXS\";\r\n        TokenType[TokenType[\"Length\"] = 30] = \"Length\";\r\n        TokenType[TokenType[\"Angle\"] = 31] = \"Angle\";\r\n        TokenType[TokenType[\"Time\"] = 32] = \"Time\";\r\n        TokenType[TokenType[\"Freq\"] = 33] = \"Freq\";\r\n        TokenType[TokenType[\"Exclamation\"] = 34] = \"Exclamation\";\r\n        TokenType[TokenType[\"Resolution\"] = 35] = \"Resolution\";\r\n        TokenType[TokenType[\"Comma\"] = 36] = \"Comma\";\r\n        TokenType[TokenType[\"Charset\"] = 37] = \"Charset\";\r\n        TokenType[TokenType[\"EscapedJavaScript\"] = 38] = \"EscapedJavaScript\";\r\n        TokenType[TokenType[\"BadEscapedJavaScript\"] = 39] = \"BadEscapedJavaScript\";\r\n        TokenType[TokenType[\"Comment\"] = 40] = \"Comment\";\r\n        TokenType[TokenType[\"SingleLineComment\"] = 41] = \"SingleLineComment\";\r\n        TokenType[TokenType[\"EOF\"] = 42] = \"EOF\";\r\n        TokenType[TokenType[\"CustomToken\"] = 43] = \"CustomToken\";\r\n    })(exports.TokenType || (exports.TokenType = {}));\r\n    var TokenType = exports.TokenType;\r\n    var MultiLineStream = (function () {\r\n        function MultiLineStream(source) {\r\n            this.source = source;\r\n            this.len = source.length;\r\n            this.position = 0;\r\n        }\r\n        MultiLineStream.prototype.substring = function (from, to) {\r\n            if (to === void 0) { to = this.position; }\r\n            return this.source.substring(from, to);\r\n        };\r\n        MultiLineStream.prototype.eos = function () {\r\n            return this.len <= this.position;\r\n        };\r\n        MultiLineStream.prototype.pos = function () {\r\n            return this.position;\r\n        };\r\n        MultiLineStream.prototype.goBackTo = function (pos) {\r\n            this.position = pos;\r\n        };\r\n        MultiLineStream.prototype.goBack = function (n) {\r\n            this.position -= n;\r\n        };\r\n        MultiLineStream.prototype.advance = function (n) {\r\n            this.position += n;\r\n        };\r\n        MultiLineStream.prototype.nextChar = function () {\r\n            return this.source.charCodeAt(this.position++) || 0;\r\n        };\r\n        MultiLineStream.prototype.peekChar = function (n) {\r\n            if (n === void 0) { n = 0; }\r\n            return this.source.charCodeAt(this.position + n) || 0;\r\n        };\r\n        MultiLineStream.prototype.lookbackChar = function (n) {\r\n            if (n === void 0) { n = 0; }\r\n            return this.source.charCodeAt(this.position - n) || 0;\r\n        };\r\n        MultiLineStream.prototype.advanceIfChar = function (ch) {\r\n            if (ch === this.source.charCodeAt(this.position)) {\r\n                this.position++;\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        MultiLineStream.prototype.advanceIfChars = function (ch) {\r\n            var i;\r\n            if (this.position + ch.length > this.source.length) {\r\n                return false;\r\n            }\r\n            for (i = 0; i < ch.length; i++) {\r\n                if (this.source.charCodeAt(this.position + i) !== ch[i]) {\r\n                    return false;\r\n                }\r\n            }\r\n            this.advance(i);\r\n            return true;\r\n        };\r\n        MultiLineStream.prototype.advanceWhileChar = function (condition) {\r\n            var posNow = this.position;\r\n            while (this.position < this.len && condition(this.source.charCodeAt(this.position))) {\r\n                this.position++;\r\n            }\r\n            return this.position - posNow;\r\n        };\r\n        return MultiLineStream;\r\n    }());\r\n    exports.MultiLineStream = MultiLineStream;\r\n    var _a = 'a'.charCodeAt(0);\r\n    var _e = 'e'.charCodeAt(0);\r\n    var _f = 'f'.charCodeAt(0);\r\n    var _i = 'i'.charCodeAt(0);\r\n    var _l = 'l'.charCodeAt(0);\r\n    var _p = 'p'.charCodeAt(0);\r\n    var _r = 'r'.charCodeAt(0);\r\n    var _u = 'u'.charCodeAt(0);\r\n    var _x = 'x'.charCodeAt(0);\r\n    var _z = 'z'.charCodeAt(0);\r\n    var _A = 'A'.charCodeAt(0);\r\n    var _E = 'E'.charCodeAt(0);\r\n    var _F = 'F'.charCodeAt(0);\r\n    var _I = 'I'.charCodeAt(0);\r\n    var _L = 'L'.charCodeAt(0);\r\n    var _P = 'P'.charCodeAt(0);\r\n    var _R = 'R'.charCodeAt(0);\r\n    var _U = 'U'.charCodeAt(0);\r\n    var _X = 'X'.charCodeAt(0);\r\n    var _Z = 'Z'.charCodeAt(0);\r\n    var _0 = '0'.charCodeAt(0);\r\n    var _9 = '9'.charCodeAt(0);\r\n    var _TLD = '~'.charCodeAt(0);\r\n    var _HAT = '^'.charCodeAt(0);\r\n    var _EQS = '='.charCodeAt(0);\r\n    var _PIP = '|'.charCodeAt(0);\r\n    var _MIN = '-'.charCodeAt(0);\r\n    var _USC = '_'.charCodeAt(0);\r\n    var _PRC = '%'.charCodeAt(0);\r\n    var _MUL = '*'.charCodeAt(0);\r\n    var _LPA = '('.charCodeAt(0);\r\n    var _RPA = ')'.charCodeAt(0);\r\n    var _LAN = '<'.charCodeAt(0);\r\n    var _RAN = '>'.charCodeAt(0);\r\n    var _ATS = '@'.charCodeAt(0);\r\n    var _HSH = '#'.charCodeAt(0);\r\n    var _DLR = '$'.charCodeAt(0);\r\n    var _BSL = '\\\\'.charCodeAt(0);\r\n    var _FSL = '/'.charCodeAt(0);\r\n    var _NWL = '\\n'.charCodeAt(0);\r\n    var _CAR = '\\r'.charCodeAt(0);\r\n    var _LFD = '\\f'.charCodeAt(0);\r\n    var _DQO = '\"'.charCodeAt(0);\r\n    var _SQO = '\\''.charCodeAt(0);\r\n    var _WSP = ' '.charCodeAt(0);\r\n    var _TAB = '\\t'.charCodeAt(0);\r\n    var _SEM = ';'.charCodeAt(0);\r\n    var _COL = ':'.charCodeAt(0);\r\n    var _CUL = '{'.charCodeAt(0);\r\n    var _CUR = '}'.charCodeAt(0);\r\n    var _BRL = '['.charCodeAt(0);\r\n    var _BRR = ']'.charCodeAt(0);\r\n    var _CMA = ','.charCodeAt(0);\r\n    var _DOT = '.'.charCodeAt(0);\r\n    var _BNG = '!'.charCodeAt(0);\r\n    var _url = [_u, _U, _r, _R, _l, _L, _LPA, _LPA];\r\n    var _url_prefix = [_u, _U, _r, _R, _l, _L, _MIN, _MIN, _p, _P, _r, _R, _e, _E, _f, _F, _i, _I, _x, _X, _LPA, _LPA];\r\n    var staticTokenTable = {};\r\n    staticTokenTable[_SEM] = TokenType.SemiColon;\r\n    staticTokenTable[_COL] = TokenType.Colon;\r\n    staticTokenTable[_CUL] = TokenType.CurlyL;\r\n    staticTokenTable[_CUR] = TokenType.CurlyR;\r\n    staticTokenTable[_BRR] = TokenType.BracketR;\r\n    staticTokenTable[_BRL] = TokenType.BracketL;\r\n    staticTokenTable[_LPA] = TokenType.ParenthesisL;\r\n    staticTokenTable[_RPA] = TokenType.ParenthesisR;\r\n    staticTokenTable[_CMA] = TokenType.Comma;\r\n    var staticUnitTable = {};\r\n    staticUnitTable['em'] = TokenType.EMS;\r\n    staticUnitTable['ex'] = TokenType.EXS;\r\n    staticUnitTable['px'] = TokenType.Length;\r\n    staticUnitTable['cm'] = TokenType.Length;\r\n    staticUnitTable['mm'] = TokenType.Length;\r\n    staticUnitTable['in'] = TokenType.Length;\r\n    staticUnitTable['pt'] = TokenType.Length;\r\n    staticUnitTable['pc'] = TokenType.Length;\r\n    staticUnitTable['deg'] = TokenType.Angle;\r\n    staticUnitTable['rad'] = TokenType.Angle;\r\n    staticUnitTable['grad'] = TokenType.Angle;\r\n    staticUnitTable['ms'] = TokenType.Time;\r\n    staticUnitTable['s'] = TokenType.Time;\r\n    staticUnitTable['hz'] = TokenType.Freq;\r\n    staticUnitTable['khz'] = TokenType.Freq;\r\n    staticUnitTable['%'] = TokenType.Percentage;\r\n    staticUnitTable['dpi'] = TokenType.Resolution;\r\n    staticUnitTable['dpcm'] = TokenType.Resolution;\r\n    var Scanner = (function () {\r\n        function Scanner() {\r\n            this.ignoreComment = true;\r\n            this.ignoreWhitespace = true;\r\n        }\r\n        Scanner.prototype.setSource = function (input) {\r\n            this.stream = new MultiLineStream(input);\r\n        };\r\n        Scanner.prototype.finishToken = function (offset, type, text) {\r\n            return {\r\n                offset: offset,\r\n                len: this.stream.pos() - offset,\r\n                type: type,\r\n                text: text || this.stream.substring(offset)\r\n            };\r\n        };\r\n        Scanner.prototype.substring = function (offset, len) {\r\n            return this.stream.substring(offset, offset + len);\r\n        };\r\n        Scanner.prototype.pos = function () {\r\n            return this.stream.pos();\r\n        };\r\n        Scanner.prototype.goBackTo = function (pos) {\r\n            this.stream.goBackTo(pos);\r\n        };\r\n        Scanner.prototype.scan = function () {\r\n            // processes all whitespaces and comments\r\n            var triviaToken = this.trivia();\r\n            if (triviaToken !== null) {\r\n                return triviaToken;\r\n            }\r\n            var offset = this.stream.pos();\r\n            // End of file/input\r\n            if (this.stream.eos()) {\r\n                return this.finishToken(offset, TokenType.EOF);\r\n            }\r\n            // CDO <!--\r\n            if (this.stream.advanceIfChars([_LAN, _BNG, _MIN, _MIN])) {\r\n                return this.finishToken(offset, TokenType.CDO);\r\n            }\r\n            // CDC -->\r\n            if (this.stream.advanceIfChars([_MIN, _MIN, _RAN])) {\r\n                return this.finishToken(offset, TokenType.CDC);\r\n            }\r\n            // URL\r\n            var tokenType = this._url();\r\n            if (tokenType !== null) {\r\n                return this.finishToken(offset, tokenType);\r\n            }\r\n            var content = [];\r\n            if (this.ident(content)) {\r\n                return this.finishToken(offset, TokenType.Ident, content.join(''));\r\n            }\r\n            // at-keyword\r\n            if (this.stream.advanceIfChar(_ATS)) {\r\n                content = ['@'];\r\n                if (this._name(content)) {\r\n                    var keywordText = content.join('');\r\n                    if (keywordText === '@charset') {\r\n                        return this.finishToken(offset, TokenType.Charset, keywordText);\r\n                    }\r\n                    return this.finishToken(offset, TokenType.AtKeyword, keywordText);\r\n                }\r\n                else {\r\n                    return this.finishToken(offset, TokenType.Delim);\r\n                }\r\n            }\r\n            // hash\r\n            if (this.stream.advanceIfChar(_HSH)) {\r\n                content = ['#'];\r\n                if (this._name(content)) {\r\n                    return this.finishToken(offset, TokenType.Hash, content.join(''));\r\n                }\r\n                else {\r\n                    return this.finishToken(offset, TokenType.Delim);\r\n                }\r\n            }\r\n            // Important\r\n            if (this.stream.advanceIfChar(_BNG)) {\r\n                return this.finishToken(offset, TokenType.Exclamation);\r\n            }\r\n            // Numbers\r\n            if (this._number()) {\r\n                var pos = this.stream.pos();\r\n                content = [this.stream.substring(offset, pos)];\r\n                if (this.stream.advanceIfChar(_PRC)) {\r\n                    // Percentage 43%\r\n                    return this.finishToken(offset, TokenType.Percentage);\r\n                }\r\n                else if (this.ident(content)) {\r\n                    var dim = this.stream.substring(pos).toLowerCase();\r\n                    tokenType = staticUnitTable[dim];\r\n                    if (typeof tokenType !== 'undefined') {\r\n                        // Known dimension 43px\r\n                        return this.finishToken(offset, tokenType, content.join(''));\r\n                    }\r\n                    else {\r\n                        // Unknown dimension 43ft\r\n                        return this.finishToken(offset, TokenType.Dimension, content.join(''));\r\n                    }\r\n                }\r\n                return this.finishToken(offset, TokenType.Num);\r\n            }\r\n            // String, BadString\r\n            content = [];\r\n            tokenType = this._string(content);\r\n            if (tokenType !== null) {\r\n                return this.finishToken(offset, tokenType, content.join(''));\r\n            }\r\n            // single character tokens\r\n            tokenType = staticTokenTable[this.stream.peekChar()];\r\n            if (typeof tokenType !== 'undefined') {\r\n                this.stream.advance(1);\r\n                return this.finishToken(offset, tokenType);\r\n            }\r\n            // includes ~=\r\n            if (this.stream.peekChar(0) === _TLD && this.stream.peekChar(1) === _EQS) {\r\n                this.stream.advance(2);\r\n                return this.finishToken(offset, TokenType.Includes);\r\n            }\r\n            // DashMatch |=\r\n            if (this.stream.peekChar(0) === _PIP && this.stream.peekChar(1) === _EQS) {\r\n                this.stream.advance(2);\r\n                return this.finishToken(offset, TokenType.Dashmatch);\r\n            }\r\n            // Substring operator *=\r\n            if (this.stream.peekChar(0) === _MUL && this.stream.peekChar(1) === _EQS) {\r\n                this.stream.advance(2);\r\n                return this.finishToken(offset, TokenType.SubstringOperator);\r\n            }\r\n            // Substring operator ^=\r\n            if (this.stream.peekChar(0) === _HAT && this.stream.peekChar(1) === _EQS) {\r\n                this.stream.advance(2);\r\n                return this.finishToken(offset, TokenType.PrefixOperator);\r\n            }\r\n            // Substring operator $=\r\n            if (this.stream.peekChar(0) === _DLR && this.stream.peekChar(1) === _EQS) {\r\n                this.stream.advance(2);\r\n                return this.finishToken(offset, TokenType.SuffixOperator);\r\n            }\r\n            // Delim\r\n            this.stream.nextChar();\r\n            return this.finishToken(offset, TokenType.Delim);\r\n        };\r\n        Scanner.prototype._matchWordAnyCase = function (characters) {\r\n            var index = 0;\r\n            this.stream.advanceWhileChar(function (ch) {\r\n                var result = characters[index] === ch || characters[index + 1] === ch;\r\n                if (result) {\r\n                    index += 2;\r\n                }\r\n                return result;\r\n            });\r\n            if (index === characters.length) {\r\n                return true;\r\n            }\r\n            else {\r\n                this.stream.goBack(index / 2);\r\n                return false;\r\n            }\r\n        };\r\n        Scanner.prototype.trivia = function () {\r\n            while (true) {\r\n                var offset = this.stream.pos();\r\n                if (this._whitespace()) {\r\n                    if (!this.ignoreWhitespace) {\r\n                        return this.finishToken(offset, TokenType.Whitespace);\r\n                    }\r\n                }\r\n                else if (this.comment()) {\r\n                    if (!this.ignoreComment) {\r\n                        return this.finishToken(offset, TokenType.Comment);\r\n                    }\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n        };\r\n        Scanner.prototype.comment = function () {\r\n            if (this.stream.advanceIfChars([_FSL, _MUL])) {\r\n                var success_1 = false, hot_1 = false;\r\n                this.stream.advanceWhileChar(function (ch) {\r\n                    if (hot_1 && ch === _FSL) {\r\n                        success_1 = true;\r\n                        return false;\r\n                    }\r\n                    hot_1 = ch === _MUL;\r\n                    return true;\r\n                });\r\n                if (success_1) {\r\n                    this.stream.advance(1);\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        Scanner.prototype._number = function () {\r\n            var npeek = 0, ch;\r\n            if (this.stream.peekChar() === _DOT) {\r\n                npeek = 1;\r\n            }\r\n            ch = this.stream.peekChar(npeek);\r\n            if (ch >= _0 && ch <= _9) {\r\n                this.stream.advance(npeek + 1);\r\n                this.stream.advanceWhileChar(function (ch) {\r\n                    return ch >= _0 && ch <= _9 || npeek === 0 && ch === _DOT;\r\n                });\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        Scanner.prototype._newline = function (result) {\r\n            var ch = this.stream.peekChar();\r\n            switch (ch) {\r\n                case _CAR:\r\n                case _LFD:\r\n                case _NWL:\r\n                    this.stream.advance(1);\r\n                    result.push(String.fromCharCode(ch));\r\n                    if (ch === _CAR && this.stream.advanceIfChar(_NWL)) {\r\n                        result.push('\\n');\r\n                    }\r\n                    return true;\r\n            }\r\n            return false;\r\n        };\r\n        Scanner.prototype._escape = function (result, includeNewLines) {\r\n            var ch = this.stream.peekChar();\r\n            if (ch === _BSL) {\r\n                this.stream.advance(1);\r\n                ch = this.stream.peekChar();\r\n                var hexNumCount = 0;\r\n                while (hexNumCount < 6 && (ch >= _0 && ch <= _9 || ch >= _a && ch <= _f || ch >= _A && ch <= _F)) {\r\n                    this.stream.advance(1);\r\n                    ch = this.stream.peekChar();\r\n                    hexNumCount++;\r\n                }\r\n                if (hexNumCount > 0) {\r\n                    try {\r\n                        var hexVal = parseInt(this.stream.substring(this.stream.pos() - hexNumCount), 16);\r\n                        if (hexVal) {\r\n                            result.push(String.fromCharCode(hexVal));\r\n                        }\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                    // optional whitespace or new line, not part of result text\r\n                    if (ch === _WSP || ch === _TAB) {\r\n                        this.stream.advance(1);\r\n                    }\r\n                    else {\r\n                        this._newline([]);\r\n                    }\r\n                    return true;\r\n                }\r\n                if (ch !== _CAR && ch !== _LFD && ch !== _NWL) {\r\n                    this.stream.advance(1);\r\n                    result.push(String.fromCharCode(ch));\r\n                    return true;\r\n                }\r\n                else if (includeNewLines) {\r\n                    return this._newline(result);\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        Scanner.prototype._stringChar = function (closeQuote, result) {\r\n            // not closeQuote, not backslash, not newline\r\n            var ch = this.stream.peekChar();\r\n            if (ch !== 0 && ch !== closeQuote && ch !== _BSL && ch !== _CAR && ch !== _LFD && ch !== _NWL) {\r\n                this.stream.advance(1);\r\n                result.push(String.fromCharCode(ch));\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        ;\r\n        Scanner.prototype._string = function (result) {\r\n            if (this.stream.peekChar() === _SQO || this.stream.peekChar() === _DQO) {\r\n                var closeQuote = this.stream.nextChar();\r\n                result.push(String.fromCharCode(closeQuote));\r\n                while (this._stringChar(closeQuote, result) || this._escape(result, true)) {\r\n                }\r\n                if (this.stream.peekChar() === closeQuote) {\r\n                    this.stream.nextChar();\r\n                    result.push(String.fromCharCode(closeQuote));\r\n                    return TokenType.String;\r\n                }\r\n                else {\r\n                    return TokenType.BadString;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        Scanner.prototype._url = function () {\r\n            if (this._matchWordAnyCase(_url) || this._matchWordAnyCase(_url_prefix)) {\r\n                this._whitespace();\r\n                var tokenType = TokenType.URI, stringType = this._string([]);\r\n                if (stringType === TokenType.BadString) {\r\n                    tokenType = TokenType.BadUri;\r\n                }\r\n                else if (stringType === null) {\r\n                    this.stream.advanceWhileChar(function (ch) {\r\n                        return ch !== _RPA;\r\n                    });\r\n                    tokenType = TokenType.URI;\r\n                }\r\n                this._whitespace();\r\n                if (this.stream.advanceIfChar(_RPA)) {\r\n                    return tokenType;\r\n                }\r\n                else {\r\n                    return TokenType.BadUri;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        Scanner.prototype._whitespace = function () {\r\n            var n = this.stream.advanceWhileChar(function (ch) {\r\n                return ch === _WSP || ch === _TAB || ch === _NWL || ch === _LFD || ch === _CAR;\r\n            });\r\n            return n > 0;\r\n        };\r\n        Scanner.prototype._name = function (result) {\r\n            var matched = false;\r\n            while (this._identChar(result) || this._escape(result)) {\r\n                matched = true;\r\n            }\r\n            return matched;\r\n        };\r\n        Scanner.prototype.ident = function (result) {\r\n            var pos = this.stream.pos();\r\n            var hasMinus = this._minus(result);\r\n            if (hasMinus && this._minus(result) /* -- */) {\r\n                var hasContent = false;\r\n                while (this._identChar(result) || this._escape(result)) {\r\n                    hasContent = true;\r\n                }\r\n                if (hasContent) {\r\n                    return true;\r\n                }\r\n            }\r\n            else if (this._identFirstChar(result) || this._escape(result)) {\r\n                while (this._identChar(result) || this._escape(result)) {\r\n                }\r\n                return true;\r\n            }\r\n            this.stream.goBackTo(pos);\r\n            return false;\r\n        };\r\n        Scanner.prototype._identFirstChar = function (result) {\r\n            var ch = this.stream.peekChar();\r\n            if (ch === _USC ||\r\n                ch >= _a && ch <= _z ||\r\n                ch >= _A && ch <= _Z ||\r\n                ch >= 0x80 && ch <= 0xFFFF) {\r\n                this.stream.advance(1);\r\n                result.push(String.fromCharCode(ch));\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        Scanner.prototype._minus = function (result) {\r\n            var ch = this.stream.peekChar();\r\n            if (ch === _MIN) {\r\n                this.stream.advance(1);\r\n                result.push(String.fromCharCode(ch));\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        Scanner.prototype._identChar = function (result) {\r\n            var ch = this.stream.peekChar();\r\n            if (ch === _USC ||\r\n                ch === _MIN ||\r\n                ch >= _a && ch <= _z ||\r\n                ch >= _A && ch <= _Z ||\r\n                ch >= _0 && ch <= _9 ||\r\n                ch >= 0x80 && ch <= 0xFFFF) {\r\n                this.stream.advance(1);\r\n                result.push(String.fromCharCode(ch));\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        return Scanner;\r\n    }());\r\n    exports.Scanner = Scanner;\r\n});\r\n\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\ndefine(\"vs/languages/css/common/parser/cssSymbols\", [\"require\", \"exports\", './cssNodes', 'vs/base/common/arrays'], function (require, exports, nodes, arrays) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    var Scope = (function () {\r\n        function Scope(offset, length) {\r\n            this.offset = offset;\r\n            this.length = length;\r\n            this.symbols = [];\r\n            this.parent = null;\r\n            this.children = [];\r\n        }\r\n        Scope.prototype.addChild = function (scope) {\r\n            this.children.push(scope);\r\n            scope.setParent(this);\r\n        };\r\n        Scope.prototype.setParent = function (scope) {\r\n            this.parent = scope;\r\n        };\r\n        Scope.prototype.findScope = function (offset, length) {\r\n            if (length === void 0) { length = 0; }\r\n            if (this.offset <= offset && this.offset + this.length > offset + length || this.offset === offset && this.length === length) {\r\n                return this.findInScope(offset, length);\r\n            }\r\n            return null;\r\n        };\r\n        Scope.prototype.findInScope = function (offset, length) {\r\n            if (length === void 0) { length = 0; }\r\n            // find the first scope child that has an offset larger than offset + length\r\n            var end = offset + length;\r\n            var idx = arrays.findFirst(this.children, function (s) { return s.offset > end; });\r\n            if (idx === 0) {\r\n                // all scopes have offsets larger than our end\r\n                return this;\r\n            }\r\n            var res = this.children[idx - 1];\r\n            if (res.offset <= offset && res.offset + res.length >= offset + length) {\r\n                return res.findInScope(offset, length);\r\n            }\r\n            return this;\r\n        };\r\n        Scope.prototype.addSymbol = function (symbol) {\r\n            this.symbols.push(symbol);\r\n        };\r\n        Scope.prototype.getSymbol = function (name, type) {\r\n            for (var index = 0; index < this.symbols.length; index++) {\r\n                var symbol = this.symbols[index];\r\n                if (symbol.name === name && symbol.type === type) {\r\n                    return symbol;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        Scope.prototype.getSymbols = function () {\r\n            return this.symbols;\r\n        };\r\n        return Scope;\r\n    }());\r\n    exports.Scope = Scope;\r\n    var GlobalScope = (function (_super) {\r\n        __extends(GlobalScope, _super);\r\n        function GlobalScope() {\r\n            _super.call(this, 0, Number.MAX_VALUE);\r\n        }\r\n        return GlobalScope;\r\n    }(Scope));\r\n    exports.GlobalScope = GlobalScope;\r\n    var Symbol = (function () {\r\n        function Symbol(name, node, type) {\r\n            this.name = name;\r\n            this.node = node;\r\n            this.type = type;\r\n        }\r\n        return Symbol;\r\n    }());\r\n    exports.Symbol = Symbol;\r\n    var ScopeBuilder = (function () {\r\n        function ScopeBuilder(scope) {\r\n            this.scope = scope;\r\n        }\r\n        ScopeBuilder.prototype.addSymbol = function (node, name, type) {\r\n            if (node.offset !== -1) {\r\n                var current = this.scope.findScope(node.offset, node.length);\r\n                current.addSymbol(new Symbol(name, node, type));\r\n            }\r\n        };\r\n        ScopeBuilder.prototype.addScope = function (node) {\r\n            if (node.offset !== -1) {\r\n                var current = this.scope.findScope(node.offset, node.length);\r\n                if (current.offset !== node.offset || current.length !== node.length) {\r\n                    var newScope = new Scope(node.offset, node.length);\r\n                    current.addChild(newScope);\r\n                    return newScope;\r\n                }\r\n                return current;\r\n            }\r\n            return null;\r\n        };\r\n        ScopeBuilder.prototype.addSymbolToChildScope = function (scopeNode, node, name, type) {\r\n            if (scopeNode && scopeNode.offset !== -1) {\r\n                var current = this.addScope(scopeNode); // create the scope or gets the existing one\r\n                current.addSymbol(new Symbol(name, node, type));\r\n            }\r\n        };\r\n        ScopeBuilder.prototype.visitNode = function (node) {\r\n            switch (node.type) {\r\n                case nodes.NodeType.Keyframe:\r\n                    this.addSymbol(node, node.getName(), nodes.ReferenceType.Keyframe);\r\n                    return true;\r\n                case nodes.NodeType.Declaration:\r\n                    return this.visitDeclarationNode(node);\r\n                case nodes.NodeType.VariableDeclaration:\r\n                    return this.visitVariableDeclarationNode(node);\r\n                case nodes.NodeType.Ruleset:\r\n                    return this.visitRuleSet(node);\r\n                case nodes.NodeType.MixinDeclaration:\r\n                    this.addSymbol(node, node.getName(), nodes.ReferenceType.Mixin);\r\n                    return true;\r\n                case nodes.NodeType.FunctionDeclaration:\r\n                    this.addSymbol(node, node.getName(), nodes.ReferenceType.Function);\r\n                    return true;\r\n                case nodes.NodeType.FunctionParameter: {\r\n                    // parameters are part of the body scope\r\n                    var scopeNode = node.getParent().getDeclarations();\r\n                    if (scopeNode) {\r\n                        this.addSymbolToChildScope(scopeNode, node, node.getName(), nodes.ReferenceType.Variable);\r\n                    }\r\n                    return true;\r\n                }\r\n                case nodes.NodeType.Declarations:\r\n                    this.addScope(node);\r\n                    return true;\r\n                case nodes.NodeType.For:\r\n                case nodes.NodeType.Each: {\r\n                    var forOrEachNode = node;\r\n                    var scopeNode = forOrEachNode.getDeclarations();\r\n                    if (scopeNode) {\r\n                        this.addSymbolToChildScope(scopeNode, forOrEachNode.variable, forOrEachNode.variable.getName(), nodes.ReferenceType.Variable);\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        ScopeBuilder.prototype.visitRuleSet = function (node) {\r\n            var current = this.scope.findScope(node.offset, node.length);\r\n            node.getSelectors().getChildren().forEach(function (child) {\r\n                if (child instanceof nodes.Selector) {\r\n                    if (child.getChildren().length === 1) {\r\n                        current.addSymbol(new Symbol(child.getChild(0).getText(), child, nodes.ReferenceType.Rule));\r\n                    }\r\n                }\r\n            });\r\n            return true;\r\n        };\r\n        ScopeBuilder.prototype.visitVariableDeclarationNode = function (node) {\r\n            this.addSymbol(node, node.getName(), nodes.ReferenceType.Variable);\r\n            return true;\r\n        };\r\n        ScopeBuilder.prototype.visitDeclarationNode = function (node) {\r\n            if (Symbols.isCssVariable(node.getProperty().getIdentifier())) {\r\n                this.addCSSVariable(node.getProperty(), node.getProperty().getName(), nodes.ReferenceType.Variable);\r\n            }\r\n            return true;\r\n        };\r\n        ScopeBuilder.prototype.addCSSVariable = function (node, name, type) {\r\n            if (node.offset !== -1) {\r\n                var globalScope = this.getGlobalScope(node, name, type);\r\n                globalScope.addSymbol(new Symbol(name, node, type));\r\n            }\r\n        };\r\n        ScopeBuilder.prototype.getGlobalScope = function (node, name, type) {\r\n            var current = this.scope.findScope(node.offset, node.length);\r\n            while (current.parent !== null) {\r\n                current = current.parent;\r\n            }\r\n            return current;\r\n        };\r\n        return ScopeBuilder;\r\n    }());\r\n    exports.ScopeBuilder = ScopeBuilder;\r\n    var Symbols = (function () {\r\n        function Symbols(node) {\r\n            this.global = new GlobalScope();\r\n            node.accept(new ScopeBuilder(this.global));\r\n        }\r\n        Symbols.prototype.findSymbolsAtOffset = function (offset, referenceType) {\r\n            var scope = this.global.findScope(offset, 0);\r\n            var result = [];\r\n            var names = {};\r\n            while (scope) {\r\n                var symbols = scope.getSymbols();\r\n                for (var i = 0; i < symbols.length; i++) {\r\n                    var symbol = symbols[i];\r\n                    if (symbol.node.offset <= offset && symbol.type === referenceType && !names[symbol.name]) {\r\n                        result.push(symbol);\r\n                        names[symbol.name] = true;\r\n                    }\r\n                }\r\n                scope = scope.parent;\r\n            }\r\n            return result;\r\n        };\r\n        Symbols.prototype.internalFindSymbol = function (node, referenceTypes) {\r\n            var scopeNode = node;\r\n            if (node.parent instanceof nodes.FunctionParameter && node.parent.getParent() instanceof nodes.BodyDeclaration) {\r\n                scopeNode = node.parent.getParent().getDeclarations();\r\n            }\r\n            if (node.parent instanceof nodes.FunctionArgument && node.parent.getParent() instanceof nodes.Function) {\r\n                var funcId = node.parent.getParent().getIdentifier();\r\n                if (funcId) {\r\n                    var functionSymbol = this.internalFindSymbol(funcId, [nodes.ReferenceType.Function]);\r\n                    if (functionSymbol) {\r\n                        scopeNode = functionSymbol.node.getDeclarations();\r\n                    }\r\n                }\r\n            }\r\n            if (!scopeNode) {\r\n                return null;\r\n            }\r\n            var name = node.getText();\r\n            var scope = this.global.findScope(scopeNode.offset, scopeNode.length);\r\n            while (scope) {\r\n                for (var index = 0; index < referenceTypes.length; index++) {\r\n                    var type = referenceTypes[index];\r\n                    var symbol = scope.getSymbol(name, type);\r\n                    if (symbol) {\r\n                        return symbol;\r\n                    }\r\n                }\r\n                scope = scope.parent;\r\n            }\r\n            return null;\r\n        };\r\n        Symbols.prototype.evaluateReferenceTypes = function (node) {\r\n            if (node instanceof nodes.Identifier) {\r\n                var referenceTypes = node.referenceTypes;\r\n                if (referenceTypes) {\r\n                    return referenceTypes;\r\n                }\r\n                else {\r\n                    if (Symbols.isCssVariable(node)) {\r\n                        return [nodes.ReferenceType.Variable];\r\n                    }\r\n                    // are a reference to a keyframe?\r\n                    var decl = nodes.getParentDeclaration(node);\r\n                    if (decl) {\r\n                        var propertyName = decl.getNonPrefixedPropertyName();\r\n                        if ((propertyName === 'animation' || propertyName === 'animation-name')\r\n                            && decl.getValue() && decl.getValue().offset === node.offset) {\r\n                            return [nodes.ReferenceType.Keyframe];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (node instanceof nodes.Variable) {\r\n                return [nodes.ReferenceType.Variable];\r\n            }\r\n            var selector = node.findParent(nodes.NodeType.Selector);\r\n            if (selector) {\r\n                return [nodes.ReferenceType.Rule];\r\n            }\r\n            var extendsRef = node.findParent(nodes.NodeType.ExtendsReference);\r\n            if (extendsRef) {\r\n                return [nodes.ReferenceType.Rule];\r\n            }\r\n            return null;\r\n        };\r\n        Symbols.prototype.findSymbolFromNode = function (node) {\r\n            if (!node) {\r\n                return null;\r\n            }\r\n            while (node.type === nodes.NodeType.Interpolation) {\r\n                node = node.getParent();\r\n            }\r\n            var referenceTypes = this.evaluateReferenceTypes(node);\r\n            if (referenceTypes) {\r\n                return this.internalFindSymbol(node, referenceTypes);\r\n            }\r\n            return null;\r\n        };\r\n        Symbols.prototype.matchesSymbol = function (node, symbol) {\r\n            if (!node) {\r\n                return null;\r\n            }\r\n            while (node.type === nodes.NodeType.Interpolation) {\r\n                node = node.getParent();\r\n            }\r\n            if (symbol.name.length !== node.length || symbol.name !== node.getText()) {\r\n                return false;\r\n            }\r\n            var referenceTypes = this.evaluateReferenceTypes(node);\r\n            if (!referenceTypes || referenceTypes.indexOf(symbol.type) === -1) {\r\n                return false;\r\n            }\r\n            var nodeSymbol = this.internalFindSymbol(node, referenceTypes);\r\n            return nodeSymbol === symbol;\r\n        };\r\n        Symbols.prototype.findSymbol = function (name, type, offset) {\r\n            var scope = this.global.findScope(offset);\r\n            while (scope) {\r\n                var symbol = scope.getSymbol(name, type);\r\n                if (symbol) {\r\n                    return symbol;\r\n                }\r\n                scope = scope.parent;\r\n            }\r\n            return null;\r\n        };\r\n        Symbols.isCssVariable = function (identifier) {\r\n            return /^--/.test(identifier.getText());\r\n        };\r\n        return Symbols;\r\n    }());\r\n    exports.Symbols = Symbols;\r\n});\r\n\ndefine(\"vs/languages/css/common/services/languageFacts\", [\"require\", \"exports\", 'vs/languages/css/common/parser/cssNodes', 'vs/languages/css/common/services/browsers', 'vs/base/common/strings'], function (require, exports, nodes, browsers, strings) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    exports.colors = {\r\n        aliceblue: '#f0f8ff',\r\n        antiquewhite: '#faebd7',\r\n        aqua: '#00ffff',\r\n        aquamarine: '#7fffd4',\r\n        azure: '#f0ffff',\r\n        beige: '#f5f5dc',\r\n        bisque: '#ffe4c4',\r\n        black: '#000000',\r\n        blanchedalmond: '#ffebcd',\r\n        blue: '#0000ff',\r\n        blueviolet: '#8a2be2',\r\n        brown: '#a52a2a',\r\n        burlywood: '#deb887',\r\n        cadetblue: '#5f9ea0',\r\n        chartreuse: '#7fff00',\r\n        chocolate: '#d2691e',\r\n        coral: '#ff7f50',\r\n        cornflowerblue: '#6495ed',\r\n        cornsilk: '#fff8dc',\r\n        crimson: '#dc143c',\r\n        cyan: '#00ffff',\r\n        darkblue: '#00008b',\r\n        darkcyan: '#008b8b',\r\n        darkgoldenrod: '#b8860b',\r\n        darkgray: '#a9a9a9',\r\n        darkgrey: '#a9a9a9',\r\n        darkgreen: '#006400',\r\n        darkkhaki: '#bdb76b',\r\n        darkmagenta: '#8b008b',\r\n        darkolivegreen: '#556b2f',\r\n        darkorange: '#ff8c00',\r\n        darkorchid: '#9932cc',\r\n        darkred: '#8b0000',\r\n        darksalmon: '#e9967a',\r\n        darkseagreen: '#8fbc8f',\r\n        darkslateblue: '#483d8b',\r\n        darkslategray: '#2f4f4f',\r\n        darkslategrey: '#2f4f4f',\r\n        darkturquoise: '#00ced1',\r\n        darkviolet: '#9400d3',\r\n        deeppink: '#ff1493',\r\n        deepskyblue: '#00bfff',\r\n        dimgray: '#696969',\r\n        dimgrey: '#696969',\r\n        dodgerblue: '#1e90ff',\r\n        firebrick: '#b22222',\r\n        floralwhite: '#fffaf0',\r\n        forestgreen: '#228b22',\r\n        fuchsia: '#ff00ff',\r\n        gainsboro: '#dcdcdc',\r\n        ghostwhite: '#f8f8ff',\r\n        gold: '#ffd700',\r\n        goldenrod: '#daa520',\r\n        gray: '#808080',\r\n        grey: '#808080',\r\n        green: '#008000',\r\n        greenyellow: '#adff2f',\r\n        honeydew: '#f0fff0',\r\n        hotpink: '#ff69b4',\r\n        indianred: '#cd5c5c',\r\n        indigo: '#4b0082',\r\n        ivory: '#fffff0',\r\n        khaki: '#f0e68c',\r\n        lavender: '#e6e6fa',\r\n        lavenderblush: '#fff0f5',\r\n        lawngreen: '#7cfc00',\r\n        lemonchiffon: '#fffacd',\r\n        lightblue: '#add8e6',\r\n        lightcoral: '#f08080',\r\n        lightcyan: '#e0ffff',\r\n        lightgoldenrodyellow: '#fafad2',\r\n        lightgray: '#d3d3d3',\r\n        lightgrey: '#d3d3d3',\r\n        lightgreen: '#90ee90',\r\n        lightpink: '#ffb6c1',\r\n        lightsalmon: '#ffa07a',\r\n        lightseagreen: '#20b2aa',\r\n        lightskyblue: '#87cefa',\r\n        lightslategray: '#778899',\r\n        lightslategrey: '#778899',\r\n        lightsteelblue: '#b0c4de',\r\n        lightyellow: '#ffffe0',\r\n        lime: '#00ff00',\r\n        limegreen: '#32cd32',\r\n        linen: '#faf0e6',\r\n        magenta: '#ff00ff',\r\n        maroon: '#800000',\r\n        mediumaquamarine: '#66cdaa',\r\n        mediumblue: '#0000cd',\r\n        mediumorchid: '#ba55d3',\r\n        mediumpurple: '#9370d8',\r\n        mediumseagreen: '#3cb371',\r\n        mediumslateblue: '#7b68ee',\r\n        mediumspringgreen: '#00fa9a',\r\n        mediumturquoise: '#48d1cc',\r\n        mediumvioletred: '#c71585',\r\n        midnightblue: '#191970',\r\n        mintcream: '#f5fffa',\r\n        mistyrose: '#ffe4e1',\r\n        moccasin: '#ffe4b5',\r\n        navajowhite: '#ffdead',\r\n        navy: '#000080',\r\n        oldlace: '#fdf5e6',\r\n        olive: '#808000',\r\n        olivedrab: '#6b8e23',\r\n        orange: '#ffa500',\r\n        orangered: '#ff4500',\r\n        orchid: '#da70d6',\r\n        palegoldenrod: '#eee8aa',\r\n        palegreen: '#98fb98',\r\n        paleturquoise: '#afeeee',\r\n        palevioletred: '#d87093',\r\n        papayawhip: '#ffefd5',\r\n        peachpuff: '#ffdab9',\r\n        peru: '#cd853f',\r\n        pink: '#ffc0cb',\r\n        plum: '#dda0dd',\r\n        powderblue: '#b0e0e6',\r\n        purple: '#800080',\r\n        red: '#ff0000',\r\n        rebeccapurple: '#663399',\r\n        rosybrown: '#bc8f8f',\r\n        royalblue: '#4169e1',\r\n        saddlebrown: '#8b4513',\r\n        salmon: '#fa8072',\r\n        sandybrown: '#f4a460',\r\n        seagreen: '#2e8b57',\r\n        seashell: '#fff5ee',\r\n        sienna: '#a0522d',\r\n        silver: '#c0c0c0',\r\n        skyblue: '#87ceeb',\r\n        slateblue: '#6a5acd',\r\n        slategray: '#708090',\r\n        slategrey: '#708090',\r\n        snow: '#fffafa',\r\n        springgreen: '#00ff7f',\r\n        steelblue: '#4682b4',\r\n        tan: '#d2b48c',\r\n        teal: '#008080',\r\n        thistle: '#d8bfd8',\r\n        tomato: '#ff6347',\r\n        turquoise: '#40e0d0',\r\n        violet: '#ee82ee',\r\n        wheat: '#f5deb3',\r\n        white: '#ffffff',\r\n        whitesmoke: '#f5f5f5',\r\n        yellow: '#ffff00',\r\n        yellowgreen: '#9acd32'\r\n    };\r\n    exports.colorKeywords = {\r\n        'currentColor': 'The value of the \\'color\\' property. The computed value of the \\'currentColor\\' keyword is the computed value of the \\'color\\' property. If the \\'currentColor\\' keyword is set on the \\'color\\' property itself, it is treated as \\'color:inherit\\' at parse time.',\r\n        'transparent': 'Fully transparent. This keyword can be considered a shorthand for rgba(0,0,0,0) which is its computed value.',\r\n    };\r\n    exports.positionKeywords = {\r\n        'bottom': 'Computes to ‘100%’ for the vertical position if one or two values are given, otherwise specifies the bottom edge as the origin for the next offset.',\r\n        'center': 'Computes to ‘50%’ (‘left 50%’) for the horizontal position if the horizontal position is not otherwise specified, or ‘50%’ (‘top 50%’) for the vertical position if it is.',\r\n        'left': 'Computes to ‘0%’ for the horizontal position if one or two values are given, otherwise specifies the left edge as the origin for the next offset.',\r\n        'right': 'Computes to ‘100%’ for the horizontal position if one or two values are given, otherwise specifies the right edge as the origin for the next offset.',\r\n        'top': 'Computes to ‘0%’ for the vertical position if one or two values are given, otherwise specifies the top edge as the origin for the next offset.'\r\n    };\r\n    exports.repeatStyleKeywords = {\r\n        'no-repeat': 'Placed once and not repeated in this direction.',\r\n        'repeat': 'Repeated in this direction as often as needed to cover the background painting area.',\r\n        'repeat-x': 'Computes to ‘repeat no-repeat’.',\r\n        'repeat-y': 'Computes to ‘no-repeat repeat’.',\r\n        'round': 'Repeated as often as will fit within the background positioning area. If it doesn’t fit a whole number of times, it is rescaled so that it does.',\r\n        'space': 'Repeated as often as will fit within the background positioning area without being clipped and then the images are spaced out to fill the area.'\r\n    };\r\n    exports.lineStyleKeywords = {\r\n        'dashed': 'A series of square-ended dashes.',\r\n        'dotted': 'A series of round dots.',\r\n        'double': 'Two parallel solid lines with some space between them.',\r\n        'groove': 'Looks as if it were carved in the canvas.',\r\n        'hidden': 'Same as ‘none’, but has different behavior in the border conflict resolution rules for border-collapsed tables.',\r\n        'inset': 'Looks as if the content on the inside of the border is sunken into the canvas.',\r\n        'none': 'No border. Color and width are ignored.',\r\n        'outset': 'Looks as if the content on the inside of the border is coming out of the canvas.',\r\n        'ridge': 'Looks as if it were coming out of the canvas.',\r\n        'solid': 'A single line segment.'\r\n    };\r\n    exports.lineWidthKeywords = ['medium', 'thick', 'thin'];\r\n    exports.boxKeywords = {\r\n        'border-box': 'The background is painted within (clipped to) the border box.',\r\n        'content-box': 'The background is painted within (clipped to) the content box.',\r\n        'padding-box': 'The background is painted within (clipped to) the padding box.'\r\n    };\r\n    exports.geometryBoxKeywords = {\r\n        'margin-box': 'Uses the margin box as reference box.',\r\n        'fill-box': 'Uses the object bounding box as reference box.',\r\n        'stroke-box': 'Uses the stroke bounding box as reference box.',\r\n        'view-box': 'Uses the nearest SVG viewport as reference box.'\r\n    };\r\n    exports.cssWideKeywords = {\r\n        'initial': 'Represents the value specified as the property’s initial value.',\r\n        'inherit': 'Represents the computed value of the property on the element’s parent.',\r\n        'unset': 'Acts as either `inherit` or `initial`, depending on whether the property is inherited or not.'\r\n    };\r\n    exports.imageFunctions = {\r\n        'url()': 'Reference an image file by URL',\r\n        'image()': 'Provide image fallbacks and annotations.',\r\n        '-webkit-image-set()': 'Provide multiple resolutions. Remember to use unprefixed image-set() in addition.',\r\n        'image-set()': 'Provide multiple resolutions of an image and let the UA decide which is most appropriate in a given situation.',\r\n        '-moz-element()': 'Use an element in the document as an image. Remember to use unprefixed element() in addition.',\r\n        'element()': 'Use an element in the document as an image.',\r\n        'cross-fade()': 'Indicates the two images to be combined and how far along in the transition the combination is.',\r\n        '-webkit-gradient()': 'Deprecated. Use modern linear-gradient() or radial-gradient() instead.',\r\n        '-webkit-linear-gradient()': 'Linear gradient. Remember to use unprefixed version in addition.',\r\n        '-moz-linear-gradient()': 'Linear gradient. Remember to use unprefixed version in addition.',\r\n        '-o-linear-gradient()': 'Linear gradient. Remember to use unprefixed version in addition.',\r\n        'linear-gradient()': 'A linear gradient is created by specifying a straight gradient line, and then several colors placed along that line.',\r\n        '-webkit-repeating-linear-gradient()': 'Repeating Linear gradient. Remember to use unprefixed version in addition.',\r\n        '-moz-repeating-linear-gradient()': 'Repeating Linear gradient. Remember to use unprefixed version in addition.',\r\n        '-o-repeating-linear-gradient()': 'RepeatingLinear gradient. Remember to use unprefixed version in addition.',\r\n        'repeating-linear-gradient()': 'Same as linear-gradient, except the color-stops are repeated infinitely in both directions, with their positions shifted by multiples of the difference between the last specified color-stop’s position and the first specified color-stop’s position.',\r\n        '-webkit-radial-gradient()': 'Radial gradient. Remember to use unprefixed version in addition.',\r\n        '-moz-radial-gradient()': 'Radial gradient. Remember to use unprefixed version in addition.',\r\n        'radial-gradient()': 'Colors emerge from a single point and smoothly spread outward in a circular or elliptical shape.',\r\n        '-webkit-repeating-radial-gradient()': 'Repeating radial gradient. Remember to use unprefixed version in addition.',\r\n        '-moz-repeating-radial-gradient()': 'Repeating radial gradient. Remember to use unprefixed version in addition.',\r\n        'repeating-radial-gradient()': 'Same as radial-gradient, except the color-stops are repeated infinitely in both directions, with their positions shifted by multiples of the difference between the last specified color-stop’s position and the first specified color-stop’s position.'\r\n    };\r\n    exports.transitionTimingFunctions = {\r\n        'ease': 'Equivalent to cubic-bezier(0.25, 0.1, 0.25, 1.0).',\r\n        'ease-in': 'Equivalent to cubic-bezier(0.42, 0, 1.0, 1.0).',\r\n        'ease-in-out': 'Equivalent to cubic-bezier(0.42, 0, 0.58, 1.0).',\r\n        'ease-out': 'Equivalent to cubic-bezier(0, 0, 0.58, 1.0).',\r\n        'linear': 'Equivalent to cubic-bezier(0.0, 0.0, 1.0, 1.0).',\r\n        'step-end': 'Equivalent to steps(1, end).',\r\n        'step-start': 'Equivalent to steps(1, start).',\r\n        'steps()': 'The first parameter specifies the number of intervals in the function. The second parameter, which is optional, is either the value “start” or “end”.',\r\n        'cubic-bezier()': 'Specifies a cubic-bezier curve. The four values specify points P1 and P2  of the curve as (x1, y1, x2, y2).',\r\n        'cubic-bezier(0.6, -0.28, 0.735, 0.045)': 'Ease-in Back. Overshoots.',\r\n        'cubic-bezier(0.68, -0.55, 0.265, 1.55)': 'Ease-in-out Back. Overshoots.',\r\n        'cubic-bezier(0.175, 0.885, 0.32, 1.275)': 'Ease-out Back. Overshoots.',\r\n        'cubic-bezier(0.6, 0.04, 0.98, 0.335)': 'Ease-in Circular. Based on half circle.',\r\n        'cubic-bezier(0.785, 0.135, 0.15, 0.86)': 'Ease-in-out Circular. Based on half circle.',\r\n        'cubic-bezier(0.075, 0.82, 0.165, 1)': 'Ease-out Circular. Based on half circle.',\r\n        'cubic-bezier(0.55, 0.055, 0.675, 0.19)': 'Ease-in Cubic. Based on power of three.',\r\n        'cubic-bezier(0.645, 0.045, 0.355, 1)': 'Ease-in-out Cubic. Based on power of three.',\r\n        'cubic-bezier(0.215, 0.610, 0.355, 1)': 'Ease-out Cubic. Based on power of three.',\r\n        'cubic-bezier(0.95, 0.05, 0.795, 0.035)': 'Ease-in Exponential. Based on two to the power ten.',\r\n        'cubic-bezier(1, 0, 0, 1)': 'Ease-in-out Exponential. Based on two to the power ten.',\r\n        'cubic-bezier(0.19, 1, 0.22, 1)': 'Ease-out Exponential. Based on two to the power ten.',\r\n        'cubic-bezier(0.47, 0, 0.745, 0.715)': 'Ease-in Sine.',\r\n        'cubic-bezier(0.445, 0.05, 0.55, 0.95)': 'Ease-in-out Sine.',\r\n        'cubic-bezier(0.39, 0.575, 0.565, 1)': 'Ease-out Sine.',\r\n        'cubic-bezier(0.55, 0.085, 0.68, 0.53)': 'Ease-in Quadratic. Based on power of two.',\r\n        'cubic-bezier(0.455, 0.03, 0.515, 0.955)': 'Ease-in-out Quadratic. Based on power of two.',\r\n        'cubic-bezier(0.25, 0.46, 0.45, 0.94)': 'Ease-out Quadratic. Based on power of two.',\r\n        'cubic-bezier(0.895, 0.03, 0.685, 0.22)': 'Ease-in Quartic. Based on power of four.',\r\n        'cubic-bezier(0.77, 0, 0.175, 1)': 'Ease-in-out Quartic. Based on power of four.',\r\n        'cubic-bezier(0.165, 0.84, 0.44, 1)': 'Ease-out Quartic. Based on power of four.',\r\n        'cubic-bezier(0.755, 0.05, 0.855, 0.06)': 'Ease-in Quintic. Based on power of five.',\r\n        'cubic-bezier(0.86, 0, 0.07, 1)': 'Ease-in-out Quintic. Based on power of five.',\r\n        'cubic-bezier(0.23, 1, 0.320, 1)': 'Ease-out Quintic. Based on power of five.'\r\n    };\r\n    exports.basicShapeFunctions = {\r\n        'circle()': 'Defines a circle.',\r\n        'ellipse()': 'Defines an ellipse.',\r\n        'inset()': 'Defines an inset rectangle.',\r\n        'polygon()': 'Defines a polygon.'\r\n    };\r\n    exports.units = {\r\n        'length': ['em', 'rem', 'ex', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'vw', 'vh', 'vmin', 'vmax'],\r\n        'angle': ['deg', 'rad', 'grad', 'turn'],\r\n        'time': ['ms', 's'],\r\n        'frequency': ['Hz', 'kHz'],\r\n        'resolution': ['dpi', 'dpcm', 'dppx'],\r\n        'percentage': ['%']\r\n    };\r\n    exports.html5Tags = ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption',\r\n        'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer',\r\n        'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link',\r\n        'main', 'map', 'mark', 'menu', 'menuitem', 'meta', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q',\r\n        'rb', 'rp', 'rt', 'rtc', 'ruby', 's', 'samp', 'script', 'section', 'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td',\r\n        'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr'];\r\n    exports.svgElements = ['circle', 'clipPath', 'cursor', 'defs', 'desc', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting',\r\n        'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\r\n        'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter', 'foreignObject', 'g', 'hatch', 'hatchpath', 'image', 'line', 'linearGradient',\r\n        'marker', 'mask', 'mesh', 'meshpatch', 'meshrow', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'set', 'solidcolor', 'stop', 'svg', 'switch',\r\n        'symbol', 'text', 'textPath', 'tspan', 'use', 'view'];\r\n    function isColorConstructor(node) {\r\n        var name = node.getName();\r\n        if (!name) {\r\n            return false;\r\n        }\r\n        return strings.equalsIgnoreCase(name, 'rgb') ||\r\n            strings.equalsIgnoreCase(name, 'rgba') ||\r\n            strings.equalsIgnoreCase(name, 'hsl') ||\r\n            strings.equalsIgnoreCase(name, 'hsla');\r\n    }\r\n    exports.isColorConstructor = isColorConstructor;\r\n    /**\r\n     * Returns true if the node is a color value - either\r\n     * defined a hex number, as rgb or rgba function, or\r\n     * as color name.\r\n     */\r\n    function isColorValue(node) {\r\n        if (node.type === nodes.NodeType.HexColorValue) {\r\n            return true;\r\n        }\r\n        else if (node.type === nodes.NodeType.Function) {\r\n            return this.isColorConstructor(node);\r\n        }\r\n        else if (node.type === nodes.NodeType.Identifier) {\r\n            if (node.parent && node.parent.type !== nodes.NodeType.Term) {\r\n                return false;\r\n            }\r\n            var candidateColor = node.getText().toLowerCase();\r\n            if (candidateColor === 'none') {\r\n                return false;\r\n            }\r\n            if (exports.colors[candidateColor]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    exports.isColorValue = isColorValue;\r\n    /**\r\n     * Returns true if the given name is a known property.\r\n     */\r\n    function isKnownProperty(name) {\r\n        if (!name) {\r\n            return false;\r\n        }\r\n        else {\r\n            name = name.toLowerCase();\r\n            return getProperties().hasOwnProperty(name);\r\n        }\r\n    }\r\n    exports.isKnownProperty = isKnownProperty;\r\n    function isCommonValue(entry) {\r\n        return entry.browsers.count > 1;\r\n    }\r\n    exports.isCommonValue = isCommonValue;\r\n    function getPageBoxDirectives() {\r\n        return [\r\n            '@bottom-center', '@bottom-left', '@bottom-left-corner', '@bottom-right', '@bottom-right-corner',\r\n            '@left-bottom', '@left-middle', '@left-top', '@right-bottom', '@right-middle', '@right-top',\r\n            '@top-center', '@top-left', '@top-left-corner', '@top-right', '@top-right-corner'\r\n        ];\r\n    }\r\n    exports.getPageBoxDirectives = getPageBoxDirectives;\r\n    function getEntryDescription(entry) {\r\n        var desc = entry.description || '';\r\n        var browserLabel = this.getBrowserLabel(entry.browsers);\r\n        if (browserLabel) {\r\n            if (desc) {\r\n                desc = desc + '\\n';\r\n            }\r\n            desc = desc + '(' + browserLabel + ')';\r\n        }\r\n        return desc;\r\n    }\r\n    exports.getEntryDescription = getEntryDescription;\r\n    function getBrowserLabel(b) {\r\n        var result = '';\r\n        if (!b || b.all || b.count === 0) {\r\n            return null;\r\n        }\r\n        for (var curr in exports.browserNames) {\r\n            if (typeof b[curr] === 'string') {\r\n                if (result.length > 0) {\r\n                    result = result + ', ';\r\n                }\r\n                result = result + exports.browserNames[curr];\r\n                var version = b[curr];\r\n                if (version.length > 0) {\r\n                    result = result + ' ' + version;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    exports.getBrowserLabel = getBrowserLabel;\r\n    function evalBrowserEntry(browsers) {\r\n        var browserEntry = { all: false, count: 0, onCodeComplete: false };\r\n        var count = 0;\r\n        if (browsers) {\r\n            browsers.split(',').forEach(function (s) {\r\n                s = s.trim();\r\n                if (s === 'all') {\r\n                    browserEntry.all = true;\r\n                    count = Number.MAX_VALUE;\r\n                }\r\n                else if (s !== 'none') {\r\n                    for (var key in exports.browserNames) {\r\n                        if (s.indexOf(key) === 0) {\r\n                            browserEntry[key] = s.substring(key.length).trim();\r\n                            count++;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            browserEntry.all = true;\r\n            count = Number.MAX_VALUE;\r\n        }\r\n        browserEntry.count = count;\r\n        browserEntry.onCodeComplete = count > 0; // to be refined\r\n        return browserEntry;\r\n    }\r\n    var ValueImpl = (function () {\r\n        function ValueImpl(data) {\r\n            this.data = data;\r\n        }\r\n        Object.defineProperty(ValueImpl.prototype, \"name\", {\r\n            get: function () {\r\n                return this.data.name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ValueImpl.prototype, \"description\", {\r\n            get: function () {\r\n                return this.data.desc || browsers.descriptions[this.data.name];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(ValueImpl.prototype, \"browsers\", {\r\n            get: function () {\r\n                if (!this.browserEntry) {\r\n                    this.browserEntry = evalBrowserEntry(this.data.browsers);\r\n                }\r\n                return this.browserEntry;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return ValueImpl;\r\n    }());\r\n    var EntryImpl = (function () {\r\n        function EntryImpl(data) {\r\n            this.data = data;\r\n        }\r\n        Object.defineProperty(EntryImpl.prototype, \"name\", {\r\n            get: function () {\r\n                return this.data.name;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(EntryImpl.prototype, \"description\", {\r\n            get: function () {\r\n                return this.data.desc || browsers.descriptions[this.data.name];\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(EntryImpl.prototype, \"browsers\", {\r\n            get: function () {\r\n                if (!this.browserEntry) {\r\n                    this.browserEntry = evalBrowserEntry(this.data.browsers);\r\n                }\r\n                return this.browserEntry;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(EntryImpl.prototype, \"restrictions\", {\r\n            get: function () {\r\n                if (this.data.restriction) {\r\n                    return this.data.restriction.split(',').map(function (s) { return s.trim(); });\r\n                }\r\n                else {\r\n                    return [];\r\n                }\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(EntryImpl.prototype, \"values\", {\r\n            get: function () {\r\n                if (!this.data.values) {\r\n                    return [];\r\n                }\r\n                if (!Array.isArray(this.data.values)) {\r\n                    return [new ValueImpl(this.data.values.value)];\r\n                }\r\n                return this.data.values.map(function (v) {\r\n                    return new ValueImpl(v);\r\n                });\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return EntryImpl;\r\n    }());\r\n    var propertySet;\r\n    var properties = browsers.data.css.properties;\r\n    function getProperties() {\r\n        if (!propertySet) {\r\n            propertySet = {};\r\n            for (var i = 0, len = properties.length; i < len; i++) {\r\n                var rawEntry = properties[i];\r\n                propertySet[rawEntry.name] = new EntryImpl(rawEntry);\r\n            }\r\n        }\r\n        return propertySet;\r\n    }\r\n    exports.getProperties = getProperties;\r\n    var atDirectives = browsers.data.css.atdirectives;\r\n    var atDirectiveList;\r\n    function getAtDirectives() {\r\n        if (!atDirectiveList) {\r\n            atDirectiveList = [];\r\n            for (var i = 0, len = atDirectives.length; i < len; i++) {\r\n                var rawEntry = atDirectives[i];\r\n                atDirectiveList.push(new EntryImpl(rawEntry));\r\n            }\r\n        }\r\n        return atDirectiveList;\r\n    }\r\n    exports.getAtDirectives = getAtDirectives;\r\n    var pseudoElements = browsers.data.css.pseudoelements;\r\n    var pseudoElementList;\r\n    function getPseudoElements() {\r\n        if (!pseudoElementList) {\r\n            pseudoElementList = [];\r\n            for (var i = 0, len = pseudoElements.length; i < len; i++) {\r\n                var rawEntry = pseudoElements[i];\r\n                pseudoClassesList.push(new EntryImpl(rawEntry));\r\n            }\r\n        }\r\n        return pseudoElementList;\r\n    }\r\n    exports.getPseudoElements = getPseudoElements;\r\n    var pseudoClasses = browsers.data.css.pseudoclasses;\r\n    var pseudoClassesList;\r\n    function getPseudoClasses() {\r\n        if (!pseudoClassesList) {\r\n            pseudoClassesList = [];\r\n            for (var i = 0, len = pseudoClasses.length; i < len; i++) {\r\n                var rawEntry = pseudoClasses[i];\r\n                pseudoClassesList.push(new EntryImpl(rawEntry));\r\n            }\r\n        }\r\n        return pseudoClassesList;\r\n    }\r\n    exports.getPseudoClasses = getPseudoClasses;\r\n    exports.browserNames = {\r\n        E: 'Edge',\r\n        FF: 'Firefox',\r\n        S: 'Safari',\r\n        C: 'Chrome',\r\n        IE: 'IE',\r\n        O: 'Opera'\r\n    };\r\n});\r\n\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\ndefine(\"vs/languages/css/common/services/selectorPrinting\", [\"require\", \"exports\", 'vs/languages/css/common/parser/cssNodes', 'vs/base/common/strings'], function (require, exports, nodes, strings) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    var Element = (function () {\r\n        function Element() {\r\n        }\r\n        Element.prototype.addChild = function (child) {\r\n            if (child instanceof Element) {\r\n                child.parent = this;\r\n            }\r\n            if (!this.children) {\r\n                this.children = [];\r\n            }\r\n            this.children.push(child);\r\n        };\r\n        Element.prototype.findRoot = function () {\r\n            var curr = this;\r\n            while (curr.parent && !(curr.parent instanceof RootElement)) {\r\n                curr = curr.parent;\r\n            }\r\n            return curr;\r\n        };\r\n        Element.prototype.removeChild = function (child) {\r\n            if (this.children) {\r\n                var index = this.children.indexOf(child);\r\n                if (index !== -1) {\r\n                    this.children.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        Element.prototype.addAttr = function (name, value) {\r\n            if (!this.attributes) {\r\n                this.attributes = {};\r\n            }\r\n            if (this.attributes.hasOwnProperty(name)) {\r\n                this.attributes[name] += ' ' + value;\r\n            }\r\n            else {\r\n                this.attributes[name] = value;\r\n            }\r\n        };\r\n        Element.prototype.clone = function (cloneChildren) {\r\n            if (cloneChildren === void 0) { cloneChildren = true; }\r\n            var elem = new Element();\r\n            elem.name = this.name;\r\n            if (this.attributes) {\r\n                elem.attributes = {};\r\n                for (var key in this.attributes) {\r\n                    elem.addAttr(key, this.attributes[key]);\r\n                }\r\n            }\r\n            if (cloneChildren && this.children) {\r\n                elem.children = [];\r\n                for (var index = 0; index < this.children.length; index++) {\r\n                    elem.addChild(this.children[index].clone());\r\n                }\r\n            }\r\n            return elem;\r\n        };\r\n        Element.prototype.cloneWithParent = function () {\r\n            var clone = this.clone(false);\r\n            if (this.parent && !(this.parent instanceof RootElement)) {\r\n                var parentClone = this.parent.cloneWithParent();\r\n                parentClone.addChild(clone);\r\n            }\r\n            return clone;\r\n        };\r\n        return Element;\r\n    }());\r\n    exports.Element = Element;\r\n    var RootElement = (function (_super) {\r\n        __extends(RootElement, _super);\r\n        function RootElement() {\r\n            _super.apply(this, arguments);\r\n        }\r\n        return RootElement;\r\n    }(Element));\r\n    exports.RootElement = RootElement;\r\n    var LabelElement = (function (_super) {\r\n        __extends(LabelElement, _super);\r\n        function LabelElement(label) {\r\n            _super.call(this);\r\n            this.name = label;\r\n        }\r\n        return LabelElement;\r\n    }(Element));\r\n    exports.LabelElement = LabelElement;\r\n    var HtmlPrinter = (function () {\r\n        function HtmlPrinter(quote) {\r\n            this.quote = quote;\r\n            // empty\r\n        }\r\n        HtmlPrinter.prototype.print = function (element) {\r\n            if (element instanceof RootElement) {\r\n                return this.doPrint(element.children);\r\n            }\r\n            else {\r\n                return this.doPrint([element]);\r\n            }\r\n        };\r\n        HtmlPrinter.prototype.doPrint = function (elements) {\r\n            var root = { children: [] }, parent = root;\r\n            while (elements.length > 0) {\r\n                var element = elements.shift(), content = this.doPrintElement(element);\r\n                parent.children.push(content);\r\n                if (element.children) {\r\n                    elements.push.apply(elements, element.children);\r\n                    parent = content;\r\n                }\r\n            }\r\n            return root.children;\r\n        };\r\n        HtmlPrinter.prototype.doPrintElement = function (element) {\r\n            var _this = this;\r\n            // special case: a simple label\r\n            if (element instanceof LabelElement) {\r\n                return {\r\n                    tagName: 'ul',\r\n                    children: [{\r\n                            tagName: 'li',\r\n                            children: [{\r\n                                    tagName: 'span',\r\n                                    className: 'label',\r\n                                    text: element.name\r\n                                }]\r\n                        }]\r\n                };\r\n            }\r\n            // the real deal\r\n            var children = [{\r\n                    isText: true,\r\n                    text: '<'\r\n                }];\r\n            // element name\r\n            if (element.name) {\r\n                children.push({\r\n                    tagName: 'span',\r\n                    className: 'name',\r\n                    text: element.name\r\n                });\r\n            }\r\n            else {\r\n                children.push({\r\n                    tagName: 'span',\r\n                    text: 'element'\r\n                });\r\n            }\r\n            // attributes\r\n            if (element.attributes) {\r\n                Object.keys(element.attributes).forEach(function (attr) {\r\n                    children.push({\r\n                        isText: true,\r\n                        text: ' '\r\n                    });\r\n                    children.push({\r\n                        tagName: 'span',\r\n                        className: 'key',\r\n                        text: attr\r\n                    });\r\n                    var value = element.attributes[attr];\r\n                    if (value) {\r\n                        children.push({\r\n                            isText: true,\r\n                            text: '='\r\n                        });\r\n                        children.push({\r\n                            tagName: 'span',\r\n                            className: 'value',\r\n                            text: quotes.ensure(value, _this.quote)\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            children.push({\r\n                isText: true,\r\n                text: '>'\r\n            });\r\n            return {\r\n                tagName: 'ul',\r\n                children: [{\r\n                        tagName: 'li',\r\n                        children: children\r\n                    }]\r\n            };\r\n        };\r\n        return HtmlPrinter;\r\n    }());\r\n    var quotes;\r\n    (function (quotes) {\r\n        function ensure(value, which) {\r\n            return which + remove(value) + which;\r\n        }\r\n        quotes.ensure = ensure;\r\n        function remove(value) {\r\n            value = strings.trim(value, '\\'');\r\n            value = strings.trim(value, '\"');\r\n            return value;\r\n        }\r\n        quotes.remove = remove;\r\n    })(quotes || (quotes = {}));\r\n    function toElement(node, parentElement) {\r\n        var result = new Element();\r\n        node.getChildren().forEach(function (child) {\r\n            switch (child.type) {\r\n                case nodes.NodeType.SelectorCombinator:\r\n                    if (parentElement) {\r\n                        var segments = child.getText().split('&');\r\n                        if (segments.length === 1) {\r\n                            // should not happen\r\n                            result.name = segments[0];\r\n                            break;\r\n                        }\r\n                        result = parentElement.cloneWithParent();\r\n                        if (segments[0]) {\r\n                            var root = result.findRoot();\r\n                            root.name = segments[0] + root.name;\r\n                        }\r\n                        for (var i = 1; i < segments.length; i++) {\r\n                            if (i > 1) {\r\n                                var clone = parentElement.cloneWithParent();\r\n                                result.addChild(clone.findRoot());\r\n                                result = clone;\r\n                            }\r\n                            result.name += segments[i];\r\n                        }\r\n                    }\r\n                    break;\r\n                case nodes.NodeType.SelectorPlaceholder:\r\n                case nodes.NodeType.ElementNameSelector:\r\n                    var text = child.getText();\r\n                    result.name = text === '*' ? 'element' : text;\r\n                    break;\r\n                case nodes.NodeType.ClassSelector:\r\n                    result.addAttr('class', child.getText().substring(1));\r\n                    break;\r\n                case nodes.NodeType.IdentifierSelector:\r\n                    result.addAttr('id', child.getText().substring(1));\r\n                    break;\r\n                case nodes.NodeType.MixinDeclaration:\r\n                    result.addAttr('class', child.getName());\r\n                    break;\r\n                case nodes.NodeType.PseudoSelector:\r\n                    result.addAttr(child.getText(), strings.empty);\r\n                    break;\r\n                case nodes.NodeType.AttributeSelector:\r\n                    var expr = child.getChildren()[0];\r\n                    if (expr) {\r\n                        if (expr.getRight()) {\r\n                            var value;\r\n                            switch (expr.getOperator().getText()) {\r\n                                case '|=':\r\n                                    // excatly or followed by -words\r\n                                    value = strings.format('{0}-\\u2026', quotes.remove(expr.getRight().getText()));\r\n                                    break;\r\n                                case '^=':\r\n                                    // prefix\r\n                                    value = strings.format('{0}\\u2026', quotes.remove(expr.getRight().getText()));\r\n                                    break;\r\n                                case '$=':\r\n                                    // suffix\r\n                                    value = strings.format('\\u2026{0}', quotes.remove(expr.getRight().getText()));\r\n                                    break;\r\n                                case '~=':\r\n                                    // one of a list of words\r\n                                    value = strings.format(' \\u2026 {0} \\u2026 ', quotes.remove(expr.getRight().getText()));\r\n                                    break;\r\n                                case '*=':\r\n                                    // substring\r\n                                    value = strings.format('\\u2026{0}\\u2026', quotes.remove(expr.getRight().getText()));\r\n                                    break;\r\n                                default:\r\n                                    value = quotes.remove(expr.getRight().getText());\r\n                                    break;\r\n                            }\r\n                        }\r\n                        result.addAttr(expr.getLeft().getText(), value);\r\n                    }\r\n                    break;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    exports.toElement = toElement;\r\n    function simpleSelectorToHtml(node) {\r\n        var element = toElement(node);\r\n        var body = new HtmlPrinter('\"').print(element);\r\n        return {\r\n            tagName: 'span',\r\n            className: 'css-selector-hover',\r\n            children: body\r\n        };\r\n    }\r\n    exports.simpleSelectorToHtml = simpleSelectorToHtml;\r\n    var SelectorElementBuilder = (function () {\r\n        function SelectorElementBuilder(element) {\r\n            this.prev = null;\r\n            this.element = element;\r\n        }\r\n        SelectorElementBuilder.prototype.processSelector = function (selector) {\r\n            var _this = this;\r\n            var parentElement = null;\r\n            if (!(this.element instanceof RootElement)) {\r\n                if (selector.getChildren().some(function (c) { return c.hasChildren() && c.getChild(0).type === nodes.NodeType.SelectorCombinator; })) {\r\n                    var curr = this.element.findRoot();\r\n                    if (curr.parent instanceof RootElement) {\r\n                        parentElement = this.element;\r\n                        this.element = curr.parent;\r\n                        this.element.removeChild(curr);\r\n                        this.prev = null;\r\n                    }\r\n                }\r\n            }\r\n            selector.getChildren().forEach(function (selectorChild) {\r\n                if (selectorChild instanceof nodes.SimpleSelector) {\r\n                    if (_this.prev instanceof nodes.SimpleSelector) {\r\n                        var labelElement = new LabelElement('\\u2026');\r\n                        _this.element.addChild(labelElement);\r\n                        _this.element = labelElement;\r\n                    }\r\n                    else if (_this.prev && (_this.prev.matches('+') || _this.prev.matches('~'))) {\r\n                        _this.element = _this.element.parent;\r\n                    }\r\n                    if (_this.prev && _this.prev.matches('~')) {\r\n                        _this.element.addChild(toElement(selectorChild));\r\n                        _this.element.addChild(new LabelElement('\\u22EE'));\r\n                    }\r\n                    var thisElement = toElement(selectorChild, parentElement);\r\n                    var root = thisElement.findRoot();\r\n                    _this.element.addChild(root);\r\n                    _this.element = thisElement;\r\n                }\r\n                if (selectorChild instanceof nodes.SimpleSelector ||\r\n                    selectorChild.type === nodes.NodeType.SelectorCombinatorParent ||\r\n                    selectorChild.type === nodes.NodeType.SelectorCombinatorSibling ||\r\n                    selectorChild.type === nodes.NodeType.SelectorCombinatorAllSiblings) {\r\n                    _this.prev = selectorChild;\r\n                }\r\n            });\r\n        };\r\n        return SelectorElementBuilder;\r\n    }());\r\n    function isNewSelectorContext(node) {\r\n        switch (node.type) {\r\n            case nodes.NodeType.MixinDeclaration:\r\n            case nodes.NodeType.Stylesheet:\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n    function selectorToElement(node) {\r\n        var root = new RootElement();\r\n        var parentRuleSets = [];\r\n        if (node.getParent() instanceof nodes.RuleSet) {\r\n            var parent = node.getParent().getParent(); // parent of the selector's ruleset\r\n            while (parent && !isNewSelectorContext(parent)) {\r\n                if (parent instanceof nodes.RuleSet) {\r\n                    parentRuleSets.push(parent);\r\n                }\r\n                parent = parent.getParent();\r\n            }\r\n        }\r\n        var builder = new SelectorElementBuilder(root);\r\n        for (var i = parentRuleSets.length - 1; i >= 0; i--) {\r\n            var selector = parentRuleSets[i].getSelectors().getChild(0);\r\n            if (selector) {\r\n                builder.processSelector(selector);\r\n            }\r\n        }\r\n        builder.processSelector(node);\r\n        return root;\r\n    }\r\n    exports.selectorToElement = selectorToElement;\r\n    function selectorToHtml(node) {\r\n        var root = selectorToElement(node);\r\n        var body = new HtmlPrinter('\"').print(root);\r\n        return {\r\n            tagName: 'span',\r\n            className: 'css-selector-hover',\r\n            children: body\r\n        };\r\n    }\r\n    exports.selectorToHtml = selectorToHtml;\r\n});\r\n\ndefine(\"vs/languages/css/common/services/occurrences\", [\"require\", \"exports\", 'vs/languages/css/common/parser/cssNodes', 'vs/languages/css/common/parser/cssSymbols', 'vs/editor/common/modes'], function (require, exports, nodes, _symbols, modes_1) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    function findDeclaration(stylesheet, offset) {\r\n        var symbols = new _symbols.Symbols(stylesheet);\r\n        var node = nodes.getNodeAtOffset(stylesheet, offset);\r\n        if (!node) {\r\n            return null;\r\n        }\r\n        var symbol = symbols.findSymbolFromNode(node);\r\n        if (!symbol) {\r\n            return null;\r\n        }\r\n        return symbol.node;\r\n    }\r\n    exports.findDeclaration = findDeclaration;\r\n    function findOccurrences(stylesheet, offset) {\r\n        var result = [];\r\n        var node = nodes.getNodeAtOffset(stylesheet, offset);\r\n        if (!node || node.type === nodes.NodeType.Stylesheet || node.type === nodes.NodeType.Declarations) {\r\n            return result;\r\n        }\r\n        var symbols = new _symbols.Symbols(stylesheet);\r\n        var symbol = symbols.findSymbolFromNode(node);\r\n        var name = node.getText();\r\n        stylesheet.accept(function (candidate) {\r\n            if (symbol) {\r\n                if (symbols.matchesSymbol(candidate, symbol)) {\r\n                    result.push({\r\n                        kind: getKind(candidate),\r\n                        type: symbol.type,\r\n                        node: candidate\r\n                    });\r\n                    return false;\r\n                }\r\n            }\r\n            else if (node.type === candidate.type && node.length === candidate.length && name === candidate.getText()) {\r\n                // Same node type and data\r\n                result.push({\r\n                    kind: getKind(candidate),\r\n                    node: candidate,\r\n                    type: nodes.ReferenceType.Unknown\r\n                });\r\n            }\r\n            return true;\r\n        });\r\n        return result;\r\n    }\r\n    exports.findOccurrences = findOccurrences;\r\n    function getKind(node) {\r\n        if (node.type === nodes.NodeType.Selector) {\r\n            return modes_1.DocumentHighlightKind.Write;\r\n        }\r\n        if (node instanceof nodes.Identifier) {\r\n            if (node.parent && node.parent instanceof nodes.Property) {\r\n                if (_symbols.Symbols.isCssVariable(node)) {\r\n                    return modes_1.DocumentHighlightKind.Write;\r\n                }\r\n            }\r\n        }\r\n        if (node.parent) {\r\n            switch (node.parent.type) {\r\n                case nodes.NodeType.FunctionDeclaration:\r\n                case nodes.NodeType.MixinDeclaration:\r\n                case nodes.NodeType.Keyframe:\r\n                case nodes.NodeType.VariableDeclaration:\r\n                case nodes.NodeType.FunctionParameter:\r\n                    return modes_1.DocumentHighlightKind.Write;\r\n            }\r\n        }\r\n        return modes_1.DocumentHighlightKind.Read;\r\n    }\r\n});\r\n\n\ndefine(\"vs/nls!vs/languages/css/common/parser/cssErrors\",['vs/nls', 'vs/nls!vs/languages/css/common/cssWorker'], function(nls, data) { return nls.create(\"vs/languages/css/common/parser/cssErrors\", data); });\ndefine(\"vs/languages/css/common/parser/cssErrors\", [\"require\", \"exports\", 'vs/nls!vs/languages/css/common/parser/cssErrors'], function (require, exports, nls) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    var CSSIssueType = (function () {\r\n        function CSSIssueType(id, message) {\r\n            this.id = id;\r\n            this.message = message;\r\n        }\r\n        return CSSIssueType;\r\n    }());\r\n    exports.CSSIssueType = CSSIssueType;\r\n    exports.ParseError = {\r\n        NumberExpected: new CSSIssueType('css-numberexpected', nls.localize(0, null)),\r\n        ConditionExpected: new CSSIssueType('css-conditionexpected', nls.localize(1, null)),\r\n        RuleOrSelectorExpected: new CSSIssueType('css-ruleorselectorexpected', nls.localize(2, null)),\r\n        DotExpected: new CSSIssueType('css-dotexpected', nls.localize(3, null)),\r\n        ColonExpected: new CSSIssueType('css-colonexpected', nls.localize(4, null)),\r\n        SemiColonExpected: new CSSIssueType('css-semicolonexpected', nls.localize(5, null)),\r\n        TermExpected: new CSSIssueType('css-termexpected', nls.localize(6, null)),\r\n        ExpressionExpected: new CSSIssueType('css-expressionexpected', nls.localize(7, null)),\r\n        OperatorExpected: new CSSIssueType('css-operatorexpected', nls.localize(8, null)),\r\n        IdentifierExpected: new CSSIssueType('css-identifierexpected', nls.localize(9, null)),\r\n        PercentageExpected: new CSSIssueType('css-percentageexpected', nls.localize(10, null)),\r\n        URIOrStringExpected: new CSSIssueType('css-uriorstringexpected', nls.localize(11, null)),\r\n        URIExpected: new CSSIssueType('css-uriexpected', nls.localize(12, null)),\r\n        VariableNameExpected: new CSSIssueType('css-varnameexpected', nls.localize(13, null)),\r\n        VariableValueExpected: new CSSIssueType('css-varvalueexpected', nls.localize(14, null)),\r\n        PropertyValueExpected: new CSSIssueType('css-propertyvalueexpected', nls.localize(15, null)),\r\n        LeftCurlyExpected: new CSSIssueType('css-lcurlyexpected', nls.localize(16, null)),\r\n        RightCurlyExpected: new CSSIssueType('css-rcurlyexpected', nls.localize(17, null)),\r\n        LeftSquareBracketExpected: new CSSIssueType('css-rbracketexpected', nls.localize(18, null)),\r\n        RightSquareBracketExpected: new CSSIssueType('css-lbracketexpected', nls.localize(19, null)),\r\n        LeftParenthesisExpected: new CSSIssueType('css-lparentexpected', nls.localize(20, null)),\r\n        RightParenthesisExpected: new CSSIssueType('css-rparentexpected', nls.localize(21, null)),\r\n        CommaExpected: new CSSIssueType('css-commaexpected', nls.localize(22, null)),\r\n        PageDirectiveOrDeclarationExpected: new CSSIssueType('css-pagedirordeclexpected', nls.localize(23, null)),\r\n        UnknownAtRule: new CSSIssueType('css-unknownatrule', nls.localize(24, null)),\r\n        UnknownKeyword: new CSSIssueType('css-unknownkeyword', nls.localize(25, null)),\r\n        SelectorExpected: new CSSIssueType('css-selectorexpected', nls.localize(26, null)),\r\n        StringLiteralExpected: new CSSIssueType('css-stringliteralexpected', nls.localize(27, null)),\r\n    };\r\n});\r\n\ndefine(\"vs/languages/css/common/parser/cssParser\", [\"require\", \"exports\", 'vs/base/common/types', './cssScanner', './cssNodes', 'vs/languages/css/common/level', './cssErrors', 'vs/languages/css/common/services/languageFacts'], function (require, exports, types, scanner, nodes, _level, errors, languageFacts) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    /// <summary>\r\n    /// A parser for the css core specification. See for reference:\r\n    /// http://www.w3.org/TR/CSS21/syndata.html#tokenization\r\n    /// </summary>\r\n    var Parser = (function () {\r\n        function Parser(scnr) {\r\n            if (scnr === void 0) { scnr = new scanner.Scanner(); }\r\n            this.scanner = scnr;\r\n            this.token = null;\r\n            this.prevToken = null;\r\n        }\r\n        Parser.prototype.peek = function (type, text, ignoreCase) {\r\n            if (ignoreCase === void 0) { ignoreCase = true; }\r\n            if (type !== this.token.type) {\r\n                return false;\r\n            }\r\n            if (typeof text !== 'undefined') {\r\n                if (ignoreCase) {\r\n                    return text.toLowerCase() === this.token.text.toLowerCase();\r\n                }\r\n                else {\r\n                    return text === this.token.text;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        Parser.prototype.peekRegExp = function (type, regEx) {\r\n            if (type !== this.token.type) {\r\n                return false;\r\n            }\r\n            return regEx.test(this.token.text);\r\n        };\r\n        Parser.prototype.hasWhitespace = function () {\r\n            return this.prevToken && (this.prevToken.offset + this.prevToken.len !== this.token.offset);\r\n        };\r\n        Parser.prototype.consumeToken = function () {\r\n            this.prevToken = this.token;\r\n            this.token = this.scanner.scan();\r\n        };\r\n        Parser.prototype.mark = function () {\r\n            return {\r\n                prev: this.prevToken,\r\n                curr: this.token,\r\n                pos: this.scanner.pos()\r\n            };\r\n        };\r\n        Parser.prototype.restoreAtMark = function (mark) {\r\n            this.prevToken = mark.prev;\r\n            this.token = mark.curr;\r\n            this.scanner.goBackTo(mark.pos);\r\n        };\r\n        Parser.prototype.acceptOne = function (type, text, ignoreCase) {\r\n            if (ignoreCase === void 0) { ignoreCase = true; }\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (this.peek(type, text[i], ignoreCase)) {\r\n                    this.consumeToken();\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        Parser.prototype.accept = function (type, text, ignoreCase) {\r\n            if (ignoreCase === void 0) { ignoreCase = true; }\r\n            if (this.peek(type, text, ignoreCase)) {\r\n                this.consumeToken();\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        Parser.prototype.resync = function (resyncTokens, resyncStopTokens) {\r\n            while (true) {\r\n                if (resyncTokens && resyncTokens.indexOf(this.token.type) !== -1) {\r\n                    this.consumeToken();\r\n                    return true;\r\n                }\r\n                else if (resyncStopTokens && resyncStopTokens.indexOf(this.token.type) !== -1) {\r\n                    return true;\r\n                }\r\n                else {\r\n                    if (this.token.type === scanner.TokenType.EOF) {\r\n                        return false;\r\n                    }\r\n                    this.token = this.scanner.scan();\r\n                }\r\n            }\r\n        };\r\n        Parser.prototype.createNode = function (nodeType) {\r\n            return new nodes.Node(this.token.offset, this.token.len, nodeType);\r\n        };\r\n        Parser.prototype.create = function (ctor) {\r\n            return types.create(ctor, this.token.offset, this.token.len);\r\n        };\r\n        Parser.prototype.finish = function (node, error, resyncTokens, resyncStopTokens) {\r\n            // parseNumeric misuses error for boolean flagging (however the real error mustn't be a false)\r\n            // + nodelist offsets mustn't be modified, because there is a offset hack in rulesets for smartselection\r\n            if (!(node instanceof nodes.Nodelist)) {\r\n                if (error) {\r\n                    this.markError(node, error, resyncTokens, resyncStopTokens);\r\n                }\r\n                // set the node end position\r\n                if (this.prevToken !== null) {\r\n                    // length with more elements belonging together\r\n                    var prevEnd = this.prevToken.offset + this.prevToken.len;\r\n                    node.length = prevEnd > node.offset ? prevEnd - node.offset : 0; // offset is taken from current token, end from previous: Use 0 for empty nodes\r\n                }\r\n            }\r\n            return node;\r\n        };\r\n        Parser.prototype.markError = function (node, error, resyncTokens, resyncStopTokens) {\r\n            if (this.token !== this.lastErrorToken) {\r\n                node.addIssue(new nodes.Marker(node, error, _level.Level.Error, null, this.token.offset, this.token.len));\r\n                this.lastErrorToken = this.token;\r\n            }\r\n            if (resyncTokens || resyncStopTokens) {\r\n                this.resync(resyncTokens, resyncStopTokens);\r\n            }\r\n        };\r\n        Parser.prototype.parseStylesheet = function (model) {\r\n            var versionId = model.getVersionId();\r\n            var textProvider = function (offset, length) {\r\n                if (model.getVersionId() !== versionId) {\r\n                    throw new Error('Underlying model has changed, AST is no longer valid');\r\n                }\r\n                var range = model.getRangeFromOffsetAndLength(offset, length);\r\n                return model.getValueInRange(range);\r\n            };\r\n            return this.internalParse(model.getValue(), this._parseStylesheet, textProvider);\r\n        };\r\n        Parser.prototype.internalParse = function (input, parseFunc, textProvider) {\r\n            this.scanner.setSource(input);\r\n            this.token = this.scanner.scan();\r\n            var node = parseFunc.bind(this)();\r\n            if (node) {\r\n                if (textProvider) {\r\n                    node.textProvider = textProvider;\r\n                }\r\n                else {\r\n                    node.textProvider = function (offset, length) { return input.substr(offset, length); };\r\n                }\r\n            }\r\n            return node;\r\n        };\r\n        Parser.prototype._parseStylesheet = function () {\r\n            var node = this.create(nodes.Stylesheet);\r\n            node.addChild(this._parseCharset());\r\n            var inRecovery = false;\r\n            do {\r\n                var hasMatch = false;\r\n                do {\r\n                    hasMatch = false;\r\n                    var statement = this._parseStylesheetStatement();\r\n                    if (statement) {\r\n                        node.addChild(statement);\r\n                        hasMatch = true;\r\n                        inRecovery = false;\r\n                        if (!this.peek(scanner.TokenType.EOF) && this._needsSemicolonAfter(statement) && !this.accept(scanner.TokenType.SemiColon)) {\r\n                            this.markError(node, errors.ParseError.SemiColonExpected);\r\n                        }\r\n                    }\r\n                    while (this.accept(scanner.TokenType.SemiColon) || this.accept(scanner.TokenType.CDO) || this.accept(scanner.TokenType.CDC)) {\r\n                        // accept empty statements\r\n                        hasMatch = true;\r\n                        inRecovery = false;\r\n                    }\r\n                } while (hasMatch);\r\n                if (this.peek(scanner.TokenType.EOF)) {\r\n                    break;\r\n                }\r\n                if (!inRecovery) {\r\n                    if (this.peek(scanner.TokenType.AtKeyword)) {\r\n                        this.markError(node, errors.ParseError.UnknownAtRule);\r\n                    }\r\n                    else {\r\n                        this.markError(node, errors.ParseError.RuleOrSelectorExpected);\r\n                    }\r\n                    inRecovery = true;\r\n                }\r\n                this.consumeToken();\r\n            } while (!this.peek(scanner.TokenType.EOF));\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseStylesheetStatement = function () {\r\n            return this._parseRuleset(false)\r\n                || this._parseImport()\r\n                || this._parseMedia()\r\n                || this._parsePage()\r\n                || this._parseFontFace()\r\n                || this._parseKeyframe()\r\n                || this._parseViewPort()\r\n                || this._parseNamespace()\r\n                || this._parseDocument();\r\n        };\r\n        Parser.prototype._tryParseRuleset = function (isNested) {\r\n            var mark = this.mark();\r\n            if (this._parseSelector(isNested)) {\r\n                while (this.accept(scanner.TokenType.Comma) && this._parseSelector(isNested)) {\r\n                }\r\n                if (this.accept(scanner.TokenType.CurlyL)) {\r\n                    this.restoreAtMark(mark);\r\n                    return this._parseRuleset(isNested);\r\n                }\r\n            }\r\n            this.restoreAtMark(mark);\r\n            return null;\r\n        };\r\n        Parser.prototype._parseRuleset = function (isNested) {\r\n            if (isNested === void 0) { isNested = false; }\r\n            var node = this.create(nodes.RuleSet);\r\n            if (!node.getSelectors().addChild(this._parseSelector(isNested))) {\r\n                return null;\r\n            }\r\n            while (this.accept(scanner.TokenType.Comma) && node.getSelectors().addChild(this._parseSelector(isNested))) {\r\n            }\r\n            return this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\r\n        };\r\n        Parser.prototype._parseRuleSetDeclaration = function () {\r\n            return this._parseDeclaration();\r\n        };\r\n        Parser.prototype._needsSemicolonAfter = function (node) {\r\n            switch (node.type) {\r\n                case nodes.NodeType.Keyframe:\r\n                case nodes.NodeType.ViewPort:\r\n                case nodes.NodeType.Media:\r\n                case nodes.NodeType.Ruleset:\r\n                case nodes.NodeType.Namespace:\r\n                case nodes.NodeType.If:\r\n                case nodes.NodeType.For:\r\n                case nodes.NodeType.Each:\r\n                case nodes.NodeType.While:\r\n                case nodes.NodeType.MixinDeclaration:\r\n                case nodes.NodeType.FunctionDeclaration:\r\n                    return false;\r\n                case nodes.NodeType.VariableDeclaration:\r\n                case nodes.NodeType.ExtendsReference:\r\n                case nodes.NodeType.MixinContent:\r\n                case nodes.NodeType.ReturnStatement:\r\n                case nodes.NodeType.MediaQuery:\r\n                case nodes.NodeType.Debug:\r\n                case nodes.NodeType.Import:\r\n                    return true;\r\n                case nodes.NodeType.MixinReference:\r\n                    return !node.getContent();\r\n                case nodes.NodeType.Declaration:\r\n                    return !node.getNestedProperties();\r\n            }\r\n            return false;\r\n        };\r\n        Parser.prototype._parseDeclarations = function (parseDeclaration) {\r\n            var node = this.create(nodes.Declarations);\r\n            if (!this.accept(scanner.TokenType.CurlyL)) {\r\n                return null;\r\n            }\r\n            var decl = parseDeclaration();\r\n            while (node.addChild(decl)) {\r\n                if (this.peek(scanner.TokenType.CurlyR)) {\r\n                    break;\r\n                }\r\n                if (this._needsSemicolonAfter(decl) && !this.accept(scanner.TokenType.SemiColon)) {\r\n                    return this.finish(node, errors.ParseError.SemiColonExpected, [scanner.TokenType.SemiColon, scanner.TokenType.CurlyR]);\r\n                }\r\n                while (this.accept(scanner.TokenType.SemiColon)) {\r\n                }\r\n                decl = parseDeclaration();\r\n            }\r\n            if (!this.accept(scanner.TokenType.CurlyR)) {\r\n                return this.finish(node, errors.ParseError.RightCurlyExpected, [scanner.TokenType.CurlyR, scanner.TokenType.SemiColon]);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseBody = function (node, parseDeclaration) {\r\n            if (!node.setDeclarations(this._parseDeclarations(parseDeclaration))) {\r\n                return this.finish(node, errors.ParseError.LeftCurlyExpected, [scanner.TokenType.CurlyR, scanner.TokenType.SemiColon]);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseSelector = function (isNested) {\r\n            var node = this.create(nodes.Selector);\r\n            var hasContent = false;\r\n            if (isNested) {\r\n                // nested selectors can start with a combinator\r\n                hasContent = node.addChild(this._parseCombinator());\r\n            }\r\n            while (node.addChild(this._parseSimpleSelector())) {\r\n                hasContent = true;\r\n                node.addChild(this._parseCombinator()); // optional\r\n            }\r\n            return hasContent ? this.finish(node) : null;\r\n        };\r\n        Parser.prototype._parseDeclaration = function (resyncStopTokens) {\r\n            var node = this.create(nodes.Declaration);\r\n            if (!node.setProperty(this._parseProperty())) {\r\n                return null;\r\n            }\r\n            if (!this.accept(scanner.TokenType.Colon)) {\r\n                return this.finish(node, errors.ParseError.ColonExpected, [scanner.TokenType.Colon], resyncStopTokens);\r\n            }\r\n            node.colonPosition = this.prevToken.offset;\r\n            if (!node.setValue(this._parseExpr())) {\r\n                return this.finish(node, errors.ParseError.PropertyValueExpected);\r\n            }\r\n            node.addChild(this._parsePrio());\r\n            if (this.peek(scanner.TokenType.SemiColon)) {\r\n                node.semicolonPosition = this.token.offset; // not part of the declaration, but useful information for code assist\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._tryToParseDeclaration = function () {\r\n            var mark = this.mark();\r\n            if (this._parseProperty() && this.accept(scanner.TokenType.Colon)) {\r\n                // looks like a declaration, go ahead\r\n                this.restoreAtMark(mark);\r\n                return this._parseDeclaration();\r\n            }\r\n            this.restoreAtMark(mark);\r\n            return null;\r\n        };\r\n        Parser.prototype._parseProperty = function () {\r\n            var node = this.create(nodes.Property);\r\n            var mark = this.mark();\r\n            if (this.accept(scanner.TokenType.Delim, '*') || this.accept(scanner.TokenType.Delim, '_')) {\r\n                // support for  IE 5.x, 6 and 7 star hack: see http://en.wikipedia.org/wiki/CSS_filter#Star_hack\r\n                if (this.hasWhitespace()) {\r\n                    this.restoreAtMark(mark);\r\n                    return null;\r\n                }\r\n            }\r\n            if (node.setIdentifier(this._parseIdent())) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseCharset = function () {\r\n            var node = this.create(nodes.Node);\r\n            if (!this.accept(scanner.TokenType.Charset)) {\r\n                return null;\r\n            }\r\n            if (!this.accept(scanner.TokenType.String)) {\r\n                return this.finish(node, errors.ParseError.IdentifierExpected);\r\n            }\r\n            if (!this.accept(scanner.TokenType.SemiColon)) {\r\n                return this.finish(node, errors.ParseError.SemiColonExpected);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseImport = function () {\r\n            var node = this.create(nodes.Import);\r\n            if (!this.accept(scanner.TokenType.AtKeyword, '@import')) {\r\n                return null;\r\n            }\r\n            if (!this.accept(scanner.TokenType.URI) && !this.accept(scanner.TokenType.String)) {\r\n                return this.finish(node, errors.ParseError.URIOrStringExpected);\r\n            }\r\n            node.setMedialist(this._parseMediaList());\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseNamespace = function () {\r\n            // http://www.w3.org/TR/css3-namespace/\r\n            // namespace  : NAMESPACE_SYM S* [IDENT S*]? [STRING|URI] S* ';' S*\r\n            var node = this.create(nodes.Namespace);\r\n            if (!this.accept(scanner.TokenType.AtKeyword, '@namespace')) {\r\n                return null;\r\n            }\r\n            node.addChild(this._parseIdent()); // optional prefix\r\n            if (!this.accept(scanner.TokenType.URI) && !this.accept(scanner.TokenType.String)) {\r\n                return this.finish(node, errors.ParseError.URIExpected, [scanner.TokenType.SemiColon]);\r\n            }\r\n            if (!this.accept(scanner.TokenType.SemiColon)) {\r\n                return this.finish(node, errors.ParseError.SemiColonExpected);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseFontFace = function () {\r\n            if (!this.peek(scanner.TokenType.AtKeyword, '@font-face')) {\r\n                return null;\r\n            }\r\n            var node = this.create(nodes.FontFace);\r\n            this.consumeToken(); // @font-face\r\n            return this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\r\n        };\r\n        Parser.prototype._parseViewPort = function () {\r\n            if (!this.peek(scanner.TokenType.AtKeyword, '@-ms-viewport') &&\r\n                !this.peek(scanner.TokenType.AtKeyword, '@-o-viewport') &&\r\n                !this.peek(scanner.TokenType.AtKeyword, '@viewport')) {\r\n                return null;\r\n            }\r\n            var node = this.create(nodes.ViewPort);\r\n            this.consumeToken(); // @-ms-viewport\r\n            return this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\r\n        };\r\n        Parser.prototype._parseKeyframe = function () {\r\n            var node = this.create(nodes.Keyframe);\r\n            var atNode = this.create(nodes.Node);\r\n            if (!this.accept(scanner.TokenType.AtKeyword, '@keyframes') &&\r\n                !this.accept(scanner.TokenType.AtKeyword, '@-webkit-keyframes') &&\r\n                !this.accept(scanner.TokenType.AtKeyword, '@-ms-keyframes') &&\r\n                !this.accept(scanner.TokenType.AtKeyword, '@-moz-keyframes') &&\r\n                !this.accept(scanner.TokenType.AtKeyword, '@-o-keyframes')) {\r\n                return null;\r\n            }\r\n            node.setKeyword(this.finish(atNode));\r\n            if (atNode.getText() === '@-ms-keyframes') {\r\n                this.markError(atNode, errors.ParseError.UnknownKeyword);\r\n            }\r\n            if (!node.setIdentifier(this._parseIdent([nodes.ReferenceType.Keyframe]))) {\r\n                return this.finish(node, errors.ParseError.IdentifierExpected, [scanner.TokenType.CurlyR]);\r\n            }\r\n            return this._parseBody(node, this._parseKeyframeSelector.bind(this));\r\n        };\r\n        Parser.prototype._parseKeyframeSelector = function () {\r\n            var node = this.create(nodes.KeyframeSelector);\r\n            if (!node.addChild(this._parseIdent()) && !this.accept(scanner.TokenType.Percentage)) {\r\n                return null;\r\n            }\r\n            while (this.accept(scanner.TokenType.Comma)) {\r\n                if (!node.addChild(this._parseIdent()) && !this.accept(scanner.TokenType.Percentage)) {\r\n                    return this.finish(node, errors.ParseError.PercentageExpected);\r\n                }\r\n            }\r\n            return this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\r\n        };\r\n        Parser.prototype._parseMediaDeclaration = function () {\r\n            return this._tryParseRuleset(false) || this._tryToParseDeclaration() || this._parseStylesheetStatement();\r\n        };\r\n        Parser.prototype._parseMedia = function () {\r\n            // MEDIA_SYM S* media_query_list '{' S* ruleset* '}' S*\r\n            // media_query_list : S* [media_query [ ',' S* media_query ]* ]?\r\n            var node = this.create(nodes.Media);\r\n            if (!this.accept(scanner.TokenType.AtKeyword, '@media')) {\r\n                return null;\r\n            }\r\n            if (!node.addChild(this._parseMediaQuery([scanner.TokenType.CurlyL]))) {\r\n                return this.finish(node, errors.ParseError.IdentifierExpected);\r\n            }\r\n            while (this.accept(scanner.TokenType.Comma)) {\r\n                if (!node.addChild(this._parseMediaQuery([scanner.TokenType.CurlyL]))) {\r\n                    return this.finish(node, errors.ParseError.IdentifierExpected);\r\n                }\r\n            }\r\n            return this._parseBody(node, this._parseMediaDeclaration.bind(this));\r\n        };\r\n        Parser.prototype._parseMediaQuery = function (resyncStopToken) {\r\n            // http://www.w3.org/TR/css3-mediaqueries/\r\n            // media_query : [ONLY | NOT]? S* IDENT S* [ AND S* expression ]* | expression [ AND S* expression ]*\r\n            // expression : '(' S* IDENT S* [ ':' S* expr ]? ')' S*\r\n            var node = this.create(nodes.MediaQuery);\r\n            var parseExpression = true;\r\n            var hasContent = false;\r\n            if (!this.peek(scanner.TokenType.ParenthesisL)) {\r\n                if (this.accept(scanner.TokenType.Ident, 'only', true) || this.accept(scanner.TokenType.Ident, 'not', true)) {\r\n                }\r\n                if (!node.addChild(this._parseIdent())) {\r\n                    return null;\r\n                }\r\n                hasContent = true;\r\n                parseExpression = this.accept(scanner.TokenType.Ident, 'and', true);\r\n            }\r\n            while (parseExpression) {\r\n                if (!this.accept(scanner.TokenType.ParenthesisL)) {\r\n                    if (hasContent) {\r\n                        return this.finish(node, errors.ParseError.LeftParenthesisExpected, [], resyncStopToken);\r\n                    }\r\n                    return null;\r\n                }\r\n                if (!node.addChild(this._parseMediaFeatureName())) {\r\n                    return this.finish(node, errors.ParseError.IdentifierExpected, [], resyncStopToken);\r\n                }\r\n                if (this.accept(scanner.TokenType.Colon)) {\r\n                    if (!node.addChild(this._parseExpr())) {\r\n                        return this.finish(node, errors.ParseError.TermExpected, [], resyncStopToken);\r\n                    }\r\n                }\r\n                if (!this.accept(scanner.TokenType.ParenthesisR)) {\r\n                    return this.finish(node, errors.ParseError.RightParenthesisExpected, [], resyncStopToken);\r\n                }\r\n                parseExpression = this.accept(scanner.TokenType.Ident, 'and', true);\r\n            }\r\n            return node;\r\n        };\r\n        Parser.prototype._parseMediaFeatureName = function () {\r\n            return this._parseIdent();\r\n        };\r\n        Parser.prototype._parseMediaList = function () {\r\n            var node = this.create(nodes.Medialist);\r\n            if (node.getMediums().addChild(this._parseMedium())) {\r\n                while (this.accept(scanner.TokenType.Comma)) {\r\n                    if (!node.getMediums().addChild(this._parseMedium())) {\r\n                        return this.finish(node, errors.ParseError.IdentifierExpected);\r\n                    }\r\n                }\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseMedium = function () {\r\n            var node = this.create(nodes.Node);\r\n            if (node.addChild(this._parseIdent())) {\r\n                return this.finish(node);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        Parser.prototype._parsePageDeclaration = function () {\r\n            return this._parsePageMarginBox() || this._parseRuleSetDeclaration();\r\n        };\r\n        Parser.prototype._parsePage = function () {\r\n            // http://www.w3.org/TR/css3-page/\r\n            // page_rule : PAGE_SYM S* page_selector_list '{' S* page_body '}' S*\r\n            // page_body :  /* Can be empty */ declaration? [ ';' S* page_body ]? | page_margin_box page_body\r\n            var node = this.create(nodes.Page);\r\n            if (!this.accept(scanner.TokenType.AtKeyword, '@Page')) {\r\n                return null;\r\n            }\r\n            if (node.addChild(this._parsePageSelector())) {\r\n                while (this.accept(scanner.TokenType.Comma)) {\r\n                    if (!node.addChild(this._parsePageSelector())) {\r\n                        return this.finish(node, errors.ParseError.IdentifierExpected);\r\n                    }\r\n                }\r\n            }\r\n            return this._parseBody(node, this._parsePageDeclaration.bind(this));\r\n        };\r\n        Parser.prototype._parsePageMarginBox = function () {\r\n            // page_margin_box :  margin_sym S* '{' S* declaration? [ ';' S* declaration? ]* '}' S*\r\n            var node = this.create(nodes.PageBoxMarginBox);\r\n            if (!this.peek(scanner.TokenType.AtKeyword)) {\r\n                return null;\r\n            }\r\n            if (!this.acceptOne(scanner.TokenType.AtKeyword, languageFacts.getPageBoxDirectives())) {\r\n                this.markError(node, errors.ParseError.UnknownAtRule, [], [scanner.TokenType.CurlyL]);\r\n            }\r\n            return this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\r\n        };\r\n        Parser.prototype._parsePageSelector = function () {\r\n            // page_selector : pseudo_page+ | IDENT pseudo_page*\r\n            // pseudo_page :  ':' [ \"left\" | \"right\" | \"first\" | \"blank\" ];\r\n            var node = this.create(nodes.Node);\r\n            if (!this.peek(scanner.TokenType.Ident) && !this.peek(scanner.TokenType.Colon)) {\r\n                return null;\r\n            }\r\n            node.addChild(this._parseIdent()); // optional ident\r\n            if (this.accept(scanner.TokenType.Colon)) {\r\n                if (!node.addChild(this._parseIdent())) {\r\n                    return this.finish(node, errors.ParseError.IdentifierExpected);\r\n                }\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseDocument = function () {\r\n            // -moz-document is experimental but has been pushed to css4\r\n            var node = this.create(nodes.Document);\r\n            if (!this.accept(scanner.TokenType.AtKeyword, '@-moz-document')) {\r\n                return null;\r\n            }\r\n            this.resync([], [scanner.TokenType.CurlyL]); // ignore all the rules\r\n            return this._parseBody(node, this._parseStylesheetStatement.bind(this));\r\n        };\r\n        Parser.prototype._parseOperator = function () {\r\n            // these are operators for binary expressions\r\n            var node = this.createNode(nodes.NodeType.Operator);\r\n            if (this.accept(scanner.TokenType.Delim, '/') ||\r\n                this.accept(scanner.TokenType.Delim, '*') ||\r\n                this.accept(scanner.TokenType.Delim, '+') ||\r\n                this.accept(scanner.TokenType.Delim, '-') ||\r\n                this.accept(scanner.TokenType.Dashmatch) ||\r\n                this.accept(scanner.TokenType.Includes) ||\r\n                this.accept(scanner.TokenType.SubstringOperator) ||\r\n                this.accept(scanner.TokenType.PrefixOperator) ||\r\n                this.accept(scanner.TokenType.SuffixOperator) ||\r\n                this.accept(scanner.TokenType.Delim, '=')) {\r\n                return this.finish(node);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        Parser.prototype._parseUnaryOperator = function () {\r\n            var node = this.create(nodes.Node);\r\n            if (this.accept(scanner.TokenType.Delim, '+') || this.accept(scanner.TokenType.Delim, '-')) {\r\n                return this.finish(node);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        Parser.prototype._parseCombinator = function () {\r\n            var node = this.create(nodes.Node);\r\n            if (this.accept(scanner.TokenType.Delim, '>')) {\r\n                node.type = nodes.NodeType.SelectorCombinatorParent;\r\n                return this.finish(node);\r\n            }\r\n            else if (this.accept(scanner.TokenType.Delim, '+')) {\r\n                node.type = nodes.NodeType.SelectorCombinatorSibling;\r\n                return this.finish(node);\r\n            }\r\n            else if (this.accept(scanner.TokenType.Delim, '~')) {\r\n                node.type = nodes.NodeType.SelectorCombinatorAllSiblings;\r\n                return this.finish(node);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        Parser.prototype._parseSimpleSelector = function () {\r\n            // simple_selector\r\n            //  : element_name [ HASH | class | attrib | pseudo ]* | [ HASH | class | attrib | pseudo ]+ ;\r\n            var node = this.create(nodes.SimpleSelector);\r\n            var c = 0;\r\n            if (node.addChild(this._parseElementName())) {\r\n                c++;\r\n            }\r\n            while ((c === 0 || !this.hasWhitespace()) && node.addChild(this._parseSimpleSelectorBody())) {\r\n                c++;\r\n            }\r\n            return c > 0 ? this.finish(node) : null;\r\n        };\r\n        Parser.prototype._parseSimpleSelectorBody = function () {\r\n            return this._parsePseudo() || this._parseHash() || this._parseClass() || this._parseAttrib();\r\n        };\r\n        Parser.prototype._parseSelectorIdent = function () {\r\n            return this._parseIdent();\r\n        };\r\n        Parser.prototype._parseHash = function () {\r\n            if (!this.peek(scanner.TokenType.Hash) && !this.peek(scanner.TokenType.Delim, '#')) {\r\n                return null;\r\n            }\r\n            var node = this.createNode(nodes.NodeType.IdentifierSelector);\r\n            if (this.accept(scanner.TokenType.Delim, '#')) {\r\n                if (this.hasWhitespace() || !node.addChild(this._parseSelectorIdent())) {\r\n                    return this.finish(node, errors.ParseError.IdentifierExpected);\r\n                }\r\n            }\r\n            else {\r\n                this.consumeToken(); // TokenType.Hash\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseClass = function () {\r\n            // class: '.' IDENT ;\r\n            if (!this.peek(scanner.TokenType.Delim, '.')) {\r\n                return null;\r\n            }\r\n            var node = this.createNode(nodes.NodeType.ClassSelector);\r\n            this.consumeToken(); // '.'\r\n            if (this.hasWhitespace() || !node.addChild(this._parseSelectorIdent())) {\r\n                return this.finish(node, errors.ParseError.IdentifierExpected);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseElementName = function () {\r\n            // element_name: IDENT | '*';\r\n            var node = this.createNode(nodes.NodeType.ElementNameSelector);\r\n            if (node.addChild(this._parseSelectorIdent()) || this.accept(scanner.TokenType.Delim, '*')) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseAttrib = function () {\r\n            // attrib : '[' S* IDENT S* [ [ '=' | INCLUDES | DASHMATCH ] S*   [ IDENT | STRING ] S* ]? ']'\r\n            if (!this.peek(scanner.TokenType.BracketL)) {\r\n                return null;\r\n            }\r\n            var node = this.createNode(nodes.NodeType.AttributeSelector);\r\n            this.consumeToken(); // BracketL\r\n            if (!node.addChild(this._parseBinaryExpr())) {\r\n            }\r\n            if (!this.accept(scanner.TokenType.BracketR)) {\r\n                return this.finish(node, errors.ParseError.RightSquareBracketExpected);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parsePseudo = function () {\r\n            // pseudo: ':' [ IDENT | FUNCTION S* [IDENT S*]? ')' ]\r\n            if (!this.peek(scanner.TokenType.Colon)) {\r\n                return null;\r\n            }\r\n            var pos = this.mark();\r\n            var node = this.createNode(nodes.NodeType.PseudoSelector);\r\n            this.consumeToken(); // Colon\r\n            if (!this.hasWhitespace() && this.accept(scanner.TokenType.Colon)) {\r\n            }\r\n            if (!this.hasWhitespace()) {\r\n                if (!node.addChild(this._parseIdent())) {\r\n                    return this.finish(node, errors.ParseError.IdentifierExpected);\r\n                }\r\n                if (!this.hasWhitespace() && this.accept(scanner.TokenType.ParenthesisL)) {\r\n                    node.addChild(this._parseBinaryExpr() || this._parseSimpleSelector());\r\n                    if (!this.accept(scanner.TokenType.ParenthesisR)) {\r\n                        return this.finish(node, errors.ParseError.RightParenthesisExpected);\r\n                    }\r\n                }\r\n                return this.finish(node);\r\n            }\r\n            this.restoreAtMark(pos);\r\n            return null;\r\n        };\r\n        Parser.prototype._parsePrio = function () {\r\n            if (!this.peek(scanner.TokenType.Exclamation)) {\r\n                return null;\r\n            }\r\n            var node = this.createNode(nodes.NodeType.Prio);\r\n            if (this.accept(scanner.TokenType.Exclamation) && this.accept(scanner.TokenType.Ident, 'important', true)) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseExpr = function (stopOnComma) {\r\n            if (stopOnComma === void 0) { stopOnComma = false; }\r\n            var node = this.create(nodes.Expression);\r\n            if (!node.addChild(this._parseBinaryExpr())) {\r\n                return null;\r\n            }\r\n            while (true) {\r\n                if (this.peek(scanner.TokenType.Comma)) {\r\n                    if (stopOnComma) {\r\n                        return this.finish(node);\r\n                    }\r\n                    this.consumeToken();\r\n                }\r\n                if (!node.addChild(this._parseBinaryExpr())) {\r\n                    break;\r\n                }\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseBinaryExpr = function (preparsedLeft, preparsedOper) {\r\n            var node = this.create(nodes.BinaryExpression);\r\n            if (!node.setLeft((preparsedLeft || this._parseTerm()))) {\r\n                return null;\r\n            }\r\n            if (!node.setOperator(preparsedOper || this._parseOperator())) {\r\n                return this.finish(node);\r\n            }\r\n            if (!node.setRight(this._parseTerm())) {\r\n                return this.finish(node, errors.ParseError.TermExpected);\r\n            }\r\n            // things needed for multiple binary expressions\r\n            node = this.finish(node);\r\n            var operator = this._parseOperator();\r\n            if (operator) {\r\n                node = this._parseBinaryExpr(node, operator);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseTerm = function () {\r\n            var node = this.create(nodes.Term);\r\n            node.setOperator(this._parseUnaryOperator()); // optional\r\n            if (node.setExpression(this._parseFunction()) ||\r\n                node.setExpression(this._parseIdent()) ||\r\n                node.setExpression(this._parseURILiteral()) ||\r\n                node.setExpression(this._parseStringLiteral()) ||\r\n                node.setExpression(this._parseNumeric()) ||\r\n                node.setExpression(this._parseHexColor()) ||\r\n                node.setExpression(this._parseOperation())) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseOperation = function () {\r\n            var node = this.create(nodes.Node);\r\n            if (!this.accept(scanner.TokenType.ParenthesisL)) {\r\n                return null;\r\n            }\r\n            node.addChild(this._parseExpr());\r\n            if (!this.accept(scanner.TokenType.ParenthesisR)) {\r\n                return this.finish(node, errors.ParseError.RightParenthesisExpected);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseNumeric = function () {\r\n            var node = this.create(nodes.NumericValue);\r\n            if (this.accept(scanner.TokenType.Num) ||\r\n                this.accept(scanner.TokenType.Percentage) ||\r\n                this.accept(scanner.TokenType.Resolution) ||\r\n                this.accept(scanner.TokenType.Length) ||\r\n                this.accept(scanner.TokenType.EMS) ||\r\n                this.accept(scanner.TokenType.EXS) ||\r\n                this.accept(scanner.TokenType.Angle) ||\r\n                this.accept(scanner.TokenType.Time) ||\r\n                this.accept(scanner.TokenType.Dimension) ||\r\n                this.accept(scanner.TokenType.Freq)) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseStringLiteral = function () {\r\n            var node = this.createNode(nodes.NodeType.StringLiteral);\r\n            if (this.accept(scanner.TokenType.String) || this.accept(scanner.TokenType.BadString)) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseURILiteral = function () {\r\n            var node = this.createNode(nodes.NodeType.URILiteral);\r\n            if (this.accept(scanner.TokenType.URI) || this.accept(scanner.TokenType.BadUri)) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseIdent = function (referenceTypes) {\r\n            var node = this.create(nodes.Identifier);\r\n            if (referenceTypes) {\r\n                node.referenceTypes = referenceTypes;\r\n            }\r\n            if (this.accept(scanner.TokenType.Ident)) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseFunction = function () {\r\n            var pos = this.mark();\r\n            var node = this.create(nodes.Function);\r\n            if (!node.setIdentifier(this._parseFunctionIdentifier())) {\r\n                return null;\r\n            }\r\n            if (this.hasWhitespace() || !this.accept(scanner.TokenType.ParenthesisL)) {\r\n                this.restoreAtMark(pos);\r\n                return null;\r\n            }\r\n            if (node.getArguments().addChild(this._parseFunctionArgument())) {\r\n                while (this.accept(scanner.TokenType.Comma)) {\r\n                    if (!node.getArguments().addChild(this._parseFunctionArgument())) {\r\n                        this.markError(node, errors.ParseError.ExpressionExpected);\r\n                    }\r\n                }\r\n            }\r\n            if (!this.accept(scanner.TokenType.ParenthesisR)) {\r\n                return this.finish(node, errors.ParseError.RightParenthesisExpected);\r\n            }\r\n            return this.finish(node);\r\n        };\r\n        Parser.prototype._parseFunctionIdentifier = function () {\r\n            var node = this.create(nodes.Identifier);\r\n            node.referenceTypes = [nodes.ReferenceType.Function];\r\n            if (this.accept(scanner.TokenType.Ident, 'progid')) {\r\n                // support for IE7 specific filters: 'progid:DXImageTransform.Microsoft.MotionBlur(strength=13, direction=310)'\r\n                if (this.accept(scanner.TokenType.Colon)) {\r\n                    while (this.accept(scanner.TokenType.Ident) && this.accept(scanner.TokenType.Delim, '.')) {\r\n                    }\r\n                }\r\n                return this.finish(node);\r\n            }\r\n            else if (this.accept(scanner.TokenType.Ident)) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseFunctionArgument = function () {\r\n            var node = this.create(nodes.FunctionArgument);\r\n            if (node.setValue(this._parseExpr(true))) {\r\n                return this.finish(node);\r\n            }\r\n            return null;\r\n        };\r\n        Parser.prototype._parseHexColor = function () {\r\n            if (this.peekRegExp(scanner.TokenType.Hash, /^#[0-9A-Fa-f]{3}([0-9A-Fa-f]{3})?$/g)) {\r\n                var node = this.create(nodes.HexColorValue);\r\n                this.consumeToken();\r\n                return this.finish(node);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        return Parser;\r\n    }());\r\n    exports.Parser = Parser;\r\n});\r\n\ndefine(\"vs/nls!vs/languages/css/common/services/intelliSense\",['vs/nls', 'vs/nls!vs/languages/css/common/cssWorker'], function(nls, data) { return nls.create(\"vs/languages/css/common/services/intelliSense\", data); });\ndefine(\"vs/languages/css/common/services/intelliSense\", [\"require\", \"exports\", 'vs/languages/css/common/parser/cssNodes', 'vs/languages/css/common/parser/cssSymbols', 'vs/languages/css/common/services/languageFacts', 'vs/base/common/strings', 'vs/nls!vs/languages/css/common/services/intelliSense'], function (require, exports, nodes, cssSymbols, languageFacts, strings, nls) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    var CSSIntellisense = (function () {\r\n        function CSSIntellisense(variablePrefix) {\r\n            if (variablePrefix === void 0) { variablePrefix = null; }\r\n            this.variablePrefix = variablePrefix;\r\n        }\r\n        CSSIntellisense.prototype.getSymbolContext = function () {\r\n            if (!this.symbolContext) {\r\n                this.symbolContext = new cssSymbols.Symbols(this.styleSheet);\r\n            }\r\n            return this.symbolContext;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsAtPosition = function (languageService, model, resource, position) {\r\n            this.offset = model.getOffsetFromPosition(position);\r\n            this.position = position;\r\n            this.currentWord = model.getWordUntilPosition(position).word;\r\n            this.model = model;\r\n            this.styleSheet = languageService.getStylesheet(resource);\r\n            var result = [];\r\n            var nodepath = nodes.getNodePath(this.styleSheet, this.offset);\r\n            this.isIncomplete = false;\r\n            for (var i = nodepath.length - 1; i >= 0; i--) {\r\n                var node = nodepath[i];\r\n                if (node instanceof nodes.Property) {\r\n                    this.getCompletionsForDeclarationProperty(result);\r\n                }\r\n                else if (node instanceof nodes.Expression) {\r\n                    this.getCompletionsForExpression(node, result);\r\n                }\r\n                else if (node instanceof nodes.SimpleSelector) {\r\n                    var parentRuleSet = node.findParent(nodes.NodeType.Ruleset);\r\n                    this.getCompletionsForSelector(parentRuleSet, result);\r\n                }\r\n                else if (node instanceof nodes.Declarations) {\r\n                    this.getCompletionsForDeclarations(node, result);\r\n                }\r\n                else if (node instanceof nodes.VariableDeclaration) {\r\n                    this.getCompletionsForVariableDeclaration(node, result);\r\n                }\r\n                else if (node instanceof nodes.RuleSet) {\r\n                    this.getCompletionsForRuleSet(node, result);\r\n                }\r\n                else if (node instanceof nodes.Interpolation) {\r\n                    this.getCompletionsForInterpolation(node, result);\r\n                }\r\n                else if (node instanceof nodes.FunctionArgument) {\r\n                    this.getCompletionsForFunctionArgument(node, node.getParent(), result);\r\n                }\r\n                else if (node instanceof nodes.FunctionDeclaration) {\r\n                    this.getCompletionsForFunctionDeclaration(node, result);\r\n                }\r\n                else if (node instanceof nodes.Function) {\r\n                    this.getCompletionsForFunctionArgument(null, node, result);\r\n                }\r\n                if (result.length > 0) {\r\n                    return { currentWord: this.currentWord, suggestions: result, incomplete: this.isIncomplete };\r\n                }\r\n            }\r\n            this.getCompletionsForStylesheet(result);\r\n            if (result.length > 0) {\r\n                return { currentWord: this.currentWord, suggestions: result };\r\n            }\r\n            if (this.variablePrefix && this.currentWord.indexOf(this.variablePrefix) === 0) {\r\n                this.getVariableProposals(result);\r\n                if (result.length > 0) {\r\n                    return { currentWord: this.currentWord, suggestions: result };\r\n                }\r\n                model.getAllUniqueWords(this.currentWord).forEach(function (word) {\r\n                    result.push({ type: 'text', label: word, codeSnippet: word });\r\n                });\r\n            }\r\n            // no match, don't show text matches\r\n            return {\r\n                currentWord: this.currentWord,\r\n                suggestions: result\r\n            };\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForDeclarationProperty = function (result) {\r\n            return this.getPropertyProposals(result);\r\n        };\r\n        CSSIntellisense.prototype.getPropertyProposals = function (result) {\r\n            var properties = languageFacts.getProperties();\r\n            for (var key in properties) {\r\n                if (properties.hasOwnProperty(key)) {\r\n                    var entry = properties[key];\r\n                    if (entry.browsers.onCodeComplete) {\r\n                        result.push({\r\n                            label: entry.name,\r\n                            documentationLabel: languageFacts.getEntryDescription(entry),\r\n                            codeSnippet: entry.name + ': ',\r\n                            type: 'property'\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForDeclarationValue = function (node, result) {\r\n            var propertyName = node.getFullPropertyName();\r\n            var entry = languageFacts.getProperties()[propertyName];\r\n            if (entry) {\r\n                this.getColorProposals(entry, result);\r\n                this.getPositionProposals(entry, result);\r\n                this.getRepeatStyleProposals(entry, result);\r\n                this.getLineProposals(entry, result);\r\n                this.getBoxProposals(entry, result);\r\n                this.getImageProposals(entry, result);\r\n                this.getTimingFunctionProposals(entry, result);\r\n                this.getBasicShapeProposals(entry, result);\r\n                this.getValueEnumProposals(entry, result);\r\n                this.getCSSWideKeywordProposals(entry, result);\r\n                this.getUnitProposals(entry, result);\r\n            }\r\n            else {\r\n                var existingValues = new Set();\r\n                this.styleSheet.accept(new ValuesCollector(propertyName, existingValues));\r\n                existingValues.getEntries().forEach(function (existingValue) {\r\n                    result.push({\r\n                        label: existingValue,\r\n                        codeSnippet: existingValue,\r\n                        type: 'value'\r\n                    });\r\n                });\r\n            }\r\n            this.getVariableProposals(result);\r\n            this.getTermProposals(result);\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getValueEnumProposals = function (entry, result) {\r\n            if (entry.values) {\r\n                entry.values.forEach(function (value) {\r\n                    if (languageFacts.isCommonValue(value)) {\r\n                        result.push({\r\n                            label: value.name,\r\n                            documentationLabel: languageFacts.getEntryDescription(value),\r\n                            codeSnippet: value.name,\r\n                            type: 'value'\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCSSWideKeywordProposals = function (entry, result) {\r\n            for (var keywords in languageFacts.cssWideKeywords) {\r\n                result.push({\r\n                    label: keywords,\r\n                    documentationLabel: languageFacts.cssWideKeywords[keywords],\r\n                    codeSnippet: keywords,\r\n                    type: 'value'\r\n                });\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForInterpolation = function (node, result) {\r\n            if (this.offset >= node.offset + 2) {\r\n                this.getVariableProposals(result);\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getVariableProposals = function (result) {\r\n            var symbols = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Variable);\r\n            symbols.forEach(function (symbol) {\r\n                result.push({\r\n                    label: symbol.name,\r\n                    codeSnippet: strings.startsWith(symbol.name, '--') ? \"var(\" + symbol.name + \")\" : symbol.name,\r\n                    type: 'variable'\r\n                });\r\n            });\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getVariableProposalsForCSSVarFunction = function (result) {\r\n            var symbols = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Variable);\r\n            symbols = symbols.filter(function (symbol) {\r\n                return strings.startsWith(symbol.name, '--');\r\n            });\r\n            symbols.forEach(function (symbol) {\r\n                result.push({\r\n                    label: symbol.name,\r\n                    codeSnippet: symbol.name,\r\n                    type: 'variable'\r\n                });\r\n            });\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getUnitProposals = function (entry, result) {\r\n            var currentWord = '0';\r\n            if (this.currentWord.length > 0) {\r\n                var numMatch = this.currentWord.match(/-?\\d[\\.\\d+]*/);\r\n                if (numMatch) {\r\n                    currentWord = numMatch[0];\r\n                }\r\n            }\r\n            entry.restrictions.forEach(function (restriction) {\r\n                var units = languageFacts.units[restriction];\r\n                if (units) {\r\n                    units.forEach(function (unit) {\r\n                        result.push({\r\n                            label: currentWord + unit,\r\n                            codeSnippet: currentWord + unit,\r\n                            type: 'unit'\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n            this.isIncomplete = true;\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getColorProposals = function (entry, result) {\r\n            if (entry.restrictions.indexOf('color') !== -1) {\r\n                for (var color in languageFacts.colors) {\r\n                    result.push({\r\n                        label: color,\r\n                        documentationLabel: languageFacts.colors[color],\r\n                        codeSnippet: color,\r\n                        type: 'customcolor'\r\n                    });\r\n                }\r\n                for (var color in languageFacts.colorKeywords) {\r\n                    result.push({\r\n                        label: color,\r\n                        documentationLabel: languageFacts.colorKeywords[color],\r\n                        codeSnippet: color,\r\n                        type: 'value'\r\n                    });\r\n                }\r\n                var colorValues = new Set();\r\n                this.styleSheet.accept(new ColorValueCollector(colorValues));\r\n                colorValues.getEntries().forEach(function (color) {\r\n                    result.push({\r\n                        label: color,\r\n                        codeSnippet: color,\r\n                        type: 'customcolor'\r\n                    });\r\n                });\r\n                CSSIntellisense.colorFunctions.forEach(function (p) {\r\n                    result.push({\r\n                        label: p.func.substr(0, p.func.indexOf('(')),\r\n                        typeLabel: p.func,\r\n                        documentationLabel: p.desc,\r\n                        codeSnippet: p.func.replace(/\\[?\\$(\\w+)\\]?/g, '{{$1}}'),\r\n                        type: 'function'\r\n                    });\r\n                });\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getPositionProposals = function (entry, result) {\r\n            if (entry.restrictions.indexOf('position') !== -1) {\r\n                for (var position in languageFacts.positionKeywords) {\r\n                    result.push({\r\n                        label: position,\r\n                        documentationLabel: languageFacts.positionKeywords[position],\r\n                        codeSnippet: position,\r\n                        type: 'value'\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getRepeatStyleProposals = function (entry, result) {\r\n            if (entry.restrictions.indexOf('repeat') !== -1) {\r\n                for (var repeat in languageFacts.repeatStyleKeywords) {\r\n                    result.push({\r\n                        label: repeat,\r\n                        documentationLabel: languageFacts.repeatStyleKeywords[repeat],\r\n                        codeSnippet: repeat,\r\n                        type: 'value'\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getLineProposals = function (entry, result) {\r\n            if (entry.restrictions.indexOf('line-style') !== -1) {\r\n                for (var lineStyle in languageFacts.lineStyleKeywords) {\r\n                    result.push({\r\n                        label: lineStyle,\r\n                        documentationLabel: languageFacts.lineStyleKeywords[lineStyle],\r\n                        codeSnippet: lineStyle,\r\n                        type: 'value'\r\n                    });\r\n                }\r\n            }\r\n            if (entry.restrictions.indexOf('line-width') !== -1) {\r\n                languageFacts.lineWidthKeywords.forEach(function (lineWidth) {\r\n                    result.push({\r\n                        label: lineWidth,\r\n                        codeSnippet: lineWidth,\r\n                        type: 'value'\r\n                    });\r\n                });\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getBoxProposals = function (entry, result) {\r\n            var geometryBox = entry.restrictions.indexOf('geometry-box');\r\n            if (geometryBox !== -1) {\r\n                for (var box in languageFacts.geometryBoxKeywords) {\r\n                    result.push({\r\n                        label: box,\r\n                        documentationLabel: languageFacts.geometryBoxKeywords[box],\r\n                        codeSnippet: box,\r\n                        type: 'value'\r\n                    });\r\n                }\r\n            }\r\n            if (entry.restrictions.indexOf('box') !== -1 || geometryBox !== -1) {\r\n                for (var box in languageFacts.boxKeywords) {\r\n                    result.push({\r\n                        label: box,\r\n                        documentationLabel: languageFacts.boxKeywords[box],\r\n                        codeSnippet: box,\r\n                        type: 'value'\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getImageProposals = function (entry, result) {\r\n            if (entry.restrictions.indexOf('image') !== -1) {\r\n                for (var image in languageFacts.imageFunctions) {\r\n                    result.push({\r\n                        label: image,\r\n                        documentationLabel: languageFacts.imageFunctions[image],\r\n                        codeSnippet: image,\r\n                        type: 'function'\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getTimingFunctionProposals = function (entry, result) {\r\n            if (entry.restrictions.indexOf('timing-function') !== -1) {\r\n                for (var timing in languageFacts.transitionTimingFunctions) {\r\n                    result.push({\r\n                        label: timing,\r\n                        documentationLabel: languageFacts.transitionTimingFunctions[timing],\r\n                        codeSnippet: timing,\r\n                        type: 'function'\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getBasicShapeProposals = function (entry, result) {\r\n            if (entry.restrictions.indexOf('shape') !== -1) {\r\n                for (var shape in languageFacts.basicShapeFunctions) {\r\n                    result.push({\r\n                        label: shape,\r\n                        documentationLabel: languageFacts.basicShapeFunctions[shape],\r\n                        codeSnippet: shape,\r\n                        type: 'function'\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForStylesheet = function (result) {\r\n            var node = this.styleSheet.findFirstChildBeforeOffset(this.offset);\r\n            if (!node) {\r\n                return this.getCompletionForTopLevel(result);\r\n            }\r\n            if (node instanceof nodes.RuleSet) {\r\n                return this.getCompletionsForRuleSet(node, result);\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionForTopLevel = function (result) {\r\n            languageFacts.getAtDirectives().forEach(function (entry) {\r\n                if (entry.browsers.count > 0) {\r\n                    result.push({\r\n                        label: entry.name,\r\n                        codeSnippet: entry.name,\r\n                        documentationLabel: languageFacts.getEntryDescription(entry),\r\n                        type: 'keyword'\r\n                    });\r\n                }\r\n            });\r\n            this.getCompletionsForSelector(null, result);\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForRuleSet = function (ruleSet, result) {\r\n            var declarations = ruleSet.getDeclarations();\r\n            var isAfter = declarations && declarations.endsWith('}') && this.offset >= declarations.offset + declarations.length;\r\n            if (isAfter) {\r\n                return this.getCompletionForTopLevel(result);\r\n            }\r\n            var isInSelectors = !declarations || this.offset <= declarations.offset;\r\n            if (isInSelectors) {\r\n                return this.getCompletionsForSelector(ruleSet, result);\r\n            }\r\n            ruleSet.findParent(nodes.NodeType.Ruleset);\r\n            return this.getCompletionsForDeclarations(ruleSet.getDeclarations(), result);\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForSelector = function (ruleSet, result) {\r\n            languageFacts.getPseudoClasses().forEach(function (entry) {\r\n                if (entry.browsers.onCodeComplete) {\r\n                    result.push({\r\n                        label: entry.name,\r\n                        codeSnippet: entry.name,\r\n                        documentationLabel: languageFacts.getEntryDescription(entry),\r\n                        type: 'function'\r\n                    });\r\n                }\r\n            });\r\n            languageFacts.getPseudoElements().forEach(function (entry) {\r\n                if (entry.browsers.onCodeComplete) {\r\n                    result.push({\r\n                        label: entry.name,\r\n                        codeSnippet: entry.name,\r\n                        documentationLabel: languageFacts.getEntryDescription(entry),\r\n                        type: 'function'\r\n                    });\r\n                }\r\n            });\r\n            languageFacts.html5Tags.forEach(function (entry) {\r\n                result.push({\r\n                    label: entry,\r\n                    codeSnippet: entry,\r\n                    type: 'keyword'\r\n                });\r\n            });\r\n            languageFacts.svgElements.forEach(function (entry) {\r\n                result.push({\r\n                    label: entry,\r\n                    codeSnippet: entry,\r\n                    type: 'keyword'\r\n                });\r\n            });\r\n            var visited = {};\r\n            visited[this.currentWord] = true;\r\n            var textProvider = this.styleSheet.getTextProvider();\r\n            this.styleSheet.accept(function (n) {\r\n                if (n.type === nodes.NodeType.SimpleSelector && n.length > 0) {\r\n                    var selector = textProvider(n.offset, n.length);\r\n                    if (selector.charAt(0) === '.' && !visited[selector]) {\r\n                        visited[selector] = true;\r\n                        result.push({\r\n                            label: selector,\r\n                            codeSnippet: selector,\r\n                            type: 'keyword'\r\n                        });\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n            if (ruleSet && ruleSet.isNested()) {\r\n                var selector = ruleSet.getSelectors().findFirstChildBeforeOffset(this.offset);\r\n                if (selector && ruleSet.getSelectors().getChildren().indexOf(selector) === 0) {\r\n                    this.getPropertyProposals(result);\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForDeclarations = function (declarations, result) {\r\n            if (!declarations) {\r\n                return result;\r\n            }\r\n            var node = declarations.findFirstChildBeforeOffset(this.offset);\r\n            if (!node) {\r\n                return this.getCompletionsForDeclarationProperty(result);\r\n            }\r\n            if (node instanceof nodes.AbstractDeclaration) {\r\n                var declaration = node;\r\n                if ((!isDefined(declaration.colonPosition) || this.offset <= declaration.colonPosition) || (isDefined(declaration.semicolonPosition) && declaration.semicolonPosition < this.offset)) {\r\n                    if (this.offset === declaration.semicolonPosition + 1) {\r\n                        return result; // don't show new properties right after semicolon (see Bug 15421:[intellisense] [css] Be less aggressive when manually typing CSS)\r\n                    }\r\n                    // complete property\r\n                    return this.getCompletionsForDeclarationProperty(result);\r\n                }\r\n                if (declaration instanceof nodes.Declaration) {\r\n                    // complete value\r\n                    return this.getCompletionsForDeclarationValue(declaration, result);\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForVariableDeclaration = function (declaration, result) {\r\n            if (this.offset > declaration.colonPosition) {\r\n                this.getVariableProposals(result);\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForExpression = function (expression, result) {\r\n            if (expression.getParent() instanceof nodes.FunctionArgument) {\r\n                this.getCompletionsForFunctionArgument(expression.getParent(), expression.getParent().getParent(), result);\r\n                return result;\r\n            }\r\n            var declaration = expression.findParent(nodes.NodeType.Declaration);\r\n            if (!declaration) {\r\n                this.getTermProposals(result);\r\n                return result;\r\n            }\r\n            var node = expression.findChildAtOffset(this.offset, true);\r\n            if (!node) {\r\n                return this.getCompletionsForDeclarationValue(declaration, result);\r\n            }\r\n            if (node instanceof nodes.NumericValue || node instanceof nodes.Identifier) {\r\n                return this.getCompletionsForDeclarationValue(declaration, result);\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForFunctionArgument = function (arg, func, result) {\r\n            if (func.getIdentifier().getText() === 'var') {\r\n                if (!func.getArguments().hasChildren() || func.getArguments().getChild(0) === arg) {\r\n                    this.getVariableProposalsForCSSVarFunction(result);\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getCompletionsForFunctionDeclaration = function (decl, result) {\r\n            var declarations = decl.getDeclarations();\r\n            if (declarations && this.offset > declarations.offset && this.offset < declarations.offset + declarations.length) {\r\n                this.getTermProposals(result);\r\n            }\r\n            return result;\r\n        };\r\n        CSSIntellisense.prototype.getTermProposals = function (result) {\r\n            var allFunctions = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Function);\r\n            allFunctions.forEach(function (functionSymbol) {\r\n                if (functionSymbol.node instanceof nodes.FunctionDeclaration) {\r\n                    var functionDecl = functionSymbol.node;\r\n                    var params = functionDecl.getParameters().getChildren().map(function (c) {\r\n                        return (c instanceof nodes.FunctionParameter) ? c.getName() : c.getText();\r\n                    });\r\n                    result.push({\r\n                        label: functionSymbol.name,\r\n                        typeLabel: functionSymbol.name + '(' + params.join(', ') + ')',\r\n                        codeSnippet: functionSymbol.name + '(' + params.map(function (p) { return '{{' + p + '}}'; }).join(', ') + ')',\r\n                        type: 'function'\r\n                    });\r\n                }\r\n            });\r\n            return result;\r\n        };\r\n        CSSIntellisense.colorFunctions = [\r\n            { func: 'rgb($red, $green, $blue)', desc: nls.localize(0, null) },\r\n            { func: 'rgba($red, $green, $blue, $alpha)', desc: nls.localize(1, null) },\r\n            { func: 'hsl($hue, $saturation, $lightness)', desc: nls.localize(2, null) },\r\n            { func: 'hsla($hue, $saturation, $lightness, $alpha)', desc: nls.localize(3, null) }\r\n        ];\r\n        return CSSIntellisense;\r\n    }());\r\n    exports.CSSIntellisense = CSSIntellisense;\r\n    var Set = (function () {\r\n        function Set() {\r\n            this.entries = {};\r\n        }\r\n        Set.prototype.add = function (entry) {\r\n            this.entries[entry] = true;\r\n        };\r\n        Set.prototype.getEntries = function () {\r\n            return Object.keys(this.entries);\r\n        };\r\n        return Set;\r\n    }());\r\n    var InternalValueCollector = (function () {\r\n        function InternalValueCollector(entries) {\r\n            this.entries = entries;\r\n            // nothing to do\r\n        }\r\n        InternalValueCollector.prototype.visitNode = function (node) {\r\n            if (node instanceof nodes.Identifier || node instanceof nodes.NumericValue || node instanceof nodes.HexColorValue) {\r\n                this.entries.add(node.getText());\r\n            }\r\n            return true;\r\n        };\r\n        return InternalValueCollector;\r\n    }());\r\n    var ValuesCollector = (function () {\r\n        function ValuesCollector(propertyName, entries) {\r\n            this.propertyName = propertyName;\r\n            this.entries = entries;\r\n            // nothing to do\r\n        }\r\n        ValuesCollector.prototype.matchesProperty = function (decl) {\r\n            var propertyName = decl.getFullPropertyName();\r\n            return this.propertyName === propertyName;\r\n        };\r\n        ValuesCollector.prototype.visitNode = function (node) {\r\n            if (node instanceof nodes.Declaration) {\r\n                if (this.matchesProperty(node)) {\r\n                    var value = node.getValue();\r\n                    if (value) {\r\n                        value.accept(new InternalValueCollector(this.entries));\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        return ValuesCollector;\r\n    }());\r\n    var ColorValueCollector = (function () {\r\n        function ColorValueCollector(entries) {\r\n            this.entries = entries;\r\n            // nothing to do\r\n        }\r\n        ColorValueCollector.prototype.visitNode = function (node) {\r\n            if (node instanceof nodes.HexColorValue || (node instanceof nodes.Function && languageFacts.isColorConstructor(node))) {\r\n                this.entries.add(node.getText());\r\n            }\r\n            return true;\r\n        };\r\n        return ColorValueCollector;\r\n    }());\r\n    function isDefined(obj) {\r\n        return typeof obj !== 'undefined';\r\n    }\r\n});\r\n\ndefine(\"vs/nls!vs/languages/css/common/services/lint\",['vs/nls', 'vs/nls!vs/languages/css/common/cssWorker'], function(nls, data) { return nls.create(\"vs/languages/css/common/services/lint\", data); });\ndefine(\"vs/nls!vs/languages/css/common/services/lintRules\",['vs/nls', 'vs/nls!vs/languages/css/common/cssWorker'], function(nls, data) { return nls.create(\"vs/languages/css/common/services/lintRules\", data); });\ndefine(\"vs/languages/css/common/services/lintRules\", [\"require\", \"exports\", 'vs/nls!vs/languages/css/common/services/lintRules', 'vs/languages/css/common/level'], function (require, exports, nls, _level) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    var Warning = 'warning';\r\n    var Error = 'error';\r\n    var Ignore = 'ignore';\r\n    var Rule = (function () {\r\n        function Rule(id, message, defaultValue) {\r\n            this.id = id;\r\n            this.message = message;\r\n            this.defaultValue = defaultValue;\r\n            // nothing to do\r\n        }\r\n        Rule.prototype.getConfiguration = function () {\r\n            return {\r\n                type: 'string',\r\n                enum: [Ignore, Warning, Error],\r\n                default: this.defaultValue,\r\n                description: this.message\r\n            };\r\n        };\r\n        return Rule;\r\n    }());\r\n    exports.Rule = Rule;\r\n    exports.Rules = {\r\n        AllVendorPrefixes: new Rule('compatibleVendorPrefixes', nls.localize(0, null), Ignore),\r\n        IncludeStandardPropertyWhenUsingVendorPrefix: new Rule('vendorPrefix', nls.localize(1, null), Warning),\r\n        DuplicateDeclarations: new Rule('duplicateProperties', nls.localize(2, null), Ignore),\r\n        EmptyRuleSet: new Rule('emptyRules', nls.localize(3, null), Warning),\r\n        ImportStatemement: new Rule('importStatement', nls.localize(4, null), Ignore),\r\n        NoWidthOrHeightWhenPaddingOrBorder: new Rule('boxModel', nls.localize(5, null), Ignore),\r\n        UniversalSelector: new Rule('universalSelector', nls.localize(6, null), Ignore),\r\n        ZeroWithUnit: new Rule('zeroUnits', nls.localize(7, null), Ignore),\r\n        RequiredPropertiesForFontFace: new Rule('fontFaceProperties', nls.localize(8, null), Warning),\r\n        HexColorLength: new Rule('hexColorLength', nls.localize(9, null), Error),\r\n        ArgsInColorFunction: new Rule('argumentsInColorFunction', nls.localize(10, null), Error),\r\n        UnknownProperty: new Rule('unknownProperties', nls.localize(11, null), Warning),\r\n        IEStarHack: new Rule('ieHack', nls.localize(12, null), Ignore),\r\n        UnknownVendorSpecificProperty: new Rule('unknownVendorSpecificProperties', nls.localize(13, null), Ignore),\r\n        PropertyIgnoredDueToDisplay: new Rule('propertyIgnoredDueToDisplay', nls.localize(14, null), Warning),\r\n        AvoidImportant: new Rule('important', nls.localize(15, null), Ignore),\r\n        AvoidFloat: new Rule('float', nls.localize(16, null), Ignore),\r\n        AvoidIdSelector: new Rule('idSelector', nls.localize(17, null), Ignore),\r\n    };\r\n    function getConfigurationProperties(keyPrefix) {\r\n        var properties = {};\r\n        properties[keyPrefix + '.validate'] = {\r\n            type: 'boolean',\r\n            default: true,\r\n            description: nls.localize(18, null)\r\n        };\r\n        for (var ruleName in exports.Rules) {\r\n            var rule = exports.Rules[ruleName];\r\n            properties[keyPrefix + '.lint.' + rule.id] = rule.getConfiguration();\r\n        }\r\n        return properties;\r\n    }\r\n    exports.getConfigurationProperties = getConfigurationProperties;\r\n    function sanitize(conf) {\r\n        var settings = {};\r\n        for (var ruleName in exports.Rules) {\r\n            var rule = exports.Rules[ruleName];\r\n            var level = _level.toLevel(conf[rule.id]);\r\n            if (level) {\r\n                settings[rule.id] = level;\r\n            }\r\n        }\r\n        return settings;\r\n    }\r\n    exports.sanitize = sanitize;\r\n});\r\n/* old rules\r\n        'duplicate-background-images' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'ignore',\r\n            'description': nls.localize('duplicateBackgroundImages', \"Every background-image should be unique. Use a common class for e.g. sprites.\")\r\n        },\r\n        'gradients' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'warning',\r\n            'description': nls.localize('gradients', \"When using a vendor-prefixed gradient, make sure to use them all.\")\r\n        },\r\n        'outline-none' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'warning',\r\n            'description': nls.localize('outlineNone', \"Use of outline: none or outline: 0 should be limited to :focus rules.\")\r\n        },\r\n        'overqualified-elements' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'ignore',\r\n            'description': nls.localize('overqualifiedElements', \"Don't use classes or IDs with elements (a.foo or a#foo).\")\r\n        },\r\n        'qualified-headings' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'ignore',\r\n            'description': nls.localize('qualifiedHeadings', \"Headings should not be qualified (namespaced).\")\r\n        },\r\n        'regex-selectors' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'ignore',\r\n            'description': nls.localize('regexSelectors', \"Selectors that look like regular expressions are slow and should be avoided.\")\r\n        },\r\n        'shorthand' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'ignore',\r\n            'description': nls.localize('shorthand', \"Use shorthand properties where possible.\")\r\n        },\r\n        'text-indent' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'ignore',\r\n            'description': nls.localize('textIndent', \"Checks for text indent less than -99px.\")\r\n        },\r\n        'unique-headings' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'ignore',\r\n            'description': nls.localize('uniqueHeadings', \"Headings should be defined only once.\")\r\n        },\r\n\r\n        'unqualified-attributes' : {\r\n            'type': 'string',\r\n            'enum': ['ignore', 'warning', 'error'],\r\n            'default': 'ignore',\r\n            'description': nls.localize('unqualifiedAttributes', \"Unqualified attribute selectors are known to be slow.\")\r\n        },\r\n        */\r\n\ndefine(\"vs/languages/css/common/services/lint\", [\"require\", \"exports\", 'vs/languages/css/common/services/languageFacts', 'vs/languages/css/common/services/lintRules', 'vs/languages/css/common/parser/cssNodes', 'vs/nls!vs/languages/css/common/services/lint', 'vs/languages/css/common/level'], function (require, exports, languageFacts, lintRules, nodes, nls, _level) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    var Element = (function () {\r\n        function Element(text, data) {\r\n            this.name = text;\r\n            this.node = data;\r\n        }\r\n        return Element;\r\n    }());\r\n    var NodesByRootMap = (function () {\r\n        function NodesByRootMap() {\r\n            this.data = {};\r\n        }\r\n        NodesByRootMap.prototype.add = function (root, name, node) {\r\n            var entry = this.data[root];\r\n            if (!entry) {\r\n                entry = { nodes: [], names: [] };\r\n                this.data[root] = entry;\r\n            }\r\n            entry.names.push(name);\r\n            if (node) {\r\n                entry.nodes.push(node);\r\n            }\r\n        };\r\n        return NodesByRootMap;\r\n    }());\r\n    var LintVisitor = (function () {\r\n        function LintVisitor(settings) {\r\n            if (settings === void 0) { settings = {}; }\r\n            this.warnings = [];\r\n            this.configuration = {};\r\n            for (var ruleKey in lintRules.Rules) {\r\n                var rule = lintRules.Rules[ruleKey];\r\n                var level = settings[rule.id] || _level.toLevel(rule.defaultValue);\r\n                this.configuration[rule.id] = level;\r\n            }\r\n        }\r\n        LintVisitor.entries = function (node, settings) {\r\n            var visitor = new LintVisitor(settings);\r\n            node.accept(visitor);\r\n            return visitor.getEntries();\r\n        };\r\n        LintVisitor.prototype.fetch = function (input, s) {\r\n            var elements = [];\r\n            for (var i = 0; i < input.length; i++) {\r\n                if (input[i].name.toLowerCase() === s) {\r\n                    elements.push(input[i]);\r\n                }\r\n            }\r\n            return elements;\r\n        };\r\n        LintVisitor.prototype.fetchWithValue = function (input, s, v) {\r\n            var elements = [];\r\n            for (var i = 0; i < input.length; i++) {\r\n                if (input[i].name.toLowerCase() === s) {\r\n                    var expression = input[i].node.getValue();\r\n                    if (expression && this.findValueInExpression(expression, v)) {\r\n                        elements.push(input[i]);\r\n                    }\r\n                }\r\n            }\r\n            return elements;\r\n        };\r\n        LintVisitor.prototype.findValueInExpression = function (expression, v) {\r\n            var found = false;\r\n            expression.accept(function (node) {\r\n                if (node.type === nodes.NodeType.Identifier && node.getText() === v) {\r\n                    found = true;\r\n                }\r\n                return !found;\r\n            });\r\n            return found;\r\n        };\r\n        LintVisitor.prototype.fetchWithin = function (input, s) {\r\n            var elements = [];\r\n            for (var i = 0; i < input.length; i++) {\r\n                if (input[i].name.toLowerCase().indexOf(s) >= 0) {\r\n                    elements.push(input[i]);\r\n                }\r\n            }\r\n            return elements;\r\n        };\r\n        LintVisitor.prototype.getEntries = function (filter) {\r\n            if (filter === void 0) { filter = (_level.Level.Warning | _level.Level.Error); }\r\n            return this.warnings.filter(function (entry) {\r\n                return (entry.getLevel() & filter) !== 0;\r\n            });\r\n        };\r\n        LintVisitor.prototype.addEntry = function (node, rule, details) {\r\n            var entry = new nodes.Marker(node, rule, this.configuration[rule.id], details);\r\n            this.warnings.push(entry);\r\n        };\r\n        LintVisitor.prototype.getMissingNames = function (expected, actual) {\r\n            expected = expected.slice(0); // clone\r\n            for (var i = 0; i < actual.length; i++) {\r\n                var k = expected.indexOf(actual[i]);\r\n                if (k !== -1) {\r\n                    expected[k] = null;\r\n                }\r\n            }\r\n            var result = null;\r\n            for (var i = 0; i < expected.length; i++) {\r\n                var curr = expected[i];\r\n                if (curr) {\r\n                    if (result === null) {\r\n                        result = nls.localize(0, null, curr);\r\n                    }\r\n                    else {\r\n                        result = nls.localize(1, null, result, curr);\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        LintVisitor.prototype.visitNode = function (node) {\r\n            switch (node.type) {\r\n                case nodes.NodeType.Stylesheet:\r\n                    return this.visitStylesheet(node);\r\n                case nodes.NodeType.FontFace:\r\n                    return this.visitFontFace(node);\r\n                case nodes.NodeType.Ruleset:\r\n                    return this.visitRuleSet(node);\r\n                case nodes.NodeType.SimpleSelector:\r\n                    return this.visitSimpleSelector(node);\r\n                case nodes.NodeType.Function:\r\n                    return this.visitFunction(node);\r\n                case nodes.NodeType.NumericValue:\r\n                    return this.visitNumericValue(node);\r\n                case nodes.NodeType.Import:\r\n                    return this.visitImport(node);\r\n            }\r\n            return this.visitUnknownNode(node);\r\n        };\r\n        LintVisitor.prototype.visitStylesheet = function (node) {\r\n            // @keyframe and it's vendor specific alternatives\r\n            // @keyframe should be included\r\n            var _this = this;\r\n            var keyframes = new NodesByRootMap();\r\n            node.accept(function (node) {\r\n                if (node instanceof nodes.Keyframe) {\r\n                    var keyword = node.getKeyword();\r\n                    var text = keyword.getText();\r\n                    keyframes.add(node.getName(), text, (text !== '@keyframes') ? keyword : null);\r\n                }\r\n                return true;\r\n            });\r\n            var expected = ['@-webkit-keyframes', '@-moz-keyframes', '@-o-keyframes'];\r\n            var addVendorSpecificWarnings = function (node) {\r\n                if (needsStandard) {\r\n                    var message = nls.localize(2, null);\r\n                    _this.addEntry(node, lintRules.Rules.IncludeStandardPropertyWhenUsingVendorPrefix, message);\r\n                }\r\n                if (missingVendorSpecific) {\r\n                    var message = nls.localize(3, null, missingVendorSpecific);\r\n                    _this.addEntry(node, lintRules.Rules.AllVendorPrefixes, message);\r\n                }\r\n            };\r\n            for (var name in keyframes.data) {\r\n                var actual = keyframes.data[name].names;\r\n                var needsStandard = (actual.indexOf('@keyframes') === -1);\r\n                if (!needsStandard && actual.length === 1) {\r\n                    continue; // only the non-vendor specific keyword is used, that's fine, no warning\r\n                }\r\n                var missingVendorSpecific = this.getMissingNames(expected, actual);\r\n                if (missingVendorSpecific || needsStandard) {\r\n                    keyframes.data[name].nodes.forEach(addVendorSpecificWarnings);\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        LintVisitor.prototype.visitSimpleSelector = function (node) {\r\n            var text = node.getText();\r\n            /////////////////////////////////////////////////////////////\r\n            //\tLint - The universal selector (*) is known to be slow.\r\n            /////////////////////////////////////////////////////////////\r\n            if (text === '*') {\r\n                this.addEntry(node, lintRules.Rules.UniversalSelector);\r\n            }\r\n            /////////////////////////////////////////////////////////////\r\n            //\tLint - Avoid id selectors\r\n            /////////////////////////////////////////////////////////////\r\n            if (text.indexOf('#') === 0) {\r\n                this.addEntry(node, lintRules.Rules.AvoidIdSelector);\r\n            }\r\n            return true;\r\n        };\r\n        LintVisitor.prototype.visitImport = function (node) {\r\n            /////////////////////////////////////////////////////////////\r\n            //\tLint - Import statements shouldn't be used, because they aren't offering parallel downloads.\r\n            /////////////////////////////////////////////////////////////\r\n            this.addEntry(node, lintRules.Rules.ImportStatemement);\r\n            return true;\r\n        };\r\n        LintVisitor.prototype.visitRuleSet = function (node) {\r\n            var _this = this;\r\n            /////////////////////////////////////////////////////////////\r\n            //\tLint - Don't use empty rulesets.\r\n            /////////////////////////////////////////////////////////////\r\n            var declarations = node.getDeclarations();\r\n            if (!declarations) {\r\n                // syntax error\r\n                return false;\r\n            }\r\n            if (!declarations.hasChildren()) {\r\n                this.addEntry(node.getSelectors(), lintRules.Rules.EmptyRuleSet);\r\n            }\r\n            var self = this;\r\n            var propertyTable = [];\r\n            declarations.getChildren().forEach(function (element) {\r\n                if (element instanceof nodes.Declaration) {\r\n                    var decl = element;\r\n                    propertyTable.push(new Element(decl.getFullPropertyName(), decl));\r\n                }\r\n            }, this);\r\n            /////////////////////////////////////////////////////////////\r\n            //\tDon't use width or height when using padding or border.\r\n            /////////////////////////////////////////////////////////////\r\n            if ((this.fetch(propertyTable, 'width').length > 0 || this.fetch(propertyTable, 'height').length > 0) && (this.fetchWithin(propertyTable, 'padding').length > 0 || this.fetchWithin(propertyTable, 'border').length > 0)) {\r\n                var elements = this.fetch(propertyTable, 'width');\r\n                for (var index = 0; index < elements.length; index++) {\r\n                    this.addEntry(elements[index].node, lintRules.Rules.NoWidthOrHeightWhenPaddingOrBorder);\r\n                }\r\n                elements = this.fetch(propertyTable, 'height');\r\n                for (var index = 0; index < elements.length; index++) {\r\n                    this.addEntry(elements[index].node, lintRules.Rules.NoWidthOrHeightWhenPaddingOrBorder);\r\n                }\r\n                elements = this.fetchWithin(propertyTable, 'padding');\r\n                for (var index = 0; index < elements.length; index++) {\r\n                    this.addEntry(elements[index].node, lintRules.Rules.NoWidthOrHeightWhenPaddingOrBorder);\r\n                }\r\n                elements = this.fetchWithin(propertyTable, 'border');\r\n                for (var index = 0; index < elements.length; index++) {\r\n                    this.addEntry(elements[index].node, lintRules.Rules.NoWidthOrHeightWhenPaddingOrBorder);\r\n                }\r\n            }\r\n            /////////////////////////////////////////////////////////////\r\n            //\tProperties ignored due to display\r\n            /////////////////////////////////////////////////////////////\r\n            // With 'display: inline', the width, height, margin-top, margin-bottom, and float properties have no effect\r\n            var displayElems = this.fetchWithValue(propertyTable, 'display', 'inline');\r\n            if (displayElems.length > 0) {\r\n                ['width', 'height', 'margin-top', 'margin-bottom', 'float'].forEach(function (prop) {\r\n                    var elem = self.fetch(propertyTable, prop);\r\n                    for (var index = 0; index < elem.length; index++) {\r\n                        self.addEntry(elem[index].node, lintRules.Rules.PropertyIgnoredDueToDisplay);\r\n                    }\r\n                });\r\n            }\r\n            // With 'display: inline-block', 'float' has no effect\r\n            displayElems = this.fetchWithValue(propertyTable, 'display', 'inline-block');\r\n            if (displayElems.length > 0) {\r\n                var elem = this.fetch(propertyTable, 'float');\r\n                for (var index = 0; index < elem.length; index++) {\r\n                    this.addEntry(elem[index].node, lintRules.Rules.PropertyIgnoredDueToDisplay);\r\n                }\r\n            }\r\n            // With 'display: block', 'vertical-align' has no effect\r\n            displayElems = this.fetchWithValue(propertyTable, 'display', 'block');\r\n            if (displayElems.length > 0) {\r\n                var elem = this.fetch(propertyTable, 'vertical-align');\r\n                for (var index = 0; index < elem.length; index++) {\r\n                    this.addEntry(elem[index].node, lintRules.Rules.PropertyIgnoredDueToDisplay);\r\n                }\r\n            }\r\n            /////////////////////////////////////////////////////////////\r\n            //\tDon't use !important\r\n            /////////////////////////////////////////////////////////////\r\n            node.accept(function (n) {\r\n                if (n.type === nodes.NodeType.Prio) {\r\n                    self.addEntry(n, lintRules.Rules.AvoidImportant);\r\n                }\r\n                return true;\r\n            });\r\n            /////////////////////////////////////////////////////////////\r\n            //\tAvoid 'float'\r\n            /////////////////////////////////////////////////////////////\r\n            var elements = this.fetch(propertyTable, 'float');\r\n            for (var index = 0; index < elements.length; index++) {\r\n                this.addEntry(elements[index].node, lintRules.Rules.AvoidFloat);\r\n            }\r\n            /////////////////////////////////////////////////////////////\r\n            //\tDon't use duplicate declarations.\r\n            /////////////////////////////////////////////////////////////\r\n            for (var i = 0; i < propertyTable.length; i++) {\r\n                var element = propertyTable[i];\r\n                if (element.name.toLowerCase() !== 'background') {\r\n                    var value = element.node.getValue();\r\n                    if (value && value.getText()[0] !== '-') {\r\n                        var elements = this.fetch(propertyTable, element.name);\r\n                        if (elements.length > 1) {\r\n                            for (var k = 0; k < elements.length; k++) {\r\n                                var value = elements[k].node.getValue();\r\n                                if (value && value.getText()[0] !== '-' && elements[k] !== element) {\r\n                                    this.addEntry(element.node, lintRules.Rules.DuplicateDeclarations);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            /////////////////////////////////////////////////////////////\r\n            //\tUnknown propery & When using a vendor-prefixed gradient, make sure to use them all.\r\n            /////////////////////////////////////////////////////////////\r\n            var propertiesBySuffix = new NodesByRootMap();\r\n            var containsUnknowns = false;\r\n            declarations.getChildren().forEach(function (node) {\r\n                if (_this.isCSSDeclaration(node)) {\r\n                    var decl = node;\r\n                    var name = decl.getFullPropertyName();\r\n                    var firstChar = name.charAt(0);\r\n                    if (firstChar === '-') {\r\n                        if (name.charAt(1) !== '-') {\r\n                            if (!languageFacts.isKnownProperty(name)) {\r\n                                _this.addEntry(decl.getProperty(), lintRules.Rules.UnknownVendorSpecificProperty);\r\n                            }\r\n                            var nonPrefixedName = decl.getNonPrefixedPropertyName();\r\n                            propertiesBySuffix.add(nonPrefixedName, name, decl.getProperty());\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (firstChar === '*' || firstChar === '_') {\r\n                            _this.addEntry(decl.getProperty(), lintRules.Rules.IEStarHack);\r\n                            name = name.substr(1);\r\n                        }\r\n                        if (!languageFacts.isKnownProperty(name)) {\r\n                            _this.addEntry(decl.getProperty(), lintRules.Rules.UnknownProperty);\r\n                        }\r\n                        propertiesBySuffix.add(name, name, null); // don't pass the node as we don't show errors on the standard\r\n                    }\r\n                }\r\n                else {\r\n                    containsUnknowns = true;\r\n                }\r\n            });\r\n            if (!containsUnknowns) {\r\n                var addVendorSpecificWarnings = function (node) {\r\n                    if (needsStandard) {\r\n                        var message = nls.localize(4, null, suffix);\r\n                        _this.addEntry(node, lintRules.Rules.IncludeStandardPropertyWhenUsingVendorPrefix, message);\r\n                    }\r\n                    if (missingVendorSpecific) {\r\n                        var message = nls.localize(5, null, missingVendorSpecific);\r\n                        _this.addEntry(node, lintRules.Rules.AllVendorPrefixes, message);\r\n                    }\r\n                };\r\n                for (var suffix in propertiesBySuffix.data) {\r\n                    var entry = propertiesBySuffix.data[suffix];\r\n                    var actual = entry.names;\r\n                    var needsStandard = languageFacts.isKnownProperty(suffix) && (actual.indexOf(suffix) === -1);\r\n                    if (!needsStandard && actual.length === 1) {\r\n                        continue; // only the non-vendor specific rule is used, that's fine, no warning\r\n                    }\r\n                    var expected = [];\r\n                    for (var i = 0, len = LintVisitor.prefixes.length; i < len; i++) {\r\n                        var prefix = LintVisitor.prefixes[i];\r\n                        if (languageFacts.isKnownProperty(prefix + suffix)) {\r\n                            expected.push(prefix + suffix);\r\n                        }\r\n                    }\r\n                    var missingVendorSpecific = this.getMissingNames(expected, actual);\r\n                    if (missingVendorSpecific || needsStandard) {\r\n                        entry.nodes.forEach(addVendorSpecificWarnings);\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        LintVisitor.prototype.visitNumericValue = function (node) {\r\n            /////////////////////////////////////////////////////////////\r\n            //\t0 has no following unit\r\n            /////////////////////////////////////////////////////////////\r\n            var value = node.getValue();\r\n            if (value.unit === '%') {\r\n                return true;\r\n            }\r\n            if (parseFloat(value.value) === 0.0 && !!value.unit) {\r\n                this.addEntry(node, lintRules.Rules.ZeroWithUnit);\r\n            }\r\n            return true;\r\n        };\r\n        LintVisitor.prototype.visitFontFace = function (node) {\r\n            var _this = this;\r\n            var declarations = node.getDeclarations();\r\n            if (!declarations) {\r\n                // syntax error\r\n                return;\r\n            }\r\n            var definesSrc = false, definesFontFamily = false;\r\n            var containsUnknowns = false;\r\n            declarations.getChildren().forEach(function (node) {\r\n                if (_this.isCSSDeclaration(node)) {\r\n                    var name = (node.getProperty().getName().toLocaleLowerCase());\r\n                    if (name === 'src') {\r\n                        definesSrc = true;\r\n                    }\r\n                    if (name === 'font-family') {\r\n                        definesFontFamily = true;\r\n                    }\r\n                }\r\n                else {\r\n                    containsUnknowns = true;\r\n                }\r\n            });\r\n            if (!containsUnknowns && (!definesSrc || !definesFontFamily)) {\r\n                this.addEntry(node, lintRules.Rules.RequiredPropertiesForFontFace);\r\n            }\r\n            return true;\r\n        };\r\n        LintVisitor.prototype.isCSSDeclaration = function (node) {\r\n            if (node instanceof nodes.Declaration) {\r\n                if (!node.getValue()) {\r\n                    return false;\r\n                }\r\n                var property = node.getProperty();\r\n                if (!property || property.getIdentifier().containsInterpolation()) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        LintVisitor.prototype.visitUnknownNode = function (node) {\r\n            // Rule: #eeff00 or #ef0\r\n            if (node.type === nodes.NodeType.HexColorValue) {\r\n                var text = node.getText();\r\n                if (text.length !== 7 && text.length !== 4) {\r\n                    this.addEntry(node, lintRules.Rules.HexColorLength);\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        LintVisitor.prototype.visitFunction = function (node) {\r\n            var fnName = node.getName().toLowerCase(), expectedAttrCount = -1, actualAttrCount = 0;\r\n            switch (fnName) {\r\n                case 'rgb(':\r\n                case 'hsl(':\r\n                    expectedAttrCount = 3;\r\n                    break;\r\n                case 'rgba(':\r\n                case 'hsla(':\r\n                    expectedAttrCount = 4;\r\n                    break;\r\n            }\r\n            if (expectedAttrCount !== -1) {\r\n                node.getArguments().accept(function (n) {\r\n                    if (n instanceof nodes.BinaryExpression) {\r\n                        actualAttrCount += 1;\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                });\r\n                if (actualAttrCount !== expectedAttrCount) {\r\n                    this.addEntry(node, lintRules.Rules.ArgsInColorFunction);\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        LintVisitor.prefixes = [\r\n            '-ms-', '-moz-', '-o-', '-webkit-',\r\n        ];\r\n        return LintVisitor;\r\n    }());\r\n    exports.LintVisitor = LintVisitor;\r\n});\r\n\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\ndefine(\"vs/languages/css/common/services/cssLanguageService\", [\"require\", \"exports\", 'vs/base/common/winjs.base', 'vs/editor/common/services/resourceService', 'vs/base/common/lifecycle'], function (require, exports, winjs, resourceService, lifecycle_1) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    var PromiseWithTrigger = (function (_super) {\r\n        __extends(PromiseWithTrigger, _super);\r\n        function PromiseWithTrigger() {\r\n            var _this = this;\r\n            _super.call(this, function (c, e, p) {\r\n                _this._valueCallback = c;\r\n                _this._errorCallback = e;\r\n            });\r\n        }\r\n        PromiseWithTrigger.prototype.resolve = function (data) {\r\n            this._valueCallback(data);\r\n            return this;\r\n        };\r\n        PromiseWithTrigger.prototype.reject = function (err) {\r\n            this._errorCallback(err);\r\n            return this;\r\n        };\r\n        return PromiseWithTrigger;\r\n    }(winjs.TPromise));\r\n    var CSSLanguageService = (function () {\r\n        function CSSLanguageService(service, createParser, _cssModeId) {\r\n            var _this = this;\r\n            this._cssModeId = _cssModeId;\r\n            this.resourceService = service;\r\n            this.entries = {};\r\n            this.callOnDispose = [];\r\n            this.createParser = createParser;\r\n            this.updateResources();\r\n            this.callOnDispose.push(this.resourceService.addListener2_(resourceService.ResourceEvents.ADDED, function (e) { return _this.onResourceAdded(e); }));\r\n            this.callOnDispose.push(this.resourceService.addListener2_(resourceService.ResourceEvents.REMOVED, function (e) { return _this.onResourceRemoved(e); }));\r\n            this.callOnDispose.push(this.resourceService.addListener2_(resourceService.ResourceEvents.CHANGED, function (e) { return _this.onResourceChange(e); }));\r\n        }\r\n        CSSLanguageService.prototype.dispose = function () {\r\n            this.callOnDispose = lifecycle_1.dispose(this.callOnDispose);\r\n            clearTimeout(this.onChangeHandle);\r\n            this.onChangeHandle = null;\r\n            this.entries = null;\r\n        };\r\n        CSSLanguageService.prototype.onResourceAdded = function (e) {\r\n            if (this._isMyMirrorModel(e.addedElement)) {\r\n                this._scheduleRefreshLanguageService();\r\n            }\r\n        };\r\n        CSSLanguageService.prototype.onResourceRemoved = function (e) {\r\n            var url = e.url.toString();\r\n            if (this.entries.hasOwnProperty(url)) {\r\n                delete this.entries[url];\r\n            }\r\n        };\r\n        CSSLanguageService.prototype.onResourceChange = function (e) {\r\n            if (this._isMyModel(e.url)) {\r\n                this._scheduleRefreshLanguageService();\r\n            }\r\n        };\r\n        CSSLanguageService.prototype._scheduleRefreshLanguageService = function () {\r\n            var _this = this;\r\n            if (!this.activeDelay) {\r\n                this.activeDelay = new PromiseWithTrigger();\r\n            }\r\n            if (this.onChangeHandle) {\r\n                clearTimeout(this.onChangeHandle);\r\n            }\r\n            this.onChangeHandle = setTimeout(function () {\r\n                _this.updateResources();\r\n                _this.activeDelay.resolve(null);\r\n                _this.activeDelay = null;\r\n                _this.onChangeHandle = null;\r\n            }, 50);\r\n        };\r\n        CSSLanguageService.prototype.join = function () {\r\n            return (this.activeDelay || winjs.TPromise.as(null));\r\n        };\r\n        CSSLanguageService.prototype._isMyMirrorModel = function (resource) {\r\n            return resource.getMode().getId() === this._cssModeId;\r\n        };\r\n        CSSLanguageService.prototype._isMyModel = function (url) {\r\n            return this._isMyMirrorModel(this.resourceService.get(url));\r\n        };\r\n        CSSLanguageService.prototype.updateResources = function () {\r\n            var _this = this;\r\n            var n = 0;\r\n            this.resourceService.all().filter(function (element) { return _this._isMyMirrorModel(element); }).forEach(function (model) {\r\n                // Reparse changes or new models\r\n                var url = model.uri.toString(), entry = _this.entries[url], hasEntry = typeof entry !== 'undefined';\r\n                if (!hasEntry || entry.version !== model.getVersionId()) {\r\n                    if (!hasEntry) {\r\n                        entry = { node: null, version: -1 };\r\n                        _this.entries[url] = entry;\r\n                    }\r\n                    entry.node = _this.createParser().parseStylesheet(model);\r\n                    entry.node.setName(url);\r\n                    entry.version = model.getVersionId();\r\n                    n += 1;\r\n                }\r\n            });\r\n            //\t\tconsole.info('[less] updating ' + n + ' resources took ms' + (new Date().getTime() - t1));\r\n        };\r\n        CSSLanguageService.prototype.getStylesheet = function (resource) {\r\n            if (this.entries.hasOwnProperty(resource.toString())) {\r\n                return this.entries[resource.toString()].node;\r\n            }\r\n            return null;\r\n        };\r\n        return CSSLanguageService;\r\n    }());\r\n    exports.CSSLanguageService = CSSLanguageService;\r\n});\r\n\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\ndefine(\"vs/languages/css/common/cssWorker\", [\"require\", \"exports\", 'vs/nls!vs/languages/css/common/cssWorker', 'vs/base/common/severity', 'vs/base/common/strings', 'vs/base/common/winjs.base', 'vs/languages/css/common/services/cssLanguageService', 'vs/languages/css/common/services/languageFacts', './services/occurrences', 'vs/languages/css/common/services/intelliSense', 'vs/editor/common/modes', 'vs/languages/css/common/parser/cssNodes', 'vs/languages/css/common/level', 'vs/languages/css/common/parser/cssParser', 'vs/languages/css/common/services/selectorPrinting', 'vs/languages/css/common/services/lint', 'vs/languages/css/common/services/lintRules', 'vs/platform/markers/common/markers', 'vs/editor/common/core/range', 'vs/editor/common/services/resourceService', 'vs/editor/common/modes/supports/suggestSupport', 'vs/editor/common/worker/validationHelper'], function (require, exports, nls, severity_1, strings, winjs, languageService, languageFacts, occurrences, cssIntellisense, modes, nodes, _level, parser, selectorPrinting, lint, lintRules, markers_1, range_1, resourceService_1, suggestSupport_1, validationHelper_1) {\r\n    /*---------------------------------------------------------------------------------------------\r\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n     *--------------------------------------------------------------------------------------------*/\r\n    'use strict';\r\n    var CSSWorker = (function () {\r\n        function CSSWorker(modeId, resourceService, markerService) {\r\n            var _this = this;\r\n            this._modeId = modeId;\r\n            this.resourceService = resourceService;\r\n            this.markerService = markerService;\r\n            this._validationHelper = new validationHelper_1.ValidationHelper(this.resourceService, this._modeId, function (toValidate) { return _this.doValidate(toValidate); });\r\n            this.languageService = this.createLanguageService(resourceService, modeId);\r\n            this.lintSettings = {};\r\n            this.validationEnabled = true;\r\n        }\r\n        CSSWorker.prototype.navigateValueSet = function (resource, range, up) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var model = _this.resourceService.get(resource);\r\n                var offset = model.getOffsetFromPosition({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n                var styleSheet = _this.languageService.getStylesheet(resource);\r\n                var node = nodes.getNodeAtOffset(styleSheet, offset);\r\n                if (!node) {\r\n                    return;\r\n                }\r\n                var declaration = nodes.getParentDeclaration(node);\r\n                if (!declaration) {\r\n                    return;\r\n                }\r\n                var entry = languageFacts.getProperties()[declaration.getFullPropertyName()];\r\n                if (!entry || !entry.values) {\r\n                    return;\r\n                }\r\n                var values = entry.values.filter(function (value) { return languageFacts.isCommonValue(value); }).map(function (v) { return v.name; });\r\n                var isColor = (entry.restrictions.indexOf('color') >= 0);\r\n                if (isColor) {\r\n                    values = values.concat(Object.getOwnPropertyNames(languageFacts.colors), Object.getOwnPropertyNames(languageFacts.colorKeywords));\r\n                }\r\n                var text = node.getText();\r\n                for (var i = 0, len = values.length; i < len; i++) {\r\n                    if (strings.equalsIgnoreCase(values[i], text)) {\r\n                        var nextIdx = i;\r\n                        if (up) {\r\n                            nextIdx = (i + 1) % len;\r\n                        }\r\n                        else {\r\n                            nextIdx = i - 1;\r\n                            if (nextIdx < 0) {\r\n                                nextIdx = len - 1;\r\n                            }\r\n                        }\r\n                        var result = {\r\n                            value: values[nextIdx],\r\n                            range: _this._range(node, model)\r\n                        };\r\n                        return result;\r\n                    }\r\n                }\r\n                // if none matches, take the first one\r\n                if (values.length > 0) {\r\n                    var result = {\r\n                        value: values[0],\r\n                        range: _this._range(node, model)\r\n                    };\r\n                    return result;\r\n                }\r\n                return null;\r\n            });\r\n        };\r\n        CSSWorker.prototype.createLanguageService = function (resourceService, modeId) {\r\n            return new languageService.CSSLanguageService(resourceService, this.createParser.bind(this), modeId);\r\n        };\r\n        CSSWorker.prototype.createParser = function () {\r\n            return new parser.Parser();\r\n        };\r\n        CSSWorker.prototype._doConfigure = function (raw) {\r\n            if (raw) {\r\n                this.validationEnabled = raw.validate;\r\n                if (raw.lint) {\r\n                    this.lintSettings = lintRules.sanitize(raw.lint);\r\n                }\r\n                else {\r\n                    this.lintSettings = {};\r\n                }\r\n                this._validationHelper.triggerDueToConfigurationChange();\r\n            }\r\n            return winjs.TPromise.as(void 0);\r\n        };\r\n        CSSWorker.prototype.enableValidator = function () {\r\n            this._validationHelper.enable();\r\n            return winjs.TPromise.as(null);\r\n        };\r\n        CSSWorker.prototype.doValidate = function (resources) {\r\n            for (var i = 0; i < resources.length; i++) {\r\n                this.doValidate1(resources[i]);\r\n            }\r\n        };\r\n        CSSWorker.prototype.doValidate1 = function (resource) {\r\n            var _this = this;\r\n            if (!this.validationEnabled) {\r\n                this.markerService.changeOne(this._modeId, resource, []);\r\n                return;\r\n            }\r\n            this.languageService.join().then(function () {\r\n                var modelMirror = _this.resourceService.get(resource), node = _this.languageService.getStylesheet(resource), entries = [];\r\n                entries.push.apply(entries, nodes.ParseErrorCollector.entries(node));\r\n                entries.push.apply(entries, _this.collectLintEntries(node));\r\n                var markerData = entries\r\n                    .filter(function (entry) { return entry.getLevel() !== _level.Level.Ignore; })\r\n                    .map(function (entry) { return _this._createMarkerData(modelMirror, entry); });\r\n                _this.markerService.changeOne(_this._modeId, resource, markerData);\r\n            });\r\n        };\r\n        CSSWorker.prototype._createMarkerData = function (model, marker) {\r\n            var range = model.getRangeFromOffsetAndLength(marker.getOffset(), marker.getLength());\r\n            return {\r\n                code: marker.getRule().id,\r\n                message: marker.getMessage(),\r\n                severity: marker.getLevel() === _level.Level.Warning ? severity_1.default.Warning : severity_1.default.Error,\r\n                startLineNumber: range.startLineNumber,\r\n                startColumn: range.startColumn,\r\n                endLineNumber: range.endLineNumber,\r\n                endColumn: range.endColumn\r\n            };\r\n        };\r\n        CSSWorker.prototype.collectLintEntries = function (stylesheet) {\r\n            return lint.LintVisitor.entries(stylesheet, this.lintSettings);\r\n        };\r\n        CSSWorker.prototype.createIntellisense = function () {\r\n            return new cssIntellisense.CSSIntellisense();\r\n        };\r\n        CSSWorker.prototype.provideCompletionItems = function (resource, position) {\r\n            return this.doSuggest(resource, position).then(function (value) { return suggestSupport_1.filterSuggestions(value); });\r\n        };\r\n        CSSWorker.prototype.doSuggest = function (resource, position) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var model = _this.resourceService.get(resource);\r\n                var result = _this.createIntellisense().getCompletionsAtPosition(_this.languageService, model, resource, position);\r\n                return result;\r\n            });\r\n        };\r\n        CSSWorker.prototype.provideDocumentSymbols = function (resource) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var model = _this.resourceService.get(resource), stylesheet = _this.languageService.getStylesheet(resource), result = [];\r\n                stylesheet.accept(function (node) {\r\n                    var entry = {\r\n                        name: null,\r\n                        kind: modes.SymbolKind.Class,\r\n                        location: null\r\n                    };\r\n                    if (node instanceof nodes.Selector) {\r\n                        entry.name = node.getText();\r\n                    }\r\n                    else if (node instanceof nodes.VariableDeclaration) {\r\n                        entry.name = node.getName();\r\n                        entry.kind = modes.SymbolKind.Variable;\r\n                    }\r\n                    else if (node instanceof nodes.MixinDeclaration) {\r\n                        entry.name = node.getName();\r\n                        entry.kind = modes.SymbolKind.Method;\r\n                    }\r\n                    else if (node instanceof nodes.FunctionDeclaration) {\r\n                        entry.name = node.getName();\r\n                        entry.kind = modes.SymbolKind.Function;\r\n                    }\r\n                    else if (node instanceof nodes.Keyframe) {\r\n                        entry.name = nls.localize(0, null, node.getName());\r\n                    }\r\n                    else if (node instanceof nodes.FontFace) {\r\n                        entry.name = nls.localize(1, null);\r\n                    }\r\n                    if (entry.name) {\r\n                        entry.location = {\r\n                            uri: resource,\r\n                            range: _this._range(node, model, true)\r\n                        };\r\n                        result.push(entry);\r\n                    }\r\n                    return true;\r\n                });\r\n                return result;\r\n            });\r\n        };\r\n        CSSWorker.prototype.provideHover = function (resource, position) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var model = _this.resourceService.get(resource), offset = model.getOffsetFromPosition(position), stylesheet = _this.languageService.getStylesheet(resource), nodepath = nodes.getNodePath(stylesheet, offset);\r\n                for (var i = 0; i < nodepath.length; i++) {\r\n                    var node = nodepath[i];\r\n                    if (node instanceof nodes.Selector) {\r\n                        return {\r\n                            htmlContent: [selectorPrinting.selectorToHtml(node)],\r\n                            range: _this._range(node, model)\r\n                        };\r\n                    }\r\n                    if (node instanceof nodes.SimpleSelector) {\r\n                        return {\r\n                            htmlContent: [selectorPrinting.simpleSelectorToHtml(node)],\r\n                            range: _this._range(node, model)\r\n                        };\r\n                    }\r\n                    if (node instanceof nodes.Declaration) {\r\n                        var propertyName = node.getFullPropertyName();\r\n                        var entry = languageFacts.getProperties()[propertyName];\r\n                        if (entry) {\r\n                            return {\r\n                                htmlContent: [{ text: entry.description }],\r\n                                range: _this._range(node, model)\r\n                            };\r\n                        }\r\n                    }\r\n                }\r\n                return null;\r\n            });\r\n        };\r\n        CSSWorker.prototype.provideDefinition = function (resource, position) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var model = _this.resourceService.get(resource), offset = model.getOffsetFromPosition(position), node = occurrences.findDeclaration(_this.languageService.getStylesheet(resource), offset);\r\n                if (!node) {\r\n                    return null;\r\n                }\r\n                return {\r\n                    uri: resource,\r\n                    range: _this._range(node, model, true)\r\n                };\r\n            });\r\n        };\r\n        CSSWorker.prototype.provideDocumentHighlights = function (resource, position) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var model = _this.resourceService.get(resource), offset = model.getOffsetFromPosition(position), nodes = occurrences.findOccurrences(_this.languageService.getStylesheet(resource), offset);\r\n                return nodes.map(function (occurrence) {\r\n                    return {\r\n                        range: _this._range(occurrence.node, model),\r\n                        kind: occurrence.kind\r\n                    };\r\n                });\r\n            });\r\n        };\r\n        CSSWorker.prototype.provideReferences = function (resource, position) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var model = _this.resourceService.get(resource), offset = model.getOffsetFromPosition(position), nodes = occurrences.findOccurrences(_this.languageService.getStylesheet(resource), offset);\r\n                return nodes.map(function (occurrence) {\r\n                    return {\r\n                        uri: model.uri,\r\n                        range: _this._range(occurrence.node, model)\r\n                    };\r\n                });\r\n            });\r\n        };\r\n        CSSWorker.prototype.findColorDeclarations = function (resource) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var model = _this.resourceService.get(resource), styleSheet = _this.languageService.getStylesheet(resource), result = [];\r\n                styleSheet.accept(function (node) {\r\n                    if (languageFacts.isColorValue(node)) {\r\n                        result.push({\r\n                            range: _this._range(node, model),\r\n                            value: node.getText()\r\n                        });\r\n                    }\r\n                    return true;\r\n                });\r\n                return result;\r\n            });\r\n        };\r\n        CSSWorker.prototype._range = function (node, model, empty) {\r\n            if (empty === void 0) { empty = false; }\r\n            if (empty) {\r\n                var position = model.getPositionFromOffset(node.offset);\r\n                return {\r\n                    startLineNumber: position.lineNumber,\r\n                    startColumn: position.column,\r\n                    endLineNumber: position.lineNumber,\r\n                    endColumn: position.column\r\n                };\r\n            }\r\n            else {\r\n                return model.getRangeFromOffsetAndLength(node.offset, node.length);\r\n            }\r\n        };\r\n        CSSWorker.prototype.getFixesForUnknownProperty = function (property, marker) {\r\n            var propertyName = property.getName();\r\n            var result = [];\r\n            for (var p in languageFacts.getProperties()) {\r\n                var score = strings.difference(propertyName, p);\r\n                if (score >= propertyName.length / 2 /*score_lim*/) {\r\n                    result.push({\r\n                        command: {\r\n                            id: '_css.replaceText',\r\n                            title: nls.localize(2, null, p),\r\n                            arguments: [{ range: range_1.Range.lift(marker), newText: p }]\r\n                        },\r\n                        score: score\r\n                    });\r\n                }\r\n            }\r\n            // Sort in descending order.\r\n            result.sort(function (a, b) {\r\n                return b.score - a.score;\r\n            });\r\n            return result.slice(0, 3 /*max_result*/);\r\n        };\r\n        CSSWorker.prototype.appendFixesForMarker = function (bucket, marker) {\r\n            if (marker.code !== lintRules.Rules.UnknownProperty.id) {\r\n                return;\r\n            }\r\n            var model = this.resourceService.get(marker.resource), offset = model.getOffsetFromPosition({ column: marker.startColumn, lineNumber: marker.startLineNumber }), stylesheet = this.languageService.getStylesheet(marker.resource), nodepath = nodes.getNodePath(stylesheet, offset);\r\n            for (var i = nodepath.length - 1; i >= 0; i--) {\r\n                var node = nodepath[i];\r\n                if (node instanceof nodes.Declaration) {\r\n                    var property = node.getProperty();\r\n                    if (property && property.offset === offset && property.length === marker.endColumn - marker.startColumn) {\r\n                        bucket.push.apply(bucket, this.getFixesForUnknownProperty(property, marker));\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        CSSWorker.prototype.provideCodeActions = function (resource, range) {\r\n            var _this = this;\r\n            return this.languageService.join().then(function () {\r\n                var result = [];\r\n                _this.markerService.read({ resource: resource })\r\n                    .filter(function (marker) { return range_1.Range.containsRange(range, marker); })\r\n                    .forEach(function (marker) { return _this.appendFixesForMarker(result, marker); });\r\n                return result;\r\n            });\r\n        };\r\n        CSSWorker = __decorate([\r\n            __param(1, resourceService_1.IResourceService),\r\n            __param(2, markers_1.IMarkerService)\r\n        ], CSSWorker);\r\n        return CSSWorker;\r\n    }());\r\n    exports.CSSWorker = CSSWorker;\r\n});\r\n\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nexport enum Level {\n\tIgnore = 1,\n\tWarning = 2,\n\tError = 4\n}\n\nexport function toLevel(level: string):Level {\n\tswitch (level) {\n\t\tcase 'ignore': return Level.Ignore;\n\t\tcase 'warning': return Level.Warning;\n\t\tcase 'error': return Level.Error;\n\t}\n\treturn null;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport types = require('vs/base/common/types');\nimport _level = require('vs/languages/css/common/level');\n\n/// <summary>\n/// Nodes for the css 2.1 specification. See for reference:\n/// http://www.w3.org/TR/CSS21/grammar.html#grammar\n/// </summary>\n\nexport enum NodeType {\n\tUndefined,\n\tIdentifier,\n\tStylesheet,\n\tRuleset,\n\tSelector,\n\tSimpleSelector,\n\tSelectorInterpolation,\n\tSelectorCombinator,\n\tSelectorCombinatorParent,\n\tSelectorCombinatorSibling,\n\tSelectorCombinatorAllSiblings,\n\tPage,\n\tPageBoxMarginBox,\n\tClassSelector,\n\tIdentifierSelector,\n\tElementNameSelector,\n\tPseudoSelector,\n\tAttributeSelector,\n\tDeclaration,\n\tDeclarations,\n\tProperty,\n\tExpression,\n\tBinaryExpression,\n\tTerm,\n\tOperator,\n\tValue,\n\tStringLiteral,\n\tURILiteral,\n\tEscapedValue,\n\tFunction,\n\tNumericValue,\n\tHexColorValue,\n\tMixinDeclaration,\n\tMixinReference,\n\tVariableName,\n\tVariableDeclaration,\n\tPrio,\n\tInterpolation,\n\tNestedProperties,\n\tExtendsReference,\n\tSelectorPlaceholder,\n\tDebug,\n\tIf,\n\tElse,\n\tFor,\n\tEach,\n\tWhile,\n\tMixinContent,\n\tMedia,\n\tKeyframe,\n\tFontFace,\n\tImport,\n\tNamespace,\n\tInvocation,\n\tFunctionDeclaration,\n\tReturnStatement,\n\tMediaQuery,\n\tFunctionParameter,\n\tFunctionArgument,\n\tKeyframeSelector,\n\tViewPort,\n\tDocument\n}\n\nexport enum ReferenceType {\n\tMixin,\n\tRule,\n\tVariable,\n\tFunction,\n\tKeyframe,\n\tUnknown\n}\n\n\n\nexport function getNodeAtOffset(node:Node, offset:number):Node {\n\n\tvar candidate:Node = null;\n\tif (!node || offset < node.offset || offset > node.offset + node.length ) {\n\t\treturn null;\n\t}\n\n\t// Find the shortest node at the position\n\tnode.accept((node) => {\n\t\tif (node.offset === -1 && node.length === -1) {\n\t\t\treturn true;\n\t\t}\n\t\tif (node.offset <= offset && node.offset + node.length >= offset) {\n\t\t\tif(!candidate) {\n\t\t\t\tcandidate = node;\n\t\t\t} else if(node.length <= candidate.length) {\n\t\t\t\tcandidate = node;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t});\n\treturn candidate;\n}\n\nexport function getNodePath(node:Node, offset:number):Node[] {\n\n\tvar candidate:Node = getNodeAtOffset(node, offset),\n\t\tpath:Node[] = [];\n\n\twhile(candidate) {\n\t\tpath.unshift(candidate);\n\t\tcandidate = candidate.parent;\n\t}\n\n\treturn path;\n}\n\nexport function getParentDeclaration(node:Node) : Declaration {\n\tvar decl = <Declaration> node.findParent(NodeType.Declaration);\n\tif (decl && decl.getValue() && decl.getValue().encloses(node)) {\n\t\treturn decl;\n\t}\n\treturn null;\n}\n\nexport interface ITextProvider {\n\t(offset: number, length: number) : string;\n}\n\n\nexport class Node {\n\n\tpublic parent:Node;\n\n\tpublic offset:number;\n\tpublic length:number;\n\n\tpublic options:{[name:string]:any;};\n\n\tpublic textProvider: ITextProvider; // only set on the root node\n\n\tprivate children:Node[];\n\tprivate issues:IMarker[];\n\n\tprivate nodeType: NodeType;\n\n\tconstructor(offset:number=-1, len:number=-1, nodeType?: NodeType) {\n\t\tthis.parent = null;\n\t\tthis.offset = offset;\n\t\tthis.length = len;\n\t\tif (nodeType) {\n\t\t\tthis.nodeType = nodeType;\n\t\t}\n\t}\n\n\tpublic set type(type:NodeType) {\n\t\tthis.nodeType = type;\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn this.nodeType || NodeType.Undefined;\n\t}\n\n\tpublic getTextProvider(): ITextProvider {\n\t\tvar node: Node = this;\n\t\twhile (node && !node.textProvider) {\n\t\t\tnode = node.parent;\n\t\t}\n\t\tif (node) {\n\t\t\treturn node.textProvider;\n\t\t}\n\t\treturn () => { return 'unknown'; };\n\t}\n\n\tpublic getText():string {\n\t\treturn this.getTextProvider()(this.offset, this.length);\n\t}\n\n\tpublic matches(str:string) : boolean {\n\t\treturn this.length === str.length && this.getTextProvider()(this.offset, this.length) === str;\n\t}\n\n\tpublic startsWith(str: string) : boolean {\n\t\treturn this.length >= str.length && this.getTextProvider()(this.offset, str.length) === str;\n\t}\n\n\tpublic endsWith(str: string) : boolean {\n\t\treturn this.length >= str.length && this.getTextProvider()(this.offset + this.length - str.length, str.length) === str;\n\t}\n\n\tpublic accept(visitor: IVisitorFunction):void;\n\tpublic accept(visitor: IVisitor):void;\n\tpublic accept(visitor: any):void {\n\n\t\tif(!types.isFunction(visitor)) {\n\t\t\tvisitor = visitor.visitNode.bind(visitor);\n\t\t}\n\n\t\tif(visitor(this) && this.children) {\n\t\t\tthis.children.forEach((child) => {\n\t\t\t\tchild.accept(visitor);\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic adoptChild(node:Node, index: number = -1):Node {\n\t\tif (node.parent && node.parent.children) {\n\t\t\tvar idx = node.parent.children.indexOf(node);\n\t\t\tif(idx >= 0) {\n\t\t\t\tnode.parent.children.splice(idx, 1);\n\t\t\t}\n\t\t}\n\t\tnode.parent = this;\n\t\tvar children = this.children;\n\t\tif (!children) {\n\t\t\tchildren = this.children = [];\n\t\t}\n\t\tif (index !== -1) {\n\t\t\tchildren.splice(idx, 0, node);\n\t\t} else {\n\t\t\tchildren.push(node);\n\t\t}\n\t\treturn node;\n\t}\n\n\tpublic attachTo(parent:Node, index:number=-1):Node {\n\t\tif (parent) {\n\t\t\tparent.adoptChild(this, index);\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic collectIssues(results:any[]) : void {\n\t\tif (this.issues) {\n\t\t\tresults.push.apply(results, this.issues);\n\t\t}\n\t}\n\n\tpublic addIssue(issue: IMarker) : void {\n\t\tif (!this.issues) {\n\t\t\tthis.issues = [];\n\t\t}\n\t\tthis.issues.push(issue);\n\t}\n\n\tpublic hasIssue(rule: IRule) : boolean {\n\t\treturn this.issues && this.issues.some(i => i.getRule() === rule);\n\t}\n\n\tpublic isErroneous():boolean {\n\t\treturn this.issues && this.issues.length > 0;\n\t}\n\n\tpublic setNode(field:string, node:Node, index:number=-1):boolean {\n\t\tif(node) {\n\t\t\tnode.attachTo(this, index);\n\t\t\tthis[field] = node;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic addChild(node:Node):boolean {\n\t\tif(node) {\n\t\t\tif (!this.children) {\n\t\t\t\tthis.children = [];\n\t\t\t}\n\t\t\tnode.attachTo(this);\n\t\t\tthis.updateOffsetAndLength(node);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate updateOffsetAndLength(node:Node):void {\n\t\tif (node.offset < this.offset || this.offset === -1) {\n\t\t\tthis.offset = node.offset;\n\t\t}\n\t\tif ((node.offset + node.length > this.offset + this.length) || this.length === -1)  {\n\t\t\tthis.length = node.offset + node.length - this.offset;\n\t\t}\n\t}\n\n\tpublic hasChildren():boolean {\n\t\treturn this.children && this.children.length > 0;\n\t}\n\n\tpublic getChildren():Node[] {\n\t\treturn this.children ? this.children.slice(0) : [];\n\t}\n\n\tpublic getChild(index:number):Node {\n\t\tif (this.children && index < this.children.length) {\n\t\t\treturn this.children[index];\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic addChildren(nodes:Node[]):void {\n\t\tnodes.forEach((node) => this.addChild(node));\n\t}\n\n\tpublic findFirstChildBeforeOffset(offset:number): Node {\n\t\tif (this.children) {\n\t\t\tvar current:Node = null;\n\t\t\tfor (var i= this.children.length - 1; i >= 0; i--) {\n\t\t\t\t// iterate until we find a child that has a start offset smaller than the input offset\n\t\t\t\tcurrent= this.children[i];\n\t\t\t\tif (current.offset <= offset) {\n\t\t\t\t\treturn current;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic findChildAtOffset(offset:number, goDeep: boolean): Node {\n\t\tvar current:Node = this.findFirstChildBeforeOffset(offset);\n\t\tif (current && current.offset + current.length >= offset) {\n\t\t\tif (goDeep) {\n\t\t\t\treturn current.findChildAtOffset(offset, true) || current;\n\t\t\t}\n\t\t\treturn current;\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic encloses(candidate:Node):boolean {\n\t\treturn this.offset <= candidate.offset && this.offset + this.length >= candidate.offset + candidate.length;\n\t}\n\n\tpublic getParent():Node {\n\t\tvar result = this.parent;\n\t\twhile(result instanceof Nodelist) {\n\t\t\tresult = result.parent;\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic findParent(type:NodeType):Node {\n\t\tvar result: Node = this;\n\t\twhile (result && result.type !== type) {\n\t\t\tresult = result.parent;\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic setData(key:string, value:any):void {\n\t\tif(!this.options) {\n\t\t\tthis.options = {};\n\t\t}\n\t\tthis.options[key] = value;\n\t}\n\n\tpublic getData(key:string):any {\n\t\tif(!this.options || !this.options.hasOwnProperty(key)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.options[key];\n\t}\n}\n\nexport class Nodelist extends Node {\n\n\tconstructor(parent:Node, index:number = -1) {\n\t\tsuper(-1, -1);\n\t\tthis.attachTo(parent, index);\n\t\tthis.offset = -1;\n\t\tthis.length = -1;\n\t}\n}\n\n\nexport class Identifier extends Node {\n\n\tpublic referenceTypes: ReferenceType[];\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Identifier;\n\t}\n\n\tpublic containsInterpolation() : boolean {\n\t\treturn this.hasChildren();\n\t}\n}\n\nexport class Stylesheet extends Node {\n\n\tprivate name:string;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Stylesheet;\n\t}\n\n\tpublic setName(value:string):void {\n\t\tthis.name = value;\n\t}\n\n}\n\nexport class Declarations extends Node {\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Declarations;\n\t}\n}\n\nexport class BodyDeclaration extends Node {\n\n\tprivate declarations: Declarations;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic getDeclarations():Declarations {\n\t\treturn this.declarations;\n\t}\n\n\tpublic setDeclarations(decls:Declarations):boolean {\n\t\treturn this.setNode('declarations', decls);\n\t}\n\n}\n\nexport class RuleSet extends BodyDeclaration {\n\n\tprivate selectors:Nodelist;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Ruleset;\n\t}\n\n\tpublic getSelectors():Nodelist {\n\t\tif (!this.selectors) {\n\t\t\tthis.selectors = new Nodelist(this);\n\t\t}\n\t\treturn this.selectors;\n\t}\n\n\tpublic isNested():boolean {\n\t\treturn this.parent && this.parent.findParent(NodeType.Ruleset) !== null;\n\t}\n}\n\nexport class Selector extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Selector;\n\t}\n\n}\n\nexport class SimpleSelector extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.SimpleSelector;\n\t}\n}\n\nexport abstract class AbstractDeclaration extends Node {\n\n\t// positions for code assist\n\tpublic colonPosition:number;\n\tpublic semicolonPosition:number; // semicolon following the declaration\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n}\n\nexport class Declaration extends AbstractDeclaration {\n\n\tprivate property:Property;\n\tprivate value:Expression;\n\tprivate nestedProprties:NestedProperties;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Declaration;\n\t}\n\n\tpublic setProperty(node:Property):boolean {\n\t\treturn this.setNode('property', node);\n\t}\n\n\tpublic getProperty():Property {\n\t\treturn this.property;\n\t}\n\n\tpublic getFullPropertyName(): string {\n\t\tvar propertyName = this.property ? this.property.getName() : 'unknown';\n\t\tif (this.parent instanceof Declarations && this.parent.getParent() instanceof NestedProperties) {\n\t\t\tvar parentDecl = this.parent.getParent().getParent();\n\t\t\tif (parentDecl instanceof Declaration) {\n\t\t\t\treturn (<Declaration> parentDecl).getFullPropertyName() + propertyName;\n\t\t\t}\n\t\t}\n\t\treturn propertyName;\n\t}\n\n\tpublic getNonPrefixedPropertyName() : string {\n\t\tvar propertyName = this.getFullPropertyName();\n\t\tif (propertyName && propertyName.charAt(0) === '-') {\n\t\t\tvar vendorPrefixEnd = propertyName.indexOf('-', 1);\n\t\t\tif (vendorPrefixEnd !== -1) {\n\t\t\t\treturn propertyName.substring(vendorPrefixEnd + 1);\n\t\t\t}\n\t\t}\n\t\treturn propertyName;\n\t}\n\n\tpublic setValue(value:Expression):boolean {\n\t\treturn this.setNode('value', value);\n\t}\n\n\tpublic getValue():Expression {\n\t\treturn this.value;\n\t}\n\n\tpublic setNestedProperties(value:NestedProperties):boolean {\n\t\treturn this.setNode('nestedProprties', value);\n\t}\n\n\tpublic getNestedProperties():NestedProperties {\n\t\treturn this.nestedProprties;\n\t}\n}\n\nexport class Property extends Node {\n\n\tprivate identifier: Identifier;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Property;\n\t}\n\n\tpublic setIdentifier(value: Identifier): boolean {\n\t\treturn this.setNode('identifier', value);\n\t}\n\n\tpublic getIdentifier():Identifier {\n\t\treturn this.identifier;\n\t}\n\n\tpublic getName():string {\n\t\treturn this.getText();\n\t}\n}\n\nexport class Invocation extends Node {\n\n\tprivate arguments:Nodelist;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Invocation;\n\t}\n\n\tpublic getArguments():Nodelist {\n\t\tif(!this.arguments) {\n\t\t\tthis.arguments = new Nodelist(this);\n\t\t}\n\t\treturn this.arguments;\n\t}\n}\n\nexport class Function extends Invocation {\n\n\tprivate identifier:Identifier;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Function;\n\t}\n\n\tpublic setIdentifier(node:Identifier):boolean {\n\t\treturn this.setNode('identifier', node, 0);\n\t}\n\n\tpublic getIdentifier(): Identifier {\n\t\treturn this.identifier;\n\t}\n\n\tpublic getName() : string {\n\t\treturn this.identifier ? this.identifier.getText() : '';\n\t}\n\n}\n\nexport class FunctionParameter extends Node {\n\n\tprivate identifier:Node;\n\tprivate defaultValue:Node;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.FunctionParameter;\n\t}\n\n\tpublic setIdentifier(node:Node):boolean {\n\t\treturn this.setNode('identifier', node, 0);\n\t}\n\n\tpublic getIdentifier(): Node {\n\t\treturn this.identifier;\n\t}\n\n\tpublic getName() : string {\n\t\treturn this.identifier ? this.identifier.getText() : '';\n\t}\n\n\tpublic setDefaultValue(node: Node):boolean {\n\t\treturn this.setNode('defaultValue', node, 0);\n\t}\n\n\tpublic getDefaultValue(): Node {\n\t\treturn this.defaultValue;\n\t}\n}\n\nexport class FunctionArgument extends Node {\n\n\tprivate identifier:Node;\n\tprivate value:Node;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.FunctionArgument;\n\t}\n\n\tpublic setIdentifier(node:Node):boolean {\n\t\treturn this.setNode('identifier', node, 0);\n\t}\n\n\tpublic getIdentifier(): Node {\n\t\treturn this.identifier;\n\t}\n\n\tpublic getName() : string {\n\t\treturn this.identifier ? this.identifier.getText() : '';\n\t}\n\n\tpublic setValue(node: Node):boolean {\n\t\treturn this.setNode('value', node, 0);\n\t}\n\n\tpublic getValue(): Node {\n\t\treturn this.value;\n\t}\n}\n\nexport class IfStatement extends BodyDeclaration {\n\tpublic expression:Expression;\n\tpublic elseClause: BodyDeclaration;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.If;\n\t}\n\n\tpublic setExpression(node:Expression):boolean {\n\t\treturn this.setNode('expression', node, 0);\n\t}\n\n\tpublic setElseClause(elseClause:BodyDeclaration):boolean {\n\t\treturn this.setNode('elseClause', elseClause);\n\t}\n}\n\nexport class ForStatement extends BodyDeclaration {\n\tpublic variable:Variable;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.For;\n\t}\n\n\tpublic setVariable(node:Variable):boolean {\n\t\treturn this.setNode('variable', node, 0);\n\t}\n}\n\nexport class EachStatement extends BodyDeclaration {\n\tpublic variable:Variable;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Each;\n\t}\n\n\tpublic setVariable(node:Variable):boolean {\n\t\treturn this.setNode('variable', node, 0);\n\t}\n}\n\nexport class WhileStatement extends BodyDeclaration {\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.While;\n\t}\n}\n\nexport class ElseStatement extends BodyDeclaration {\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Else;\n\t}\n}\n\nexport class FunctionDeclaration extends BodyDeclaration {\n\tprivate identifier:Identifier;\n\tprivate parameters: Nodelist;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.FunctionDeclaration;\n\t}\n\n\tpublic setIdentifier(node:Identifier):boolean {\n\t\treturn this.setNode('identifier', node, 0);\n\t}\n\n\tpublic getIdentifier(): Identifier {\n\t\treturn this.identifier;\n\t}\n\n\tpublic getName() : string {\n\t\treturn this.identifier ? this.identifier.getText() : '';\n\t}\n\n\tpublic getParameters():Nodelist {\n\t\tif(!this.parameters) {\n\t\t\tthis.parameters = new Nodelist(this);\n\t\t}\n\t\treturn this.parameters;\n\t}\n}\n\nexport class ViewPort extends BodyDeclaration {\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.ViewPort;\n\t}\n}\n\nexport class FontFace extends BodyDeclaration {\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.FontFace;\n\t}\n\n}\n\nexport class NestedProperties extends BodyDeclaration {\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.NestedProperties;\n\t}\n}\n\nexport class Keyframe extends BodyDeclaration {\n\n\tprivate keyword: Node;\n\tprivate identifier:Identifier;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Keyframe;\n\t}\n\n\tpublic setKeyword(keyword:Node):boolean {\n\t\treturn this.setNode('keyword', keyword, 0);\n\t}\n\n\tpublic getKeyword(): Node {\n\t\treturn this.keyword;\n\t}\n\n\tpublic setIdentifier(node:Identifier):boolean {\n\t\treturn this.setNode('identifier', node, 0);\n\t}\n\n\tpublic getIdentifier(): Identifier {\n\t\treturn this.identifier;\n\t}\n\n\tpublic getName() : string {\n\t\treturn this.identifier ? this.identifier.getText() : '';\n\t}\n}\n\nexport class KeyframeSelector extends BodyDeclaration {\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.KeyframeSelector;\n\t}\n}\n\nexport class Import extends Node {\n\n\tprivate medialist:Node;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Import;\n\t}\n\n\tpublic setMedialist(node:Node):boolean {\n\t\tif(node) {\n\t\t\tnode.attachTo(this);\n\t\t\tthis.medialist = node;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class Namespace extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Namespace;\n\t}\n\n}\n\nexport class Media extends BodyDeclaration {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Media;\n\t}\n}\n\nexport class Document extends BodyDeclaration {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Document;\n\t}\n}\n\nexport class Medialist extends Node {\n\tprivate mediums:Nodelist;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic getMediums():Nodelist {\n\t\tif (!this.mediums) {\n\t\t\tthis.mediums = new Nodelist(this);\n\t\t}\n\t\treturn this.mediums;\n\t}\n}\n\nexport class MediaQuery extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.MediaQuery;\n\t}\n}\n\nexport class Page extends BodyDeclaration {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Page;\n\t}\n\n}\n\nexport class PageBoxMarginBox extends BodyDeclaration {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.PageBoxMarginBox;\n\t}\n\n}\n\nexport class Expression extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Expression;\n\t}\n}\n\nexport class BinaryExpression extends Node {\n\n\tprivate left:Node;\n\tprivate right:Node;\n\tprivate operator:Node;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.BinaryExpression;\n\t}\n\n\tpublic setLeft(left:Node):boolean {\n\t\treturn this.setNode('left', left);\n\t}\n\n\tpublic getLeft():Node {\n\t\treturn this.left;\n\t}\n\n\tpublic setRight(right:Node):boolean {\n\t\treturn this.setNode('right', right);\n\t}\n\n\tpublic getRight():Node {\n\t\treturn this.right;\n\t}\n\n\tpublic setOperator(value:Node):boolean {\n\t\treturn this.setNode('operator', value);\n\t}\n\n\tpublic getOperator():Node {\n\t\treturn this.operator;\n\t}\n}\n\nexport class Term extends Node {\n\n\tprivate operator:Node;\n\tprivate expression:Node;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Term;\n\t}\n\n\tpublic setOperator(value:Node):boolean {\n\t\treturn this.setNode('operator', value);\n\t}\n\n\tpublic getOperator():Node {\n\t\treturn this.operator;\n\t}\n\n\tpublic setExpression(value:Node):boolean {\n\t\treturn this.setNode('expression', value);\n\t}\n\n\tpublic getExpression():Node {\n\t\treturn this.expression;\n\t}\n}\n\nexport class Operator extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Operator;\n\t}\n\n}\n\nexport class HexColorValue extends Node {\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.HexColorValue;\n\t}\n\n}\n\nexport class NumericValue extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.NumericValue;\n\t}\n\n\tpublic getValue() : { value: string; unit: string } {\n\t\tvar raw = this.getText();\n\t\tvar unitIdx = 0,\n\t\t\tcode:number,\n\t\t\t_dot = '.'.charCodeAt(0),\n\t\t\t_0 = '0'.charCodeAt(0),\n\t\t\t_9 = '9'.charCodeAt(0);\n\n\t\tfor (var i = 0, len = raw.length; i < len; i++) {\n\t\t\tcode = raw.charCodeAt(i);\n\t\t\tif(!(_0 <= code && code <= _9 || code === _dot)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tunitIdx += 1;\n\t\t}\n\t\treturn {\n\t\t\tvalue: raw.substring(0, unitIdx),\n\t\t\tunit: unitIdx < len ? raw.substring(unitIdx) : undefined\n\t\t};\n\t}\n}\n\nexport class VariableDeclaration extends AbstractDeclaration {\n\n\tprivate variable:Variable;\n\tprivate value:Node;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.VariableDeclaration;\n\t}\n\n\tpublic setVariable(node:Variable):boolean {\n\t\tif (node) {\n\t\t\tnode.attachTo(this);\n\t\t\tthis.variable = node;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic getVariable():Variable {\n\t\treturn this.variable;\n\t}\n\n\tpublic getName():string {\n\t\treturn this.variable ? this.variable.getName() : '';\n\t}\n\n\tpublic setValue(node:Node):boolean {\n\t\tif (node) {\n\t\t\tnode.attachTo(this);\n\t\t\tthis.value = node;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n}\n\nexport class Interpolation extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.Interpolation;\n\t}\n}\n\nexport class Variable extends Node {\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.VariableName;\n\t}\n\n\tpublic getName():string {\n\t\treturn this.getText();\n\t}\n\n}\n\nexport class ExtendsReference extends Node {\n\tprivate selector:Selector;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.ExtendsReference;\n\t}\n\n\tpublic setSelector(node:Selector):boolean {\n\t\treturn this.setNode('selector', node, 0);\n\t}\n\n\tpublic getSelector(): Selector {\n\t\treturn this.selector;\n\t}\n\n\tpublic getName() : string {\n\t\treturn this.selector ? this.selector.getText() : '';\n\t}\n}\n\n\nexport class MixinReference extends Node {\n\tprivate identifier:Identifier;\n\tprivate arguments:Nodelist;\n\tprivate content: BodyDeclaration;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.MixinReference;\n\t}\n\n\tpublic setIdentifier(node:Identifier):boolean {\n\t\treturn this.setNode('identifier', node, 0);\n\t}\n\n\tpublic getIdentifier(): Identifier {\n\t\treturn this.identifier;\n\t}\n\n\tpublic getName() : string {\n\t\treturn this.identifier ? this.identifier.getText() : '';\n\t}\n\n\tpublic getArguments():Nodelist {\n\t\tif (!this.arguments) {\n\t\t\tthis.arguments = new Nodelist(this);\n\t\t}\n\t\treturn this.arguments;\n\t}\n\n\tpublic setContent(node:BodyDeclaration):boolean {\n\t\treturn this.setNode('content', node);\n\t}\n\n\tpublic getContent(): BodyDeclaration {\n\t\treturn this.content;\n\t}\n}\n\nexport class MixinDeclaration extends BodyDeclaration {\n\n\tprivate identifier:Identifier;\n\tprivate parameters:Nodelist;\n\tprivate guard:LessGuard;\n\n\tconstructor(offset:number, length:number) {\n\t\tsuper(offset, length);\n\t}\n\n\tpublic get type():NodeType {\n\t\treturn NodeType.MixinDeclaration;\n\t}\n\n\tpublic setIdentifier(node:Identifier):boolean {\n\t\treturn this.setNode('identifier', node, 0);\n\t}\n\n\tpublic getIdentifier(): Identifier {\n\t\treturn this.identifier;\n\t}\n\n\tpublic getName() : string {\n\t\treturn this.identifier ? this.identifier.getText() : '';\n\t}\n\n\tpublic getParameters():Nodelist {\n\t\tif (!this.parameters) {\n\t\t\tthis.parameters = new Nodelist(this);\n\t\t}\n\t\treturn this.parameters;\n\t}\n\n\tpublic setGuard(node:LessGuard):boolean {\n\t\tif(node) {\n\t\t\tnode.attachTo(this);\n\t\t\tthis.guard = node;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class LessGuard extends Node {\n\n\tpublic isNegated:boolean;\n\tprivate conditions:Nodelist;\n\n\tpublic getConditions():Nodelist {\n\t\tif(!this.conditions) {\n\t\t\tthis.conditions = new Nodelist(this);\n\t\t}\n\t\treturn this.conditions;\n\t}\n}\n\nexport class GuardCondition extends Node {\n\n\tpublic variable:Node;\n\tpublic isEquals:boolean;\n\tpublic isGreater:boolean;\n\tpublic isEqualsGreater:boolean;\n\tpublic isLess:boolean;\n\tpublic isEqualsLess:boolean;\n\n\tpublic setVariable(node:Node):boolean {\n\t\treturn this.setNode('variable', node);\n\t}\n}\n\nexport interface IRule {\n\tid: string;\n\tmessage: string;\n}\n\n\nexport interface IMarker {\n\tgetNode():Node;\n\tgetMessage():string;\n\tgetOffset(): number;\n\tgetLength(): number;\n\tgetRule():IRule;\n\tgetLevel():_level.Level;\n}\n\nexport class Marker implements IMarker {\n\n\tprivate node:Node;\n\tprivate rule:IRule;\n\tprivate level:_level.Level;\n\tprivate message:string;\n\tprivate offset:number;\n\tprivate length:number;\n\n\tconstructor(node:Node, rule:IRule, level:_level.Level, message?:string, offset:number=node.offset, length:number=node.length) {\n\t\tthis.node = node;\n\t\tthis.rule = rule;\n\t\tthis.level = level;\n\t\tthis.message = message || rule.message;\n\t\tthis.offset= offset;\n\t\tthis.length= length;\n\t}\n\n\tpublic getRule():IRule {\n\t\treturn this.rule;\n\t}\n\n\tpublic getLevel():_level.Level {\n\t\treturn this.level;\n\t}\n\n\tpublic getOffset():number {\n\t\treturn this.offset;\n\t}\n\n\tpublic getLength():number {\n\t\treturn this.length;\n\t}\n\n\tpublic getNode():Node {\n\t\treturn this.node;\n\t}\n\n\tpublic getMessage():string {\n\t\treturn this.message;\n\t}\n}\n\nexport interface IVisitor {\n\tvisitNode:(node:Node)=>boolean;\n}\n\nexport interface IVisitorFunction {\n\t(node:Node):boolean;\n}\n/*\nexport class DefaultVisitor implements IVisitor {\n\n\tpublic visitNode(node:Node):boolean {\n\t\tswitch (node.type) {\n\t\t\tcase NodeType.Stylesheet:\n\t\t\t\treturn this.visitStylesheet(<Stylesheet> node);\n\t\t\tcase NodeType.FontFace:\n\t\t\t\treturn this.visitFontFace(<FontFace> node);\n\t\t\tcase NodeType.Ruleset:\n\t\t\t\treturn this.visitRuleSet(<RuleSet> node);\n\t\t\tcase NodeType.Selector:\n\t\t\t\treturn this.visitSelector(<Selector> node);\n\t\t\tcase NodeType.SimpleSelector:\n\t\t\t\treturn this.visitSimpleSelector(<SimpleSelector> node);\n\t\t\tcase NodeType.Declaration:\n\t\t\t\treturn this.visitDeclaration(<Declaration> node);\n\t\t\tcase NodeType.Function:\n\t\t\t\treturn this.visitFunction(<Function> node);\n\t\t\tcase NodeType.FunctionDeclaration:\n\t\t\t\treturn this.visitFunctionDeclaration(<FunctionDeclaration> node);\n\t\t\tcase NodeType.FunctionParameter:\n\t\t\t\treturn this.visitFunctionParameter(<FunctionParameter> node);\n\t\t\tcase NodeType.FunctionArgument:\n\t\t\t\treturn this.visitFunctionArgument(<FunctionArgument> node);\n\t\t\tcase NodeType.Term:\n\t\t\t\treturn this.visitTerm(<Term> node);\n\t\t\tcase NodeType.Declaration:\n\t\t\t\treturn this.visitExpression(<Expression> node);\n\t\t\tcase NodeType.NumericValue:\n\t\t\t\treturn this.visitNumericValue(<NumericValue> node);\n\t\t\tcase NodeType.Page:\n\t\t\t\treturn this.visitPage(<Page> node);\n\t\t\tcase NodeType.PageBoxMarginBox:\n\t\t\t\treturn this.visitPageBoxMarginBox(<PageBoxMarginBox> node);\n\t\t\tcase NodeType.Property:\n\t\t\t\treturn this.visitProperty(<Property> node);\n\t\t\tcase NodeType.NumericValue:\n\t\t\t\treturn this.visitNodelist(<Nodelist> node);\n\t\t\tcase NodeType.Import:\n\t\t\t\treturn this.visitImport(<Import> node);\n\t\t\tcase NodeType.Namespace:\n\t\t\t\treturn this.visitNamespace(<Namespace> node);\n\t\t\tcase NodeType.Keyframe:\n\t\t\t\treturn this.visitKeyframe(<Keyframe> node);\n\t\t\tcase NodeType.KeyframeSelector:\n\t\t\t\treturn this.visitKeyframeSelector(<KeyframeSelector> node);\n\t\t\tcase NodeType.MixinDeclaration:\n\t\t\t\treturn this.visitMixinDeclaration(<MixinDeclaration> node);\n\t\t\tcase NodeType.MixinReference:\n\t\t\t\treturn this.visitMixinReference(<MixinReference> node);\n\t\t\tcase NodeType.Variable:\n\t\t\t\treturn this.visitVariable(<Variable> node);\n\t\t\tcase NodeType.VariableDeclaration:\n\t\t\t\treturn this.visitVariableDeclaration(<VariableDeclaration> node);\n\t\t}\n\t\treturn this.visitUnknownNode(node);\n\t}\n\n\tpublic visitFontFace(node:FontFace):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitKeyframe(node:Keyframe):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitKeyframeSelector(node:KeyframeSelector):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitStylesheet(node:Stylesheet):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitProperty(Node:Property):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitRuleSet(node:RuleSet):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitSelector(node:Selector):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitSimpleSelector(node:SimpleSelector):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitDeclaration(node:Declaration):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitFunction(node:Function):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitFunctionDeclaration(node:FunctionDeclaration):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitInvocation(node:Invocation):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitTerm(node:Term):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitImport(node:Import):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitNamespace(node:Namespace):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitExpression(node:Expression):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitNumericValue(node:NumericValue):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitPage(node:Page):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitPageBoxMarginBox(node:PageBoxMarginBox):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitNodelist(node:Nodelist):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitVariableDeclaration(node:VariableDeclaration):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitVariable(node:Variable):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitMixinDeclaration(node:MixinDeclaration):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitMixinReference(node:MixinReference):boolean {\n\t\treturn true;\n\t}\n\n\tpublic visitUnknownNode(node:Node):boolean {\n\t\treturn true;\n\t}\n}\n*/\nexport class ParseErrorCollector implements IVisitor {\n\n\tstatic entries(node:Node):IMarker[] {\n\t\tvar visitor = new ParseErrorCollector();\n\t\tnode.accept(visitor);\n\t\treturn visitor.entries;\n\t}\n\n\tpublic entries:IMarker[];\n\n\tconstructor() {\n\t\tthis.entries = [];\n\t}\n\n\tpublic visitNode(node:Node):boolean {\n\n\t\tif(node.isErroneous()) {\n\t\t\tnode.collectIssues(this.entries);\n\t\t}\n\t\treturn true;\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nexport enum TokenType {\n\tIdent,\n\tAtKeyword,\n\tString,\n\tBadString,\n\tBadUri,\n\tHash,\n\tNum,\n\tPercentage,\n\tDimension,\n\tURI,\n\tUnicodeRange,\n\tCDO,\n\tCDC,\n\tColon,\n\tSemiColon,\n\tCurlyL,\n\tCurlyR,\n\tParenthesisL,\n\tParenthesisR,\n\tBracketL,\n\tBracketR,\n\tWhitespace,\n\tIncludes,\n\tDashmatch,\n\tSubstringOperator,\n\tPrefixOperator,\n\tSuffixOperator,\n\tDelim,\n\tEMS,\n\tEXS,\n\tLength,\n\tAngle,\n\tTime,\n\tFreq,\n\tExclamation,\n\tResolution,\n\tComma,\n\tCharset,\n\tEscapedJavaScript,\n\tBadEscapedJavaScript,\n\tComment,\n\tSingleLineComment,\n\tEOF,\n\tCustomToken\n}\n\nexport interface IToken {\n\ttype: TokenType;\n\ttext: string;\n\toffset: number;\n\tlen: number;\n}\n\nexport class MultiLineStream {\n\n\tprivate source:string;\n\tprivate len:number;\n\tprivate position:number;\n\n\tconstructor(source: string) {\n\t\tthis.source = source;\n\t\tthis.len = source.length;\n\t\tthis.position = 0;\n\t}\n\n\tpublic substring(from:number, to:number = this.position):string {\n\t\treturn this.source.substring(from, to);\n\t}\n\n\tpublic eos():boolean {\n\t\treturn this.len <= this.position;\n\t}\n\n\tpublic pos():number {\n\t\treturn this.position;\n\t}\n\n\tpublic goBackTo(pos:number):void {\n\t\tthis.position = pos;\n\t}\n\n\tpublic goBack(n:number):void {\n\t\tthis.position -= n;\n\t}\n\n\tpublic advance(n:number):void {\n\t\tthis.position += n;\n\t}\n\n\tpublic nextChar():number {\n\t\treturn this.source.charCodeAt(this.position++) || 0;\n\t}\n\n\tpublic peekChar(n:number=0):number {\n\t\treturn this.source.charCodeAt(this.position + n) || 0;\n\t}\n\n\tpublic lookbackChar(n:number=0):number {\n\t\treturn this.source.charCodeAt(this.position - n) || 0;\n\t}\n\n\tpublic advanceIfChar(ch:number):boolean {\n\t\tif (ch === this.source.charCodeAt(this.position)) {\n\t\t\tthis.position++;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic advanceIfChars(ch:number[]):boolean {\n\t\tlet i:number;\n\t\tif (this.position + ch.length > this.source.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (i = 0; i < ch.length; i++) {\n\t\t\tif (this.source.charCodeAt(this.position + i) !== ch[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tthis.advance(i);\n\t\treturn true;\n\t}\n\n\tpublic advanceWhileChar(condition:(ch:number)=>boolean):number {\n\t\tlet posNow = this.position;\n\t\twhile (this.position < this.len && condition(this.source.charCodeAt(this.position))) {\n\t\t\tthis.position++;\n\t\t}\n\t\treturn this.position - posNow;\n\t}\n}\n\nconst _a = 'a'.charCodeAt(0);\nconst _e = 'e'.charCodeAt(0);\nconst _f = 'f'.charCodeAt(0);\nconst _i = 'i'.charCodeAt(0);\nconst _l = 'l'.charCodeAt(0);\nconst _p = 'p'.charCodeAt(0);\nconst _r = 'r'.charCodeAt(0);\nconst _u = 'u'.charCodeAt(0);\nconst _x = 'x'.charCodeAt(0);\nconst _z = 'z'.charCodeAt(0);\nconst _A = 'A'.charCodeAt(0);\nconst _E = 'E'.charCodeAt(0);\nconst _F = 'F'.charCodeAt(0);\nconst _I = 'I'.charCodeAt(0);\nconst _L = 'L'.charCodeAt(0);\nconst _P = 'P'.charCodeAt(0);\nconst _R = 'R'.charCodeAt(0);\nconst _U = 'U'.charCodeAt(0);\nconst _X = 'X'.charCodeAt(0);\nconst _Z = 'Z'.charCodeAt(0);\nconst _0 = '0'.charCodeAt(0);\nconst _9 = '9'.charCodeAt(0);\nconst _TLD = '~'.charCodeAt(0);\nconst _HAT = '^'.charCodeAt(0);\nconst _EQS = '='.charCodeAt(0);\nconst _PIP = '|'.charCodeAt(0);\nconst _MIN = '-'.charCodeAt(0);\nconst _USC = '_'.charCodeAt(0);\nconst _PRC = '%'.charCodeAt(0);\nconst _MUL = '*'.charCodeAt(0);\nconst _LPA = '('.charCodeAt(0);\nconst _RPA = ')'.charCodeAt(0);\nconst _LAN = '<'.charCodeAt(0);\nconst _RAN = '>'.charCodeAt(0);\nconst _ATS = '@'.charCodeAt(0);\nconst _HSH = '#'.charCodeAt(0);\nconst _DLR = '$'.charCodeAt(0);\nconst _BSL = '\\\\'.charCodeAt(0);\nconst _FSL = '/'.charCodeAt(0);\nconst _NWL = '\\n'.charCodeAt(0);\nconst _CAR = '\\r'.charCodeAt(0);\nconst _LFD = '\\f'.charCodeAt(0);\nconst _DQO = '\"'.charCodeAt(0);\nconst _SQO = '\\''.charCodeAt(0);\nconst _WSP = ' '.charCodeAt(0);\nconst _TAB = '\\t'.charCodeAt(0);\nconst _SEM = ';'.charCodeAt(0);\nconst _COL = ':'.charCodeAt(0);\nconst _CUL = '{'.charCodeAt(0);\nconst _CUR = '}'.charCodeAt(0);\nconst _BRL = '['.charCodeAt(0);\nconst _BRR = ']'.charCodeAt(0);\nconst _CMA = ','.charCodeAt(0);\nconst _DOT = '.'.charCodeAt(0);\nconst _BNG = '!'.charCodeAt(0);\n\nconst _url = [_u, _U, _r, _R, _l, _L, _LPA, _LPA];\nconst _url_prefix = [_u, _U, _r, _R, _l, _L, _MIN, _MIN, _p, _P, _r, _R, _e, _E, _f, _F, _i, _I, _x, _X, _LPA, _LPA];\n\nconst staticTokenTable:{[code:number]:TokenType;} = {};\nstaticTokenTable[_SEM] = TokenType.SemiColon;\nstaticTokenTable[_COL] = TokenType.Colon;\nstaticTokenTable[_CUL] = TokenType.CurlyL;\nstaticTokenTable[_CUR] = TokenType.CurlyR;\nstaticTokenTable[_BRR] = TokenType.BracketR;\nstaticTokenTable[_BRL] = TokenType.BracketL;\nstaticTokenTable[_LPA] = TokenType.ParenthesisL;\nstaticTokenTable[_RPA] = TokenType.ParenthesisR;\nstaticTokenTable[_CMA] = TokenType.Comma;\n\nconst staticUnitTable:{[code:number]:TokenType;} = {};\nstaticUnitTable['em'] = TokenType.EMS;\nstaticUnitTable['ex'] = TokenType.EXS;\nstaticUnitTable['px'] = TokenType.Length;\nstaticUnitTable['cm'] = TokenType.Length;\nstaticUnitTable['mm'] = TokenType.Length;\nstaticUnitTable['in'] = TokenType.Length;\nstaticUnitTable['pt'] = TokenType.Length;\nstaticUnitTable['pc'] = TokenType.Length;\nstaticUnitTable['deg'] = TokenType.Angle;\nstaticUnitTable['rad'] = TokenType.Angle;\nstaticUnitTable['grad'] = TokenType.Angle;\nstaticUnitTable['ms'] = TokenType.Time;\nstaticUnitTable['s'] = TokenType.Time;\nstaticUnitTable['hz'] = TokenType.Freq;\nstaticUnitTable['khz'] = TokenType.Freq;\nstaticUnitTable['%'] = TokenType.Percentage;\nstaticUnitTable['dpi'] = TokenType.Resolution;\nstaticUnitTable['dpcm'] = TokenType.Resolution;\n\nexport class Scanner {\n\n\tpublic stream: MultiLineStream;\n\tpublic ignoreComment = true;\n\tpublic ignoreWhitespace = true;\n\n\tpublic setSource(input: string): void {\n\t\tthis.stream = new MultiLineStream(input);\n\t}\n\n\tpublic finishToken(offset: number, type: TokenType, text?: string): IToken {\n\t\treturn {\n\t\t\toffset: offset,\n\t\t\tlen: this.stream.pos() - offset,\n\t\t\ttype: type,\n\t\t\ttext: text || this.stream.substring(offset)\n\t\t};\n\t}\n\n\tpublic substring(offset:number, len:number):string {\n\t\treturn this.stream.substring(offset, offset + len);\n\t}\n\n\tpublic pos():number {\n\t\treturn this.stream.pos();\n\t}\n\n\tpublic goBackTo(pos: number):void {\n\t\tthis.stream.goBackTo(pos);\n\t}\n\n\tpublic scan(): IToken {\n\t\t// processes all whitespaces and comments\n\t\tlet triviaToken = this.trivia();\n\t\tif (triviaToken !== null) {\n\t\t\treturn triviaToken;\n\t\t}\n\n\t\tlet offset = this.stream.pos();\n\n\t\t// End of file/input\n\t\tif (this.stream.eos()) {\n\t\t\treturn this.finishToken(offset, TokenType.EOF);\n\t\t}\n\n\t\t// CDO <!--\n\t\tif (this.stream.advanceIfChars([_LAN, _BNG, _MIN, _MIN])) {\n\t\t\treturn this.finishToken(offset, TokenType.CDO);\n\t\t}\n\n\t\t// CDC -->\n\t\tif (this.stream.advanceIfChars([_MIN, _MIN, _RAN])) {\n\t\t\treturn this.finishToken(offset, TokenType.CDC);\n\t\t}\n\n\t\t// URL\n\t\tlet tokenType = this._url();\n\t\tif (tokenType !== null) {\n\t\t\treturn this.finishToken(offset, tokenType);\n\t\t}\n\n\t\tlet content: string[] = [];\n\t\tif (this.ident(content)) {\n\t\t\treturn this.finishToken(offset, TokenType.Ident, content.join(''));\n\t\t}\n\n\t\t// at-keyword\n\t\tif (this.stream.advanceIfChar(_ATS)) {\n\t\t\tcontent = [ '@' ];\n\t\t\tif (this._name(content)) {\n\t\t\t\tlet keywordText = content.join('');\n\t\t\t\tif (keywordText === '@charset') {\n\t\t\t\t\treturn this.finishToken(offset, TokenType.Charset, keywordText);\n\t\t\t\t}\n\t\t\t\treturn this.finishToken(offset, TokenType.AtKeyword, keywordText);\n\t\t\t} else {\n\t\t\t\treturn this.finishToken(offset, TokenType.Delim);\n\t\t\t}\n\t\t}\n\n\t\t// hash\n\t\tif (this.stream.advanceIfChar(_HSH)) {\n\t\t\tcontent = [ '#' ];\n\t\t\tif (this._name(content)) {\n\t\t\t\treturn this.finishToken(offset, TokenType.Hash, content.join(''));\n\t\t\t} else {\n\t\t\t\treturn this.finishToken(offset, TokenType.Delim);\n\t\t\t}\n\t\t}\n\n\t\t// Important\n\t\tif (this.stream.advanceIfChar(_BNG)) {\n\t\t\treturn this.finishToken(offset, TokenType.Exclamation);\n\t\t}\n\n\t\t// Numbers\n\t\tif (this._number()) {\n\n\t\t\tlet pos = this.stream.pos();\n\t\t\tcontent = [ this.stream.substring(offset, pos) ];\n\t\t\tif (this.stream.advanceIfChar(_PRC)) {\n\t\t\t\t// Percentage 43%\n\t\t\t\treturn this.finishToken(offset, TokenType.Percentage);\n\t\t\t} else if (this.ident(content)) {\n\t\t\t\tlet dim = this.stream.substring(pos).toLowerCase();\n\t\t\t\ttokenType = <TokenType>staticUnitTable[dim];\n\t\t\t\tif (typeof tokenType !== 'undefined') {\n\t\t\t\t\t// Known dimension 43px\n\t\t\t\t\treturn this.finishToken(offset, tokenType, content.join(''));\n\t\t\t\t} else {\n\t\t\t\t\t// Unknown dimension 43ft\n\t\t\t\t\treturn this.finishToken(offset, TokenType.Dimension, content.join(''));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.finishToken(offset, TokenType.Num);\n\t\t}\n\n\t\t// String, BadString\n\t\tcontent = [];\n\t\ttokenType = this._string(content);\n\t\tif (tokenType !== null) {\n\t\t\treturn this.finishToken(offset, tokenType, content.join(''));\n\t\t}\n\n\t\t// single character tokens\n\t\ttokenType = <TokenType>staticTokenTable[this.stream.peekChar()];\n\t\tif (typeof tokenType !== 'undefined') {\n\t\t\tthis.stream.advance(1);\n\t\t\treturn this.finishToken(offset, tokenType);\n\t\t}\n\n\t\t// includes ~=\n\t\tif (this.stream.peekChar(0) === _TLD && this.stream.peekChar(1) === _EQS) {\n\t\t\tthis.stream.advance(2);\n\t\t\treturn this.finishToken(offset, TokenType.Includes);\n\t\t}\n\n\t\t// DashMatch |=\n\t\tif (this.stream.peekChar(0) === _PIP && this.stream.peekChar(1) === _EQS) {\n\t\t\tthis.stream.advance(2);\n\t\t\treturn this.finishToken(offset, TokenType.Dashmatch);\n\t\t}\n\n\t\t// Substring operator *=\n\t\tif (this.stream.peekChar(0) === _MUL && this.stream.peekChar(1) === _EQS) {\n\t\t\tthis.stream.advance(2);\n\t\t\treturn this.finishToken(offset, TokenType.SubstringOperator);\n\t\t}\n\n\t\t// Substring operator ^=\n\t\tif (this.stream.peekChar(0) === _HAT && this.stream.peekChar(1) === _EQS) {\n\t\t\tthis.stream.advance(2);\n\t\t\treturn this.finishToken(offset, TokenType.PrefixOperator);\n\t\t}\n\n\t\t// Substring operator $=\n\t\tif (this.stream.peekChar(0) === _DLR && this.stream.peekChar(1) === _EQS) {\n\t\t\tthis.stream.advance(2);\n\t\t\treturn this.finishToken(offset, TokenType.SuffixOperator);\n\t\t}\n\n\t\t// Delim\n\t\tthis.stream.nextChar();\n\t\treturn this.finishToken(offset, TokenType.Delim);\n\t}\n\n\tprivate _matchWordAnyCase(characters:number[]): boolean {\n\t\tlet index = 0;\n\t\tthis.stream.advanceWhileChar((ch:number) => {\n\t\t\tlet result = characters[index] === ch || characters[index+1] === ch;\n\t\t\tif (result) {\n\t\t\t\tindex += 2;\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t\tif (index === characters.length) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.stream.goBack(index/2);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tprotected trivia(): IToken {\n\t\twhile (true) {\n\t\t\tlet offset = this.stream.pos();\n\t\t\tif (this._whitespace()) {\n\t\t\t\tif (!this.ignoreWhitespace) {\n\t\t\t\t\treturn this.finishToken(offset, TokenType.Whitespace);\n\t\t\t\t}\n\t\t\t} else if (this.comment()) {\n\t\t\t\tif (!this.ignoreComment) {\n\t\t\t\t\treturn this.finishToken(offset, TokenType.Comment);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected comment():boolean {\n\t\tif (this.stream.advanceIfChars([_FSL, _MUL])) {\n\t\t\tlet success = false, hot = false;\n\t\t\tthis.stream.advanceWhileChar((ch) => {\n\t\t\t\tif (hot && ch === _FSL) {\n\t\t\t\t\tsuccess = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\thot = ch === _MUL;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tif (success) {\n\t\t\t\tthis.stream.advance(1);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate _number():boolean {\n\t\tlet npeek = 0, ch:number;\n\t\tif (this.stream.peekChar() === _DOT) {\n\t\t\tnpeek = 1;\n\t\t}\n\t\tch = this.stream.peekChar(npeek);\n\t\tif (ch >= _0 && ch <= _9) {\n\t\t\tthis.stream.advance(npeek + 1);\n\t\t\tthis.stream.advanceWhileChar((ch) => {\n\t\t\t\treturn ch >= _0 && ch <= _9 || npeek === 0 && ch === _DOT;\n\t\t\t});\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _newline(result: string[]):boolean {\n\t\tlet ch = this.stream.peekChar();\n\t\tswitch (ch) {\n\t\t\tcase _CAR:\n\t\t\tcase _LFD:\n\t\t\tcase _NWL:\n\t\t\t\tthis.stream.advance(1);\n\t\t\t\tresult.push(String.fromCharCode(ch));\n\t\t\t\tif (ch === _CAR && this.stream.advanceIfChar(_NWL)) {\n\t\t\t\t\tresult.push('\\n');\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t}\n\n\n\t\treturn false;\n\t}\n\n\tprivate _escape(result: string[], includeNewLines?:boolean):boolean {\n\t\tlet ch = this.stream.peekChar();\n\t\tif (ch === _BSL) {\n\t\t\tthis.stream.advance(1);\n\t\t\tch = this.stream.peekChar();\n\t\t\tlet hexNumCount = 0;\n\t\t\twhile (hexNumCount < 6 && (ch >= _0 && ch <= _9 || ch >= _a && ch <= _f || ch >= _A && ch <= _F)) {\n\t\t\t\tthis.stream.advance(1);\n\t\t\t\tch = this.stream.peekChar();\n\t\t\t\thexNumCount++;\n\t\t\t}\n\t\t\tif (hexNumCount > 0) {\n\t\t\t\ttry {\n\t\t\t\t\tlet hexVal= parseInt(this.stream.substring(this.stream.pos() - hexNumCount), 16);\n\t\t\t\t\tif (hexVal) {\n\t\t\t\t\t\tresult.push(String.fromCharCode(hexVal));\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// ignore\n\t\t\t\t}\n\n\t\t\t\t// optional whitespace or new line, not part of result text\n\t\t\t\tif (ch === _WSP || ch === _TAB) {\n\t\t\t\t\tthis.stream.advance(1);\n\t\t\t\t} else {\n\t\t\t\t\tthis._newline([]);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (ch !== _CAR && ch !== _LFD && ch !== _NWL) {\n\t\t\t\tthis.stream.advance(1);\n\t\t\t\tresult.push(String.fromCharCode(ch));\n\t\t\t\treturn true;\n\t\t\t} else if (includeNewLines) {\n\t\t\t\treturn this._newline(result);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _stringChar(closeQuote: number, result: string[])  {\n\t\t// not closeQuote, not backslash, not newline\n\t\tlet ch = this.stream.peekChar();\n\t\tif (ch !== 0 && ch !== closeQuote && ch !== _BSL && ch !== _CAR && ch !== _LFD && ch !== _NWL) {\n\t\t\tthis.stream.advance(1);\n\t\t\tresult.push(String.fromCharCode(ch));\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tprivate _string(result: string[]):TokenType {\n\t\tif (this.stream.peekChar() === _SQO || this.stream.peekChar() === _DQO) {\n\t\t\tlet closeQuote = this.stream.nextChar();\n\t\t\tresult.push(String.fromCharCode(closeQuote));\n\n\t\t\twhile (this._stringChar(closeQuote, result) || this._escape(result, true)) {\n\t\t\t\t// loop\n\t\t\t}\n\n\t\t\tif (this.stream.peekChar() === closeQuote) {\n\t\t\t\tthis.stream.nextChar();\n\t\t\t\tresult.push(String.fromCharCode(closeQuote));\n\t\t\t\treturn TokenType.String;\n\t\t\t} else {\n\t\t\t\treturn TokenType.BadString;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate _url():TokenType {\n\t\tif (this._matchWordAnyCase(_url) || this._matchWordAnyCase(_url_prefix)) {\n\t\t\tthis._whitespace();\n\t\t\tlet tokenType = TokenType.URI, stringType = this._string([]);\n\t\t\tif (stringType === TokenType.BadString) {\n\t\t\t\ttokenType = TokenType.BadUri;\n\n\t\t\t} else if (stringType === null) {\n\t\t\t\tthis.stream.advanceWhileChar((ch) => {\n\t\t\t\t\treturn ch !== _RPA;\n\t\t\t\t});\n\t\t\t\ttokenType = TokenType.URI;\n\t\t\t}\n\t\t\tthis._whitespace();\n\t\t\tif (this.stream.advanceIfChar(_RPA)) {\n\t\t\t\treturn tokenType;\n\t\t\t} else {\n\t\t\t\treturn TokenType.BadUri;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate _whitespace():boolean {\n\t\tlet n = this.stream.advanceWhileChar((ch) => {\n\t\t\treturn ch === _WSP || ch === _TAB || ch === _NWL || ch === _LFD || ch === _CAR;\n\t\t});\n\t\treturn n > 0;\n\t}\n\n\tprivate _name(result:string[]):boolean {\n\t\tlet matched = false;\n\t\twhile (this._identChar(result) || this._escape(result)) {\n\t\t\tmatched = true;\n\t\t}\n\t\treturn matched;\n\t}\n\n\tprotected ident(result:string[]):boolean {\n\t\tlet pos = this.stream.pos();\n\t\tlet hasMinus = this._minus(result);\n\t\tif (hasMinus && this._minus(result) /* -- */) {\n\t\t\tlet hasContent = false;\n\t\t\twhile (this._identChar(result) || this._escape(result)) {\n\t\t\t\thasContent = true;\n\t\t\t}\n\t\t\tif (hasContent) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (this._identFirstChar(result) || this._escape(result)) {\n\t\t\twhile (this._identChar(result) || this._escape(result)) {\n\t\t\t\t// loop\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tthis.stream.goBackTo(pos);\n\t\treturn false;\n\t}\n\n\tprivate _identFirstChar(result:string[]):boolean {\n\t\tlet ch = this.stream.peekChar();\n\t\tif (ch === _USC || // _\n\t\t\tch >= _a && ch <= _z || // a-z\n\t\t\tch >= _A && ch <= _Z || // A-Z\n\t\t\tch >= 0x80 && ch <= 0xFFFF) { // nonascii\n\t\t\tthis.stream.advance(1);\n\t\t\tresult.push(String.fromCharCode(ch));\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\n\tprivate _minus(result:string[]):boolean {\n\t\tlet ch = this.stream.peekChar();\n\t\tif (ch === _MIN) {\n\t\t\tthis.stream.advance(1);\n\t\t\tresult.push(String.fromCharCode(ch));\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _identChar(result:string[]):boolean {\n\t\tlet ch = this.stream.peekChar();\n\t\tif (ch === _USC || // _\n\t\t\tch === _MIN || // -\n\t\t\tch >= _a && ch <= _z || // a-z\n\t\t\tch >= _A && ch <= _Z || // A-Z\n\t\t\tch >= _0 && ch <= _9 || // 0/9\n\t\t\tch >= 0x80 && ch <= 0xFFFF) { // nonascii\n\t\t\tthis.stream.advance(1);\n\t\t\tresult.push(String.fromCharCode(ch));\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport nodes = require('./cssNodes');\nimport arrays = require('vs/base/common/arrays');\n\nexport class Scope {\n\n\tpublic parent:Scope;\n\tpublic children:Scope[];\n\n\tpublic offset:number;\n\tpublic length:number;\n\n\tprivate symbols:Symbol[];\n\n\tconstructor(offset:number, length:number) {\n\t\tthis.offset = offset;\n\t\tthis.length = length;\n\t\tthis.symbols = [];\n\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\t}\n\n\tpublic addChild(scope:Scope):void {\n\t\tthis.children.push(scope);\n\t\tscope.setParent(this);\n\t}\n\n\tpublic setParent(scope:Scope):void {\n\t\tthis.parent = scope;\n\t}\n\n\tpublic findScope(offset:number, length:number=0):Scope {\n\t\tif (this.offset <= offset && this.offset + this.length > offset + length || this.offset === offset && this.length === length) {\n\t\t\treturn this.findInScope(offset, length);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate findInScope(offset: number, length: number = 0): Scope {\n\t\t// find the first scope child that has an offset larger than offset + length\n\t\tvar end = offset + length;\n\t\tvar idx = arrays.findFirst(this.children, s => s.offset > end);\n\t\tif (idx === 0) {\n\t\t\t// all scopes have offsets larger than our end\n\t\t\treturn this;\n\t\t}\n\n\t\tvar res = this.children[idx-1];\n\t\tif (res.offset <= offset && res.offset + res.length >= offset + length) {\n\t\t\treturn res.findInScope(offset, length);\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic addSymbol(symbol:Symbol):void {\n\t\tthis.symbols.push(symbol);\n\t}\n\n\tpublic getSymbol(name:string, type: nodes.ReferenceType):Symbol {\n\t\tfor (var index = 0; index < this.symbols.length; index++) {\n\t\t\tvar symbol = this.symbols[index];\n\t\t\tif (symbol.name === name && symbol.type === type) {\n\t\t\t\treturn symbol;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic getSymbols():Symbol[] {\n\t\treturn this.symbols;\n\t}\n}\n\nexport class GlobalScope extends Scope {\n\n\tconstructor() {\n\t\tsuper(0, Number.MAX_VALUE);\n\t}\n}\n\n\n\nexport class Symbol {\n\n\tpublic name:string;\n\tpublic type:nodes.ReferenceType;\n\tpublic node:nodes.Node;\n\n\tconstructor(name:string, node:nodes.Node, type: nodes.ReferenceType) {\n\t\tthis.name = name;\n\t\tthis.node = node;\n\t\tthis.type = type;\n\t}\n}\n\nexport class ScopeBuilder implements nodes.IVisitor {\n\n\tpublic scope:Scope;\n\n\tconstructor(scope:Scope) {\n\t\tthis.scope = scope;\n\t}\n\n\tprivate addSymbol(node:nodes.Node, name:string, type: nodes.ReferenceType) : void {\n\t\tif (node.offset !== -1) {\n\t\t\tvar current = this.scope.findScope(node.offset, node.length);\n\t\t\tcurrent.addSymbol(new Symbol(name, node, type));\n\t\t}\n\t}\n\n\tprivate addScope(node:nodes.Node) : Scope {\n\t\tif (node.offset !== -1) {\n\t\t\tvar current = this.scope.findScope(node.offset, node.length);\n\t\t\tif (current.offset !== node.offset || current.length !== node.length) { // scope already known?\n\t\t\t\tvar newScope = new Scope(node.offset, node.length);\n\t\t\t\tcurrent.addChild(newScope);\n\t\t\t\treturn newScope;\n\t\t\t}\n\t\t\treturn current;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate addSymbolToChildScope(scopeNode:nodes.Node, node:nodes.Node, name:string, type: nodes.ReferenceType): void {\n\t\tif (scopeNode && scopeNode.offset !== -1 ) {\n\t\t\tvar current = this.addScope(scopeNode); // create the scope or gets the existing one\n\t\t\tcurrent.addSymbol(new Symbol(name, node, type));\n\t\t}\n\t}\n\n\tpublic visitNode(node:nodes.Node):boolean {\n\t\tswitch (node.type) {\n\t\t\tcase nodes.NodeType.Keyframe:\n\t\t\t\tthis.addSymbol(node, (<nodes.Keyframe> node).getName(), nodes.ReferenceType.Keyframe);\n\t\t\t\treturn true;\n\t\t\tcase nodes.NodeType.Declaration:\n\t\t\t\treturn this.visitDeclarationNode(<nodes.Declaration>node);\n\t\t\tcase nodes.NodeType.VariableDeclaration:\n\t\t\t\treturn this.visitVariableDeclarationNode(<nodes.VariableDeclaration>node);\n\t\t\tcase nodes.NodeType.Ruleset:\n\t\t\t\treturn this.visitRuleSet(<nodes.RuleSet> node);\n\t\t\tcase nodes.NodeType.MixinDeclaration:\n\t\t\t\tthis.addSymbol(node, (<nodes.MixinDeclaration> node).getName(), nodes.ReferenceType.Mixin);\n\t\t\t\treturn true;\n\t\t\tcase nodes.NodeType.FunctionDeclaration:\n\t\t\t\tthis.addSymbol(node, (<nodes.FunctionDeclaration> node).getName(), nodes.ReferenceType.Function);\n\t\t\t\treturn true;\n\t\t\tcase nodes.NodeType.FunctionParameter: {\n\t\t\t\t// parameters are part of the body scope\n\t\t\t\tlet scopeNode = (<nodes.BodyDeclaration> node.getParent()).getDeclarations();\n\t\t\t\tif (scopeNode) {\n\t\t\t\t\tthis.addSymbolToChildScope(scopeNode, node, (<nodes.FunctionParameter> node).getName(), nodes.ReferenceType.Variable);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase nodes.NodeType.Declarations:\n\t\t\t\tthis.addScope(node);\n\t\t\t\treturn true;\n\t\t\tcase nodes.NodeType.For:\n\t\t\tcase nodes.NodeType.Each: {\n\t\t\t\tvar forOrEachNode = <nodes.ForStatement | nodes.EachStatement> node;\n\t\t\t\tlet scopeNode = forOrEachNode.getDeclarations();\n\t\t\t\tif (scopeNode) {\n\t\t\t\t\tthis.addSymbolToChildScope(scopeNode, forOrEachNode.variable, forOrEachNode.variable.getName(), nodes.ReferenceType.Variable);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic visitRuleSet(node:nodes.RuleSet):boolean {\n\t\tvar current = this.scope.findScope(node.offset, node.length);\n\t\tnode.getSelectors().getChildren().forEach((child) => {\n\t\t\tif (child instanceof nodes.Selector) {\n\t\t\t\tif (child.getChildren().length === 1) { // only selectors with a single element can be extended\n\t\t\t\t\tcurrent.addSymbol(new Symbol(child.getChild(0).getText(), child, nodes.ReferenceType.Rule));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tpublic visitVariableDeclarationNode(node:nodes.VariableDeclaration):boolean {\n\t\tthis.addSymbol(node, (<nodes.VariableDeclaration> node).getName(), nodes.ReferenceType.Variable);\n\t\treturn true;\n\t}\n\n\tpublic visitDeclarationNode(node:nodes.Declaration):boolean {\n\t\tif (Symbols.isCssVariable(node.getProperty().getIdentifier())) {\n\t\t\tthis.addCSSVariable(node.getProperty(), node.getProperty().getName(), nodes.ReferenceType.Variable);\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate addCSSVariable(node:nodes.Node, name:string, type: nodes.ReferenceType) : void {\n\t\tif (node.offset !== -1) {\n\t\t\tvar globalScope = this.getGlobalScope(node, name, type);\n\t\t\tglobalScope.addSymbol(new Symbol(name, node, type));\n\t\t}\n\t}\n\n\tprivate getGlobalScope(node:nodes.Node, name:string, type: nodes.ReferenceType): Scope {\n\t\tlet current = this.scope.findScope(node.offset, node.length);\n\t\twhile (current.parent !== null) {\n\t\t\tcurrent= current.parent;\n\t\t}\n\t\treturn current;\n\t}\n}\n\nexport class Symbols {\n\n\tprivate global:Scope;\n\n\tconstructor(node:nodes.Node) {\n\t\tthis.global = new GlobalScope();\n\t\tnode.accept(new ScopeBuilder(this.global));\n\t}\n\n\tpublic findSymbolsAtOffset(offset:number, referenceType: nodes.ReferenceType) : Symbol[] {\n\t\tvar scope = this.global.findScope(offset, 0);\n\t\tvar result : Symbol[] = [];\n\t\tvar names : { [name:string]: boolean } = {};\n\t\twhile (scope) {\n\t\t\tvar symbols = scope.getSymbols();\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tvar symbol = symbols[i];\n\t\t\t\tif (symbol.node.offset <= offset && symbol.type === referenceType && !names[symbol.name]) {\n\t\t\t\t\tresult.push(symbol);\n\t\t\t\t\tnames[symbol.name] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscope = scope.parent;\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate internalFindSymbol(node:nodes.Node, referenceTypes:nodes.ReferenceType[]): Symbol {\n\t\tvar scopeNode = node;\n\t\tif (node.parent instanceof nodes.FunctionParameter && node.parent.getParent() instanceof nodes.BodyDeclaration) {\n\t\t\tscopeNode = (<nodes.BodyDeclaration> node.parent.getParent()).getDeclarations();\n\t\t}\n\t\tif (node.parent instanceof nodes.FunctionArgument && node.parent.getParent() instanceof nodes.Function) {\n\t\t\tvar funcId = (<nodes.Function> node.parent.getParent()).getIdentifier();\n\t\t\tif (funcId) {\n\t\t\t\tvar functionSymbol = this.internalFindSymbol(funcId, [nodes.ReferenceType.Function]);\n\t\t\t\tif (functionSymbol) {\n\t\t\t\t\tscopeNode = (<nodes.FunctionDeclaration> functionSymbol.node).getDeclarations();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!scopeNode) {\n\t\t\treturn null;\n\t\t}\n\t\tvar name = node.getText();\n\t\tvar scope = this.global.findScope(scopeNode.offset, scopeNode.length);\n\t\twhile (scope) {\n\t\t\tfor (var index = 0; index < referenceTypes.length; index++) {\n\t\t\t\tvar type = referenceTypes[index];\n\t\t\t\tvar symbol = scope.getSymbol(name, type);\n\t\t\t\tif (symbol) {\n\t\t\t\t\treturn symbol;\n\t\t\t\t}\n\t\t\t}\n\t\t\tscope = scope.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate evaluateReferenceTypes(node: nodes.Node) : nodes.ReferenceType[] {\n\t\tif (node instanceof nodes.Identifier) {\n\t\t\tvar referenceTypes = (<nodes.Identifier> node).referenceTypes;\n\t\t\tif (referenceTypes) {\n\t\t\t\treturn referenceTypes;\n\t\t\t} else {\n\t\t\t\tif (Symbols.isCssVariable(node)) {\n\t\t\t\t\treturn [ nodes.ReferenceType.Variable ];\n\t\t\t\t}\n\t\t\t\t// are a reference to a keyframe?\n\t\t\t\tvar decl = nodes.getParentDeclaration(node);\n\t\t\t\tif (decl) {\n\t\t\t\t\tvar propertyName = decl.getNonPrefixedPropertyName();\n\t\t\t\t\tif ((propertyName === 'animation' || propertyName === 'animation-name')\n\t\t\t\t\t\t&& decl.getValue() && decl.getValue().offset === node.offset) {\n\t\t\t\t\t\treturn [ nodes.ReferenceType.Keyframe ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (node instanceof nodes.Variable) {\n\t\t\treturn [ nodes.ReferenceType.Variable ];\n\t\t}\n\t\tvar selector = node.findParent(nodes.NodeType.Selector);\n\t\tif (selector) {\n\t\t\treturn [ nodes.ReferenceType.Rule ];\n\t\t}\n\t\tvar extendsRef = <nodes.ExtendsReference> node.findParent(nodes.NodeType.ExtendsReference);\n\t\tif (extendsRef) {\n\t\t\treturn [ nodes.ReferenceType.Rule ];\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic findSymbolFromNode(node: nodes.Node):Symbol {\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\t\twhile (node.type === nodes.NodeType.Interpolation) {\n\t\t\tnode = node.getParent();\n\t\t}\n\n\t\tvar referenceTypes = this.evaluateReferenceTypes(node);\n\t\tif (referenceTypes) {\n\t\t\treturn this.internalFindSymbol(node, referenceTypes);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic matchesSymbol(node: nodes.Node, symbol: Symbol):boolean {\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\t\twhile (node.type === nodes.NodeType.Interpolation) {\n\t\t\tnode = node.getParent();\n\t\t}\n\t\tif (symbol.name.length !== node.length || symbol.name !== node.getText()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar referenceTypes = this.evaluateReferenceTypes(node);\n\t\tif (!referenceTypes || referenceTypes.indexOf(symbol.type) === -1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar nodeSymbol = this.internalFindSymbol(node, referenceTypes);\n\t\treturn nodeSymbol === symbol;\n\t}\n\n\n\tpublic findSymbol(name:string, type: nodes.ReferenceType, offset:number):Symbol {\n\t\tvar scope = this.global.findScope(offset);\n\t\twhile(scope) {\n\t\t\tvar symbol = scope.getSymbol(name, type);\n\t\t\tif (symbol) {\n\t\t\t\treturn symbol;\n\t\t\t}\n\t\t\tscope = scope.parent;\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic static isCssVariable(identifier: nodes.Identifier):boolean {\n\t\treturn /^--/.test(identifier.getText());\n\t}\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport browsers = require('vs/languages/css/common/services/browsers');\nimport strings = require('vs/base/common/strings');\n\nexport var colors : { [name:string]:string } = {\n\taliceblue: '#f0f8ff',\n\tantiquewhite: '#faebd7',\n\taqua: '#00ffff',\n\taquamarine: '#7fffd4',\n\tazure: '#f0ffff',\n\tbeige: '#f5f5dc',\n\tbisque: '#ffe4c4',\n\tblack: '#000000',\n\tblanchedalmond: '#ffebcd',\n\tblue: '#0000ff',\n\tblueviolet: '#8a2be2',\n\tbrown: '#a52a2a',\n\tburlywood: '#deb887',\n\tcadetblue: '#5f9ea0',\n\tchartreuse: '#7fff00',\n\tchocolate: '#d2691e',\n\tcoral: '#ff7f50',\n\tcornflowerblue: '#6495ed',\n\tcornsilk: '#fff8dc',\n\tcrimson: '#dc143c',\n\tcyan: '#00ffff',\n\tdarkblue: '#00008b',\n\tdarkcyan: '#008b8b',\n\tdarkgoldenrod: '#b8860b',\n\tdarkgray: '#a9a9a9',\n\tdarkgrey: '#a9a9a9',\n\tdarkgreen: '#006400',\n\tdarkkhaki: '#bdb76b',\n\tdarkmagenta: '#8b008b',\n\tdarkolivegreen: '#556b2f',\n\tdarkorange: '#ff8c00',\n\tdarkorchid: '#9932cc',\n\tdarkred: '#8b0000',\n\tdarksalmon: '#e9967a',\n\tdarkseagreen: '#8fbc8f',\n\tdarkslateblue: '#483d8b',\n\tdarkslategray: '#2f4f4f',\n\tdarkslategrey: '#2f4f4f',\n\tdarkturquoise: '#00ced1',\n\tdarkviolet: '#9400d3',\n\tdeeppink: '#ff1493',\n\tdeepskyblue: '#00bfff',\n\tdimgray: '#696969',\n\tdimgrey: '#696969',\n\tdodgerblue: '#1e90ff',\n\tfirebrick: '#b22222',\n\tfloralwhite: '#fffaf0',\n\tforestgreen: '#228b22',\n\tfuchsia: '#ff00ff',\n\tgainsboro: '#dcdcdc',\n\tghostwhite: '#f8f8ff',\n\tgold: '#ffd700',\n\tgoldenrod: '#daa520',\n\tgray: '#808080',\n\tgrey: '#808080',\n\tgreen: '#008000',\n\tgreenyellow: '#adff2f',\n\thoneydew: '#f0fff0',\n\thotpink: '#ff69b4',\n\tindianred: '#cd5c5c',\n\tindigo: '#4b0082',\n\tivory: '#fffff0',\n\tkhaki: '#f0e68c',\n\tlavender: '#e6e6fa',\n\tlavenderblush: '#fff0f5',\n\tlawngreen: '#7cfc00',\n\tlemonchiffon: '#fffacd',\n\tlightblue: '#add8e6',\n\tlightcoral: '#f08080',\n\tlightcyan: '#e0ffff',\n\tlightgoldenrodyellow: '#fafad2',\n\tlightgray: '#d3d3d3',\n\tlightgrey: '#d3d3d3',\n\tlightgreen: '#90ee90',\n\tlightpink: '#ffb6c1',\n\tlightsalmon: '#ffa07a',\n\tlightseagreen: '#20b2aa',\n\tlightskyblue: '#87cefa',\n\tlightslategray: '#778899',\n\tlightslategrey: '#778899',\n\tlightsteelblue: '#b0c4de',\n\tlightyellow: '#ffffe0',\n\tlime: '#00ff00',\n\tlimegreen: '#32cd32',\n\tlinen: '#faf0e6',\n\tmagenta: '#ff00ff',\n\tmaroon: '#800000',\n\tmediumaquamarine: '#66cdaa',\n\tmediumblue: '#0000cd',\n\tmediumorchid: '#ba55d3',\n\tmediumpurple: '#9370d8',\n\tmediumseagreen: '#3cb371',\n\tmediumslateblue: '#7b68ee',\n\tmediumspringgreen: '#00fa9a',\n\tmediumturquoise: '#48d1cc',\n\tmediumvioletred: '#c71585',\n\tmidnightblue: '#191970',\n\tmintcream: '#f5fffa',\n\tmistyrose: '#ffe4e1',\n\tmoccasin: '#ffe4b5',\n\tnavajowhite: '#ffdead',\n\tnavy: '#000080',\n\toldlace: '#fdf5e6',\n\tolive: '#808000',\n\tolivedrab: '#6b8e23',\n\torange: '#ffa500',\n\torangered: '#ff4500',\n\torchid: '#da70d6',\n\tpalegoldenrod: '#eee8aa',\n\tpalegreen: '#98fb98',\n\tpaleturquoise: '#afeeee',\n\tpalevioletred: '#d87093',\n\tpapayawhip: '#ffefd5',\n\tpeachpuff: '#ffdab9',\n\tperu: '#cd853f',\n\tpink: '#ffc0cb',\n\tplum: '#dda0dd',\n\tpowderblue: '#b0e0e6',\n\tpurple: '#800080',\n\tred: '#ff0000',\n\trebeccapurple: '#663399',\n\trosybrown: '#bc8f8f',\n\troyalblue: '#4169e1',\n\tsaddlebrown: '#8b4513',\n\tsalmon: '#fa8072',\n\tsandybrown: '#f4a460',\n\tseagreen: '#2e8b57',\n\tseashell: '#fff5ee',\n\tsienna: '#a0522d',\n\tsilver: '#c0c0c0',\n\tskyblue: '#87ceeb',\n\tslateblue: '#6a5acd',\n\tslategray: '#708090',\n\tslategrey: '#708090',\n\tsnow: '#fffafa',\n\tspringgreen: '#00ff7f',\n\tsteelblue: '#4682b4',\n\ttan: '#d2b48c',\n\tteal: '#008080',\n\tthistle: '#d8bfd8',\n\ttomato: '#ff6347',\n\tturquoise: '#40e0d0',\n\tviolet: '#ee82ee',\n\twheat: '#f5deb3',\n\twhite: '#ffffff',\n\twhitesmoke: '#f5f5f5',\n\tyellow: '#ffff00',\n\tyellowgreen: '#9acd32'\n};\n\nexport var colorKeywords : { [name:string]:string } = {\n\t'currentColor': 'The value of the \\'color\\' property. The computed value of the \\'currentColor\\' keyword is the computed value of the \\'color\\' property. If the \\'currentColor\\' keyword is set on the \\'color\\' property itself, it is treated as \\'color:inherit\\' at parse time.',\n\t'transparent': 'Fully transparent. This keyword can be considered a shorthand for rgba(0,0,0,0) which is its computed value.',\n};\n\nexport var positionKeywords : { [name:string]:string } = {\n\t'bottom': 'Computes to ‘100%’ for the vertical position if one or two values are given, otherwise specifies the bottom edge as the origin for the next offset.',\n\t'center': 'Computes to ‘50%’ (‘left 50%’) for the horizontal position if the horizontal position is not otherwise specified, or ‘50%’ (‘top 50%’) for the vertical position if it is.',\n\t'left': 'Computes to ‘0%’ for the horizontal position if one or two values are given, otherwise specifies the left edge as the origin for the next offset.',\n\t'right': 'Computes to ‘100%’ for the horizontal position if one or two values are given, otherwise specifies the right edge as the origin for the next offset.',\n\t'top': 'Computes to ‘0%’ for the vertical position if one or two values are given, otherwise specifies the top edge as the origin for the next offset.'\n};\n\nexport var repeatStyleKeywords : { [name:string]:string } = {\n\t'no-repeat': 'Placed once and not repeated in this direction.',\n\t'repeat': 'Repeated in this direction as often as needed to cover the background painting area.',\n\t'repeat-x': 'Computes to ‘repeat no-repeat’.',\n\t'repeat-y': 'Computes to ‘no-repeat repeat’.',\n\t'round': 'Repeated as often as will fit within the background positioning area. If it doesn’t fit a whole number of times, it is rescaled so that it does.',\n\t'space': 'Repeated as often as will fit within the background positioning area without being clipped and then the images are spaced out to fill the area.'\n};\n\nexport var lineStyleKeywords : { [name:string]:string } = {\n\t'dashed': 'A series of square-ended dashes.',\n\t'dotted': 'A series of round dots.',\n\t'double': 'Two parallel solid lines with some space between them.',\n\t'groove': 'Looks as if it were carved in the canvas.',\n\t'hidden': 'Same as ‘none’, but has different behavior in the border conflict resolution rules for border-collapsed tables.',\n\t'inset': 'Looks as if the content on the inside of the border is sunken into the canvas.',\n\t'none': 'No border. Color and width are ignored.',\n\t'outset': 'Looks as if the content on the inside of the border is coming out of the canvas.',\n\t'ridge': 'Looks as if it were coming out of the canvas.',\n\t'solid': 'A single line segment.'\n};\n\nexport var lineWidthKeywords  = ['medium', 'thick', 'thin'];\n\nexport var boxKeywords : { [name:string]:string } = {\n\t'border-box': 'The background is painted within (clipped to) the border box.',\n\t'content-box': 'The background is painted within (clipped to) the content box.',\n\t'padding-box': 'The background is painted within (clipped to) the padding box.'\n};\n\nexport var geometryBoxKeywords : { [name:string]:string } = {\n\t'margin-box': 'Uses the margin box as reference box.',\n\t'fill-box': 'Uses the object bounding box as reference box.',\n\t'stroke-box': 'Uses the stroke bounding box as reference box.',\n\t'view-box': 'Uses the nearest SVG viewport as reference box.'\n};\n\nexport var cssWideKeywords : { [name:string]:string } = {\n\t'initial': 'Represents the value specified as the property’s initial value.',\n\t'inherit': 'Represents the computed value of the property on the element’s parent.',\n\t'unset': 'Acts as either `inherit` or `initial`, depending on whether the property is inherited or not.'\n};\n\nexport var imageFunctions : { [name:string]:string } = {\n\t'url()': 'Reference an image file by URL',\n\t'image()': 'Provide image fallbacks and annotations.',\n\t'-webkit-image-set()': 'Provide multiple resolutions. Remember to use unprefixed image-set() in addition.',\n\t'image-set()': 'Provide multiple resolutions of an image and let the UA decide which is most appropriate in a given situation.',\n\t'-moz-element()': 'Use an element in the document as an image. Remember to use unprefixed element() in addition.',\n\t'element()': 'Use an element in the document as an image.',\n\t'cross-fade()': 'Indicates the two images to be combined and how far along in the transition the combination is.',\n\t'-webkit-gradient()': 'Deprecated. Use modern linear-gradient() or radial-gradient() instead.',\n\t'-webkit-linear-gradient()': 'Linear gradient. Remember to use unprefixed version in addition.',\n\t'-moz-linear-gradient()': 'Linear gradient. Remember to use unprefixed version in addition.',\n\t'-o-linear-gradient()': 'Linear gradient. Remember to use unprefixed version in addition.',\n\t'linear-gradient()': 'A linear gradient is created by specifying a straight gradient line, and then several colors placed along that line.',\n\t'-webkit-repeating-linear-gradient()': 'Repeating Linear gradient. Remember to use unprefixed version in addition.',\n\t'-moz-repeating-linear-gradient()': 'Repeating Linear gradient. Remember to use unprefixed version in addition.',\n\t'-o-repeating-linear-gradient()': 'RepeatingLinear gradient. Remember to use unprefixed version in addition.',\n\t'repeating-linear-gradient()': 'Same as linear-gradient, except the color-stops are repeated infinitely in both directions, with their positions shifted by multiples of the difference between the last specified color-stop’s position and the first specified color-stop’s position.',\n\t'-webkit-radial-gradient()': 'Radial gradient. Remember to use unprefixed version in addition.',\n\t'-moz-radial-gradient()': 'Radial gradient. Remember to use unprefixed version in addition.',\n\t'radial-gradient()': 'Colors emerge from a single point and smoothly spread outward in a circular or elliptical shape.',\n\t'-webkit-repeating-radial-gradient()': 'Repeating radial gradient. Remember to use unprefixed version in addition.',\n\t'-moz-repeating-radial-gradient()': 'Repeating radial gradient. Remember to use unprefixed version in addition.',\n\t'repeating-radial-gradient()': 'Same as radial-gradient, except the color-stops are repeated infinitely in both directions, with their positions shifted by multiples of the difference between the last specified color-stop’s position and the first specified color-stop’s position.'\n};\n\nexport var transitionTimingFunctions : { [name:string]:string } = {\n\t'ease': 'Equivalent to cubic-bezier(0.25, 0.1, 0.25, 1.0).',\n\t'ease-in': 'Equivalent to cubic-bezier(0.42, 0, 1.0, 1.0).',\n\t'ease-in-out': 'Equivalent to cubic-bezier(0.42, 0, 0.58, 1.0).',\n\t'ease-out': 'Equivalent to cubic-bezier(0, 0, 0.58, 1.0).',\n\t'linear': 'Equivalent to cubic-bezier(0.0, 0.0, 1.0, 1.0).',\n\t'step-end': 'Equivalent to steps(1, end).',\n\t'step-start': 'Equivalent to steps(1, start).',\n\t'steps()': 'The first parameter specifies the number of intervals in the function. The second parameter, which is optional, is either the value “start” or “end”.',\n\t'cubic-bezier()': 'Specifies a cubic-bezier curve. The four values specify points P1 and P2  of the curve as (x1, y1, x2, y2).',\n\t'cubic-bezier(0.6, -0.28, 0.735, 0.045)': 'Ease-in Back. Overshoots.',\n\t'cubic-bezier(0.68, -0.55, 0.265, 1.55)': 'Ease-in-out Back. Overshoots.',\n\t'cubic-bezier(0.175, 0.885, 0.32, 1.275)': 'Ease-out Back. Overshoots.',\n\t'cubic-bezier(0.6, 0.04, 0.98, 0.335)': 'Ease-in Circular. Based on half circle.',\n\t'cubic-bezier(0.785, 0.135, 0.15, 0.86)': 'Ease-in-out Circular. Based on half circle.',\n\t'cubic-bezier(0.075, 0.82, 0.165, 1)': 'Ease-out Circular. Based on half circle.',\n\t'cubic-bezier(0.55, 0.055, 0.675, 0.19)': 'Ease-in Cubic. Based on power of three.',\n\t'cubic-bezier(0.645, 0.045, 0.355, 1)': 'Ease-in-out Cubic. Based on power of three.',\n\t'cubic-bezier(0.215, 0.610, 0.355, 1)': 'Ease-out Cubic. Based on power of three.',\n\t'cubic-bezier(0.95, 0.05, 0.795, 0.035)': 'Ease-in Exponential. Based on two to the power ten.',\n\t'cubic-bezier(1, 0, 0, 1)': 'Ease-in-out Exponential. Based on two to the power ten.',\n\t'cubic-bezier(0.19, 1, 0.22, 1)': 'Ease-out Exponential. Based on two to the power ten.',\n\t'cubic-bezier(0.47, 0, 0.745, 0.715)': 'Ease-in Sine.',\n\t'cubic-bezier(0.445, 0.05, 0.55, 0.95)': 'Ease-in-out Sine.',\n\t'cubic-bezier(0.39, 0.575, 0.565, 1)': 'Ease-out Sine.',\n\t'cubic-bezier(0.55, 0.085, 0.68, 0.53)': 'Ease-in Quadratic. Based on power of two.',\n\t'cubic-bezier(0.455, 0.03, 0.515, 0.955)': 'Ease-in-out Quadratic. Based on power of two.',\n\t'cubic-bezier(0.25, 0.46, 0.45, 0.94)': 'Ease-out Quadratic. Based on power of two.',\n\t'cubic-bezier(0.895, 0.03, 0.685, 0.22)': 'Ease-in Quartic. Based on power of four.',\n\t'cubic-bezier(0.77, 0, 0.175, 1)': 'Ease-in-out Quartic. Based on power of four.',\n\t'cubic-bezier(0.165, 0.84, 0.44, 1)': 'Ease-out Quartic. Based on power of four.',\n\t'cubic-bezier(0.755, 0.05, 0.855, 0.06)': 'Ease-in Quintic. Based on power of five.',\n\t'cubic-bezier(0.86, 0, 0.07, 1)': 'Ease-in-out Quintic. Based on power of five.',\n\t'cubic-bezier(0.23, 1, 0.320, 1)': 'Ease-out Quintic. Based on power of five.'\n};\n\nexport var basicShapeFunctions : { [name:string]:string } = {\n\t'circle()': 'Defines a circle.',\n\t'ellipse()': 'Defines an ellipse.',\n\t'inset()': 'Defines an inset rectangle.',\n\t'polygon()': 'Defines a polygon.'\n};\n\nexport var units : { [unitName:string]:string[] } = {\n\t'length': ['em', 'rem', 'ex', 'px', 'cm', 'mm', 'in', 'pt', 'pc', 'ch', 'vw', 'vh', 'vmin', 'vmax'],\n\t'angle': ['deg', 'rad', 'grad', 'turn'],\n\t'time': ['ms', 's'],\n\t'frequency': ['Hz', 'kHz'],\n\t'resolution': ['dpi', 'dpcm', 'dppx'],\n\t'percentage': ['%']\n};\n\nexport var html5Tags = ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption',\n\t'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer',\n\t'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link',\n\t'main', 'map', 'mark', 'menu', 'menuitem', 'meta', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q',\n\t'rb', 'rp', 'rt', 'rtc', 'ruby', 's', 'samp', 'script', 'section', 'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td',\n\t'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr' ];\n\nexport var svgElements = ['circle', 'clipPath', 'cursor', 'defs', 'desc', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting',\n\t'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\n\t'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter', 'foreignObject', 'g', 'hatch', 'hatchpath', 'image', 'line', 'linearGradient',\n\t'marker', 'mask', 'mesh', 'meshpatch', 'meshrow', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'set', 'solidcolor', 'stop', 'svg', 'switch',\n\t'symbol', 'text', 'textPath', 'tspan', 'use', 'view'];\n\nexport function isColorConstructor(node:nodes.Function): boolean {\n\tvar name = node.getName();\n\tif (!name) {\n\t\treturn false;\n\t}\n\treturn strings.equalsIgnoreCase(name, 'rgb') ||\n\t\tstrings.equalsIgnoreCase(name, 'rgba') ||\n\t\tstrings.equalsIgnoreCase(name, 'hsl') ||\n\t\tstrings.equalsIgnoreCase(name, 'hsla');\n}\n\n/**\n * Returns true if the node is a color value - either\n * defined a hex number, as rgb or rgba function, or\n * as color name.\n */\nexport function isColorValue(node:nodes.Node):boolean {\n\tif(node.type === nodes.NodeType.HexColorValue) {\n\t\treturn true;\n\t} else if(node.type === nodes.NodeType.Function) {\n\t\treturn this.isColorConstructor(<nodes.Function> node);\n\t} else if (node.type === nodes.NodeType.Identifier) {\n\t\tif (node.parent && node.parent.type !== nodes.NodeType.Term) {\n\t\t\treturn false;\n\t\t}\n\t\tvar candidateColor = node.getText().toLowerCase();\n\t\tif(candidateColor === 'none') {\n\t\t\treturn false;\n\t\t}\n\t\tif (colors[candidateColor]) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\n/**\n * Returns true if the given name is a known property.\n */\nexport function isKnownProperty(name: string):boolean {\n\tif(!name) {\n\t\treturn false;\n\t} else {\n\t\tname = name.toLowerCase();\n\t\treturn getProperties().hasOwnProperty(name);\n\t}\n}\n\nexport function isCommonValue(entry:Value):boolean {\n\treturn entry.browsers.count > 1;\n}\n\nexport function getPageBoxDirectives():string[] {\n\treturn [\n\t\t'@bottom-center', '@bottom-left', '@bottom-left-corner', '@bottom-right', '@bottom-right-corner',\n\t\t'@left-bottom', '@left-middle', '@left-top', '@right-bottom', '@right-middle', '@right-top',\n\t\t'@top-center', '@top-left', '@top-left-corner', '@top-right', '@top-right-corner'\n\t];\n}\n\nexport function getEntryDescription(entry:{description: string; browsers: Browsers}): string {\n\tvar desc = entry.description || '';\n\tvar browserLabel = this.getBrowserLabel(entry.browsers);\n\tif (browserLabel) {\n\t\tif (desc) {\n\t\t\tdesc = desc + '\\n';\n\t\t}\n\t\tdesc= desc + '(' + browserLabel + ')';\n\t}\n\treturn desc;\n}\n\nexport function getBrowserLabel(b: Browsers): string {\n\tvar result = '';\n\tif (!b || b.all || b.count === 0) {\n\t\treturn null;\n\t}\n\tfor (var curr in browserNames) {\n\t\tif (typeof (<any> b)[curr] === 'string') {\n\t\t\tif (result.length > 0) {\n\t\t\t\tresult = result + ', ';\n\t\t\t}\n\t\t\tresult = result + (<any> browserNames)[curr];\n\t\t\tvar version = (<any> b)[curr];\n\t\t\tif (version.length > 0) {\n\t\t\t\tresult = result + ' ' + version;\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}\n\nexport interface Browsers {\n\tE?:string;\n\tFF?:string;\n\tIE?:string;\n\tO?:string;\n\tC?:string;\n\tS?:string;\n\tcount:number;\n\tall:boolean;\n\tonCodeComplete:boolean;\n}\n\nexport interface Value {\n\tname:string;\n\tdescription:string;\n\tbrowsers:Browsers;\n}\n\nexport interface IEntry {\n\tname:string;\n\trestrictions:string[];\n\tbrowsers:Browsers;\n\tdescription:string;\n\tvalues:Value[];\n}\n\nfunction evalBrowserEntry(browsers: string) {\n\tvar browserEntry : Browsers = { all: false, count: 0, onCodeComplete: false};\n\tvar count = 0;\n\tif (browsers) {\n\t\tbrowsers.split(',').forEach(\n\t\t\t(s: string) => {\n\t\t\t\ts = s.trim();\n\t\t\t\tif (s === 'all') {\n\t\t\t\t\tbrowserEntry.all= true;\n\t\t\t\t\tcount = Number.MAX_VALUE;\n\t\t\t\t} else if (s !== 'none') {\n\t\t\t\t\tfor (var key in browserNames) {\n\t\t\t\t\t\tif (s.indexOf(key) === 0) {\n\t\t\t\t\t\t\t(<any> browserEntry)[key] = s.substring(key.length).trim();\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t} else {\n\t\tbrowserEntry.all = true;\n\t\tcount = Number.MAX_VALUE;\n\t}\n\tbrowserEntry.count = count;\n\tbrowserEntry.onCodeComplete = count > 0; // to be refined\n\treturn browserEntry;\n}\n\n\nclass ValueImpl implements Value {\n\n\tprivate browserEntry: Browsers;\n\n\tconstructor(public data: any) {\n\t}\n\n\tget name() : string {\n\t\treturn this.data.name;\n\t}\n\n\tget description() : string {\n\t\treturn this.data.desc || browsers.descriptions[this.data.name];\n\t}\n\n\tget browsers() : Browsers {\n\t\tif (!this.browserEntry) {\n\t\t\tthis.browserEntry = evalBrowserEntry(this.data.browsers);\n\t\t}\n\t\treturn this.browserEntry;\n\t}\n}\n\nclass EntryImpl implements IEntry {\n\tprivate browserEntry: Browsers;\n\n\tconstructor(public data: any) {\n\t}\n\n\tget name(): string {\n\t\treturn this.data.name;\n\t}\n\n\tget description(): string {\n\t\treturn this.data.desc || browsers.descriptions[this.data.name];\n\t}\n\n\tget browsers(): Browsers {\n\t\tif (!this.browserEntry) {\n\t\t\tthis.browserEntry = evalBrowserEntry(this.data.browsers);\n\t\t}\n\t\treturn this.browserEntry;\n\t}\n\n\tget restrictions(): string[] {\n\t\tif (this.data.restriction) {\n\t\t\treturn this.data.restriction.split(',').map(function(s: string) { return s.trim(); });\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tget values(): Value[] {\n\t\tif(!this.data.values) {\n\t\t\treturn [];\n\t\t}\n\t\tif(!Array.isArray(this.data.values)) {\n\t\t\treturn [new ValueImpl(this.data.values.value)];\n\t\t}\n\t\treturn this.data.values.map(function (v: string) {\n\t\t\treturn new ValueImpl(v);\n\t\t});\n\t}\n}\n\nvar propertySet: { [key: string]: IEntry };\nvar properties = browsers.data.css.properties;\nexport function getProperties(): { [name: string]: IEntry; } {\n\tif(!propertySet) {\n\t\tpropertySet = {\n\t\t};\n\t\tfor(var i = 0, len = properties.length; i < len; i++) {\n\t\t\tvar rawEntry = properties[i];\n\t\t\tpropertySet[rawEntry.name] = new EntryImpl(rawEntry);\n\t\t}\n\t}\n\treturn propertySet;\n}\n\nvar atDirectives = browsers.data.css.atdirectives;\nvar atDirectiveList: IEntry[];\nexport function getAtDirectives(): IEntry[] {\n\tif (!atDirectiveList) {\n\t\tatDirectiveList = [];\n\t\tfor (var i = 0, len = atDirectives.length; i < len; i++) {\n\t\t\tvar rawEntry = atDirectives[i];\n\t\t\tatDirectiveList.push(new EntryImpl(rawEntry));\n\t\t}\n\t}\n\treturn atDirectiveList;\n}\n\n\nvar pseudoElements = browsers.data.css.pseudoelements;\nvar pseudoElementList: IEntry[];\nexport function getPseudoElements(): IEntry[] {\n\t\tif (!pseudoElementList) {\n\t\t\tpseudoElementList = [];\n\t\t\tfor (var i = 0, len = pseudoElements.length; i < len; i++) {\n\t\t\t\tvar rawEntry = pseudoElements[i];\n\t\t\t\tpseudoClassesList.push(new EntryImpl(rawEntry));\n\t\t\t}\n\t\t}\n\t\treturn pseudoElementList;\n}\n\nvar pseudoClasses = browsers.data.css.pseudoclasses;\nvar pseudoClassesList: IEntry[];\nexport function getPseudoClasses(): IEntry[]{\n\tif (!pseudoClassesList) {\n\t\tpseudoClassesList = [];\n\t\tfor (var i = 0, len = pseudoClasses.length; i < len; i++) {\n\t\t\tvar rawEntry = pseudoClasses[i];\n\t\t\tpseudoClassesList.push(new EntryImpl(rawEntry));\n\t\t}\n\t}\n\treturn pseudoClassesList;\n}\n\nexport var browserNames = {\n\tE : 'Edge',\n\tFF : 'Firefox',\n\tS : 'Safari',\n\tC : 'Chrome',\n\tIE : 'IE',\n\tO : 'Opera'\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport strings = require('vs/base/common/strings');\nimport HtmlContent = require('vs/base/common/htmlContent');\n\nexport interface IElement {\n\tname?:string;\n\tchildren?:IElement[];\n\tattributes?:{[name:string]:string;};\n}\n\nexport class Element implements IElement {\n\n\tpublic name:string;\n\tpublic parent:Element;\n\tpublic children:Element[];\n\tpublic attributes:{[name:string]:string;};\n\n\tpublic addChild(child:Element):void {\n\t\tif(child instanceof Element) {\n\t\t\t(<Element> child).parent = this;\n\t\t}\n\t\tif(!this.children) {\n\t\t\tthis.children = [];\n\t\t}\n\t\tthis.children.push(child);\n\t}\n\n\tpublic findRoot(): Element {\n\t\tvar curr: Element = this;\n\t\twhile (curr.parent && !(curr.parent instanceof RootElement)) {\n\t\t\tcurr = curr.parent;\n\t\t}\n\t\treturn curr;\n\t}\n\n\tpublic removeChild(child: Element) : boolean {\n\t\tif (this.children) {\n\t\t\tvar index = this.children.indexOf(child);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.children.splice(index, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic addAttr(name:string, value:string):void {\n\t\tif(!this.attributes) {\n\t\t\tthis.attributes = {};\n\t\t}\n\t\tif(this.attributes.hasOwnProperty(name)) {\n\t\t\tthis.attributes[name] += ' ' + value;\n\t\t} else {\n\t\t\tthis.attributes[name] = value;\n\t\t}\n\t}\n\n\tpublic clone(cloneChildren: boolean = true): Element {\n\t\tvar elem = new Element();\n\t\telem.name = this.name;\n\t\tif (this.attributes) {\n\t\t\telem.attributes = {};\n\t\t\tfor (var key in this.attributes) {\n\t\t\t\telem.addAttr(key, this.attributes[key]);\n\t\t\t}\n\t\t}\n\t\tif (cloneChildren && this.children) {\n\t\t\telem.children = [];\n\t\t\tfor (var index = 0; index < this.children.length; index++) {\n\t\t\t\telem.addChild(this.children[index].clone());\n\t\t\t}\n\t\t}\n\t\treturn elem;\n\t}\n\n\tpublic cloneWithParent(): Element {\n\t\tvar clone = this.clone(false);\n\t\tif (this.parent && !(this.parent instanceof RootElement)) {\n\t\t\tvar parentClone = this.parent.cloneWithParent();\n\t\t\tparentClone.addChild(clone);\n\t\t}\n\t\treturn clone;\n\t}\n}\n\nexport class RootElement extends Element {\n\n}\n\nexport class LabelElement extends Element {\n\n\tconstructor(label:string) {\n\t\tsuper();\n\t\tthis.name = label;\n\t}\n}\n\nclass HtmlPrinter {\n\n\tconstructor(public quote:string) {\n\t\t// empty\n\t}\n\n\tpublic print(element:IElement):HtmlContent.IHTMLContentElement[] {\n\n\t\tif(element instanceof RootElement) {\n\t\t\treturn this.doPrint(element.children);\n\t\t} else {\n\t\t\treturn this.doPrint([element]);\n\t\t}\n\t}\n\n\tprivate doPrint(elements:IElement[]):HtmlContent.IHTMLContentElement[] {\n\n\t\tvar root:HtmlContent.IHTMLContentElement = { children: <HtmlContent.IHTMLContentElement[]> []},\n\t\t\tparent = root;\n\n\t\twhile(elements.length > 0) {\n\n\t\t\tvar element = elements.shift(),\n\t\t\t\tcontent = this.doPrintElement(element);\n\n\t\t\tparent.children.push(content);\n\n\t\t\tif(element.children) {\n\t\t\t\telements.push.apply(elements, element.children);\n\t\t\t\tparent = content;\n\t\t\t}\n\t\t}\n\n\t\treturn root.children;\n\t}\n\n\tprivate doPrintElement(element:IElement):HtmlContent.IHTMLContentElement {\n\n\t\t// special case: a simple label\n\t\tif(element instanceof LabelElement) {\n\t\t\treturn {\n\t\t\t\ttagName: 'ul',\n\t\t\t\tchildren: [{\n\t\t\t\t\ttagName: 'li',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\ttagName: 'span',\n\t\t\t\t\t\tclassName: 'label',\n\t\t\t\t\t\ttext: element.name\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t};\n\t\t}\n\n\t\t// the real deal\n\t\tvar children:HtmlContent.IHTMLContentElement[] = [{\n\t\t\tisText: true,\n\t\t\ttext: '<'\n\t\t}];\n\n\t\t// element name\n\t\tif(element.name) {\n\t\t\tchildren.push({\n\t\t\t\ttagName: 'span',\n\t\t\t\tclassName: 'name',\n\t\t\t\ttext: element.name\n\t\t\t});\n\t\t} else {\n\t\t\tchildren.push({\n\t\t\t\ttagName: 'span',\n\t\t\t\ttext: 'element'\n\t\t\t});\n\t\t}\n\n\t\t// attributes\n\t\tif(element.attributes) {\n\t\t\tObject.keys(element.attributes).forEach((attr) => {\n\n\t\t\t\tchildren.push({\n\t\t\t\t\tisText: true,\n\t\t\t\t\ttext: ' '\n\t\t\t\t});\n\n\t\t\t\tchildren.push({\n\t\t\t\t\ttagName: 'span',\n\t\t\t\t\tclassName: 'key',\n\t\t\t\t\ttext: attr\n\t\t\t\t});\n\t\t\t\tvar value = element.attributes[attr];\n\t\t\t\tif(value) {\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\tisText: true,\n\t\t\t\t\t\ttext: '='\n\t\t\t\t\t});\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\ttagName: 'span',\n\t\t\t\t\t\tclassName: 'value',\n\t\t\t\t\t\ttext: quotes.ensure(value, this.quote)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tchildren.push({\n\t\t\tisText: true,\n\t\t\ttext: '>'\n\t\t});\n\n\t\treturn {\n\t\t\ttagName: 'ul',\n\t\t\tchildren: [{\n\t\t\t\ttagName: 'li',\n\t\t\t\tchildren: children\n\t\t\t}]\n\t\t};\n\t}\n}\n\nnamespace quotes {\n\n\texport function ensure(value:string, which:string):string {\n\t\treturn which + remove(value) + which;\n\t}\n\n\texport function remove(value:string):string {\n\t\tvalue = strings.trim(value, '\\'');\n\t\tvalue = strings.trim(value, '\"');\n\t\treturn value;\n\t}\n}\n\nexport function toElement(node:nodes.SimpleSelector, parentElement?: Element):Element {\n\n\tvar result = new Element();\n\tnode.getChildren().forEach((child) => {\n\t\tswitch(child.type) {\n\t\t\tcase nodes.NodeType.SelectorCombinator:\n\t\t\t\tif (parentElement) {\n\t\t\t\t\tvar segments = child.getText().split('&');\n\t\t\t\t\tif (segments.length === 1) {\n\t\t\t\t\t\t// should not happen\n\t\t\t\t\t\tresult.name = segments[0];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult = parentElement.cloneWithParent();\n\t\t\t\t\tif (segments[0]) {\n\t\t\t\t\t\tvar root = result.findRoot();\n\t\t\t\t\t\troot.name = segments[0] + root.name;\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i = 1; i < segments.length; i++) {\n\t\t\t\t\t\tif (i > 1) {\n\t\t\t\t\t\t\tvar clone = parentElement.cloneWithParent();\n\t\t\t\t\t\t\tresult.addChild(clone.findRoot());\n\t\t\t\t\t\t\tresult = clone;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult.name += segments[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase nodes.NodeType.SelectorPlaceholder:\n\t\t\tcase nodes.NodeType.ElementNameSelector:\n\t\t\t\tvar text = child.getText();\n\t\t\t\tresult.name = text === '*' ? 'element' : text;\n\t\t\t\tbreak;\n\t\t\tcase nodes.NodeType.ClassSelector:\n\t\t\t\tresult.addAttr('class', child.getText().substring(1));\n\t\t\t\tbreak;\n\t\t\tcase nodes.NodeType.IdentifierSelector:\n\t\t\t\tresult.addAttr('id', child.getText().substring(1));\n\t\t\t\tbreak;\n\t\t\tcase nodes.NodeType.MixinDeclaration:\n\t\t\t\tresult.addAttr('class', (<nodes.MixinDeclaration> child).getName());\n\t\t\t\tbreak;\n\t\t\tcase nodes.NodeType.PseudoSelector:\n\t\t\t\tresult.addAttr(child.getText(), strings.empty);\n\t\t\t\tbreak;\n\t\t\tcase nodes.NodeType.AttributeSelector:\n\t\t\t\tvar expr = <nodes.BinaryExpression> child.getChildren()[0];\n\t\t\t\tif (expr) {\n\t\t\t\t\tif (expr.getRight()) {\n\t\t\t\t\t\tvar value:string;\n\t\t\t\t\t\tswitch (expr.getOperator().getText()) {\n\t\t\t\t\t\t\tcase '|=':\n\t\t\t\t\t\t\t\t// excatly or followed by -words\n\t\t\t\t\t\t\t\tvalue = strings.format('{0}-\\u2026', quotes.remove(expr.getRight().getText()));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '^=':\n\t\t\t\t\t\t\t\t// prefix\n\t\t\t\t\t\t\t\tvalue = strings.format('{0}\\u2026', quotes.remove(expr.getRight().getText()));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '$=':\n\t\t\t\t\t\t\t\t// suffix\n\t\t\t\t\t\t\t\tvalue = strings.format('\\u2026{0}', quotes.remove(expr.getRight().getText()));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '~=':\n\t\t\t\t\t\t\t\t// one of a list of words\n\t\t\t\t\t\t\t\tvalue = strings.format(' \\u2026 {0} \\u2026 ', quotes.remove(expr.getRight().getText()));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '*=':\n\t\t\t\t\t\t\t\t// substring\n\t\t\t\t\t\t\t\tvalue = strings.format('\\u2026{0}\\u2026', quotes.remove(expr.getRight().getText()));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = quotes.remove(expr.getRight().getText());\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresult.addAttr(expr.getLeft().getText(), value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\treturn result;\n}\n\nexport function simpleSelectorToHtml(node:nodes.SimpleSelector):HtmlContent.IHTMLContentElement {\n\tvar element = toElement(node);\n\tvar body = new HtmlPrinter('\"').print(element);\n\treturn {\n\t\ttagName: 'span',\n\t\tclassName: 'css-selector-hover',\n\t\tchildren: body\n\t};\n}\n\nclass SelectorElementBuilder {\n\n\tprivate prev:nodes.Node;\n\tprivate element:Element;\n\n\tpublic constructor(element:Element) {\n\t\tthis.prev = null;\n\t\tthis.element = element;\n\t}\n\n\tpublic processSelector(selector:nodes.Selector) : void {\n\t\tvar parentElement : Element = null;\n\n\t\tif (!(this.element instanceof RootElement)) {\n\t\t\tif (selector.getChildren().some((c) => c.hasChildren() && c.getChild(0).type === nodes.NodeType.SelectorCombinator)) {\n\t\t\t\tvar curr = this.element.findRoot();\n\t\t\t\tif (curr.parent instanceof RootElement) {\n\t\t\t\t\tparentElement = this.element;\n\n\t\t\t\t\tthis.element = curr.parent;\n\t\t\t\t\tthis.element.removeChild(curr);\n\t\t\t\t\tthis.prev = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tselector.getChildren().forEach((selectorChild) => {\n\t\t\tif (selectorChild instanceof nodes.SimpleSelector) {\n\t\t\t\tif (this.prev instanceof nodes.SimpleSelector) {\n\t\t\t\t\tvar labelElement = new LabelElement('\\u2026');\n\t\t\t\t\tthis.element.addChild(labelElement);\n\t\t\t\t\tthis.element = labelElement;\n\t\t\t\t} else if (this.prev && (this.prev.matches('+') || this.prev.matches('~'))) {\n\t\t\t\t\tthis.element = <Element> this.element.parent;\n\t\t\t\t}\n\n\t\t\t\tif (this.prev && this.prev.matches('~')) {\n\t\t\t\t\tthis.element.addChild(toElement(<nodes.SimpleSelector> selectorChild));\n\t\t\t\t\tthis.element.addChild(new LabelElement('\\u22EE'));\n\t\t\t\t}\n\n\t\t\t\tvar thisElement = toElement(<nodes.SimpleSelector> selectorChild, parentElement);\n\t\t\t\tvar root = thisElement.findRoot();\n\n\t\t\t\tthis.element.addChild(root);\n\t\t\t\tthis.element = thisElement;\n\t\t\t}\n\n\t\t\tif (selectorChild instanceof nodes.SimpleSelector ||\n\t\t\t\tselectorChild.type === nodes.NodeType.SelectorCombinatorParent ||\n\t\t\t\tselectorChild.type === nodes.NodeType.SelectorCombinatorSibling ||\n\t\t\t\tselectorChild.type === nodes.NodeType.SelectorCombinatorAllSiblings) {\n\n\t\t\t\tthis.prev = selectorChild;\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction isNewSelectorContext(node: nodes.Node): boolean {\n\tswitch (node.type) {\n\t\tcase nodes.NodeType.MixinDeclaration:\n\t\tcase nodes.NodeType.Stylesheet:\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function selectorToElement(node:nodes.Selector):Element {\n\tvar root: Element = new RootElement();\n\tvar parentRuleSets: nodes.RuleSet[] = [];\n\n\tif (node.getParent() instanceof nodes.RuleSet) {\n\t\tvar parent = node.getParent().getParent(); // parent of the selector's ruleset\n\t\twhile (parent && !isNewSelectorContext(parent)) {\n\t\t\tif (parent instanceof nodes.RuleSet) {\n\t\t\t\tparentRuleSets.push(<nodes.RuleSet> parent);\n\t\t\t}\n\t\t\tparent = parent.getParent();\n\t\t}\n\t}\n\n\tvar builder = new SelectorElementBuilder(root);\n\n\tfor (var i = parentRuleSets.length - 1; i >= 0; i--) {\n\t\tvar selector = parentRuleSets[i].getSelectors().getChild(0);\n\t\tif (selector) {\n\t\t\tbuilder.processSelector(selector);\n\t\t}\n\t}\n\n\tbuilder.processSelector(node);\n\treturn root;\n}\n\n\nexport function selectorToHtml(node:nodes.Selector):HtmlContent.IHTMLContentElement {\n\tvar root = selectorToElement(node);\n\tvar body = new HtmlPrinter('\"').print(root);\n\treturn {\n\t\ttagName: 'span',\n\t\tclassName: 'css-selector-hover',\n\t\tchildren: body\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport _symbols = require('vs/languages/css/common/parser/cssSymbols');\nimport {DocumentHighlightKind} from 'vs/editor/common/modes';\n\nexport function findDeclaration(stylesheet:nodes.Node, offset:number):nodes.Node {\n\n\tvar symbols = new _symbols.Symbols(stylesheet);\n\tvar node = nodes.getNodeAtOffset(stylesheet, offset);\n\n\tif (!node) {\n\t\treturn null;\n\t}\n\n\tvar symbol = symbols.findSymbolFromNode(node);\n\tif(!symbol) {\n\t\treturn null;\n\t}\n\n\treturn symbol.node;\n}\n\nexport interface IOccurrence {\n\tkind:DocumentHighlightKind;\n\ttype:nodes.ReferenceType;\n\tnode:nodes.Node;\n}\n\nexport function findOccurrences(stylesheet:nodes.Node, offset:number):IOccurrence[] {\n\tvar result:IOccurrence[] = [];\n\tvar node = nodes.getNodeAtOffset(stylesheet, offset);\n\tif (!node || node.type === nodes.NodeType.Stylesheet || node.type === nodes.NodeType.Declarations) {\n\t\treturn result;\n\t}\n\n\tvar symbols = new _symbols.Symbols(stylesheet);\n\tvar symbol = symbols.findSymbolFromNode(node);\n\tvar name = node.getText();\n\n\tstylesheet.accept((candidate) => {\n\t\tif (symbol) {\n\t\t\tif (symbols.matchesSymbol(candidate, symbol)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tkind: getKind(candidate),\n\t\t\t\t\ttype: symbol.type,\n\t\t\t\t\tnode: candidate\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t} else if (node.type === candidate.type && node.length === candidate.length && name === candidate.getText()) {\n\t\t\t// Same node type and data\n\t\t\tresult.push({\n\t\t\t\tkind: getKind(candidate),\n\t\t\t\tnode: candidate,\n\t\t\t\ttype:nodes.ReferenceType.Unknown\n\t\t\t});\n\t\t}\n\t\treturn true;\n\t});\n\n\treturn result;\n}\n\nfunction getKind(node:nodes.Node):DocumentHighlightKind {\n\n\tif (node.type === nodes.NodeType.Selector) {\n\t\treturn DocumentHighlightKind.Write;\n\t}\n\n\tif (node instanceof nodes.Identifier) {\n\t\tif (node.parent && node.parent instanceof nodes.Property) {\n\t\t\tif (_symbols.Symbols.isCssVariable(node)) {\n\t\t\t\treturn DocumentHighlightKind.Write;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (node.parent) {\n\t\tswitch (node.parent.type) {\n\t\t\tcase nodes.NodeType.FunctionDeclaration:\n\t\t\tcase nodes.NodeType.MixinDeclaration:\n\t\t\tcase nodes.NodeType.Keyframe:\n\t\t\tcase nodes.NodeType.VariableDeclaration:\n\t\t\tcase nodes.NodeType.FunctionParameter:\n\t\t\t\treturn DocumentHighlightKind.Write;\n\t\t}\n\t}\n\n\treturn DocumentHighlightKind.Read;\n}","define(\"vs/nls!vs/languages/css/common/services/lintRules\",['vs/nls', 'vs/nls!vs/languages/css/common/cssWorker'], function(nls, data) { return nls.create(\"vs/languages/css/common/services/lintRules\", data); });","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport nls = require('vs/nls');\nimport nodes = require('./cssNodes');\n\nexport class CSSIssueType implements nodes.IRule {\n\tid: string;\n\tmessage: string;\n\n\tpublic constructor(id:string, message: string) {\n\t\tthis.id = id;\n\t\tthis.message = message;\n\t}\n}\n\nexport var ParseError = {\n\tNumberExpected: new CSSIssueType('css-numberexpected', nls.localize('expected.number', \"number expected\")),\n\tConditionExpected: new CSSIssueType('css-conditionexpected', nls.localize('expected.condt', \"condition expected\")),\n\tRuleOrSelectorExpected: new CSSIssueType('css-ruleorselectorexpected', nls.localize('expected.ruleorselector', \"at-rule or selector expected\")),\n\tDotExpected: new CSSIssueType('css-dotexpected', nls.localize('expected.dot', \"dot expected\")),\n\tColonExpected: new CSSIssueType('css-colonexpected', nls.localize('expected.colon', \"colon expected\")),\n\tSemiColonExpected: new CSSIssueType('css-semicolonexpected', nls.localize('expected.semicolon', \"semi-colon expected\")),\n\tTermExpected: new CSSIssueType('css-termexpected', nls.localize('expected.term', \"term expected\")),\n\tExpressionExpected: new CSSIssueType('css-expressionexpected', nls.localize('expected.expression', \"expression expected\")),\n\tOperatorExpected: new CSSIssueType('css-operatorexpected', nls.localize('expected.operator', \"operator expected\")),\n\tIdentifierExpected: new CSSIssueType('css-identifierexpected', nls.localize('expected.ident', \"identifier expected\")),\n\tPercentageExpected: new CSSIssueType('css-percentageexpected', nls.localize('expected.percentage', \"percentage expected\")),\n\tURIOrStringExpected: new CSSIssueType('css-uriorstringexpected', nls.localize('expected.uriorstring', \"uri or string expected\")),\n\tURIExpected: new CSSIssueType('css-uriexpected', nls.localize('expected.uri', \"URI expected\")),\n\tVariableNameExpected: new CSSIssueType('css-varnameexpected', nls.localize('expected.varname', \"variable name expected\")),\n\tVariableValueExpected: new CSSIssueType('css-varvalueexpected', nls.localize('expected.varvalue', \"variable value expected\")),\n\tPropertyValueExpected: new CSSIssueType('css-propertyvalueexpected', nls.localize('expected.propvalue', \"property value expected\")),\n\tLeftCurlyExpected: new CSSIssueType('css-lcurlyexpected', nls.localize('expected.lcurly', \"{ expected\")),\n\tRightCurlyExpected: new CSSIssueType('css-rcurlyexpected', nls.localize('expected.rcurly', \"} expected\")),\n\tLeftSquareBracketExpected: new CSSIssueType('css-rbracketexpected', nls.localize('expected.lsquare', \"[ expected\")),\n\tRightSquareBracketExpected: new CSSIssueType('css-lbracketexpected', nls.localize('expected.rsquare', \"] expected\")),\n\tLeftParenthesisExpected: new CSSIssueType('css-lparentexpected', nls.localize('expected.lparen', \"( expected\")),\n\tRightParenthesisExpected: new CSSIssueType('css-rparentexpected', nls.localize('expected.rparent', \") expected\")),\n\tCommaExpected: new CSSIssueType('css-commaexpected', nls.localize('expected.comma', \"comma expected\")),\n\tPageDirectiveOrDeclarationExpected: new CSSIssueType('css-pagedirordeclexpected', nls.localize('expected.pagedirordecl', \"page directive or declaraton expected\")),\n\tUnknownAtRule: new CSSIssueType('css-unknownatrule', nls.localize('unknown.atrule', \"at-rule unknown\")),\n\tUnknownKeyword: new CSSIssueType('css-unknownkeyword', nls.localize('unknown.keyword', \"unknown keyword\")),\n\tSelectorExpected: new CSSIssueType('css-selectorexpected', nls.localize('expected.selector', \"selector expected\")),\n\tStringLiteralExpected: new CSSIssueType('css-stringliteralexpected', nls.localize('expected.stringliteral', \"string literal expected\")),\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport types = require ('vs/base/common/types');\nimport scanner = require ('./cssScanner');\nimport nodes = require ('./cssNodes');\nimport _level = require('vs/languages/css/common/level');\nimport errors = require('./cssErrors');\nimport languageFacts = require('vs/languages/css/common/services/languageFacts');\nimport EditorCommon = require('vs/editor/common/editorCommon');\n\nexport interface IMark {\n\tprev: scanner.IToken;\n\tcurr: scanner.IToken;\n\tpos: number;\n}\n\n/// <summary>\n/// A parser for the css core specification. See for reference:\n/// http://www.w3.org/TR/CSS21/syndata.html#tokenization\n/// </summary>\nexport class Parser {\n\n\tpublic scanner: scanner.Scanner;\n\tpublic token: scanner.IToken;\n\tpublic prevToken: scanner.IToken;\n\n\tprivate lastErrorToken: scanner.IToken;\n\n\tconstructor(scnr: scanner.Scanner=new scanner.Scanner()) {\n\t\tthis.scanner = scnr;\n\t\tthis.token = null;\n\t\tthis.prevToken = null;\n\t}\n\n\tpublic peek(type:scanner.TokenType, text?:string, ignoreCase:boolean=true): boolean {\n\t\tif (type !== this.token.type) {\n\t\t\treturn false;\n\t\t}\n\t\tif (typeof text !== 'undefined') {\n\t\t\tif(ignoreCase) {\n\t\t\t\treturn text.toLowerCase() === this.token.text.toLowerCase();\n\t\t\t} else {\n\t\t\t\treturn text === this.token.text;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic peekRegExp(type:scanner.TokenType, regEx: RegExp): boolean {\n\t\tif (type !== this.token.type) {\n\t\t\treturn false;\n\t\t}\n\t\treturn regEx.test(this.token.text);\n\t}\n\n\tpublic hasWhitespace():boolean {\n\t\treturn this.prevToken && (this.prevToken.offset + this.prevToken.len !== this.token.offset);\n\t}\n\n\tpublic consumeToken() : void {\n\t\tthis.prevToken = this.token;\n\t\tthis.token = this.scanner.scan();\n\t}\n\n\tpublic mark(): IMark {\n\t\treturn {\n\t\t\tprev: this.prevToken,\n\t\t\tcurr: this.token,\n\t\t\tpos: this.scanner.pos()\n\t\t};\n\t}\n\n\tpublic restoreAtMark(mark: IMark): void {\n\t\tthis.prevToken= mark.prev;\n\t\tthis.token= mark.curr;\n\t\tthis.scanner.goBackTo(mark.pos);\n\t}\n\n\tpublic acceptOne(type: scanner.TokenType, text?: string[], ignoreCase:boolean=true): boolean {\n\t\tfor (var i = 0 ; i < text.length; i++) {\n\t\t\tif(this.peek(type, text[i], ignoreCase)) {\n\t\t\t\tthis.consumeToken();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic accept(type: scanner.TokenType, text?: string, ignoreCase:boolean=true): boolean {\n\t\tif(this.peek(type, text, ignoreCase)) {\n\t\t\tthis.consumeToken();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic resync(resyncTokens: scanner.TokenType[], resyncStopTokens: scanner.TokenType[]): boolean {\n\t\twhile (true) {\n\t\t\tif (resyncTokens && resyncTokens.indexOf(this.token.type) !== -1) {\n\t\t\t\tthis.consumeToken();\n\t\t\t\treturn true;\n\t\t\t} else if (resyncStopTokens && resyncStopTokens.indexOf(this.token.type) !== -1) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (this.token.type === scanner.TokenType.EOF) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.token = this.scanner.scan();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic createNode(nodeType:nodes.NodeType): nodes.Node {\n\t\treturn new nodes.Node(this.token.offset, this.token.len, nodeType);\n\t}\n\n\tpublic create(ctor: any): nodes.Node {\n\t\treturn types.create(ctor, this.token.offset, this.token.len);\n\t}\n\n\tpublic finish<T extends nodes.Node>(node:T, error?: errors.CSSIssueType, resyncTokens?: scanner.TokenType[], resyncStopTokens?: scanner.TokenType[]): T {\n\t\t// parseNumeric misuses error for boolean flagging (however the real error mustn't be a false)\n\t\t// + nodelist offsets mustn't be modified, because there is a offset hack in rulesets for smartselection\n\t\tif (!(node instanceof nodes.Nodelist)) {\n\t\t\tif (error) {\n\t\t\t\tthis.markError(node, error, resyncTokens, resyncStopTokens);\n\t\t\t}\n\t\t\t// set the node end position\n\t\t\tif ( this.prevToken !== null) {\n\t\t\t\t// length with more elements belonging together\n\t\t\t\tvar prevEnd = this.prevToken.offset + this.prevToken.len;\n\t\t\t\tnode.length = prevEnd > node.offset ? prevEnd - node.offset: 0; // offset is taken from current token, end from previous: Use 0 for empty nodes\n\t\t\t}\n\n\t\t}\n\t\treturn node;\n\t}\n\n\tpublic markError<T extends nodes.Node>(node:T, error: errors.CSSIssueType, resyncTokens?: scanner.TokenType[], resyncStopTokens?: scanner.TokenType[]): void {\n\t\tif (this.token !== this.lastErrorToken) { // do not report twice on the same token\n\t\t\tnode.addIssue(new nodes.Marker(node, error, _level.Level.Error, null, this.token.offset, this.token.len));\n\t\t\tthis.lastErrorToken = this.token;\n\t\t}\n\t\tif (resyncTokens || resyncStopTokens) {\n\t\t\tthis.resync(resyncTokens, resyncStopTokens);\n\t\t}\n\t}\n\n\tpublic parseStylesheet(model: EditorCommon.IMirrorModel): nodes.Stylesheet {\n\t\tvar versionId = model.getVersionId();\n\t\tvar textProvider = (offset:number, length:number) => {\n\t\t\t\tif (model.getVersionId() !== versionId) {\n\t\t\t\t\tthrow new Error('Underlying model has changed, AST is no longer valid');\n\t\t\t\t}\n\t\t\t\tvar range = model.getRangeFromOffsetAndLength(offset, length);\n\t\t\t\treturn model.getValueInRange(range);\n\t\t\t};\n\n\t\treturn this.internalParse(model.getValue(), this._parseStylesheet, textProvider);\n\t}\n\n\tpublic internalParse<T extends nodes.Node>(input: string, parseFunc:()=>T, textProvider?:nodes.ITextProvider): T {\n\t\tthis.scanner.setSource(input);\n\t\tthis.token = this.scanner.scan();\n\t\tvar node = parseFunc.bind(this)();\n\t\tif (node) {\n\t\t\tif (textProvider) {\n\t\t\t\tnode.textProvider = textProvider;\n\t\t\t} else {\n\t\t\t\tnode.textProvider = (offset:number, length:number) => { return input.substr(offset, length); };\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\tpublic _parseStylesheet(): nodes.Stylesheet {\n\t\tvar node = <nodes.Stylesheet> this.create(nodes.Stylesheet);\n\t\tnode.addChild(this._parseCharset());\n\n\t\tvar inRecovery= false;\n\t\tdo {\n\t\t\tvar hasMatch = false;\n\t\t\tdo {\n\t\t\t\thasMatch= false;\n\t\t\t\tvar statement = this._parseStylesheetStatement();\n\t\t\t\tif (statement) {\n\t\t\t\t\tnode.addChild(statement);\n\t\t\t\t\thasMatch= true;\n\t\t\t\t\tinRecovery = false;\n\t\t\t\t\tif (!this.peek(scanner.TokenType.EOF) && this._needsSemicolonAfter(statement) && !this.accept(scanner.TokenType.SemiColon)) {\n\t\t\t\t\t\tthis.markError(node, errors.ParseError.SemiColonExpected);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twhile (this.accept(scanner.TokenType.SemiColon) || this.accept(scanner.TokenType.CDO) || this.accept(scanner.TokenType.CDC)) {\n\t\t\t\t\t// accept empty statements\n\t\t\t\t\thasMatch= true;\n\t\t\t\t\tinRecovery = false;\n\t\t\t\t}\n\t\t\t} while (hasMatch);\n\n\t\t\tif (this.peek(scanner.TokenType.EOF)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!inRecovery) {\n\t\t\t\tif (this.peek(scanner.TokenType.AtKeyword)) {\n\t\t\t\t\tthis.markError(node, errors.ParseError.UnknownAtRule);\n\t\t\t\t} else {\n\t\t\t\t\tthis.markError(node, errors.ParseError.RuleOrSelectorExpected);\n\t\t\t\t}\n\t\t\t\tinRecovery= true;\n\t\t\t}\n\t\t\tthis.consumeToken();\n\t\t} while (!this.peek(scanner.TokenType.EOF));\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseStylesheetStatement():nodes.Node {\n\t\treturn this._parseRuleset(false)\n\t\t\t|| this._parseImport()\n\t\t\t|| this._parseMedia()\n\t\t\t|| this._parsePage()\n\t\t\t|| this._parseFontFace()\n\t\t\t|| this._parseKeyframe()\n\t\t\t|| this._parseViewPort()\n\t\t\t|| this._parseNamespace()\n\t\t\t|| this._parseDocument();\n\t}\n\n\tpublic _tryParseRuleset(isNested: boolean): nodes.RuleSet {\n\t\tvar mark= this.mark();\n\t\tif (this._parseSelector(isNested)) {\n\t\t\twhile (this.accept(scanner.TokenType.Comma) && this._parseSelector(isNested)) {\n\t\t\t\t// loop\n\t\t\t}\n\t\t\tif (this.accept(scanner.TokenType.CurlyL)) {\n\t\t\t\tthis.restoreAtMark(mark);\n\t\t\t\treturn this._parseRuleset(isNested);\n\t\t\t}\n\t\t}\n\t\tthis.restoreAtMark(mark);\n\t\treturn null;\n\t}\n\n\tpublic _parseRuleset(isNested: boolean = false): nodes.RuleSet {\n\t\tvar node = <nodes.RuleSet> this.create(nodes.RuleSet);\n\n\t\tif(!node.getSelectors().addChild(this._parseSelector(isNested))) {\n\t\t\treturn null;\n\t\t}\n\n\t\twhile (this.accept(scanner.TokenType.Comma) && node.getSelectors().addChild(this._parseSelector(isNested))) {\n\t\t\t// loop\n\t\t}\n\n\t\treturn this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\n\t}\n\n\tpublic _parseRuleSetDeclaration() : nodes.Node {\n\t\treturn this._parseDeclaration();\n\t}\n\n\tpublic _needsSemicolonAfter(node: nodes.Node) : boolean {\n\t\tswitch (node.type) {\n\t\t\tcase nodes.NodeType.Keyframe:\n\t\t\tcase nodes.NodeType.ViewPort:\n\t\t\tcase nodes.NodeType.Media:\n\t\t\tcase nodes.NodeType.Ruleset:\n\t\t\tcase nodes.NodeType.Namespace:\n\t\t\tcase nodes.NodeType.If:\n\t\t\tcase nodes.NodeType.For:\n\t\t\tcase nodes.NodeType.Each:\n\t\t\tcase nodes.NodeType.While:\n\t\t\tcase nodes.NodeType.MixinDeclaration:\n\t\t\tcase nodes.NodeType.FunctionDeclaration:\n\t\t\t\treturn false;\n\t\t\tcase nodes.NodeType.VariableDeclaration:\n\t\t\tcase nodes.NodeType.ExtendsReference:\n\t\t\tcase nodes.NodeType.MixinContent:\n\t\t\tcase nodes.NodeType.ReturnStatement:\n\t\t\tcase nodes.NodeType.MediaQuery:\n\t\t\tcase nodes.NodeType.Debug:\n\t\t\tcase nodes.NodeType.Import:\n\t\t\t\treturn true;\n\t\t\tcase nodes.NodeType.MixinReference:\n\t\t\t\treturn !(<nodes.MixinReference> node).getContent();\n\t\t\tcase nodes.NodeType.Declaration:\n\t\t\t\treturn !(<nodes.Declaration> node).getNestedProperties();\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic _parseDeclarations(parseDeclaration: () => nodes.Node) : nodes.Declarations {\n\t\tvar node = <nodes.Declarations> this.create(nodes.Declarations);\n\t\tif (!this.accept(scanner.TokenType.CurlyL)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar decl = parseDeclaration();\n\t\twhile (node.addChild(decl)) {\n\t\t\tif (this.peek(scanner.TokenType.CurlyR)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (this._needsSemicolonAfter(decl) && !this.accept(scanner.TokenType.SemiColon)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.SemiColonExpected, [ scanner.TokenType.SemiColon, scanner.TokenType.CurlyR ]);\n\t\t\t}\n\t\t\twhile (this.accept(scanner.TokenType.SemiColon)) {\n\t\t\t\t// accept empty statements\n\t\t\t}\n\t\t\tdecl = parseDeclaration();\n\t\t}\n\n\t\tif (!this.accept(scanner.TokenType.CurlyR)) {\n\t\t\treturn this.finish(node, errors.ParseError.RightCurlyExpected, [scanner.TokenType.CurlyR, scanner.TokenType.SemiColon ]);\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseBody<T extends nodes.BodyDeclaration>(node: T, parseDeclaration: () => nodes.Node): T {\n\t\tif (!node.setDeclarations(this._parseDeclarations(parseDeclaration))) {\n\t\t\treturn this.finish(node, errors.ParseError.LeftCurlyExpected, [scanner.TokenType.CurlyR, scanner.TokenType.SemiColon ]);\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseSelector(isNested: boolean): nodes.Selector {\n\t\tvar node = <nodes.Selector> this.create(nodes.Selector);\n\n\t\tvar hasContent = false;\n\t\tif (isNested) {\n\t\t\t// nested selectors can start with a combinator\n\t\t\thasContent = node.addChild(this._parseCombinator());\n\t\t}\n\t\twhile (node.addChild(this._parseSimpleSelector())) {\n\t\t\thasContent = true;\n\t\t\tnode.addChild(this._parseCombinator()); // optional\n\t\t}\n\t\treturn hasContent ? this.finish(node) : null;\n\t}\n\n\tpublic _parseDeclaration(resyncStopTokens?:scanner.TokenType[]): nodes.Declaration {\n\t\tvar node = <nodes.Declaration> this.create(nodes.Declaration);\n\t\tif (!node.setProperty(this._parseProperty())) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.accept(scanner.TokenType.Colon)) {\n\t\t\treturn <nodes.Declaration> this.finish(node, errors.ParseError.ColonExpected, [ scanner.TokenType.Colon ], resyncStopTokens);\n\t\t}\n\t\tnode.colonPosition = this.prevToken.offset;\n\n\t\tif (!node.setValue(this._parseExpr())) {\n\t\t\treturn this.finish(node, errors.ParseError.PropertyValueExpected);\n\t\t}\n\t\tnode.addChild(this._parsePrio());\n\n\t\tif (this.peek(scanner.TokenType.SemiColon)) {\n\t\t\tnode.semicolonPosition = this.token.offset; // not part of the declaration, but useful information for code assist\n\t\t}\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _tryToParseDeclaration(): nodes.Declaration {\n\t\tvar mark= this.mark();\n\t\tif (this._parseProperty() && this.accept(scanner.TokenType.Colon)) {\n\t\t\t// looks like a declaration, go ahead\n\t\t\tthis.restoreAtMark(mark);\n\t\t\treturn this._parseDeclaration();\n\t\t}\n\n\t\tthis.restoreAtMark(mark);\n\t\treturn null;\n\t}\n\n\tpublic _parseProperty(): nodes.Property {\n\t\tvar node = <nodes.Property> this.create(nodes.Property);\n\n\t\tvar mark= this.mark();\n\t\tif (this.accept(scanner.TokenType.Delim, '*') || this.accept(scanner.TokenType.Delim, '_')) {\n\t\t\t// support for  IE 5.x, 6 and 7 star hack: see http://en.wikipedia.org/wiki/CSS_filter#Star_hack\n\t\t\tif (this.hasWhitespace()) {\n\t\t\t\tthis.restoreAtMark(mark);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tif (node.setIdentifier(this._parseIdent())) {\n\t\t\treturn <nodes.Property> this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseCharset():nodes.Node {\n\t\tvar node = this.create(nodes.Node);\n\t\tif(!this.accept(scanner.TokenType.Charset)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (!this.accept(scanner.TokenType.String)) {\n\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t}\n\t\tif(!this.accept(scanner.TokenType.SemiColon)) {\n\t\t\treturn this.finish(node, errors.ParseError.SemiColonExpected);\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\n\n\tpublic _parseImport():nodes.Node {\n\t\tvar node = <nodes.Import> this.create(nodes.Import);\n\t\tif(!this.accept(scanner.TokenType.AtKeyword, '@import')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif(!this.accept(scanner.TokenType.URI) && !this.accept(scanner.TokenType.String)) {\n\t\t\treturn this.finish(node, errors.ParseError.URIOrStringExpected);\n\t\t}\n\n\t\tnode.setMedialist(this._parseMediaList());\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseNamespace():nodes.Node {\n\t\t// http://www.w3.org/TR/css3-namespace/\n\t\t// namespace  : NAMESPACE_SYM S* [IDENT S*]? [STRING|URI] S* ';' S*\n\n\t\tvar node = <nodes.Namespace> this.create(nodes.Namespace);\n\t\tif(!this.accept(scanner.TokenType.AtKeyword, '@namespace')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tnode.addChild(this._parseIdent()); // optional prefix\n\n\t\tif( !this.accept(scanner.TokenType.URI) && !this.accept(scanner.TokenType.String)) {\n\t\t\treturn this.finish(node, errors.ParseError.URIExpected, [ scanner.TokenType.SemiColon ]);\n\t\t}\n\n\t\tif(!this.accept(scanner.TokenType.SemiColon)) {\n\t\t\treturn this.finish(node, errors.ParseError.SemiColonExpected);\n\t\t}\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseFontFace():nodes.Node {\n\t\tif(!this.peek(scanner.TokenType.AtKeyword, '@font-face')) {\n\t\t\treturn null;\n\t\t}\n\t\tvar node = <nodes.FontFace> this.create(nodes.FontFace);\n\t\tthis.consumeToken(); // @font-face\n\n\t\treturn this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\n\t}\n\n\tpublic _parseViewPort():nodes.Node {\n\t\tif(!this.peek(scanner.TokenType.AtKeyword, '@-ms-viewport') &&\n\t\t\t!this.peek(scanner.TokenType.AtKeyword, '@-o-viewport') &&\n\t\t\t!this.peek(scanner.TokenType.AtKeyword, '@viewport')\n\t\t) {\n\t\t\treturn null;\n\t\t}\n\t\tvar node = <nodes.ViewPort> this.create(nodes.ViewPort);\n\t\tthis.consumeToken(); // @-ms-viewport\n\n\t\treturn this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\n\t}\n\n\tpublic _parseKeyframe():nodes.Node {\n\t\tvar node = <nodes.Keyframe> this.create(nodes.Keyframe);\n\n\t\tvar atNode = this.create(nodes.Node);\n\n\t\tif(!this.accept(scanner.TokenType.AtKeyword, '@keyframes') &&\n\t\t\t!this.accept(scanner.TokenType.AtKeyword, '@-webkit-keyframes') &&\n\t\t\t!this.accept(scanner.TokenType.AtKeyword, '@-ms-keyframes') &&\n\t\t\t!this.accept(scanner.TokenType.AtKeyword, '@-moz-keyframes') &&\n\t\t\t!this.accept(scanner.TokenType.AtKeyword, '@-o-keyframes')) {\n\n\t\t\treturn null;\n\t\t}\n\t\tnode.setKeyword(this.finish(atNode));\n\t\tif (atNode.getText() === '@-ms-keyframes') { // -ms-keyframes never existed\n\t\t\tthis.markError(atNode, errors.ParseError.UnknownKeyword);\n\t\t}\n\n\t\tif (!node.setIdentifier(this._parseIdent([ nodes.ReferenceType.Keyframe ]))) {\n\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected, [ scanner.TokenType.CurlyR ]);\n\t\t}\n\n\t\treturn this._parseBody(node, this._parseKeyframeSelector.bind(this));\n\t}\n\n\tpublic _parseKeyframeSelector():nodes.Node {\n\t\tvar node = <nodes.KeyframeSelector> this.create(nodes.KeyframeSelector);\n\n\t\tif (!node.addChild(this._parseIdent()) && !this.accept(scanner.TokenType.Percentage)) {\n\t\t\treturn null;\n\t\t}\n\n\t\twhile (this.accept(scanner.TokenType.Comma)) {\n\t\t\tif (!node.addChild(this._parseIdent()) && !this.accept(scanner.TokenType.Percentage)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.PercentageExpected);\n\t\t\t}\n\t\t}\n\n\t\treturn this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\n\t}\n\n\tpublic _parseMediaDeclaration(): nodes.Node {\n\t\treturn this._tryParseRuleset(false) || this._tryToParseDeclaration() || this._parseStylesheetStatement();\n\t}\n\n\tpublic _parseMedia(): nodes.Node {\n\t\t// MEDIA_SYM S* media_query_list '{' S* ruleset* '}' S*\n\t\t// media_query_list : S* [media_query [ ',' S* media_query ]* ]?\n\t\tvar node = <nodes.Media> this.create(nodes.Media);\n\t\tif (!this.accept(scanner.TokenType.AtKeyword, '@media')) {\n\t\t\treturn null;\n\t\t}\n\t\tif (!node.addChild(this._parseMediaQuery([scanner.TokenType.CurlyL]))) {\n\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t}\n\t\twhile (this.accept(scanner.TokenType.Comma)) {\n\t\t\tif (!node.addChild(this._parseMediaQuery([scanner.TokenType.CurlyL]))) {\n\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t\t}\n\t\t}\n\n\t\treturn this._parseBody(node, this._parseMediaDeclaration.bind(this));\n\t}\n\n\tpublic _parseMediaQuery(resyncStopToken: scanner.TokenType[]): nodes.Node {\n\t\t// http://www.w3.org/TR/css3-mediaqueries/\n\t\t// media_query : [ONLY | NOT]? S* IDENT S* [ AND S* expression ]* | expression [ AND S* expression ]*\n\t\t// expression : '(' S* IDENT S* [ ':' S* expr ]? ')' S*\n\n\t\tvar node = <nodes.MediaQuery> this.create(nodes.MediaQuery);\n\n\t\tvar parseExpression= true;\n\t\tvar hasContent = false;\n\t\tif (!this.peek(scanner.TokenType.ParenthesisL)) {\n\t\t\tif (this.accept(scanner.TokenType.Ident, 'only', true) || this.accept(scanner.TokenType.Ident, 'not', true)) {\n\t\t\t\t// optional\n\t\t\t}\n\t\t\tif (!node.addChild(this._parseIdent())) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\thasContent= true;\n\t\t\tparseExpression= this.accept(scanner.TokenType.Ident, 'and', true);\n\t\t}\n\t\twhile (parseExpression) {\n\t\t\tif (!this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\t\tif (hasContent) {\n\t\t\t\t\treturn this.finish(node, errors.ParseError.LeftParenthesisExpected, [], resyncStopToken);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (!node.addChild(this._parseMediaFeatureName())) {\n\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected, [], resyncStopToken);\n\t\t\t}\n\t\t\tif (this.accept(scanner.TokenType.Colon)) {\n\t\t\t\tif (!node.addChild(this._parseExpr())) {\n\t\t\t\t\treturn this.finish(node, errors.ParseError.TermExpected, [], resyncStopToken);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\t\treturn this.finish(node, errors.ParseError.RightParenthesisExpected, [], resyncStopToken);\n\t\t\t}\n\t\t\tparseExpression= this.accept(scanner.TokenType.Ident, 'and', true);\n\t\t}\n\t\treturn node;\n\t}\n\n\tpublic _parseMediaFeatureName() : nodes.Node {\n\t\treturn this._parseIdent();\n\t}\n\n\tpublic _parseMediaList(): nodes.Medialist {\n\t\tvar node = <nodes.Medialist> this.create(nodes.Medialist);\n\t\tif (node.getMediums().addChild(this._parseMedium())) {\n\t\t\twhile (this.accept(scanner.TokenType.Comma)) {\n\t\t\t\tif (!node.getMediums().addChild(this._parseMedium())) {\n\t\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn <nodes.Medialist> this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseMedium(): nodes.Node {\n\t\tvar node = this.create(nodes.Node);\n\t\tif (node.addChild(this._parseIdent())) {\n\t\t\treturn this.finish(node);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic _parsePageDeclaration(): nodes.Node {\n\t\treturn this._parsePageMarginBox() || this._parseRuleSetDeclaration();\n\t}\n\n\tpublic _parsePage(): nodes.Node {\n\t\t// http://www.w3.org/TR/css3-page/\n\t\t// page_rule : PAGE_SYM S* page_selector_list '{' S* page_body '}' S*\n\t\t// page_body :  /* Can be empty */ declaration? [ ';' S* page_body ]? | page_margin_box page_body\n\n\t\tvar node = <nodes.Page> this.create(nodes.Page);\n\t\tif (!this.accept(scanner.TokenType.AtKeyword, '@Page')) {\n\t\t\treturn null;\n\t\t}\n\t\tif (node.addChild(this._parsePageSelector())) {\n\t\t\twhile (this.accept(scanner.TokenType.Comma)) {\n\t\t\t\tif (!node.addChild(this._parsePageSelector())) {\n\t\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this._parseBody(node, this._parsePageDeclaration.bind(this));\n\t}\n\n\tpublic _parsePageMarginBox() : nodes.Node {\n\t\t// page_margin_box :  margin_sym S* '{' S* declaration? [ ';' S* declaration? ]* '}' S*\n\t\tvar node = <nodes.PageBoxMarginBox> this.create(nodes.PageBoxMarginBox);\n\t\tif (!this.peek(scanner.TokenType.AtKeyword)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.acceptOne(scanner.TokenType.AtKeyword, languageFacts.getPageBoxDirectives())) {\n\t\t\tthis.markError(node, errors.ParseError.UnknownAtRule, [], [scanner.TokenType.CurlyL] );\n\t\t}\n\n\t\treturn this._parseBody(node, this._parseRuleSetDeclaration.bind(this));\n\t}\n\n\n\tpublic _parsePageSelector(): nodes.Node {\n\t\t// page_selector : pseudo_page+ | IDENT pseudo_page*\n\t\t// pseudo_page :  ':' [ \"left\" | \"right\" | \"first\" | \"blank\" ];\n\n\t\tvar node = this.create(nodes.Node);\n\t\tif (!this.peek(scanner.TokenType.Ident) && !this.peek(scanner.TokenType.Colon)) {\n\t\t\treturn null;\n\t\t}\n\t\tnode.addChild(this._parseIdent()); // optional ident\n\n\t\tif (this.accept(scanner.TokenType.Colon)) {\n\t\t\tif (!node.addChild(this._parseIdent())) { // optional ident\n\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t\t}\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseDocument(): nodes.Node {\n\t\t// -moz-document is experimental but has been pushed to css4\n\n\t\tvar node = <nodes.Document> this.create(nodes.Document);\n\t\tif (!this.accept(scanner.TokenType.AtKeyword, '@-moz-document')) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.resync([], [ scanner.TokenType.CurlyL ]); // ignore all the rules\n\t\treturn this._parseBody(node, this._parseStylesheetStatement.bind(this));\n\t}\n\n\tpublic _parseOperator(): nodes.Node {\n\t\t// these are operators for binary expressions\n\t\tvar node = this.createNode(nodes.NodeType.Operator);\n\t\tif (this.accept(scanner.TokenType.Delim, '/') ||\n\t\t\tthis.accept(scanner.TokenType.Delim, '*') ||\n\t\t\tthis.accept(scanner.TokenType.Delim, '+') ||\n\t\t\tthis.accept(scanner.TokenType.Delim, '-') ||\n\t\t\tthis.accept(scanner.TokenType.Dashmatch) ||\n\t\t\tthis.accept(scanner.TokenType.Includes) ||\n\t\t\tthis.accept(scanner.TokenType.SubstringOperator) ||\n\t\t\tthis.accept(scanner.TokenType.PrefixOperator) ||\n\t\t\tthis.accept(scanner.TokenType.SuffixOperator) ||\n\t\t\tthis.accept(scanner.TokenType.Delim, '=')) { // doesn't stick to the standard here\n\n\t\t\treturn this.finish(node);\n\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic _parseUnaryOperator(): nodes.Node {\n\t\tvar node = this.create(nodes.Node);\n\t\tif (this.accept(scanner.TokenType.Delim, '+') || this.accept(scanner.TokenType.Delim, '-')) {\n\t\t\treturn this.finish(node);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic _parseCombinator(): nodes.Node {\n\t\tvar node = this.create(nodes.Node);\n\t\tif (this.accept(scanner.TokenType.Delim, '>')) {\n\t\t\tnode.type = nodes.NodeType.SelectorCombinatorParent;\n\t\t\treturn this.finish(node);\n\t\t} else if(this.accept(scanner.TokenType.Delim, '+')) {\n\t\t\tnode.type = nodes.NodeType.SelectorCombinatorSibling;\n\t\t\treturn this.finish(node);\n\t\t} else if(this.accept(scanner.TokenType.Delim, '~')) {\n\t\t\tnode.type = nodes.NodeType.SelectorCombinatorAllSiblings;\n\t\t\treturn this.finish(node);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic _parseSimpleSelector(): nodes.Node {\n\t\t// simple_selector\n\t\t//  : element_name [ HASH | class | attrib | pseudo ]* | [ HASH | class | attrib | pseudo ]+ ;\n\n\t\tvar node = <nodes.SimpleSelector> this.create(nodes.SimpleSelector);\n\t\tvar c = 0;\n\t\tif (node.addChild(this._parseElementName())) {\n\t\t\tc++;\n\t\t}\n\t\twhile ((c === 0 || !this.hasWhitespace()) && node.addChild(this._parseSimpleSelectorBody())) {\n\t\t\tc++;\n\t\t}\n\t\treturn c > 0 ? this.finish(node) : null;\n\t}\n\n\tpublic _parseSimpleSelectorBody():nodes.Node {\n\t\treturn this._parsePseudo() || this._parseHash() || this._parseClass() || this._parseAttrib();\n\t}\n\n\tpublic _parseSelectorIdent() : nodes.Node {\n\t\treturn this._parseIdent();\n\t}\n\n\tpublic _parseHash(): nodes.Node {\n\t\tif (!this.peek(scanner.TokenType.Hash) && !this.peek(scanner.TokenType.Delim, '#')) {\n\t\t\treturn null;\n\t\t}\n\t\tvar node = this.createNode(nodes.NodeType.IdentifierSelector);\n\t\tif (this.accept(scanner.TokenType.Delim, '#')) {\n\t\t\tif (this.hasWhitespace() || !node.addChild(this._parseSelectorIdent())) {\n\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.consumeToken(); // TokenType.Hash\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseClass(): nodes.Node {\n\t\t// class: '.' IDENT ;\n\t\tif (!this.peek(scanner.TokenType.Delim, '.')) {\n\t\t\treturn null;\n\t\t}\n\t\tvar node = this.createNode(nodes.NodeType.ClassSelector);\n\t\tthis.consumeToken(); // '.'\n\t\tif (this.hasWhitespace() || !node.addChild(this._parseSelectorIdent())) {\n\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseElementName(): nodes.Node {\n\t\t// element_name: IDENT | '*';\n\t\tvar node = this.createNode(nodes.NodeType.ElementNameSelector);\n\t\tif (node.addChild(this._parseSelectorIdent()) || this.accept(scanner.TokenType.Delim, '*')) {\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseAttrib(): nodes.Node {\n\t\t// attrib : '[' S* IDENT S* [ [ '=' | INCLUDES | DASHMATCH ] S*   [ IDENT | STRING ] S* ]? ']'\n\t\tif (!this.peek(scanner.TokenType.BracketL)) {\n\t\t\treturn null;\n\t\t}\n\t\tvar node = this.createNode(nodes.NodeType.AttributeSelector);\n\t\tthis.consumeToken(); // BracketL\n\t\tif(!node.addChild(this._parseBinaryExpr())) {\n\t\t\t// is this bad?\n\t\t}\n\t\tif (!this.accept(scanner.TokenType.BracketR)) {\n\t\t\treturn this.finish(node, errors.ParseError.RightSquareBracketExpected);\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parsePseudo(): nodes.Node {\n\t\t// pseudo: ':' [ IDENT | FUNCTION S* [IDENT S*]? ')' ]\n\t\tif (!this.peek(scanner.TokenType.Colon)) {\n\t\t\treturn null;\n\t\t}\n\t\tvar pos = this.mark();\n\t\tvar node = this.createNode(nodes.NodeType.PseudoSelector);\n\t\tthis.consumeToken(); // Colon\n\t\tif (!this.hasWhitespace() && this.accept(scanner.TokenType.Colon)) {\n\t\t\t// optional, support ::\n\t\t}\n\t\tif (!this.hasWhitespace()) {\n\t\t\tif (!node.addChild(this._parseIdent())) {\n\t\t\t\treturn this.finish(node, errors.ParseError.IdentifierExpected);\n\t\t\t}\n\t\t\tif (!this.hasWhitespace() && this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\t\tnode.addChild(this._parseBinaryExpr() || this._parseSimpleSelector());\n\t\t\t\tif (!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\t\t\treturn this.finish(node, errors.ParseError.RightParenthesisExpected);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.finish(node);\n\t\t}\n\t\tthis.restoreAtMark(pos);\n\t\treturn null;\n\t}\n\n\tpublic _parsePrio(): nodes.Node {\n\t\tif (!this.peek(scanner.TokenType.Exclamation)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar node = this.createNode(nodes.NodeType.Prio);\n\t\tif (this.accept(scanner.TokenType.Exclamation) && this.accept(scanner.TokenType.Ident, 'important', true)) {\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseExpr(stopOnComma:boolean = false): nodes.Expression {\n\t\tvar node = <nodes.Expression> this.create(nodes.Expression);\n\t\tif (!node.addChild(this._parseBinaryExpr())) {\n\t\t\treturn null;\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (this.peek(scanner.TokenType.Comma)) { // optional\n\t\t\t\tif (stopOnComma) {\n\t\t\t\t\treturn this.finish(node);\n\t\t\t\t}\n\t\t\t\tthis.consumeToken();\n\t\t\t}\n\t\t\tif (!node.addChild(this._parseBinaryExpr())) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseBinaryExpr(preparsedLeft?:nodes.BinaryExpression, preparsedOper?:nodes.Node): nodes.Node {\n\t\tvar node = <nodes.BinaryExpression> this.create(nodes.BinaryExpression);\n\n\t\tif(!node.setLeft((<nodes.Node> preparsedLeft || this._parseTerm()))) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif(!node.setOperator(preparsedOper || this._parseOperator())) {\n\t\t\treturn this.finish(node);\n\t\t}\n\n\t\tif(!node.setRight(this._parseTerm())) {\n\t\t\treturn this.finish(node, errors.ParseError.TermExpected);\n\t\t}\n\n\t\t// things needed for multiple binary expressions\n\t\tnode = <nodes.BinaryExpression> this.finish(node);\n\t\tvar operator = this._parseOperator();\n\t\tif(operator) {\n\t\t\tnode = <nodes.BinaryExpression> this._parseBinaryExpr(node, operator);\n\t\t}\n\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseTerm(): nodes.Term {\n\n\t\tvar node = <nodes.Term> this.create(nodes.Term);\n\t\tnode.setOperator(this._parseUnaryOperator()); // optional\n\n\t\tif (node.setExpression(this._parseFunction()) || // first function then ident\n\t\t\tnode.setExpression(this._parseIdent()) ||\n\t\t\tnode.setExpression(this._parseURILiteral()) ||\n\t\t\tnode.setExpression(this._parseStringLiteral()) ||\n\t\t\tnode.setExpression(this._parseNumeric()) ||\n\t\t\tnode.setExpression(this._parseHexColor()) ||\n\t\t\tnode.setExpression(this._parseOperation())\n\t\t) {\n\t\t\treturn <nodes.Term> this.finish(node);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic _parseOperation():nodes.Node {\n\t\tvar node = this.create(nodes.Node);\n\t\tif (!this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\treturn null;\n\t\t}\n\t\tnode.addChild(this._parseExpr());\n\t\tif (!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\treturn this.finish(node, errors.ParseError.RightParenthesisExpected);\n\t\t}\n\t\treturn this.finish(node);\n\t}\n\n\tpublic _parseNumeric(): nodes.NumericValue {\n\t\tvar node = <nodes.NumericValue> this.create(nodes.NumericValue);\n\t\tif(this.accept(scanner.TokenType.Num) ||\n\t\t\tthis.accept(scanner.TokenType.Percentage) ||\n\t\t\tthis.accept(scanner.TokenType.Resolution) ||\n\t\t\tthis.accept(scanner.TokenType.Length) ||\n\t\t\tthis.accept(scanner.TokenType.EMS) ||\n\t\t\tthis.accept(scanner.TokenType.EXS) ||\n\t\t\tthis.accept(scanner.TokenType.Angle) ||\n\t\t\tthis.accept(scanner.TokenType.Time) ||\n\t\t\tthis.accept(scanner.TokenType.Dimension) ||\n\t\t\tthis.accept(scanner.TokenType.Freq)) {\n\n\t\t\treturn <nodes.NumericValue> this.finish(node);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic _parseStringLiteral(): nodes.Node {\n\t\tvar node = this.createNode(nodes.NodeType.StringLiteral);\n\t\tif (this.accept(scanner.TokenType.String) || this.accept(scanner.TokenType.BadString)) {\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseURILiteral(): nodes.Node {\n\t\tvar node = this.createNode(nodes.NodeType.URILiteral);\n\t\tif (this.accept(scanner.TokenType.URI) || this.accept(scanner.TokenType.BadUri)) {\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseIdent(referenceTypes?: nodes.ReferenceType[]): nodes.Identifier {\n\t\tvar node = <nodes.Identifier> this.create(nodes.Identifier);\n\t\tif (referenceTypes) {\n\t\t\tnode.referenceTypes = referenceTypes;\n\t\t}\n\t\tif (this.accept(scanner.TokenType.Ident)) {\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseFunction(): nodes.Function {\n\n\t\tvar pos = this.mark();\n\t\tvar node = <nodes.Function> this.create(nodes.Function);\n\n\t\tif (!node.setIdentifier(this._parseFunctionIdentifier())) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.hasWhitespace() || !this.accept(scanner.TokenType.ParenthesisL)) {\n\t\t\tthis.restoreAtMark(pos);\n\t\t\treturn null;\n\t\t}\n\n\t\tif (node.getArguments().addChild(this._parseFunctionArgument())) {\n\t\t\twhile (this.accept(scanner.TokenType.Comma)) {\n\t\t\t\tif (!node.getArguments().addChild(this._parseFunctionArgument())) {\n\t\t\t\t\tthis.markError(node, errors.ParseError.ExpressionExpected);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.accept(scanner.TokenType.ParenthesisR)) {\n\t\t\treturn <nodes.Function> this.finish(node, errors.ParseError.RightParenthesisExpected);\n\t\t}\n\t\treturn <nodes.Function> this.finish(node);\n\t}\n\n\tpublic _parseFunctionIdentifier(): nodes.Identifier {\n\t\tvar node = <nodes.Identifier> this.create(nodes.Identifier);\n\t\tnode.referenceTypes = [ nodes.ReferenceType.Function ];\n\n\t\tif (this.accept(scanner.TokenType.Ident, 'progid')) {\n\t\t\t// support for IE7 specific filters: 'progid:DXImageTransform.Microsoft.MotionBlur(strength=13, direction=310)'\n\t\t\tif (this.accept(scanner.TokenType.Colon)) {\n\t\t\t\twhile (this.accept(scanner.TokenType.Ident) && this.accept(scanner.TokenType.Delim, '.')) {\n\t\t\t\t\t// loop\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.finish(node);\n\t\t} else if (this.accept(scanner.TokenType.Ident)) {\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseFunctionArgument(): nodes.Node {\n\t\tvar node = <nodes.FunctionArgument> this.create(nodes.FunctionArgument);\n\t\tif (node.setValue(this._parseExpr(true))) {\n\t\t\treturn this.finish(node);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic _parseHexColor(): nodes.Node {\n\t\tif (this.peekRegExp(scanner.TokenType.Hash, /^#[0-9A-Fa-f]{3}([0-9A-Fa-f]{3})?$/g)) {\n\t\t\tvar node = this.create(nodes.HexColorValue);\n\t\t\tthis.consumeToken();\n\t\t\treturn this.finish(node);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport cssSymbols = require('vs/languages/css/common/parser/cssSymbols');\nimport languageFacts = require('vs/languages/css/common/services/languageFacts');\nimport service = require('vs/languages/css/common/services/cssLanguageService');\nimport URI from 'vs/base/common/uri';\nimport EditorCommon = require('vs/editor/common/editorCommon');\nimport Modes = require('vs/editor/common/modes');\nimport strings = require('vs/base/common/strings');\nimport nls = require('vs/nls');\n\nexport class CSSIntellisense {\n\n\tprivate static colorFunctions = [\n\t\t{ func: 'rgb($red, $green, $blue)', desc: nls.localize('css.builtin.rgb', 'Creates a Color from red, green, and blue values.') },\n\t\t{ func: 'rgba($red, $green, $blue, $alpha)', desc: nls.localize('css.builtin.rgba', 'Creates a Color from red, green, blue, and alpha values.') },\n\t\t{ func: 'hsl($hue, $saturation, $lightness)', desc: nls.localize('css.builtin.hsl', 'Creates a Color from hue, saturation, and lightness values.') },\n\t\t{ func: 'hsla($hue, $saturation, $lightness, $alpha)', desc: nls.localize('css.builtin.hsla', 'Creates a Color from hue, saturation, lightness, and alpha values.') }\n\t];\n\n\tvariablePrefix: string;\n\tposition: EditorCommon.IPosition;\n\toffset: number;\n\tcurrentWord: string;\n\tmodel: EditorCommon.IMirrorModel;\n\tstyleSheet: nodes.Stylesheet;\n\tsymbolContext: cssSymbols.Symbols;\n\tisIncomplete: boolean;\n\n\tconstructor(variablePrefix: string = null) {\n\t\tthis.variablePrefix = variablePrefix;\n\t}\n\n\n\tprivate getSymbolContext() : cssSymbols.Symbols {\n\t\tif (!this.symbolContext) {\n\t\t\tthis.symbolContext = new cssSymbols.Symbols(this.styleSheet);\n\t\t}\n\t\treturn this.symbolContext;\n\t}\n\n\n\tpublic getCompletionsAtPosition(languageService:service.ILanguageService, model: EditorCommon.IMirrorModel, resource:URI, position:EditorCommon.IPosition):Modes.ISuggestResult {\n\t\tthis.offset = model.getOffsetFromPosition(position);\n\t\tthis.position = position;\n\t\tthis.currentWord = model.getWordUntilPosition(position).word;\n\t\tthis.model = model;\n\t\tthis.styleSheet = languageService.getStylesheet(resource);\n\n\t\tvar result : Modes.ISuggestion[] = [];\n\t\tvar nodepath = nodes.getNodePath(this.styleSheet, this.offset);\n\n\t\tthis.isIncomplete = false;\n\t\tfor (var i = nodepath.length - 1; i >= 0; i--) {\n\t\t\tvar node = nodepath[i];\n\t\t\tif (node instanceof nodes.Property) {\n\t\t\t\tthis.getCompletionsForDeclarationProperty(result);\n\t\t\t} else if (node instanceof nodes.Expression) {\n\t\t\t\tthis.getCompletionsForExpression(<nodes.Expression> node, result);\n\t\t\t} else if (node instanceof nodes.SimpleSelector) {\n\t\t\t\tvar parentRuleSet = <nodes.RuleSet> node.findParent(nodes.NodeType.Ruleset);\n\t\t\t\tthis.getCompletionsForSelector(parentRuleSet, result);\n\t\t\t} else if (node instanceof nodes.Declarations) {\n\t\t\t\tthis.getCompletionsForDeclarations(<nodes.Declarations> node, result);\n\t\t\t} else if (node instanceof nodes.VariableDeclaration) {\n\t\t\t\tthis.getCompletionsForVariableDeclaration(<nodes.VariableDeclaration> node, result);\n\t\t\t} else if (node instanceof nodes.RuleSet) {\n\t\t\t\tthis.getCompletionsForRuleSet(<nodes.RuleSet> node, result);\n\t\t\t} else if (node instanceof nodes.Interpolation) {\n\t\t\t\tthis.getCompletionsForInterpolation(<nodes.Interpolation> node, result);\n\t\t\t} else if (node instanceof nodes.FunctionArgument) {\n\t\t\t\tthis.getCompletionsForFunctionArgument(<nodes.FunctionArgument> node, <nodes.Function>node.getParent(), result);\n\t\t\t} else if (node instanceof nodes.FunctionDeclaration) {\n\t\t\t\tthis.getCompletionsForFunctionDeclaration(<nodes.FunctionDeclaration> node, result);\n\t\t\t} else if (node instanceof nodes.Function) {\n\t\t\t\tthis.getCompletionsForFunctionArgument(null, <nodes.Function>node, result);\n\t\t\t}\n\t\t\tif (result.length > 0) {\n\t\t\t\treturn { currentWord: this.currentWord, suggestions: result, incomplete: this.isIncomplete };\n\t\t\t}\n\t\t}\n\t\tthis.getCompletionsForStylesheet(result);\n\t\tif (result.length > 0) {\n\t\t\treturn { currentWord: this.currentWord, suggestions: result };\n\t\t}\n\n\t\tif (this.variablePrefix && this.currentWord.indexOf(this.variablePrefix) === 0) {\n\t\t\tthis.getVariableProposals(result);\n\t\t\tif (result.length > 0) {\n\t\t\t\treturn { currentWord: this.currentWord, suggestions: result };\n\t\t\t}\n\t\t\tmodel.getAllUniqueWords(this.currentWord).forEach((word) => {\n\t\t\t\tresult.push({ type: 'text', label: word, codeSnippet: word });\n\t\t\t});\n\t\t}\n\n\t\t// no match, don't show text matches\n\t\treturn {\n\t\t\tcurrentWord: this.currentWord,\n\t\t\tsuggestions: result\n\t\t};\n\t}\n\n\tpublic getCompletionsForDeclarationProperty(result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\treturn this.getPropertyProposals(result);\n\t}\n\n\tprivate getPropertyProposals(result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tvar properties = languageFacts.getProperties();\n\n\t\tfor (var key in properties) {\n\t\t\tif (properties.hasOwnProperty(key)) {\n\t\t\t\tvar entry = properties[key];\n\t\t\t\tif (entry.browsers.onCodeComplete) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tlabel: entry.name,\n\t\t\t\t\t\tdocumentationLabel: languageFacts.getEntryDescription(entry),\n\t\t\t\t\t\tcodeSnippet: entry.name + ': ',\n\t\t\t\t\t\ttype: 'property'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForDeclarationValue(node: nodes.Declaration, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tvar propertyName = node.getFullPropertyName();\n\t\tvar entry = languageFacts.getProperties()[propertyName];\n\n\t\tif (entry) {\n\t\t\tthis.getColorProposals(entry, result);\n\t\t\tthis.getPositionProposals(entry, result);\n\t\t\tthis.getRepeatStyleProposals(entry, result);\n\t\t\tthis.getLineProposals(entry, result);\n\t\t\tthis.getBoxProposals(entry, result);\n\t\t\tthis.getImageProposals(entry, result);\n\t\t\tthis.getTimingFunctionProposals(entry, result);\n\t\t\tthis.getBasicShapeProposals(entry, result);\n\t\t\tthis.getValueEnumProposals(entry, result);\n\t\t\tthis.getCSSWideKeywordProposals(entry, result);\n\t\t\tthis.getUnitProposals(entry, result);\n\t\t} else {\n\t\t\tvar existingValues = new Set();\n\t\t\tthis.styleSheet.accept(new ValuesCollector(propertyName, existingValues));\n\t\t\texistingValues.getEntries().forEach((existingValue) => {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: existingValue,\n\t\t\t\t\tcodeSnippet: existingValue,\n\t\t\t\t\ttype: 'value'\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tthis.getVariableProposals(result);\n\t\tthis.getTermProposals(result);\n\t\treturn result;\n\t}\n\n\tpublic getValueEnumProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[]{\n\t\tif (entry.values) {\n\t\t\tentry.values.forEach((value) => {\n\t\t\t\tif (languageFacts.isCommonValue(value)) { // only show if supported by more than one browser\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tlabel: value.name,\n\t\t\t\t\t\tdocumentationLabel: languageFacts.getEntryDescription(value),\n\t\t\t\t\t\tcodeSnippet: value.name,\n\t\t\t\t\t\ttype: 'value'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCSSWideKeywordProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tfor (var keywords in languageFacts.cssWideKeywords) {\n\t\t\tresult.push({\n\t\t\t\tlabel: keywords,\n\t\t\t\tdocumentationLabel: languageFacts.cssWideKeywords[keywords],\n\t\t\t\tcodeSnippet: keywords,\n\t\t\t\ttype: 'value'\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForInterpolation(node: nodes.Interpolation, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (this.offset >= node.offset + 2) {\n\t\t\tthis.getVariableProposals(result);\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getVariableProposals(result:Modes.ISuggestion[]):Modes.ISuggestion[]{\n\t\tvar symbols = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Variable);\n\t\tsymbols.forEach((symbol) => {\n\t\t\tresult.push({\n\t\t\t\tlabel: symbol.name,\n\t\t\t\tcodeSnippet: strings.startsWith(symbol.name, '--') ? `var(${symbol.name})` : symbol.name,\n\t\t\t\ttype: 'variable'\n\t\t\t});\n\t\t});\n\t\treturn result;\n\t}\n\n\tpublic getVariableProposalsForCSSVarFunction(result:Modes.ISuggestion[]):Modes.ISuggestion[]{\n\t\tvar symbols = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Variable);\n\t\tsymbols= symbols.filter((symbol):boolean => {\n\t\t\treturn strings.startsWith(symbol.name, '--');\n\t\t});\n\t\tsymbols.forEach((symbol) => {\n\t\t\tresult.push({\n\t\t\t\tlabel: symbol.name,\n\t\t\t\tcodeSnippet: symbol.name,\n\t\t\t\ttype: 'variable'\n\t\t\t});\n\t\t});\n\t\treturn result;\n\t}\n\n\tpublic getUnitProposals(entry: languageFacts.IEntry, result: Modes.ISuggestion[]): Modes.ISuggestion[]{\n\t\tvar currentWord = '0';\n\t\tif (this.currentWord.length > 0) {\n\t\t\tvar numMatch = this.currentWord.match(/-?\\d[\\.\\d+]*/);\n\t\t\tif (numMatch) {\n\t\t\t\tcurrentWord = numMatch[0];\n\t\t\t}\n\t\t}\n\t\tentry.restrictions.forEach((restriction) => {\n\t\t\tvar units= languageFacts.units[restriction];\n\t\t\tif (units) {\n\t\t\t\tunits.forEach(function(unit:string) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tlabel: currentWord + unit,\n\t\t\t\t\t\tcodeSnippet: currentWord + unit,\n\t\t\t\t\t\ttype: 'unit'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tthis.isIncomplete = true;\n\t\treturn result;\n\t}\n\n\tprotected getColorProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (entry.restrictions.indexOf('color') !== -1) {\n\t\t\tfor (var color in languageFacts.colors) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: color,\n\t\t\t\t\tdocumentationLabel: languageFacts.colors[color],\n\t\t\t\t\tcodeSnippet: color,\n\t\t\t\t\ttype: 'customcolor'\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (var color in languageFacts.colorKeywords) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: color,\n\t\t\t\t\tdocumentationLabel: languageFacts.colorKeywords[color],\n\t\t\t\t\tcodeSnippet: color,\n\t\t\t\t\ttype: 'value'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar colorValues = new Set();\n\t\t\tthis.styleSheet.accept(new ColorValueCollector(colorValues));\n\t\t\tcolorValues.getEntries().forEach((color) => {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: color,\n\t\t\t\t\tcodeSnippet: color,\n\t\t\t\t\ttype: 'customcolor'\n\t\t\t\t});\n\t\t\t});\n\t\t\tCSSIntellisense.colorFunctions.forEach((p) => {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: p.func.substr(0, p.func.indexOf('(')),\n\t\t\t\t\ttypeLabel: p.func,\n\t\t\t\t\tdocumentationLabel: p.desc,\n\t\t\t\t\tcodeSnippet: p.func.replace(/\\[?\\$(\\w+)\\]?/g, '{{$1}}'),\n\t\t\t\t\ttype: 'function'\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getPositionProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (entry.restrictions.indexOf('position') !== -1) {\n\t\t\tfor (var position in languageFacts.positionKeywords) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: position,\n\t\t\t\t\tdocumentationLabel: languageFacts.positionKeywords[position],\n\t\t\t\t\tcodeSnippet: position,\n\t\t\t\t\ttype: 'value'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getRepeatStyleProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (entry.restrictions.indexOf('repeat') !== -1) {\n\t\t\tfor (var repeat in languageFacts.repeatStyleKeywords) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: repeat,\n\t\t\t\t\tdocumentationLabel: languageFacts.repeatStyleKeywords[repeat],\n\t\t\t\t\tcodeSnippet: repeat,\n\t\t\t\t\ttype: 'value'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getLineProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (entry.restrictions.indexOf('line-style') !== -1) {\n\t\t\tfor (var lineStyle in languageFacts.lineStyleKeywords) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: lineStyle,\n\t\t\t\t\tdocumentationLabel: languageFacts.lineStyleKeywords[lineStyle],\n\t\t\t\t\tcodeSnippet: lineStyle,\n\t\t\t\t\ttype: 'value'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (entry.restrictions.indexOf('line-width') !== -1) {\n\t\t\tlanguageFacts.lineWidthKeywords.forEach((lineWidth) => {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: lineWidth,\n\t\t\t\t\tcodeSnippet: lineWidth,\n\t\t\t\t\ttype: 'value'\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getBoxProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tvar geometryBox = entry.restrictions.indexOf('geometry-box');\n\t\tif (geometryBox !== -1) {\n\t\t\tfor (var box in languageFacts.geometryBoxKeywords) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: box,\n\t\t\t\t\tdocumentationLabel: languageFacts.geometryBoxKeywords[box],\n\t\t\t\t\tcodeSnippet: box,\n\t\t\t\t\ttype: 'value'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (entry.restrictions.indexOf('box') !== -1 || geometryBox !== -1) {\n\t\t\tfor (var box in languageFacts.boxKeywords) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: box,\n\t\t\t\t\tdocumentationLabel: languageFacts.boxKeywords[box],\n\t\t\t\t\tcodeSnippet: box,\n\t\t\t\t\ttype: 'value'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getImageProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (entry.restrictions.indexOf('image') !== -1) {\n\t\t\tfor (var image in languageFacts.imageFunctions) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: image,\n\t\t\t\t\tdocumentationLabel: languageFacts.imageFunctions[image],\n\t\t\t\t\tcodeSnippet: image,\n\t\t\t\t\ttype: 'function'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getTimingFunctionProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (entry.restrictions.indexOf('timing-function') !== -1) {\n\t\t\tfor (var timing in languageFacts.transitionTimingFunctions) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: timing,\n\t\t\t\t\tdocumentationLabel: languageFacts.transitionTimingFunctions[timing],\n\t\t\t\t\tcodeSnippet: timing,\n\t\t\t\t\ttype: 'function'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected getBasicShapeProposals(entry:languageFacts.IEntry, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (entry.restrictions.indexOf('shape') !== -1) {\n\t\t\tfor (var shape in languageFacts.basicShapeFunctions) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: shape,\n\t\t\t\t\tdocumentationLabel: languageFacts.basicShapeFunctions[shape],\n\t\t\t\t\tcodeSnippet: shape,\n\t\t\t\t\ttype: 'function'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForStylesheet(result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tvar node = this.styleSheet.findFirstChildBeforeOffset(this.offset);\n\t\tif (!node) {\n\t\t\treturn this.getCompletionForTopLevel(result);\n\t\t}\n\t\tif (node instanceof nodes.RuleSet) {\n\t\t\treturn this.getCompletionsForRuleSet(<nodes.RuleSet> node, result);\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionForTopLevel(result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tlanguageFacts.getAtDirectives().forEach(function(entry) {\n\t\t\tif (entry.browsers.count > 0) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: entry.name,\n\t\t\t\t\tcodeSnippet: entry.name,\n\t\t\t\t\tdocumentationLabel: languageFacts.getEntryDescription(entry),\n\t\t\t\t\ttype: 'keyword'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tthis.getCompletionsForSelector(null, result);\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForRuleSet(ruleSet: nodes.RuleSet, result: Modes.ISuggestion[]): Modes.ISuggestion[]{\n\t\tvar declarations = ruleSet.getDeclarations();\n\n\t\tvar isAfter = declarations && declarations.endsWith('}') && this.offset >= declarations.offset + declarations.length;\n\t\tif (isAfter) {\n\t\t\treturn this.getCompletionForTopLevel(result);\n\t\t}\n\t\tvar isInSelectors = !declarations || this.offset <= declarations.offset;\n\t\tif (isInSelectors) {\n\t\t\treturn this.getCompletionsForSelector(ruleSet, result);\n\t\t}\n\t\truleSet.findParent(nodes.NodeType.Ruleset);\n\n\t\treturn this.getCompletionsForDeclarations(ruleSet.getDeclarations(), result);\n\t}\n\n\tpublic getCompletionsForSelector(ruleSet: nodes.RuleSet, result:Modes.ISuggestion[]): Modes.ISuggestion[] {\n\t\tlanguageFacts.getPseudoClasses().forEach((entry) => {\n\t\t\tif (entry.browsers.onCodeComplete) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: entry.name,\n\t\t\t\t\tcodeSnippet: entry.name,\n\t\t\t\t\tdocumentationLabel: languageFacts.getEntryDescription(entry),\n\t\t\t\t\ttype: 'function'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tlanguageFacts.getPseudoElements().forEach((entry) => {\n\t\t\tif (entry.browsers.onCodeComplete) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: entry.name,\n\t\t\t\t\tcodeSnippet: entry.name,\n\t\t\t\t\tdocumentationLabel: languageFacts.getEntryDescription(entry),\n\t\t\t\t\ttype: 'function'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tlanguageFacts.html5Tags.forEach((entry) => {\n\t\t\tresult.push({\n\t\t\t\tlabel: entry,\n\t\t\t\tcodeSnippet: entry,\n\t\t\t\ttype: 'keyword'\n\t\t\t});\n\t\t});\n\t\tlanguageFacts.svgElements.forEach((entry) => {\n\t\t\tresult.push({\n\t\t\t\tlabel: entry,\n\t\t\t\tcodeSnippet: entry,\n\t\t\t\ttype: 'keyword'\n\t\t\t});\n\t\t});\n\n\t\tvar visited: { [name: string]: boolean } = {};\n\t\tvisited[this.currentWord] = true;\n\t\tvar textProvider = this.styleSheet.getTextProvider();\n\t\tthis.styleSheet.accept(n => {\n\t\t\tif (n.type === nodes.NodeType.SimpleSelector && n.length > 0) {\n\t\t\t\tvar selector = textProvider(n.offset, n.length);\n\t\t\t\tif (selector.charAt(0) === '.' && !visited[selector]) {\n\t\t\t\t\tvisited[selector] = true;\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tlabel: selector,\n\t\t\t\t\t\tcodeSnippet: selector,\n\t\t\t\t\t\ttype: 'keyword'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\tif (ruleSet && ruleSet.isNested()) {\n\t\t\tvar selector = ruleSet.getSelectors().findFirstChildBeforeOffset(this.offset);\n\t\t\tif (selector && ruleSet.getSelectors().getChildren().indexOf(selector) === 0) {\n\t\t\t\tthis.getPropertyProposals(result);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForDeclarations(declarations: nodes.Declarations, result: Modes.ISuggestion[]): Modes.ISuggestion[]{\n\t\tif (!declarations) { // incomplete nodes\n\t\t\treturn result;\n\t\t}\n\n\t\tvar node = declarations.findFirstChildBeforeOffset(this.offset);\n\t\tif (!node) {\n\t\t\treturn this.getCompletionsForDeclarationProperty(result);\n\t\t}\n\n\t\tif (node instanceof nodes.AbstractDeclaration) {\n\t\t\tvar declaration = <nodes.AbstractDeclaration> node;\n\t\t\tif ((!isDefined(declaration.colonPosition) || this.offset <= declaration.colonPosition) || (isDefined(declaration.semicolonPosition) && declaration.semicolonPosition < this.offset)) {\n\t\t\t\tif (this.offset === declaration.semicolonPosition + 1) {\n\t\t\t\t\treturn result; // don't show new properties right after semicolon (see Bug 15421:[intellisense] [css] Be less aggressive when manually typing CSS)\n\t\t\t\t}\n\n\t\t\t\t// complete property\n\t\t\t\treturn this.getCompletionsForDeclarationProperty(result);\n\t\t\t}\n\n\t\t\tif (declaration instanceof nodes.Declaration) {\n\t\t\t\t// complete value\n\t\t\t\treturn this.getCompletionsForDeclarationValue(declaration, result);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForVariableDeclaration(declaration: nodes.VariableDeclaration, result:Modes.ISuggestion[]):Modes.ISuggestion[] {\n\t\tif (this.offset > declaration.colonPosition) {\n\t\t\tthis.getVariableProposals(result);\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForExpression(expression: nodes.Expression, result:Modes.ISuggestion[]):Modes.ISuggestion[]{\n\t\tif (expression.getParent() instanceof nodes.FunctionArgument) {\n\t\t\tthis.getCompletionsForFunctionArgument(<nodes.FunctionArgument>expression.getParent(), <nodes.Function>expression.getParent().getParent(), result);\n\t\t\treturn result;\n\t\t}\n\n\t\tvar declaration = <nodes.Declaration> expression.findParent(nodes.NodeType.Declaration);\n\t\tif (!declaration) {\n\t\t\tthis.getTermProposals(result);\n\t\t\treturn result;\n\t\t}\n\n\t\tvar node = expression.findChildAtOffset(this.offset, true);\n\t\tif (!node) {\n\t\t\treturn this.getCompletionsForDeclarationValue(declaration, result);\n\t\t}\n\t\tif (node instanceof nodes.NumericValue || node instanceof nodes.Identifier) {\n\t\t\treturn this.getCompletionsForDeclarationValue(declaration, result);\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForFunctionArgument(arg: nodes.FunctionArgument, func: nodes.Function, result: Modes.ISuggestion[]): Modes.ISuggestion[] {\n\t\tif (func.getIdentifier().getText() === 'var') {\n\t\t\tif (!func.getArguments().hasChildren() || func.getArguments().getChild(0) === arg) {\n\t\t\t\tthis.getVariableProposalsForCSSVarFunction(result);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getCompletionsForFunctionDeclaration(decl: nodes.FunctionDeclaration, result: Modes.ISuggestion[]): Modes.ISuggestion[]{\n\t\tvar declarations = decl.getDeclarations();\n\t\tif (declarations && this.offset > declarations.offset && this.offset < declarations.offset + declarations.length) {\n\t\t\tthis.getTermProposals(result);\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic getTermProposals(result: Modes.ISuggestion[]): Modes.ISuggestion[]{\n\t\tvar allFunctions = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Function);\n\t\tallFunctions.forEach((functionSymbol) => {\n\t\t\tif (functionSymbol.node instanceof nodes.FunctionDeclaration) {\n\t\t\t\tvar functionDecl = <nodes.FunctionDeclaration> functionSymbol.node;\n\t\t\t\tvar params = functionDecl.getParameters().getChildren().map((c) => {\n\t\t\t\t\treturn (c instanceof nodes.FunctionParameter) ? (<nodes.FunctionParameter> c).getName() : c.getText();\n\t\t\t\t});\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: functionSymbol.name,\n\t\t\t\t\ttypeLabel: functionSymbol.name + '(' + params.join(', ') + ')',\n\t\t\t\t\tcodeSnippet: functionSymbol.name + '(' + params.map((p) => '{{' + p + '}}').join(', ') + ')',\n\t\t\t\t\ttype: 'function'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n}\n\nclass Set {\n\tprivate entries: { [key:string]: boolean } = {};\n\tpublic add(entry: string) : void {\n\t\tthis.entries[entry] = true;\n\t}\n\tpublic getEntries() : string[] {\n\t\treturn Object.keys(this.entries);\n\t}\n}\n\n\nclass InternalValueCollector implements nodes.IVisitor {\n\n\tconstructor(public entries:Set) {\n\t\t// nothing to do\n\t}\n\n\tpublic visitNode(node:nodes.Node):boolean {\n\t\tif (node instanceof nodes.Identifier || node instanceof nodes.NumericValue || node instanceof nodes.HexColorValue) {\n\t\t\tthis.entries.add(node.getText());\n\t\t}\n\t\treturn true;\n\t}\n}\n\nclass ValuesCollector implements nodes.IVisitor {\n\n\n\tconstructor(public propertyName: string, public entries:Set) {\n\t\t// nothing to do\n\t}\n\n\tprivate matchesProperty(decl : nodes.Declaration) : boolean {\n\t\tvar propertyName = decl.getFullPropertyName();\n\t\treturn this.propertyName === propertyName;\n\t}\n\n\tpublic visitNode(node:nodes.Node):boolean {\n\t\tif (node instanceof nodes.Declaration) {\n\t\t\tif (this.matchesProperty(<nodes.Declaration> node)) {\n\t\t\t\tvar value = (<nodes.Declaration> node).getValue();\n\t\t\t\tif (value) {\n\t\t\t\t\tvalue.accept(new InternalValueCollector(this.entries));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n}\n\nclass ColorValueCollector implements nodes.IVisitor {\n\n\tconstructor(public entries:Set) {\n\t\t// nothing to do\n\t}\n\n\tpublic visitNode(node:nodes.Node): boolean {\n\t\tif (node instanceof nodes.HexColorValue || (node instanceof nodes.Function && languageFacts.isColorConstructor(<nodes.Function> node))) {\n\t\t\tthis.entries.add(node.getText());\n\t\t}\n\t\treturn true;\n\t}\n}\n\nfunction isDefined(obj: any) : boolean {\n\treturn typeof obj !== 'undefined';\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { IJSONSchema } from 'vs/base/common/jsonSchema';\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport nls = require('vs/nls');\nimport configurationRegistry = require('vs/platform/configuration/common/configurationRegistry');\nimport _level = require('vs/languages/css/common/level');\n\nvar Warning = 'warning';\nvar Error = 'error';\nvar Ignore = 'ignore';\n\nexport class Rule implements nodes.IRule {\n\n\tpublic constructor(public id: string, public message: string, public defaultValue: string) {\n\t\t// nothing to do\n\t}\n\n\tpublic getConfiguration(): IJSONSchema {\n\t\treturn {\n\t\t\ttype: 'string',\n\t\t\tenum: [Ignore, Warning, Error],\n\t\t\tdefault: this.defaultValue,\n\t\t\tdescription: this.message\n\t\t};\n\t}\n\n}\nexport var Rules = {\n\tAllVendorPrefixes: new Rule('compatibleVendorPrefixes', nls.localize('rule.vendorprefixes.all', \"When using a vendor-specific prefix make sure to also include all other vendor-specific properties\"), Ignore),\n\tIncludeStandardPropertyWhenUsingVendorPrefix: new Rule('vendorPrefix', nls.localize('rule.standardvendorprefix.all', \"When using a vendor-specific prefix also include the standard property\"), Warning),\n\tDuplicateDeclarations: new Rule('duplicateProperties', nls.localize('rule.duplicateDeclarations', \"Do not use duplicate style definitions\"), Ignore),\n\tEmptyRuleSet: new Rule('emptyRules', nls.localize('rule.emptyRuleSets', \"Do not use empty rulesets\"), Warning),\n\tImportStatemement: new Rule('importStatement', nls.localize('rule.importDirective', \"Import statements do not load in parallel\"), Ignore),\n\tNoWidthOrHeightWhenPaddingOrBorder: new Rule('boxModel', nls.localize('rule.withHeightAndBorderPadding', \"Do not use width or height when using padding or border\"), Ignore),\n\tUniversalSelector: new Rule('universalSelector', nls.localize('rule.universalSelector', \"The universal selector (*) is known to be slow\"), Ignore),\n\tZeroWithUnit: new Rule('zeroUnits', nls.localize('rule.zeroWidthUnit', \"No unit for zero needed\"), Ignore),\n\tRequiredPropertiesForFontFace: new Rule('fontFaceProperties', nls.localize('rule.fontFaceProperties', \"@font-face rule must define 'src' and 'font-family' properties\"), Warning),\n\tHexColorLength: new Rule('hexColorLength', nls.localize('rule.hexColor', \"Hex colors must consist of three or six hex numbers\"), Error),\n\tArgsInColorFunction: new Rule('argumentsInColorFunction', nls.localize('rule.colorFunction', \"Invalid number of parameters\"), Error),\n\tUnknownProperty: new Rule('unknownProperties', nls.localize('rule.unknownProperty', \"Unknown property.\"), Warning),\n\tIEStarHack: new Rule('ieHack', nls.localize('rule.ieHack', \"IE hacks are only necessary when supporting IE7 and older\"), Ignore),\n\tUnknownVendorSpecificProperty: new Rule('unknownVendorSpecificProperties', nls.localize('rule.unknownVendorSpecificProperty', \"Unknown vendor specific property.\"), Ignore),\n\tPropertyIgnoredDueToDisplay: new Rule('propertyIgnoredDueToDisplay', nls.localize('rule.propertyIgnoredDueToDisplay', \"Property is ignored due to the display. E.g. with 'display: inline', the width, height, margin-top, margin-bottom, and float properties have no effect\"), Warning),\n\tAvoidImportant: new Rule('important', nls.localize('rule.avoidImportant', \"Avoid using !important. It is an indication that the specificity of the entire CSS has gotten out of control and needs to be refactored.\"), Ignore),\n\tAvoidFloat: new Rule('float', nls.localize('rule.avoidFloat', \"Avoid using 'float'. Floats lead to fragile CSS that is easy to break if one aspect of the layout changes.\"), Ignore),\n\tAvoidIdSelector: new Rule('idSelector', nls.localize('rule.avoidIdSelector', \"Selectors should not contain IDs because these rules are too tightly coupled with the HTML.\"), Ignore),\n};\n\nexport function getConfigurationProperties(keyPrefix: string): { [path:string]:configurationRegistry.IConfigurationNode } {\n\tvar properties: { [path:string]:configurationRegistry.IConfigurationNode; } = {};\n\n\tproperties[keyPrefix + '.validate'] = {\n\t\ttype: 'boolean',\n\t\tdefault: true,\n\t\tdescription: nls.localize('enableValidation', 'Enables or disables all validations')\n\t};\n\tfor (var ruleName in Rules) {\n\t\tvar rule = Rules[ruleName];\n\t\tproperties[keyPrefix + '.lint.' + rule.id] = rule.getConfiguration();\n\t}\n\treturn properties;\n}\n\nexport interface IConfigurationSettings {\n\t[ruleId:string] : _level.Level;\n}\n\nexport function sanitize(conf:any): IConfigurationSettings {\n\tvar settings: IConfigurationSettings = {};\n\tfor (var ruleName in Rules) {\n\t\tvar rule = Rules[ruleName];\n\t\tvar level = _level.toLevel(conf[rule.id]);\n\t\tif (level) {\n\t\t\tsettings[rule.id] = level;\n\t\t}\n\t}\n\treturn settings;\n}\n\n/* old rules\n\t\t'duplicate-background-images' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'ignore',\n\t\t\t'description': nls.localize('duplicateBackgroundImages', \"Every background-image should be unique. Use a common class for e.g. sprites.\")\n\t\t},\n\t\t'gradients' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'warning',\n\t\t\t'description': nls.localize('gradients', \"When using a vendor-prefixed gradient, make sure to use them all.\")\n\t\t},\n\t\t'outline-none' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'warning',\n\t\t\t'description': nls.localize('outlineNone', \"Use of outline: none or outline: 0 should be limited to :focus rules.\")\n\t\t},\n\t\t'overqualified-elements' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'ignore',\n\t\t\t'description': nls.localize('overqualifiedElements', \"Don't use classes or IDs with elements (a.foo or a#foo).\")\n\t\t},\n\t\t'qualified-headings' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'ignore',\n\t\t\t'description': nls.localize('qualifiedHeadings', \"Headings should not be qualified (namespaced).\")\n\t\t},\n\t\t'regex-selectors' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'ignore',\n\t\t\t'description': nls.localize('regexSelectors', \"Selectors that look like regular expressions are slow and should be avoided.\")\n\t\t},\n\t\t'shorthand' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'ignore',\n\t\t\t'description': nls.localize('shorthand', \"Use shorthand properties where possible.\")\n\t\t},\n\t\t'text-indent' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'ignore',\n\t\t\t'description': nls.localize('textIndent', \"Checks for text indent less than -99px.\")\n\t\t},\n\t\t'unique-headings' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'ignore',\n\t\t\t'description': nls.localize('uniqueHeadings', \"Headings should be defined only once.\")\n\t\t},\n\n\t\t'unqualified-attributes' : {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['ignore', 'warning', 'error'],\n\t\t\t'default': 'ignore',\n\t\t\t'description': nls.localize('unqualifiedAttributes', \"Unqualified attribute selectors are known to be slow.\")\n\t\t},\n\t\t*/\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport languageFacts = require('vs/languages/css/common/services/languageFacts');\nimport lintRules = require('vs/languages/css/common/services/lintRules');\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport nls = require('vs/nls');\nimport _level = require('vs/languages/css/common/level');\n\nclass Element {\n\n\tpublic name: string;\n\tpublic node: nodes.Declaration;\n\n\tconstructor(text:string, data:nodes.Declaration){\n\t\tthis.name = text;\n\t\tthis.node = data;\n\t}\n}\n\nclass NodesByRootMap {\n\t\tpublic data:{[name:string]:{nodes:nodes.Node[];names:string[]}} = {};\n\n\t\tpublic add(root:string, name:string, node:nodes.Node) : void {\n\t\t\tvar entry = this.data[root];\n\t\t\tif (!entry) {\n\t\t\t\tentry = { nodes: [], names: []};\n\t\t\t\tthis.data[root] = entry;\n\t\t\t}\n\t\t\tentry.names.push(name);\n\t\t\tif (node) {\n\t\t\t\tentry.nodes.push(node);\n\t\t\t}\n\t\t}\n\t}\n\nexport class LintVisitor implements nodes.IVisitor {\n\n\tstatic entries(node:nodes.Node, settings: lintRules.IConfigurationSettings):nodes.IMarker[] {\n\t\tvar visitor = new LintVisitor(settings);\n\t\tnode.accept(visitor);\n\t\treturn visitor.getEntries();\n\t}\n\n\tstatic prefixes = [\n\t\t'-ms-', '-moz-', '-o-', '-webkit-', // Quite common\n//\t\t'-xv-', '-atsc-', '-wap-', '-khtml-', 'mso-', 'prince-', '-ah-', '-hp-', '-ro-', '-rim-', '-tc-' // Quite un-common\n\t];\n\n\tprivate warnings:nodes.IMarker[] = [];\n\tprivate configuration:{ [id:string] : _level.Level };\n\n\tconstructor(settings: lintRules.IConfigurationSettings = {}) {\n\t\tthis.configuration = {};\n\t\tfor (var ruleKey in lintRules.Rules) {\n\t\t\tvar rule = lintRules.Rules[ruleKey];\n\t\t\tvar level = settings[rule.id] || _level.toLevel(rule.defaultValue);\n\t\t\tthis.configuration[rule.id] = level;\n\t\t}\n\t}\n\n\tprivate fetch(input: Element[], s:string): Element[] {\n\t\tvar elements: Element[] = [];\n\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tif (input[i].name.toLowerCase() === s) {\n\t\t\t\telements.push(input[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn elements;\n\t}\n\n\tprivate fetchWithValue(input: Element[], s:string, v:string): Element[] {\n\t\tvar elements: Element[] = [];\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tif (input[i].name.toLowerCase() === s) {\n\t\t\t\tvar expression = input[i].node.getValue();\n\t\t\t\tif (expression && this.findValueInExpression(expression, v)) {\n\t\t\t\t\telements.push(input[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn elements;\n\t}\n\n\tprivate findValueInExpression(expression: nodes.Expression, v:string):boolean {\n\t\tvar found= false;\n\t\texpression.accept(function(node) {\n\t\t\tif (node.type === nodes.NodeType.Identifier && node.getText() === v) {\n\t\t\t\tfound= true;\n\t\t\t}\n\t\t\treturn !found;\n\t\t});\n\t\treturn found;\n\t}\n\n\n\tprivate fetchWithin(input: Element[], s:string): Element[] {\n\t\tvar elements: Element[] = [];\n\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tif (input[i].name.toLowerCase().indexOf(s) >= 0) {\n\t\t\t\telements.push(input[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn elements;\n\t}\n\n\tpublic getEntries(filter:number=(_level.Level.Warning | _level.Level.Error)):nodes.IMarker[] {\n\t\treturn this.warnings.filter((entry) => {\n\t\t\treturn (entry.getLevel() & filter) !== 0;\n\t\t});\n\t}\n\n\tprivate addEntry(node:nodes.Node, rule:lintRules.Rule, details?:string):void {\n\t\tvar entry = new nodes.Marker(node, rule, this.configuration[rule.id], details);\n\t\tthis.warnings.push(entry);\n\t}\n\n\tprivate getMissingNames(expected:string[], actual: string[]) : string {\n\t\texpected = expected.slice(0); // clone\n\t\tfor (var i = 0; i < actual.length; i++) {\n\t\t\tvar k = expected.indexOf(actual[i]);\n\t\t\tif (k !== -1) {\n\t\t\t\texpected[k] = null;\n\t\t\t}\n\t\t}\n\t\tvar result: string = null;\n\t\tfor (var i = 0; i < expected.length; i++) {\n\t\t\tvar curr = expected[i];\n\t\t\tif (curr) {\n\t\t\t\tif (result === null) {\n\t\t\t\t\tresult = nls.localize('namelist.single', \"'{0}'\", curr);\n\t\t\t\t} else {\n\t\t\t\t\tresult = nls.localize('namelist.concatenated', \"{0}, '{1}'\", result, curr);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic visitNode(node:nodes.Node):boolean {\n\t\tswitch (node.type) {\n\t\t\tcase nodes.NodeType.Stylesheet:\n\t\t\t\treturn this.visitStylesheet(<nodes.Stylesheet> node);\n\t\t\tcase nodes.NodeType.FontFace:\n\t\t\t\treturn this.visitFontFace(<nodes.FontFace> node);\n\t\t\tcase nodes.NodeType.Ruleset:\n\t\t\t\treturn this.visitRuleSet(<nodes.RuleSet> node);\n\t\t\tcase nodes.NodeType.SimpleSelector:\n\t\t\t\treturn this.visitSimpleSelector(<nodes.SimpleSelector> node);\n\t\t\tcase nodes.NodeType.Function:\n\t\t\t\treturn this.visitFunction(<nodes.Function> node);\n\t\t\tcase nodes.NodeType.NumericValue:\n\t\t\t\treturn this.visitNumericValue(<nodes.NumericValue> node);\n\t\t\tcase nodes.NodeType.Import:\n\t\t\t\treturn this.visitImport(<nodes.Import> node);\n\t\t}\n\t\treturn this.visitUnknownNode(node);\n\t}\n\n\tprivate visitStylesheet(node: nodes.Stylesheet):boolean {\n\t\t// @keyframe and it's vendor specific alternatives\n\t\t// @keyframe should be included\n\n\t\tvar keyframes = new NodesByRootMap();\n\t\tnode.accept((node) => {\n\t\t\tif (node instanceof nodes.Keyframe) {\n\t\t\t\tvar keyword = (<nodes.Keyframe> node).getKeyword();\n\t\t\t\tvar text = keyword.getText();\n\t\t\t\tkeyframes.add((<nodes.Keyframe> node).getName(), text, (text !== '@keyframes') ? keyword : null);\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\tvar expected = ['@-webkit-keyframes', '@-moz-keyframes', '@-o-keyframes'];\n\n\n\t\tvar addVendorSpecificWarnings = (node: nodes.Node) => {\n\t\t\tif (needsStandard) {\n\t\t\t\tvar message = nls.localize('keyframes.standardrule.missing', \"Always define standard rule '@keyframes' when defining keyframes.\");\n\t\t\t\tthis.addEntry(node, lintRules.Rules.IncludeStandardPropertyWhenUsingVendorPrefix, message);\n\t\t\t}\n\t\t\tif (missingVendorSpecific) {\n\t\t\t\tvar message = nls.localize('keyframes.vendorspecific.missing', \"Always include all vendor specific rules: Missing: {0}\", missingVendorSpecific);\n\t\t\t\tthis.addEntry(node, lintRules.Rules.AllVendorPrefixes, message);\n\t\t\t}\n\t\t};\n\n\t\tfor (var name in keyframes.data) {\n\t\t\tvar actual = keyframes.data[name].names;\n\t\t\tvar needsStandard = (actual.indexOf('@keyframes') === -1);\n\t\t\tif (!needsStandard && actual.length === 1) {\n\t\t\t\tcontinue; // only the non-vendor specific keyword is used, that's fine, no warning\n\t\t\t}\n\n\t\t\tvar missingVendorSpecific = this.getMissingNames(expected, actual);\n\t\t\tif (missingVendorSpecific || needsStandard) {\n\t\t\t\tkeyframes.data[name].nodes.forEach(addVendorSpecificWarnings);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate visitSimpleSelector(node: nodes.SimpleSelector): boolean {\n\n\t\tvar text = node.getText();\n\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tLint - The universal selector (*) is known to be slow.\n\t\t/////////////////////////////////////////////////////////////\n\t\tif (text === '*') {\n\t\t\tthis.addEntry(node, lintRules.Rules.UniversalSelector);\n\t\t}\n\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tLint - Avoid id selectors\n\t\t/////////////////////////////////////////////////////////////\n\t\tif (text.indexOf('#') === 0) {\n\t\t\tthis.addEntry(node, lintRules.Rules.AvoidIdSelector);\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate visitImport(node: nodes.Import): boolean {\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tLint - Import statements shouldn't be used, because they aren't offering parallel downloads.\n\t\t/////////////////////////////////////////////////////////////\n\t\tthis.addEntry(node, lintRules.Rules.ImportStatemement);\n\t\treturn true;\n\t}\n\n\tprivate visitRuleSet(node: nodes.RuleSet): boolean {\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tLint - Don't use empty rulesets.\n\t\t/////////////////////////////////////////////////////////////\n\t\tvar declarations = node.getDeclarations();\n\t\tif (!declarations) {\n\t\t\t// syntax error\n\t\t\treturn false;\n\t\t}\n\n\n\t\tif (!declarations.hasChildren()) {\n\t\t\tthis.addEntry(node.getSelectors(), lintRules.Rules.EmptyRuleSet);\n\t\t}\n\n\t\tvar self = this;\n\t\tvar propertyTable: Element[] = [];\n\t\tdeclarations.getChildren().forEach(function(element) {\n\t\t\tif (element instanceof nodes.Declaration) {\n\t\t\t\tvar decl = <nodes.Declaration> element;\n\t\t\t\tpropertyTable.push(new Element(decl.getFullPropertyName(), decl));\n\t\t\t}\n\t\t}, this);\n\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tDon't use width or height when using padding or border.\n\t\t/////////////////////////////////////////////////////////////\n\t\tif ((this.fetch(propertyTable, 'width').length > 0 || this.fetch(propertyTable, 'height').length > 0) && (this.fetchWithin(propertyTable, 'padding').length > 0 || this.fetchWithin(propertyTable, 'border').length > 0)) {\n\t\t\tvar elements: Element[] = this.fetch(propertyTable, 'width');\n\t\t\tfor (var index = 0; index < elements.length; index++) {\n\t\t\t\tthis.addEntry(elements[index].node, lintRules.Rules.NoWidthOrHeightWhenPaddingOrBorder);\n\t\t\t}\n\t\t\telements = this.fetch(propertyTable, 'height');\n\t\t\tfor (var index = 0; index < elements.length; index++) {\n\t\t\t\tthis.addEntry(elements[index].node, lintRules.Rules.NoWidthOrHeightWhenPaddingOrBorder);\n\t\t\t}\n\t\t\telements = this.fetchWithin(propertyTable, 'padding');\n\t\t\tfor (var index = 0; index < elements.length; index++) {\n\t\t\t\tthis.addEntry(elements[index].node, lintRules.Rules.NoWidthOrHeightWhenPaddingOrBorder);\n\t\t\t}\n\t\t\telements = this.fetchWithin(propertyTable, 'border');\n\t\t\tfor (var index = 0; index < elements.length; index++) {\n\t\t\t\tthis.addEntry(elements[index].node, lintRules.Rules.NoWidthOrHeightWhenPaddingOrBorder);\n\t\t\t}\n\t\t}\n\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tProperties ignored due to display\n\t\t/////////////////////////////////////////////////////////////\n\n\t\t// With 'display: inline', the width, height, margin-top, margin-bottom, and float properties have no effect\n\t\tlet displayElems = this.fetchWithValue(propertyTable, 'display', 'inline');\n\t\tif (displayElems.length > 0) {\n\t\t\t[ 'width', 'height', 'margin-top', 'margin-bottom', 'float'].forEach(function(prop) {\n\t\t\t\tvar elem = self.fetch(propertyTable, prop);\n\t\t\t\tfor (var index = 0; index < elem.length; index++) {\n\t\t\t\t\tself.addEntry(elem[index].node, lintRules.Rules.PropertyIgnoredDueToDisplay);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// With 'display: inline-block', 'float' has no effect\n\t\tdisplayElems = this.fetchWithValue(propertyTable, 'display', 'inline-block');\n\t\tif (displayElems.length > 0) {\n\t\t\tvar elem = this.fetch(propertyTable, 'float');\n\t\t\tfor (var index = 0; index < elem.length; index++) {\n\t\t\t\tthis.addEntry(elem[index].node, lintRules.Rules.PropertyIgnoredDueToDisplay);\n\t\t\t}\n\t\t}\n\n\t\t// With 'display: block', 'vertical-align' has no effect\n\t\tdisplayElems = this.fetchWithValue(propertyTable, 'display', 'block');\n\t\tif (displayElems.length > 0) {\n\t\t\tvar elem = this.fetch(propertyTable, 'vertical-align');\n\t\t\tfor (var index = 0; index < elem.length; index++) {\n\t\t\t\tthis.addEntry(elem[index].node, lintRules.Rules.PropertyIgnoredDueToDisplay);\n\t\t\t}\n\t\t}\n\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tDon't use !important\n\t\t/////////////////////////////////////////////////////////////\n\t\tnode.accept(function(n:nodes.Node) {\n\t\t\tif (n.type === nodes.NodeType.Prio) {\n\t\t\t\tself.addEntry(n, lintRules.Rules.AvoidImportant);\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tAvoid 'float'\n\t\t/////////////////////////////////////////////////////////////\n\n\t\tvar elements: Element[] = this.fetch(propertyTable, 'float');\n\t\tfor (var index = 0; index < elements.length; index++) {\n\t\t\tthis.addEntry(elements[index].node, lintRules.Rules.AvoidFloat);\n\t\t}\n\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tDon't use duplicate declarations.\n\t\t/////////////////////////////////////////////////////////////\n\t\tfor (var i = 0; i < propertyTable.length; i++) {\n\t\t\tvar element = propertyTable[i];\n\t\t\tif (element.name.toLowerCase() !== 'background') {\n\t\t\t\tvar value = element.node.getValue();\n\t\t\t\tif (value && value.getText()[0] !== '-') {\n\t\t\t\t\tvar elements = this.fetch(propertyTable, element.name);\n\t\t\t\t\tif (elements.length > 1) {\n\t\t\t\t\t\tfor (var k = 0; k < elements.length; k++) {\n\t\t\t\t\t\t\tvar value = elements[k].node.getValue();\n\t\t\t\t\t\t\tif (value && value.getText()[0] !== '-' && elements[k] !== element) {\n\t\t\t\t\t\t\t\tthis.addEntry(element.node, lintRules.Rules.DuplicateDeclarations);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\tUnknown propery & When using a vendor-prefixed gradient, make sure to use them all.\n\t\t/////////////////////////////////////////////////////////////\n\n\t\tvar propertiesBySuffix = new NodesByRootMap();\n\t\tvar containsUnknowns = false;\n\n\t\tdeclarations.getChildren().forEach((node) => {\n\t\t\tif (this.isCSSDeclaration(node)) {\n\t\t\t\tvar decl = <nodes.Declaration> node;\n\t\t\t\tvar name = decl.getFullPropertyName();\n\t\t\t\tvar firstChar = name.charAt(0);\n\n\t\t\t\tif (firstChar === '-') {\n\t\t\t\t\tif (name.charAt(1) !== '-') { // avoid css variables\n\t\t\t\t\t\tif (!languageFacts.isKnownProperty(name)) {\n\t\t\t\t\t\t\tthis.addEntry(decl.getProperty(), lintRules.Rules.UnknownVendorSpecificProperty);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar nonPrefixedName = decl.getNonPrefixedPropertyName();\n\t\t\t\t\t\tpropertiesBySuffix.add(nonPrefixedName, name, decl.getProperty());\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (firstChar === '*' || firstChar === '_') {\n\t\t\t\t\t\tthis.addEntry(decl.getProperty(), lintRules.Rules.IEStarHack);\n\t\t\t\t\t\tname = name.substr(1);\n\t\t\t\t\t}\n\t\t\t\t\tif (!languageFacts.isKnownProperty(name)) {\n\t\t\t\t\t\tthis.addEntry(decl.getProperty(), lintRules.Rules.UnknownProperty);\n\t\t\t\t\t}\n\t\t\t\t\tpropertiesBySuffix.add(name, name, null); // don't pass the node as we don't show errors on the standard\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcontainsUnknowns = true;\n\t\t\t}\n\t\t});\n\n\t\tif (!containsUnknowns) { // don't perform this test if there are\n\n\t\t\tvar addVendorSpecificWarnings = (node: nodes.Node) => {\n\t\t\t\tif (needsStandard) {\n\t\t\t\t\tvar message = nls.localize('property.standard.missing', \"Also define the standard property '{0}' for compatibility\", suffix);\n\t\t\t\t\tthis.addEntry(node, lintRules.Rules.IncludeStandardPropertyWhenUsingVendorPrefix, message);\n\t\t\t\t}\n\t\t\t\tif (missingVendorSpecific) {\n\t\t\t\t\tvar message = nls.localize('property.vendorspecific.missing', \"Always include all vendor specific properties: Missing: {0}\", missingVendorSpecific);\n\t\t\t\t\tthis.addEntry(node, lintRules.Rules.AllVendorPrefixes, message);\n\t\t\t\t}\n\t\t\t};\n\n\n\t\t\tfor (var suffix in propertiesBySuffix.data) {\n\t\t\t\tvar entry = propertiesBySuffix.data[suffix];\n\t\t\t\tvar actual = entry.names;\n\n\t\t\t\tvar needsStandard = languageFacts.isKnownProperty(suffix) && (actual.indexOf(suffix) === -1);\n\t\t\t\tif (!needsStandard && actual.length === 1) {\n\t\t\t\t\tcontinue; // only the non-vendor specific rule is used, that's fine, no warning\n\t\t\t\t}\n\n\t\t\t\tvar expected : string[] = [];\n\t\t\t\tfor (var i = 0, len = LintVisitor.prefixes.length; i < len; i++) {\n\t\t\t\t\tvar prefix = LintVisitor.prefixes[i];\n\t\t\t\t\tif (languageFacts.isKnownProperty(prefix + suffix)) {\n\t\t\t\t\t\texpected.push(prefix + suffix);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar missingVendorSpecific = this.getMissingNames(expected, actual);\n\t\t\t\tif (missingVendorSpecific || needsStandard) {\n\t\t\t\t\tentry.nodes.forEach(addVendorSpecificWarnings);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\treturn true;\n\t}\n\n\tprivate visitNumericValue(node:nodes.NumericValue): boolean {\n\t\t/////////////////////////////////////////////////////////////\n\t\t//\t0 has no following unit\n\t\t/////////////////////////////////////////////////////////////\n\t\tvar value = node.getValue();\n\t\tif(value.unit === '%') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif(parseFloat(value.value) === 0.0 && !!value.unit) {\n\t\t\tthis.addEntry(node, lintRules.Rules.ZeroWithUnit);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate visitFontFace(node: nodes.FontFace): boolean {\n\t\tvar declarations = node.getDeclarations();\n\t\tif (!declarations) {\n\t\t\t// syntax error\n\t\t\treturn;\n\t\t}\n\n\t\tvar definesSrc = false, definesFontFamily = false;\n\t\tvar containsUnknowns = false;\n\t\tdeclarations.getChildren().forEach((node) => {\n\t\t\tif (this.isCSSDeclaration(node)) {\n\t\t\t\tvar name = ((<nodes.Declaration> node).getProperty().getName().toLocaleLowerCase());\n\t\t\t\tif (name === 'src') { definesSrc = true; }\n\t\t\t\tif (name === 'font-family') { definesFontFamily = true; }\n\t\t\t} else {\n\t\t\t\tcontainsUnknowns = true;\n\t\t\t}\n\t\t});\n\n\t\tif (!containsUnknowns && (!definesSrc || !definesFontFamily)) {\n\t\t\tthis.addEntry(node, lintRules.Rules.RequiredPropertiesForFontFace);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate isCSSDeclaration(node:nodes.Node): boolean {\n\t\tif (node instanceof nodes.Declaration) {\n\t\t\tif (!(<nodes.Declaration> node).getValue()) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar property = (<nodes.Declaration> node).getProperty();\n\t\t\tif (!property || property.getIdentifier().containsInterpolation()) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate visitUnknownNode(node:nodes.Node):boolean {\n\n\t\t// Rule: #eeff00 or #ef0\n\t\tif(node.type === nodes.NodeType.HexColorValue) {\n\t\t\tvar text = node.getText();\n\t\t\tif(text.length !== 7 && text.length !== 4) {\n\t\t\t\tthis.addEntry(node, lintRules.Rules.HexColorLength);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate visitFunction(node:nodes.Function):boolean {\n\n\t\tvar fnName = node.getName().toLowerCase(),\n\t\t\texpectedAttrCount = -1,\n\t\t\tactualAttrCount = 0;\n\n\t\tswitch(fnName) {\n\t\t\tcase 'rgb(':\n\t\t\tcase 'hsl(':\n\t\t\t\texpectedAttrCount = 3;\n\t\t\t\tbreak;\n\t\t\tcase 'rgba(':\n\t\t\tcase 'hsla(':\n\t\t\t\texpectedAttrCount = 4;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(expectedAttrCount !== -1) {\n\t\t\tnode.getArguments().accept((n) => {\n\t\t\t\tif(n instanceof nodes.BinaryExpression) {\n\t\t\t\t\tactualAttrCount += 1;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\tif(actualAttrCount !== expectedAttrCount) {\n\t\t\t\tthis.addEntry(node, lintRules.Rules.ArgsInColorFunction);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport URI from 'vs/base/common/uri';\nimport winjs = require('vs/base/common/winjs.base');\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport parser = require('vs/languages/css/common/parser/cssParser');\nimport EditorCommon = require('vs/editor/common/editorCommon');\nimport resourceService = require('vs/editor/common/services/resourceService');\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\n\ninterface Entry {\n\tnode:nodes.Stylesheet;\n\tversion:number;\n}\n\nexport interface ILanguageService {\n\tjoin():winjs.TPromise<void>;\n\tgetStylesheet(resource:URI):nodes.Stylesheet;\n}\n\nclass PromiseWithTrigger<T> extends winjs.TPromise<T> {\n\n\tprivate _valueCallback:winjs.ValueCallback;\n\tprivate _errorCallback:winjs.ErrorCallback;\n\n\tconstructor() {\n\t\tsuper((c, e, p) => {\n\t\t\tthis._valueCallback = c;\n\t\t\tthis._errorCallback = e;\n\t\t});\n\t}\n\n\tpublic resolve(data:T):PromiseWithTrigger<T> {\n\t\tthis._valueCallback(data);\n\t\treturn this;\n\t}\n\n\tpublic reject(err:any):PromiseWithTrigger<T> {\n\t\tthis._errorCallback(err);\n\t\treturn this;\n\t}\n}\n\nexport class CSSLanguageService implements ILanguageService {\n\n\tprivate resourceService:resourceService.IResourceService;\n\tprivate entries:{[url:string]:Entry;};\n\tprivate activeDelay:PromiseWithTrigger<any>;\n\tprivate onChangeHandle:number;\n\tprivate callOnDispose:IDisposable[];\n\tprivate createParser: () => parser.Parser;\n\n\tconstructor(service:resourceService.IResourceService, createParser: () => parser.Parser, private _cssModeId:string) {\n\t\tthis.resourceService = service;\n\t\tthis.entries = {};\n\t\tthis.callOnDispose = [];\n\t\tthis.createParser = createParser;\n\n\t\tthis.updateResources();\n\t\tthis.callOnDispose.push(this.resourceService.addListener2_(resourceService.ResourceEvents.ADDED, (e: resourceService.IResourceAddedEvent) => this.onResourceAdded(e)));\n\t\tthis.callOnDispose.push(this.resourceService.addListener2_(resourceService.ResourceEvents.REMOVED, (e: resourceService.IResourceRemovedEvent) => this.onResourceRemoved(e)));\n\t\tthis.callOnDispose.push(this.resourceService.addListener2_(resourceService.ResourceEvents.CHANGED, (e: resourceService.IResourceChangedEvent) => this.onResourceChange(e)));\n\t}\n\n\tpublic dispose():void {\n\t\tthis.callOnDispose = dispose(this.callOnDispose);\n\t\tclearTimeout(this.onChangeHandle);\n\t\tthis.onChangeHandle = null;\n\t\tthis.entries = null;\n\t}\n\n\tprivate onResourceAdded(e: resourceService.IResourceAddedEvent):void {\n\t\tif (this._isMyMirrorModel(e.addedElement)) {\n\t\t\tthis._scheduleRefreshLanguageService();\n\t\t}\n\t}\n\n\tprivate onResourceRemoved(e: resourceService.IResourceRemovedEvent):void {\n\t\tvar url = e.url.toString();\n\t\tif (this.entries.hasOwnProperty(url)) {\n\t\t\tdelete this.entries[url];\n\t\t}\n\t}\n\n\tprivate onResourceChange(e: resourceService.IResourceChangedEvent):void {\n\t\tif (this._isMyModel(e.url)) {\n\t\t\tthis._scheduleRefreshLanguageService();\n\t\t}\n\t}\n\n\tprivate _scheduleRefreshLanguageService(): void {\n\t\tif (!this.activeDelay) {\n\t\t\tthis.activeDelay = new PromiseWithTrigger<any>();\n\t\t}\n\t\tif (this.onChangeHandle) {\n\t\t\tclearTimeout(this.onChangeHandle);\n\t\t}\n\t\tthis.onChangeHandle = setTimeout(() => {\n\t\t\tthis.updateResources();\n\t\t\tthis.activeDelay.resolve(null);\n\t\t\tthis.activeDelay = null;\n\t\t\tthis.onChangeHandle = null;\n\t\t}, 50);\n\t}\n\n\tpublic join():winjs.TPromise<void> {\n\t\treturn (this.activeDelay || winjs.TPromise.as(null));\n\t}\n\n\tprivate _isMyMirrorModel(resource:EditorCommon.IMirrorModel): boolean {\n\t\treturn resource.getMode().getId() === this._cssModeId;\n\t}\n\n\tprivate _isMyModel(url:URI): boolean {\n\t\treturn this._isMyMirrorModel(this.resourceService.get(url));\n\t}\n\n\tprivate updateResources():void {\n\n\t\tvar n = 0;\n\n\t\tthis.resourceService.all().filter((element) => this._isMyMirrorModel(element)).forEach((model:EditorCommon.IMirrorModel) => {\n\t\t\t// Reparse changes or new models\n\t\t\tvar url = model.uri.toString(),\n\t\t\t\tentry = this.entries[url],\n\t\t\t\thasEntry = typeof entry !== 'undefined';\n\n\t\t\tif(!hasEntry || entry.version !== model.getVersionId()) {\n\n\t\t\t\tif(!hasEntry) {\n\t\t\t\t\tentry = { node: null, version: -1 };\n\t\t\t\t\tthis.entries[url] = entry;\n\t\t\t\t}\n\n\t\t\t\tentry.node = this.createParser().parseStylesheet(model);\n\t\t\t\tentry.node.setName(url);\n\t\t\t\tentry.version = model.getVersionId();\n\n\t\t\t\tn += 1;\n\t\t\t}\n\t\t});\n\n//\t\tconsole.info('[less] updating ' + n + ' resources took ms' + (new Date().getTime() - t1));\n\t}\n\n\tpublic getStylesheet(resource:URI):nodes.Stylesheet {\n\t\tif(this.entries.hasOwnProperty(resource.toString())) {\n\t\t\treturn this.entries[resource.toString()].node;\n\t\t}\n\t\treturn null;\n\t}\n\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport nls = require('vs/nls');\nimport URI from 'vs/base/common/uri';\nimport _severity from 'vs/base/common/severity';\nimport strings = require('vs/base/common/strings');\nimport winjs = require('vs/base/common/winjs.base');\nimport languageService = require('vs/languages/css/common/services/cssLanguageService');\nimport languageFacts = require('vs/languages/css/common/services/languageFacts');\nimport occurrences = require('./services/occurrences');\nimport cssIntellisense = require('vs/languages/css/common/services/intelliSense');\nimport editorCommon = require('vs/editor/common/editorCommon');\nimport modes = require('vs/editor/common/modes');\nimport nodes = require('vs/languages/css/common/parser/cssNodes');\nimport _level = require('vs/languages/css/common/level');\nimport parser = require('vs/languages/css/common/parser/cssParser');\nimport selectorPrinting = require('vs/languages/css/common/services/selectorPrinting');\nimport lint = require('vs/languages/css/common/services/lint');\nimport lintRules = require('vs/languages/css/common/services/lintRules');\nimport {IMarker, IMarkerData} from 'vs/platform/markers/common/markers';\nimport {IMarkerService} from 'vs/platform/markers/common/markers';\nimport {Range} from 'vs/editor/common/core/range';\nimport {IResourceService} from 'vs/editor/common/services/resourceService';\nimport {filterSuggestions} from 'vs/editor/common/modes/supports/suggestSupport';\nimport {ValidationHelper} from 'vs/editor/common/worker/validationHelper';\n\nexport class CSSWorker {\n\n\tpublic languageService: languageService.ILanguageService;\n\tprivate resourceService:IResourceService;\n\tprivate markerService: IMarkerService;\n\tprivate _modeId: string;\n\tprivate validationEnabled : boolean;\n\tprivate lintSettings : lintRules.IConfigurationSettings;\n\tprivate _validationHelper: ValidationHelper;\n\n\tconstructor(\n\t\tmodeId: string,\n\t\t@IResourceService resourceService: IResourceService,\n\t\t@IMarkerService markerService: IMarkerService\n\t) {\n\n\t\tthis._modeId = modeId;\n\t\tthis.resourceService = resourceService;\n\t\tthis.markerService = markerService;\n\n\t\tthis._validationHelper = new ValidationHelper(\n\t\t\tthis.resourceService,\n\t\t\tthis._modeId,\n\t\t\t(toValidate) => this.doValidate(toValidate)\n\t\t);\n\n\t\tthis.languageService = this.createLanguageService(resourceService, modeId);\n\t\tthis.lintSettings = {};\n\t\tthis.validationEnabled = true;\n\t}\n\n\tpublic navigateValueSet(resource:URI, range:editorCommon.IRange, up:boolean):winjs.TPromise<modes.IInplaceReplaceSupportResult> {\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource);\n\t\t\tlet offset = model.getOffsetFromPosition({ lineNumber: range.startLineNumber, column: range.startColumn });\n\t\t\tlet styleSheet = this.languageService.getStylesheet(resource);\n\n\t\t\tlet node = nodes.getNodeAtOffset(styleSheet, offset);\n\t\t\tif (!node) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet declaration = nodes.getParentDeclaration(node);\n\t\t\tif (!declaration) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet entry: languageFacts.IEntry = languageFacts.getProperties()[declaration.getFullPropertyName()];\n\t\t\tif (!entry || !entry.values) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet values = entry.values.filter(value => languageFacts.isCommonValue(value)).map(v => v.name);\n\n\t\t\tlet isColor = (entry.restrictions.indexOf('color') >= 0);\n\t\t\tif (isColor) {\n\t\t\t\tvalues = values.concat(Object.getOwnPropertyNames(languageFacts.colors), Object.getOwnPropertyNames(languageFacts.colorKeywords));\n\t\t\t}\n\n\t\t\tlet text = node.getText();\n\t\t\tfor (let i = 0, len = values.length; i < len; i++) {\n\t\t\t\tif (strings.equalsIgnoreCase(values[i], text)) {\n\t\t\t\t\tlet nextIdx = i;\n\t\t\t\t\tif(up) {\n\t\t\t\t\t\tnextIdx = (i + 1) % len;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextIdx =  i - 1;\n\t\t\t\t\t\tif(nextIdx < 0) {\n\t\t\t\t\t\t\tnextIdx = len - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet result:modes.IInplaceReplaceSupportResult = {\n\t\t\t\t\t\tvalue: values[nextIdx],\n\t\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t\t};\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// if none matches, take the first one\n\t\t\tif (values.length > 0) {\n\t\t\t\tlet result:modes.IInplaceReplaceSupportResult = {\n\t\t\t\t\tvalue: values[0],\n\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t};\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tpublic createLanguageService(resourceService:IResourceService, modeId:string): languageService.CSSLanguageService {\n\t\treturn new languageService.CSSLanguageService(resourceService, this.createParser.bind(this), modeId);\n\t}\n\n\tpublic createParser() : parser.Parser {\n\t\treturn new parser.Parser();\n\t}\n\n\t_doConfigure(raw:any): winjs.TPromise<void> {\n\t\tif (raw) {\n\t\t\tthis.validationEnabled = raw.validate;\n\t\t\tif (raw.lint) {\n\t\t\t\tthis.lintSettings = lintRules.sanitize(raw.lint);\n\t\t\t} else {\n\t\t\t\tthis.lintSettings = {};\n\t\t\t}\n\t\t\tthis._validationHelper.triggerDueToConfigurationChange();\n\t\t}\n\n\t\treturn winjs.TPromise.as(void 0);\n\t}\n\n\tpublic enableValidator(): winjs.TPromise<void> {\n\t\tthis._validationHelper.enable();\n\t\treturn winjs.TPromise.as(null);\n\t}\n\n\tpublic doValidate(resources: URI[]):void {\n\t\tfor (var i = 0; i < resources.length; i++) {\n\t\t\tthis.doValidate1(resources[i]);\n\t\t}\n\t}\n\n\tprivate doValidate1(resource: URI):void {\n\t\tif (!this.validationEnabled) {\n\t\t\tthis.markerService.changeOne(this._modeId, resource, []);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.languageService.join().then(() => {\n\n\t\t\tlet modelMirror = this.resourceService.get(resource),\n\t\t\t\tnode = this.languageService.getStylesheet(resource),\n\t\t\t\tentries: nodes.IMarker[] = [];\n\n\t\t\tentries.push.apply(entries, nodes.ParseErrorCollector.entries(node));\n\t\t\tentries.push.apply(entries, this.collectLintEntries(node));\n\n\t\t\tlet markerData = entries\n\t\t\t\t.filter(entry => entry.getLevel() !== _level.Level.Ignore)\n\t\t\t\t.map(entry => this._createMarkerData(modelMirror, entry));\n\n\t\t\tthis.markerService.changeOne(this._modeId, resource, markerData);\n\t\t});\n\t}\n\n\tprivate _createMarkerData(model: editorCommon.IMirrorModel, marker: nodes.IMarker): IMarkerData {\n\t\tlet range = model.getRangeFromOffsetAndLength(marker.getOffset(), marker.getLength());\n\t\treturn <IMarkerData> {\n\t\t\tcode: marker.getRule().id,\n\t\t\tmessage: marker.getMessage(),\n\t\t\tseverity: marker.getLevel() === _level.Level.Warning ? _severity.Warning : _severity.Error,\n\t\t\tstartLineNumber: range.startLineNumber,\n\t\t\tstartColumn: range.startColumn,\n\t\t\tendLineNumber: range.endLineNumber,\n\t\t\tendColumn: range.endColumn\n\t\t};\n\t}\n\n\tpublic collectLintEntries(stylesheet:nodes.Stylesheet):nodes.IMarker[] {\n\t\treturn lint.LintVisitor.entries(stylesheet, this.lintSettings);\n\t}\n\n\tpublic createIntellisense(): cssIntellisense.CSSIntellisense {\n\t\treturn new cssIntellisense.CSSIntellisense();\n\t}\n\n\tpublic provideCompletionItems(resource:URI, position:editorCommon.IPosition):winjs.TPromise<modes.ISuggestResult[]> {\n\t\treturn this.doSuggest(resource, position).then(value => filterSuggestions(value));\n\t}\n\n\tprivate doSuggest(resource:URI, position:editorCommon.IPosition):winjs.TPromise<modes.ISuggestResult> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource);\n\t\t\tlet result = this.createIntellisense().getCompletionsAtPosition(this.languageService, model, resource, position);\n\t\t\treturn result;\n\t\t});\n\n\t}\n\n\tpublic provideDocumentSymbols(resource:URI):winjs.TPromise<modes.SymbolInformation[]> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\tstylesheet = this.languageService.getStylesheet(resource),\n\t\t\t\tresult:modes.SymbolInformation[] = [];\n\n\t\t\tstylesheet.accept((node) => {\n\n\t\t\t\tlet entry:modes.SymbolInformation = {\n\t\t\t\t\tname: null,\n\t\t\t\t\tkind: modes.SymbolKind.Class, // TODO@Martin: find a good SymbolKind\n\t\t\t\t\tlocation: null\n\t\t\t\t};\n\n\t\t\t\tif(node instanceof nodes.Selector) {\n\t\t\t\t\tentry.name = node.getText();\n\t\t\t\t} else if(node instanceof nodes.VariableDeclaration) {\n\t\t\t\t\tentry.name = (<nodes.VariableDeclaration> node).getName();\n\t\t\t\t\tentry.kind = modes.SymbolKind.Variable;\n\t\t\t\t} else if(node instanceof nodes.MixinDeclaration) {\n\t\t\t\t\tentry.name = (<nodes.MixinDeclaration> node).getName();\n\t\t\t\t\tentry.kind = modes.SymbolKind.Method;\n\t\t\t\t} else if(node instanceof nodes.FunctionDeclaration) {\n\t\t\t\t\tentry.name = (<nodes.FunctionDeclaration> node).getName();\n\t\t\t\t\tentry.kind = modes.SymbolKind.Function;\n\t\t\t\t} else if(node instanceof nodes.Keyframe) {\n\t\t\t\t\tentry.name = nls.localize('literal.keyframes', \"@keyframes {0}\", (<nodes.Keyframe> node).getName());\n\t\t\t\t} else if(node instanceof nodes.FontFace) {\n\t\t\t\t\tentry.name = nls.localize('literal.fontface', \"@font-face\");\n\t\t\t\t}\n\n\t\t\t\tif(entry.name) {\n\t\t\t\t\tentry.location = {\n\t\t\t\t\t\turi: resource,\n\t\t\t\t\t\trange: this._range(node, model, true)\n\t\t\t\t\t};\n\t\t\t\t\tresult.push(entry);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tpublic provideHover(resource:URI, position:editorCommon.IPosition): winjs.TPromise<modes.Hover> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tstylesheet = this.languageService.getStylesheet(resource),\n\t\t\t\tnodepath = nodes.getNodePath(stylesheet, offset);\n\n\t\t\tfor (let i = 0; i < nodepath.length; i++) {\n\t\t\t\tlet node = nodepath[i];\n\t\t\t\tif (node instanceof nodes.Selector) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\thtmlContent: [selectorPrinting.selectorToHtml(<nodes.Selector> node)],\n\t\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (node instanceof nodes.SimpleSelector) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\thtmlContent: [selectorPrinting.simpleSelectorToHtml(<nodes.SimpleSelector> node)],\n\t\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (node instanceof nodes.Declaration) {\n\t\t\t\t\tlet propertyName = node.getFullPropertyName();\n\t\t\t\t\tlet entry = languageFacts.getProperties()[propertyName];\n\t\t\t\t\tif (entry) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\thtmlContent: [{ text: entry.description }],\n\t\t\t\t\t\t\trange: this._range(node, model)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tpublic provideDefinition(resource:URI, position:editorCommon.IPosition):winjs.TPromise<modes.Location> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tnode = occurrences.findDeclaration(this.languageService.getStylesheet(resource), offset);\n\n\t\t\tif (!node) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\turi: resource,\n\t\t\t\trange: this._range(node, model, true)\n\t\t\t};\n\t\t});\n\t}\n\n\tpublic provideDocumentHighlights(resource:URI, position:editorCommon.IPosition):winjs.TPromise<modes.DocumentHighlight[]> {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tnodes = occurrences.findOccurrences(this.languageService.getStylesheet(resource), offset);\n\n\t\t\treturn nodes.map((occurrence) => {\n\t\t\t\treturn {\n\t\t\t\t\trange: this._range(occurrence.node, model),\n\t\t\t\t\tkind: occurrence.kind\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic provideReferences(resource:URI, position:editorCommon.IPosition):winjs.TPromise<modes.Location[]> {\n\n\t\treturn this.languageService.join().then(() => {\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\toffset = model.getOffsetFromPosition(position),\n\t\t\t\tnodes = occurrences.findOccurrences(this.languageService.getStylesheet(resource), offset);\n\n\t\t\treturn nodes.map((occurrence) => {\n\t\t\t\treturn {\n\t\t\t\t\turi: model.uri,\n\t\t\t\t\trange: this._range(occurrence.node, model)\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic findColorDeclarations(resource:URI):winjs.Promise {\n\n\t\treturn this.languageService.join().then(() => {\n\n\t\t\tlet model = this.resourceService.get(resource),\n\t\t\t\tstyleSheet = this.languageService.getStylesheet(resource),\n\t\t\t\tresult:{range:editorCommon.IRange; value:string; }[] = [];\n\n\t\t\tstyleSheet.accept((node) => {\n\t\t\t\tif (languageFacts.isColorValue(node)) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\trange: this._range(node, model),\n\t\t\t\t\t\tvalue: node.getText()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t_range(node:{offset:number; length:number;}, model:editorCommon.IMirrorModel, empty:boolean = false):editorCommon.IRange {\n\t\tif (empty) {\n\t\t\tlet position = model.getPositionFromOffset(node.offset);\n\t\t\treturn {\n\t\t\t\tstartLineNumber: position.lineNumber,\n\t\t\t\tstartColumn: position.column,\n\t\t\t\tendLineNumber: position.lineNumber,\n\t\t\t\tendColumn: position.column\n\t\t\t};\n\t\t} else {\n\t\t\treturn model.getRangeFromOffsetAndLength(node.offset, node.length);\n\t\t}\n\t}\n\n\tprivate getFixesForUnknownProperty(property: nodes.Property, marker: IMarker) : modes.IQuickFix[] {\n\n\t\tlet propertyName = property.getName();\n\t\tlet result: modes.IQuickFix[] = [];\n\t\tfor (let p in languageFacts.getProperties()) {\n\t\t\tlet score = strings.difference(propertyName, p);\n\t\t\tif (score >= propertyName.length / 2 /*score_lim*/) {\n\t\t\t\tresult.push({\n\t\t\t\t\tcommand: {\n\t\t\t\t\t\tid: '_css.replaceText',\n\t\t\t\t\t\ttitle: nls.localize('css.quickfix.rename', \"Rename to '{0}'\", p),\n\t\t\t\t\t\targuments: [{ range: Range.lift(marker), newText: p }]\n\t\t\t\t\t},\n\t\t\t\t\tscore\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Sort in descending order.\n\t\tresult.sort((a, b) => {\n\t\t\treturn b.score - a.score;\n\t\t});\n\n\t\treturn result.slice(0, 3 /*max_result*/);\n\t}\n\n\tprivate appendFixesForMarker(bucket: modes.IQuickFix[], marker: IMarker): void {\n\n\t\tif ((<IMarker>marker).code !== lintRules.Rules.UnknownProperty.id) {\n\t\t\treturn;\n\t\t}\n\t\tlet model = this.resourceService.get(marker.resource),\n\t\t\toffset = model.getOffsetFromPosition({ column: marker.startColumn, lineNumber: marker.startLineNumber }),\n\t\t\tstylesheet = this.languageService.getStylesheet(marker.resource),\n\t\t\tnodepath = nodes.getNodePath(stylesheet, offset);\n\n\t\tfor (let i = nodepath.length - 1; i >= 0; i--) {\n\t\t\tlet node = nodepath[i];\n\t\t\tif (node instanceof nodes.Declaration) {\n\t\t\t\tlet property = (<nodes.Declaration> node).getProperty();\n\t\t\t\tif (property && property.offset === offset && property.length === marker.endColumn - marker.startColumn) {\n\t\t\t\t\tbucket.push(...this.getFixesForUnknownProperty(property, marker));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic provideCodeActions(resource: URI, range: editorCommon.IRange): winjs.TPromise<modes.IQuickFix[]> {\n\n\t\treturn this.languageService.join().then(() => {\n\t\t\tconst result: modes.IQuickFix[] = [];\n\n\t\t\tthis.markerService.read({ resource })\n\t\t\t\t.filter(marker => Range.containsRange(range, marker))\n\t\t\t\t.forEach(marker => this.appendFixesForMarker(result, marker));\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n}\n"]}