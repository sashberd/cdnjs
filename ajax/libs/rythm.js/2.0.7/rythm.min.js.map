{"version":3,"sources":["rythm.js"],"names":["global","factory","exports","module","define","amd","Rythm","this","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Analyser$1","Analyser","_this","initialise","analyser","fftSize","reset","hzHistory","frequences","Uint8Array","frequencyBinCount","analyse","getByteFrequencyData","maxValueHistory","shift","push","getRangeAverageRatio","startingValue","nbValue","total","getFrequenceRatio","index","min","max","forEach","value","scale","percentage","startingScale","pulseRatio","Player","forceAudioContext","createSourceFromAudioElement","audioElement","setAttribute","connectedSources","source","audioCtx","createMediaElementSource","connectExternalAudioElement","audio","currentInputType","inputTypeList","connectedIndex","getAttribute","connectSource","connect","gain","destination","addEventListener","stop","setMusic","trackUrl","Audio","setGain","plugMicrophone","getMicrophoneStream","then","stream","createMediaStreamSource","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","Promise","resolve","reject","medias","error","start","play","pause","getAudioTracks","enabled","browserAudioCtx","window","AudioContext","webkitAudioContext","createAnalyser","createGain","TRACK","STREAM","EXTERNAL","pulse","elem","options","arguments","undefined","isNaN","style","transform","shake","direction","twist","jump","vanish","reverse","opacity","color","from","to","scaleR","scaleG","scaleB","backgroundColor","Math","floor","dancer","Dancer","dances","registerDance","type","className","ratio","dance","elements","document","getElementsByClassName","Array","player","url","addRythm","elementClass","startValue","rythms","stopped","renderRythm","mappingItem","requestAnimationFrame"],"mappings":"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"}