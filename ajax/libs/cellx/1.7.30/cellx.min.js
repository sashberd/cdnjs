!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@riim/map-set-polyfill"),require("@riim/symbol-polyfill")):"function"==typeof define&&define.amd?define(["@riim/map-set-polyfill","@riim/symbol-polyfill"],e):t.cellx=e(t._riim_mapSetPolyfill,t._riim_symbolPolyfill)})(this,(function(t,e){"use strict";function i(){this._events=new t.Map}function n(t,e){for(var i=Object.getOwnPropertyNames(e),s=0,r=i.length;s<r;s++){var h=i[s];Object.defineProperty(t,h,Object.getOwnPropertyDescriptor(e,h))}if(arguments.length>2){s=2;do{n(t,arguments[s])}while(++s<arguments.length)}return t}function s(){}function r(){if(k){k=!1,A=!0;for(var t=j.get(F);;){var e=t&&t.shift();if(e){var i=e._level,n=e._changeEvent;if(!n){if(i>F||-1==e._levelInRelease){if(!t.length){if(F==T)break;t=j.get(++F)}continue}if(e.pull(),(i=e._level)>F){t.length||(t=j.get(++F));continue}n=e._changeEvent}if(e._levelInRelease=-1,n){var s=F;e._fixedValue=e._value,e._changeEvent=null,e._handleEvent(n);for(var r=e._pushingIndex,h=e._slaves,o=0,l=h.length;o<l;o++){var a=h[o];a._level<=i&&(a._level=i+1),r>=a._pushingIndex&&(a._pushingIndex=r,a._changeEvent=null,a._addToRelease())}if(F!=s){t=j.get(F);continue}}if(!t.length){if(F==T)break;t=j.get(++F)}}else{if(F==T)break;t=j.get(++F)}}if(F=P,T=-1,A=!1,M++,w){var u=w;w=null;for(var f=0,_=u.length;f<_;f++)u[f]()}}}function h(t,e){t.push(e)}function o(t,e){i.call(this),this.debugKey=e&&e.debugKey,this.context=e&&(e.context||e.owner)||this,this._pull="function"==typeof t?t:null,this._get=e&&e.get||null,this._validate=e&&e.validate||null,this._merge=e&&e.merge||null,this._put=e&&e.put||h,this._onFulfilled=this._onRejected=null,this._reap=e&&e.reap||null,this._pull?this._fixedValue=this._value=void 0:(this._validate&&this._validate(t,void 0),this._merge&&(t=this._merge(t,void 0)),this._fixedValue=this._value=t,t instanceof i&&t.on("change",this._onValueChange,this)),this._error=null,this._selfErrorCell=null,this._errorCell=null,this._errorIndex=0,this._pushingIndex=0,this._version=0,this._masters=void 0,this._slaves=[],this._level=0,this._levelInRelease=-1,this._selfPendingStatusCell=null,this._pendingStatusCell=null,this._status=null,this._changeEvent=null,this._lastErrorEvent=null,this._state=q,e&&(e.onChange&&this.on("change",e.onChange),e.onError&&this.on("error",e.onError))}function l(){this._valueCounts=new t.Map}function a(){this._isFrozen=!1}function u(t,e){return t<e?-1:t>e?1:0}function f(t,e){i.call(this),a.call(this),l.call(this),"boolean"==typeof e&&(e={adoptsValueChanges:e}),this._items=[],this.length=0,this.adoptsValueChanges=!(!e||!e.adoptsValueChanges),this.comparator=null,this.sorted=!1,e&&(e.sorted||e.comparator&&!1!==e.sorted)&&(this.comparator=e.comparator||u,this.sorted=!0),t&&this._addRange(t)}function _(e,n){if(i.call(this),a.call(this),l.call(this),"boolean"==typeof n&&(n={adoptsValueChanges:n}),this._entries=new t.Map,this.size=0,this.adoptsValueChanges=!(!n||!n.adoptsValueChanges),e){var s=this._entries;if(e instanceof _||e instanceof t.Map)e._entries.forEach((function(t,e){this._registerValue(t),s.set(e,t)}),this);else if(Array.isArray(e))for(var r=0,h=e.length;r<h;r++){var o=e[r];this._registerValue(o[1]),s.set(o[0],o[1])}else for(var u in e)this._registerValue(e[u]),s.set(u,e[u]);this.size=s.size}}function c(){var t=x.console;(t&&t.error||s).call(t||x,J.call(arguments,(function(t){return t===Object(t)&&t.stack||t})).join(" "))}function v(e,i){function n(e){var r=this;r&&r!=x||(r=n),W.call(r,B)||Object.defineProperty(r,B,{value:new t.Map});var h=r[B].get(n);if(!h){if("dispose"===e&&arguments.length>=2)return;h=new o(s,$({context:r},i)),r[B].set(n,h)}switch(arguments.length){case 0:return h.get();case 1:return h.set(e),e;default:var l=e;switch(l){case"bind":return n=n.bind(r),n.constructor=v,n;case"unwrap":return h;default:var a=o.prototype[l].apply(h,Z.call(arguments,1));return a===h?n:a}}}i||(i={});var s=e;return n.constructor=v,(i.onChange||i.onError)&&n.call(i.context||x),n}function g(t,e,i){var n=e+"Cell";return Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:!0,value:i instanceof o?i:new o(i,{context:t})}),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return this[n].get()},set:function(t){this[n].set(t)}}),t}function d(t,e){return Object.keys(e).forEach((function(i){g(t,i,e[i])})),t}var p={_handler:null,setHandler:function(t){this._handler=t},log:function(){this._handler.apply(this,arguments)}},m={};i.currentlySubscribing=!1,i.prototype={constructor:i,getEvents:function(t){var e;return t?(e=this._events.get(t))?e._isEvent===m?[e]:e:[]:(e=Object.create(null),this._events.forEach((function(t,i){e[i]=t._isEvent===m?[t]:t})),e)},on:function(t,e,i){if("object"==typeof t){i=void 0!==e?e:this;var n=t;for(t in n)this._on(t,n[t],i)}else this._on(t,e,void 0!==i?i:this);return this},off:function(t,e,i){if(t)if("object"==typeof t){i=void 0!==e?e:this;var n=t;for(t in n)this._off(t,n[t],i)}else this._off(t,e,void 0!==i?i:this);else this._events.clear();return this},_on:function(t,e,n){var s=t.indexOf(":");if(-1!=s){var r=t.slice(s+1);i.currentlySubscribing=!0,(this[r+"Cell"]||(this[r],this[r+"Cell"])).on(t.slice(0,s),e,n),i.currentlySubscribing=!1}else{var h=this._events.get(t),o={_isEvent:m,listener:e,context:n};h?h._isEvent===m?this._events.set(t,[h,o]):h.push(o):this._events.set(t,o)}},_off:function(t,e,i){var n=t.indexOf(":");if(-1!=n){var s=t.slice(n+1);(this[s+"Cell"]||(this[s],this[s+"Cell"])).off(t.slice(0,n),e,i)}else{var r=this._events.get(t);if(!r)return;var h,o=r._isEvent===m;if(o||1==r.length)(h=o?r:r[0]).listener==e&&h.context===i&&this._events.delete(t);else for(var l=r.length;l;)if((h=r[--l]).listener==e&&h.context===i){r.splice(l,1);break}}},once:function(t,e,i){function n(s){return this._off(t,n,i),e.call(this,s)}return void 0===i&&(i=this),this._on(t,n,i),n},emit:function(t){if("string"==typeof t)t={target:this,type:t};else if(t.target){if(t.target!=this)throw new TypeError("Event cannot be emitted on this object")}else t.target=this;return this._handleEvent(t),t},_handleEvent:function(t){var e=this._events.get(t.type);if(e)if(e._isEvent===m)!1===this._tryEventListener(e,t)&&(t.isPropagationStopped=!0);else{var i=e.length;if(1==i)!1===this._tryEventListener(e[0],t)&&(t.isPropagationStopped=!0);else{e=e.slice();for(var n=0;n<i;n++)!1===this._tryEventListener(e[n],t)&&(t.isPropagationStopped=!0)}}},_tryEventListener:function(t,e){try{return t.listener.call(t.context,e)}catch(t){this._logError(t)}},_logError:function(){p.log.apply(p,arguments)}};var y,E=Object.is||function(t,e){return 0===t&&0===e?1/t==1/e:t===e||t!=t&&e!=e},x=Function("return this;")();if(x.process&&"[object process]"==process.toString()&&process.nextTick)y=process.nextTick;else if(x.setImmediate)y=function(t){setImmediate(t)};else if(x.Promise&&-1!=Promise.toString().indexOf("[native code]")){var b=Promise.resolve();y=function(t){b.then((function(){t()}))}}else{var C;x.addEventListener("message",(function(){if(C){var t=C;C=null;for(var e=0,i=t.length;e<i;e++)try{t[e]()}catch(t){p.log(t)}}})),y=function(t){C?C.push(t):(C=[t],postMessage("__tic__","*"))}}var w,I=y,V=Array.prototype.slice,S=i.prototype,P=Number.MAX_SAFE_INTEGER||9007199254740991,R=e.Symbol("wrappers"),O=0,z=0,j=new t.Map,F=P,T=-1,k=!1,A=!1,L=null,K={original:null},M=1,D=0,N=!1,U=[],q=1,H={asynchronous:!0};n(o,{configure:function(t){void 0!==t.asynchronous&&(k&&r(),H.asynchronous=t.asynchronous)},get currentlyPulling(){return!!L},autorun:function(t,e){var i;return new o(function(){var n=this;if(i||(i=function(){n.dispose()}),D){var s=U.indexOf(this);-1!=s&&U.splice(s,1),U.push(this)}else t.call(e,i)},{onChange:s}),i},forceRelease:function(){k&&r()},transaction:function(t){!D++&&k&&r();try{t()}catch(t){p.log(t),N=!0}if(N){for(var e,i=j.values();!(e=i.next()).done;)for(var n=e.value,s=n.length;s;){var h=n[--s];h._value=h._fixedValue,h._levelInRelease=-1,h._changeEvent=null}j.clear(),F=P,T=-1,k=!1,U.length=0}if(!--D&&!N){for(var s=0,l=U.length;s<l;s++){var a=U[s];a instanceof o?a.pull():S._handleEvent.call(a[1],a[0])}N=!1,U.length=0,k&&r()}},afterRelease:function(t){(w||(w=[])).push(t)}}),o.prototype={__proto__:i.prototype,constructor:o,_handleEvent:function(t){D?U.push([t,this]):S._handleEvent.call(this,t)},on:function(t,e,i){return k&&r(),this._activate(),"object"==typeof t?S.on.call(this,t,void 0!==e?e:this.context):S.on.call(this,t,e,void 0!==i?i:this.context),this._state|=16,this},off:function(t,e,i){return k&&r(),t?"object"==typeof t?S.off.call(this,t,void 0!==e?e:this.context):S.off.call(this,t,e,void 0!==i?i:this.context):S.off.call(this),!this._slaves.length&&!this._events.has("change")&&!this._events.has("error")&&16&this._state&&(this._state^=16,this._deactivate(),this._reap&&this._reap.call(this.context)),this},addChangeListener:function(t,e){return this.on("change",t,void 0!==e?e:this.context)},removeChangeListener:function(t,e){return this.off("change",t,void 0!==e?e:this.context)},addErrorListener:function(t,e){return this.on("error",t,void 0!==e?e:this.context)},removeErrorListener:function(t,e){return this.off("error",t,void 0!==e?e:this.context)},subscribe:function(e,i){function n(t){return e.call(this,t.error||null,t)}var s=e[R];return s&&s.has(e)?this:((s||(e[R]=new t.Map)).set(this,n),void 0===i&&(i=this.context),this.on("change",n,i).on("error",n,i))},unsubscribe:function(t,e){var i=t[R],n=i&&i.get(this);return n?(i.delete(this),void 0===e&&(e=this.context),this.off("change",n,e).off("error",n,e)):this},_registerSlave:function(t){this._activate(),this._slaves.push(t),this._state|=16},_unregisterSlave:function(t){this._slaves.splice(this._slaves.indexOf(t),1),this._slaves.length||this._events.has("change")||this._events.has("error")||(this._state^=16,this._deactivate(),this._reap&&this._reap.call(this.context))},_activate:function(){if(this._pull&&!(32&this._state)&&null!==this._masters){var t=this._masters;if(this._version<M){var e=this._tryPull();!t&&!this._masters&&128&this._state||(e===K?this._fail(K.original,!1):this._push(e,!1,!1)),t=this._masters}if(t){var i=t.length;do{t[--i]._registerSlave(this)}while(i);this._state|=32}}},_deactivate:function(){if(32&this._state){var t=this._masters,e=t.length;do{t[--e]._unregisterSlave(this)}while(e);-1==this._levelInRelease||this._changeEvent||(this._levelInRelease=-1),this._state^=32}},_addToRelease:function(){var t=this._level;if(!(t<=this._levelInRelease)){var e;(j.get(t)||(j.set(t,e=[]),e)).push(this),F>t&&(F=t),T<t&&(T=t),this._levelInRelease=t,k||A||(k=!0,D||H.asynchronous?I(r):r())}},_onValueChange:function(t){this._pushingIndex=++z,this._changeEvent?(t.prev=this._changeEvent,this._changeEvent=t,this._value===this._fixedValue&&(this._state&=~q)):(t.prev=null,this._changeEvent=t,this._state&=~q,this._addToRelease())},get:function(){if(k&&this._pull&&r(),this._pull&&!(32&this._state)&&this._version<M&&null!==this._masters){var t=this._masters,e=this._tryPull(),i=this._masters;if(t||i||!(128&this._state)){if(i&&16&this._state){var n=i.length;do{i[--n]._registerSlave(this)}while(n);this._state|=32}e===K?this._fail(K.original,!1):this._push(e,!1,!1)}}if(L){var s=L._masters,h=this._level;s?-1==s.indexOf(this)&&(s.push(this),L._level<=h&&(L._level=h+1)):(L._masters=[this],L._level=h+1)}return this._get?this._get(this._value):this._value},pull:function(){if(!this._pull)return!1;k&&r();var t,e,i=16&this._state;i&&(t=this._masters,e=this._level);var n=this._tryPull();if(i){var s=this._masters,h=0;if(s){var o=s.length;do{var l=s[--o];t&&-1!=t.indexOf(l)||(l._registerSlave(this),h++)}while(o)}if(t&&(s?s.length-h:0)<t.length)for(var a=t.length;a;){var u=t[--a];s&&-1!=s.indexOf(u)||u._unregisterSlave(this)}if(s&&s.length?this._state|=32:this._state&=-33,A&&this._level>e)return this._addToRelease(),!1}return n===K?(this._fail(K.original,!1),!0):this._push(n,!1,!0)},_tryPull:function(){if(64&this._state)throw new TypeError("Circular pulling detected");var t=this._pull;t.length&&(this._state|=8,this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._state&=-7);var e=L;L=this,this._state|=64,this._masters=null,this._level=0;try{return t.length?t.call(this.context,this,this._value):t.call(this.context)}catch(t){return K.original=t,K}finally{L=e,this._version=M+A;var i=this._pendingStatusCell;i&&32&i._state&&i.pull();var n=this._errorCell;n&&32&n._state&&n.pull(),this._state^=64}},getError:function(){var t=this._errorCell;if(!t){var e=this.debugKey;this._selfErrorCell=new o(this._error,e?{debugKey:e+"._selfErrorCell"}:null),t=this._errorCell=new o(function(){this.get();var t,e=this._selfErrorCell.get();if(e&&(t=this._errorIndex)==O)return e;var i=this._masters;if(i){var n=i.length;do{var s=i[--n],r=s.getError();if(r){var h=s._errorIndex;if(h==O)return r;(!e||t<h)&&(e=r,t=h)}}while(n)}return e},e?{debugKey:e+"._errorCell",context:this}:{context:this})}return t.get()},isPending:function(){var t=this._pendingStatusCell;if(!t){var e=this.debugKey;this._selfPendingStatusCell=new o(!!(8&this._state),e?{debugKey:e+"._selfPendingStatusCell"}:null),t=this._pendingStatusCell=new o(function(){if(this._selfPendingStatusCell.get())return!0;this.get();var t=this._masters;if(t){var e=t.length;do{if(t[--e].isPending())return!0}while(e)}return!1},e?{debugKey:e+"._pendingStatusCell",context:this}:{context:this})}return t.get()},getStatus:function(){var t=this._status;if(!t){var e=this;t=this._status={get success(){return!e.getError()},get pending(){return e.isPending()}}}return t},set:function(t){return this._validate&&this._validate(t,this._value),this._merge&&(t=this._merge(t,this._value)),this._state|=8,this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._state&=-7,this._put.length>=3?this._put.call(this.context,this,t,this._value):this._put.call(this.context,this,t),this},push:function(t){return this._push(t,!0,!1),this},_push:function(t,e,n){this._state|=128;var s=this._value;if(e&&A&&16&this._state){if(E(t,s))return this._setError(null),this._fulfill(t),!1;var r=this;return(w||(w=[])).push((function(){r._push(t,!0,!1)})),!0}return(e||!A&&n)&&(this._pushingIndex=++z),this._setError(null),E(t,s)?((e||A&&n)&&this._fulfill(t),!1):(this._value=t,s instanceof i&&s.off("change",this._onValueChange,this),t instanceof i&&t.on("change",this._onValueChange,this),16&this._state||D?this._changeEvent?E(t,this._fixedValue)&&this._state&q?(this._levelInRelease=-1,this._changeEvent=null):this._changeEvent={target:this,type:"change",oldValue:s,value:t,prev:this._changeEvent}:(this._changeEvent={target:this,type:"change",oldValue:s,value:t,prev:null},this._state|=q,this._addToRelease()):((e||!A&&n)&&M++,this._fixedValue=t,this._version=M+A),(e||A&&n)&&this._fulfill(t),!0)},_fulfill:function(t){this._resolvePending(),4&this._state||(this._state|=4,this._onFulfilled&&this._onFulfilled(t))},fail:function(t){return this._fail(t,!0),this},_fail:function(t,e){D&&(N=!0),this._logError(t),t instanceof Error||(t=new Error(String(t))),this._setError(t),e&&this._reject(t)},_setError:function(t){(t||this._error)&&(this._error=t,this._selfErrorCell&&this._selfErrorCell.set(t),t&&(this._errorIndex=++O,this._handleErrorEvent({type:"error",error:t})))},_handleErrorEvent:function(t){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this._handleEvent(t);for(var e=this._slaves,i=0,n=e.length;i<n;i++)e[i]._handleErrorEvent(t)}},_reject:function(t){this._resolvePending(),2&this._state||(this._state|=2,this._onRejected&&this._onRejected(t))},_resolvePending:function(){8&this._state&&(this._state^=8,this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!1))},then:function(t,e){if(k&&r(),!this._pull||4&this._state)return Promise.resolve(this._get?this._get(this._value):this._value).then(t);if(2&this._state)return Promise.reject(this._error).catch(e);var i=this,n=new Promise(function(t,e){i._onFulfilled=function(e){i._onFulfilled=i._onRejected=null,t(i._get?i._get(e):e)},i._onRejected=function(t){i._onFulfilled=i._onRejected=null,e(t)}}).then(t,e);return 8&this._state||this.pull(),i.isPending()&&i._pendingStatusCell.on("change",(function t(){if(i._pendingStatusCell.off("change",t),!(4&i._state||2&i._state)){var e=i.getError();e?i._reject(e):i._fulfill(i._get?i._get(i._value):i._value)}})),n},catch:function(t){return this.then(null,t)},_logError:function(){var t=V.call(arguments);this.debugKey&&t.unshift("["+this.debugKey+"]"),S._logError.apply(this,t)},reap:function(){for(var t=this._slaves,e=0,i=t.length;e<i;e++)t[e].reap();return this.off()},dispose:function(){return this.reap()}},o.prototype[e.Symbol.iterator]=function(){return this._value[e.Symbol.iterator]()},l.prototype={_onItemChange:function(t){this._handleEvent(t)},_registerValue:function(t){var e=this._valueCounts,n=e.get(t);n?e.set(t,n+1):(e.set(t,1),this.adoptsValueChanges&&t instanceof i&&t.on("change",this._onItemChange,this))},_unregisterValue:function(t){var e=this._valueCounts,n=e.get(t);n>1?e.set(t,n-1):(e.delete(t),this.adoptsValueChanges&&t instanceof i&&t.off("change",this._onItemChange,this))}},a.prototype={get isFrozen(){return this._isFrozen},freeze:function(){return this._isFrozen=!0,this},unfreeze:function(){return this._isFrozen=!1,this},_throwIfFrozen:function(t){if(this._isFrozen)throw new TypeError(t||"Frozen collection cannot be mutated")}};var Y=Array.prototype.push,G=Array.prototype.splice;f.prototype=n({__proto__:i.prototype},a.prototype,l.prototype,{constructor:f,contains:function(t){return this._valueCounts.has(t)},indexOf:function(t,e){return this._items.indexOf(t,this._validateIndex(e,!0))},lastIndexOf:function(t,e){return this._items.lastIndexOf(t,void 0===e?-1:this._validateIndex(e,!0))},get:function(t){return this._items[this._validateIndex(t,!0)]},getRange:function(t,e){t=this._validateIndex(t,!0);var i=this._items;if(void 0===e)return i.slice(t);if(t+e>i.length)throw new RangeError('Sum of "index" and "count" out of valid range');return i.slice(t,t+e)},set:function(t,e){if(this.sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0);var i=this._items;return E(e,i[t])?this:(this._throwIfFrozen(),this._unregisterValue(i[t]),this._registerValue(e),i[t]=e,this.emit("change"),this)},setRange:function(t,e){if(this.sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0);var i=e.length;if(!i)return this;if(t+i>this.length)throw new RangeError('Sum of "index" and "values.length" out of valid range');e instanceof f&&(e=e._items.slice());for(var n=this._items,s=!1,r=t+i;r>t;){var h=e[--r-t];E(h,n[r])||(s||this._throwIfFrozen(),this._unregisterValue(n[r]),this._registerValue(h),n[r]=h,s=!0)}return s&&this.emit("change"),this},add:function(t){return this._throwIfFrozen(),this.sorted?this._insertSortedValue(t):(this._registerValue(t),this._items.push(t)),this.length++,this.emit("change"),this},addRange:function(t){return t.length&&(this._throwIfFrozen(),this._addRange(t),this.emit("change")),this},_addRange:function(t){if(t instanceof f&&(t=t._items.slice()),this.sorted){for(var e=0,i=t.length;e<i;e++)this._insertSortedValue(t[e]);this.length+=t.length}else{for(var n=t.length;n;)this._registerValue(t[--n]);this.length=Y.apply(this._items,t)}},insert:function(t,e){if(this.sorted)throw new TypeError("Cannot insert to sorted list");return t=this._validateIndex(t,!0),this._throwIfFrozen(),this._registerValue(e),this._items.splice(t,0,e),this.length++,this.emit("change"),this},insertRange:function(t,e){if(this.sorted)throw new TypeError("Cannot insert to sorted list");t=this._validateIndex(t,!0);var i=e.length;if(!i)return this;this._throwIfFrozen(),e instanceof f&&(e=e._items);for(var n=i;n;)this._registerValue(e[--n]);return G.apply(this._items,[t,0].concat(e)),this.length+=i,this.emit("change"),this},remove:function(t,e){var i=this._items.indexOf(t,this._validateIndex(e,!0));return-1!=i&&(this._throwIfFrozen(),this._unregisterValue(t),this._items.splice(i,1),this.length--,this.emit("change"),!0)},removeAll:function(t,e){for(var i=this._validateIndex(e,!0),n=this._items,s=!1;-1!=(i=n.indexOf(t,i));)s||this._throwIfFrozen(),this._unregisterValue(t),n.splice(i,1),s=!0;return s&&(this.length=n.length,this.emit("change")),s},removeEach:function(t,e){e=this._validateIndex(e,!0),t instanceof f&&(t=t._items.slice());for(var i=this._items,n=!1,s=0,r=t.length;s<r;s++){var h=t[s],o=i.indexOf(h,e);-1!=o&&(n||this._throwIfFrozen(),this._unregisterValue(h),i.splice(o,1),n=!0)}return n&&(this.length=i.length,this.emit("change")),n},removeAllEach:function(t,e){e=this._validateIndex(e,!0),t instanceof f&&(t=t._items.slice());for(var i=this._items,n=!1,s=0,r=t.length;s<r;s++)for(var h=t[s],o=e;-1!=(o=i.indexOf(h,o));)n||this._throwIfFrozen(),this._unregisterValue(h),i.splice(o,1),n=!0;return n&&(this.length=i.length,this.emit("change")),n},removeAt:function(t){var e=this._items.splice(this._validateIndex(t),1)[0];return this._throwIfFrozen(),this._unregisterValue(e),this.length--,this.emit("change"),e},removeRange:function(t,e){t=this._validateIndex(t,!0);var i=this._items;if(void 0===e)e=i.length-t;else if(t+e>i.length)throw new RangeError('Sum of "index" and "count" out of valid range');if(!e)return[];this._throwIfFrozen();for(var n=t+e;n>t;)this._unregisterValue(i[--n]);var s=i.splice(t,e);return this.length-=e,this.emit("change"),s},clear:function(){return this.length?(this._throwIfFrozen(),this.adoptsValueChanges&&this._valueCounts.forEach((function(t){t instanceof i&&t.off("change",this._onItemChange,this)}),this),this._items.length=0,this._valueCounts.clear(),this.length=0,this.emit({type:"change",subtype:"clear"}),this):this},join:function(t){return this._items.join(t)},forEach:null,map:null,filter:null,find:function(t,e){for(var i=this._items,n=0,s=i.length;n<s;n++){var r=i[n];if(t.call(e,r,n,this))return r}},findIndex:function(t,e){for(var i=this._items,n=0,s=i.length;n<s;n++)if(t.call(e,i[n],n,this))return n;return-1},every:null,some:null,reduce:null,reduceRight:null,clone:function(){return new this.constructor(this,{adoptsValueChanges:this.adoptsValueChanges,comparator:this.comparator,sorted:this.sorted})},toArray:function(){return this._items.slice()},toString:function(){return this._items.join()},_validateIndex:function(t,e){if(void 0===t)return t;if(t<0){if((t+=this.length)<0)throw new RangeError("Index out of valid range")}else if(t>=this.length+(e?1:0))throw new RangeError("Index out of valid range");return t},_insertSortedValue:function(t){this._registerValue(t);for(var e=this._items,i=this.comparator,n=0,s=e.length;n!=s;){var r=n+s>>1;i(t,e[r])<0?s=r:n=r+1}e.splice(n,0,t)}}),["forEach","map","filter","every","some"].forEach((function(t){f.prototype[t]=function(e,i){return this._items[t]((function(t,n){return e.call(i,t,n,this)}),this)}})),["reduce","reduceRight"].forEach((function(t){f.prototype[t]=function(e,i){function n(t,i,n){return e(t,i,n,r)}var s=this._items,r=this;return arguments.length>=2?s[t](n,i):s[t](n)}})),[["keys",function(t){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach((function(t){var e=t[1];f.prototype[t[0]]=function(){var t=this._items,i=0,n=!1;return{next:function(){if(!n){if(i<t.length)return{value:e(i,t[i++]),done:!1};n=!0}return{value:void 0,done:!0}}}}})),f.prototype[e.Symbol.iterator]=f.prototype.values,_.prototype=n({__proto__:i.prototype},a.prototype,l.prototype,{constructor:_,has:function(t){return this._entries.has(t)},contains:function(t){return this._valueCounts.has(t)},get:function(t){return this._entries.get(t)},set:function(t,e){var i,n=this._entries,s=n.has(t);if(s){if(i=n.get(t),E(e,i))return this;this._throwIfFrozen(),this._unregisterValue(i)}else this._throwIfFrozen();return this._registerValue(e),n.set(t,e),s||this.size++,this.emit({type:"change",subtype:s?"update":"add",key:t,oldValue:i,value:e}),this},delete:function(t){var e=this._entries;if(!e.has(t))return!1;this._throwIfFrozen();var i=e.get(t);return this._unregisterValue(i),e.delete(t),this.size--,this.emit({type:"change",subtype:"delete",key:t,oldValue:i,value:void 0}),!0},clear:function(){return this.size?(this._throwIfFrozen(),this.adoptsValueChanges&&this._valueCounts.forEach((function(t){t instanceof i&&t.off("change",this._onItemChange,this)}),this),this._entries.clear(),this._valueCounts.clear(),this.size=0,this.emit({type:"change",subtype:"clear"}),this):this},forEach:function(t,e){this._entries.forEach((function(i,n){t.call(e,i,n,this)}),this)},keys:function(){return this._entries.keys()},values:function(){return this._entries.values()},entries:function(){return this._entries.entries()},clone:function(){return new this.constructor(this,{adoptsValueChanges:this.adoptsValueChanges})}}),_.prototype[e.Symbol.iterator]=_.prototype.entries;var X=e.Symbol("cellx.uid"),B=e.Symbol("cellx.cells"),J=Array.prototype.map,Q=0,W=Object.prototype.hasOwnProperty,Z=Array.prototype.slice;p.setHandler(c);var $=Object.assign||function(t,e){for(var i in e)t[i]=e[i];return t};return v.configure=function(t){o.configure(t)},v.ErrorLogger=p,v.EventEmitter=i,v.ObservableCollectionMixin=l,v.ObservableMap=_,v.ObservableList=f,v.Cell=o,v.autorun=o.autorun,v.transact=v.transaction=o.transaction,v.KEY_UID=X,v.KEY_CELLS=B,v.map=function(t,e){return new _(t,e)},v.list=function(t,e){return new f(t,e)},v.defineObservableProperty=g,v.defineObservableProperties=d,v.define=function(t,e,i){return"string"==typeof e?g(t,e,i):d(t,e),t},v.Utils={logError:c,nextUID:function(){return String(++Q)},is:E,mixin:n,nextTick:I,noop:s},v.cellx=v,v.default=v,v.__esModule=!0,v}));