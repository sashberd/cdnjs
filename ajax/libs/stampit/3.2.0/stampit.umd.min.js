!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.stampit=e.stampit||{})}(this,function(e){"use strict";function t(e,r){if(void 0===r)return e;if(b(r))return(b(e)?e:[]).concat(r);if(!i(r))return r;for(var s=o(e)?e:{},n=Object.keys(r),p=0;p<n.length;p+=1){var c=n[p],a=r[c];if(void 0!==a){var f=s[c],u=i(f)||b(a)?f:{};s[c]=t(u,a)}}return s}function r(e){return"function"==typeof e}function o(e){var t=typeof e;return!!e&&("object"===t||"function"===t)}function i(e){return!!e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}function s(){var e=j.apply([],arguments).filter(r);return 0===e.length?void 0:e}function n(e,t,o){if(b(t)){var i=t.length,s=e[o]||[];e[o]=s;for(var n=0;n<i;n+=1){var p=t[n];r(p)&&s.indexOf(p)<0&&s.push(p)}}}function p(e,t,r,i){o(t[r])&&(o(e[r])||(e[r]={}),i(e[r],t[r]))}function c(e,t,r){p(e,t,r,g)}function a(e,t,r){p(e,t,r,D)}function f(e){return function t(o){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var n=Object.create(e.methods||null);if(g(n,e.deepProperties),D(n,e.properties),Object.defineProperties(n,e.propertyDescriptors||{}),!e.initializers||0===e.initializers.length)return n;void 0===o&&(o={});for(var p=e.initializers,c=p.length,a=0;a<c;a+=1){var f=p[a];if(r(f)){var u=f.call(n,o,{instance:n,stamp:t,args:[o].concat(i)});n=void 0===u?n:u}}return n}}function u(e,t){var o=f(e);g(o,e.staticDeepProperties),D(o,e.staticProperties),Object.defineProperties(o,e.staticPropertyDescriptors||{});var i=r(o.compose)?o.compose:t;return o.compose=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return i.apply(this,e)},D(o.compose,e),o}function d(e,t){var r=t&&t.compose||t;return o(r)?(a(e,r,"methods"),a(e,r,"properties"),c(e,r,"deepProperties"),a(e,r,"propertyDescriptors"),a(e,r,"staticProperties"),c(e,r,"staticDeepProperties"),a(e,r,"staticPropertyDescriptors"),a(e,r,"configuration"),c(e,r,"deepConfiguration"),n(e,r.initializers,"initializers"),e):e}function v(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return u([this].concat(e).filter(o).reduce(d,{}),v)}function l(e){return r(e)&&r(e.compose)}function h(e,t){return function(){for(var r=arguments.length,o=Array(r);r--;)o[r]=arguments[r];return(this&&this.compose||P).call(this,(i={},i[e]=t.apply(void 0,[{}].concat(o)),i));var i}}function m(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return(this&&this.compose||P).call(this,{initializers:s.apply(void 0,e)})}function y(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return(this&&this.compose||P).call(this,{composers:s.apply(void 0,e)})}function P(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=e.filter(o).map(function(e){return l(e)?e:C(e)}),s=v.apply(this||B,i),n=s.compose.deepConfiguration&&s.compose.deepConfiguration.composers;if(b(n)&&n.length>0){for(var p=[],c=0;c<n.length;c+=1){var a=n[c];r(a)&&p.indexOf(a)<0&&p.push(a)}s.compose.deepConfiguration.composers=p,l(this)&&i.unshift(this);for(var f=0;f<p.length;f+=1){var u=p[f],d=u({stamp:s,composables:i});s=l(d)?d:s}}return s}var g=function(e){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return r.reduce(t,e)},D=Object.assign||function(e){for(var t=arguments,r=1;r<t.length;r+=1){var o=t[r];for(var i in Object.keys(o))e[i]=o[i]}return e},b=Array.isArray,j=Array.prototype.concat,C=function(e){void 0===e&&(e={});var t=e.methods,r=e.properties,i=e.props,p=e.refs,c=e.initializers,a=e.init,f=e.composers,u=e.deepProperties,d=e.deepProps,v=e.propertyDescriptors,l=e.staticProperties,h=e.statics,m=e.staticDeepProperties,y=e.deepStatics,P=e.staticPropertyDescriptors,b=e.configuration,j=e.conf,C=e.deepConfiguration,O=e.deepConf,z=o(i)||o(p)||o(r)?D({},i,p,r):void 0,x=o(d)?g({},d):void 0;x=o(u)?g(x,u):x;var A=o(h)||o(l)?D({},h,l):void 0,S=o(y)?g({},y):void 0;S=o(m)?g(S,m):S;var k=o(j)||o(b)?D({},j,b):void 0,_=o(O)?g({},O):void 0;_=o(C)?g(_,C):_;var M=s(a,c),q=s(f);q&&(_=_||{},n(_,q,"composers"));var w={};return t&&(w.methods=t),z&&(w.properties=z),M&&(w.initializers=M),x&&(w.deepProperties=x),A&&(w.staticProperties=A),t&&(w.methods=t),S&&(w.staticDeepProperties=S),v&&(w.propertyDescriptors=v),P&&(w.staticPropertyDescriptors=P),k&&(w.configuration=k),_&&(w.deepConfiguration=_),w},O=h("methods",D),z=h("properties",D),x=h("deepProperties",g),A=h("staticProperties",D),S=h("staticDeepProperties",g),k=h("configuration",D),_=h("deepConfiguration",g),M=h("propertyDescriptors",D),q=h("staticPropertyDescriptors",D),w={methods:O,properties:z,refs:z,props:z,initializers:m,init:m,composers:y,deepProperties:x,deepProps:x,staticProperties:A,statics:A,staticDeepProperties:S,deepStatics:S,configuration:k,conf:k,deepConfiguration:_,deepConf:_,propertyDescriptors:M,staticPropertyDescriptors:q},B=v({staticProperties:w},{staticProperties:{create:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return this.apply(void 0,e)},compose:P}}),E=P.bind();P.compose=E;var F=D(P,w);e.methods=O,e.properties=z,e.refs=z,e.props=z,e.initializers=m,e.init=m,e.composers=y,e.deepProperties=x,e.deepProps=x,e.staticProperties=A,e.statics=A,e.staticDeepProperties=S,e.deepStatics=S,e.configuration=k,e.conf=k,e.deepConfiguration=_,e.deepConf=_,e.propertyDescriptors=M,e.staticPropertyDescriptors=q,e.compose=E,e.default=F,Object.defineProperty(e,"__esModule",{value:!0})});
