!function(t,e){var n="snapper";e.fn[n]=function(r){function a(t,r){var a=e(t).find("."+n+"_item"),i=e(t).width(),s=[];return a.each(function(t){this.offsetLeft>=r-5&&this.offsetLeft<r+i-5&&s.push(this)}),e(s)}function i(t){return t.width()+parseFloat(t.css("margin-left"))+parseFloat(t.css("margin-right"))}function s(t){return t.height()+parseFloat(t.css("margin-bottom"))+parseFloat(t.css("margin-top"))}function o(t,r,i){i=i?i+"-":"";var s=a(t,r);e(t).trigger(n+"."+i+"snap",{activeSlides:s})}function l(r,i,s,l){d=!1,o(r,i);var f=function(){r.scrollLeft=i,e(r).closest("."+n).removeClass(n+"-looping"),e(r).trigger(n+".after-goto",{activeSlides:a(r,i)}),l&&l(),o(r,i,"after"),d=!0};!t.toss&&t.overthrow&&(t.toss=t.overthrow.toss),void 0===t.toss||s?(r.scrollLeft=i,f()):t.toss(r,{left:i,finished:f})}var f,p,c=arguments,d=!0,u="scroll-snap-type",v=t.CSS&&t.CSS.supports&&(t.CSS.supports(u,"mandatory")||t.CSS.supports("-webkit-"+u,"mandatory")||t.CSS.supports("-ms-"+u,"mandatory"));return f=this.each(function(){function a(){var t=S.attr("data-autoplay")||S.attr("data-snapper-autoplay"),e=!1;if(t){try{t=parseInt(t,10)}catch(t){e=!0}if(!t||e){throw new Error("Snapper: `data-autoplay` must have an natural number value.")}}return t}function f(){var e=D.attr("style");D.attr("style","");var n=q.eq(0).attr("style");q.eq(0).attr("style","");var r=T.width(),a=q.eq(0).width(),i=t.getComputedStyle(q[0],null),s=parseFloat(i.getPropertyValue("margin-left")),o=parseFloat(i.getPropertyValue("margin-right")),l=a+s+o;q.eq(0).attr("style",n),D.attr("style",e);var f=F/Math.round(r/l)*100,p=a/r*100,c=o/r*100,d=s/r*100,u=p+d+c,v=p/u,h=c/u,g=d/u;D.css("width",f+"%"),q.css("width",100/F*v+"%"),q.css("margin-left",100/F*g+"%"),q.css("margin-right",100/F*h+"%")}function d(){if(W)N=!0;else{var t=T[0].scrollLeft,e=D.width(),n=q[1]?q[1].offsetLeft:i(q.eq(0)),r=Math.round(t/n)*n,a=e-T.width();r>a&&(r=a),t!==r&&(v?(o(T[0],r),o(T[0],r,"after")):l(T[0],r)),N=!1}}function u(t){var e=T[0].scrollLeft,r=D.width()-i(T)-5;return t?e>=r?(S.addClass(n+"-looping"),m()):h():0===e?(S.addClass(n+"-looping"),y()):g()}function h(){l(T[0],T[0].scrollLeft+D.width()/F,!1,function(){T.trigger(n+".after-next")})}function g(){l(T[0],T[0].scrollLeft-D.width()/F,!1,function(){T.trigger(n+".after-prev")})}function m(){l(T[0],0)}function y(){l(T[0],D.width()-T.width())}function _(e,n,r){void 0!==t.toss?t.toss(e,{left:n,top:r}):(e.scrollLeft=n,e.scrollTop=r)}function w(){var t=T[0].scrollLeft,e=i(D),n=i(I),r=s(I),a=Math.round(t/e*F)||0,o=I.find("a").removeClass(M).eq(a).addClass(M),l=o[0].offsetLeft-n/2,f=o[0].offsetTop-r/2;_(V[0],l,f)}function x(t){t&&(C=setTimeout(function(){var t=a();t&&(u(!0),x(t))},t))}if(void 0===p){var C,L=this,S=e(L),b=S.is("[data-"+n+"-nextprev]"),T=e("."+n+"_pane",L),k=n+"-enhanced",D=T.find("."+n+"_items"),q=D.children();q.addClass(n+"_item");var F=q.length,I=e("."+n+"_nav",L),M=n+"_nav_item-selected",P="false"!==S.attr("data-snapper-deeplinking");if("string"!=typeof r){var V=I.find("."+n+"_nav_inner");if(V.length||(V=e('<div class="'+n+'_nav_inner"></div>').append(I.children()).appendTo(I)),T.attr("tabindex","0"),f(),e(L).addClass(k),b){var j=e('<ul class="snapper_nextprev"><li class="snapper_nextprev_item"><a href="#prev" class="snapper_nextprev_prev">Prev</a></li><li class="snapper_nextprev_item"><a href="#next" class="snapper_nextprev_next">Next</a></li></ul>'),z=e(".snapper_nextprev_contain",L);z.length||(z=e(L)),j.appendTo(z)}e("a",this).bind("click",function(n){clearTimeout(C);var r=e(this).attr("href");if(e(this).is(".snapper_nextprev_next"))return n.preventDefault(),u(!0);if(e(this).is(".snapper_nextprev_prev"))return n.preventDefault(),u(!1);if(0===r.indexOf("#")&&r.length>1){n.preventDefault();var a=e(r,L);a.length&&(l(T[0],a[0].offsetLeft),P&&"replaceState"in t.history&&t.history.replaceState({},document.title,r))}}),e(this).bind("keydown",function(t){37!==t.keyCode&&38!==t.keyCode||(clearTimeout(C),t.preventDefault(),t.stopImmediatePropagation(),u(!1)),39!==t.keyCode&&40!==t.keyCode||(clearTimeout(C),t.preventDefault(),t.stopImmediatePropagation(),u(!0))});var A,E,N=!1;e(t).bind("resize",function(){var t=T[0].scrollLeft,e=q.length,n=D.width();void 0===A&&(A=Math.round(t/n*e)),E&&clearTimeout(E),E=setTimeout(function(){f(),l(T[0],q[A].offsetLeft,!0),A=E=void 0},50)}),I.length&&w();var O,Q=0;T.bind("scroll",function(t){Q=Date.now(),O=!0}),setInterval(function(){O&&Q<=Date.now()-150&&(d(),w(),O=!1)},150);var W=!1;T.bind("touchstart",function(){clearTimeout(C),W=!0}),T.bind("touchend",function(){W=!1,N&&!O&&(d(),O=!1)}),x(a())}else{var B,G=Array.prototype.slice.call(c,1),H=D.width()/F;switch(r){case"goto":B=G[0]%F,offset=H*B,l(T[0],offset,!1,function(){d(),"function"==typeof G[1]&&G[1]()});break;case"getIndex":p=Math.floor((T[0].scrollLeft+1)/H);break;case"updateWidths":f()}}}}),void 0!==p?p:f}}(this,jQuery);