!function(t,e){var r="snapper";e.fn[r]=function(a){function n(t,a){var n=e(t).find("."+r+"_item"),i=e(t).width(),s=[];return n.each(function(t){this.offsetLeft>=a-5&&this.offsetLeft<a+i-5&&s.push(this)}),e(s)}function i(t){return t.width()+parseFloat(t.css("margin-left"))+parseFloat(t.css("margin-right"))}function s(t){return t.height()+parseFloat(t.css("margin-bottom"))+parseFloat(t.css("margin-top"))}function o(t,a,i){i=i?i+"-":"";var s=n(t,a);e(t).trigger(r+"."+i+"snap",{activeSlides:s})}function l(a,i,s,l){d=!1,o(a,i);var f=function(){a.scrollLeft=i,e(a).closest("."+r).removeClass(r+"-looping"),e(a).trigger(r+".after-goto",{activeSlides:n(a,i)}),l&&l(),o(a,i,"after"),d=!0};!t.toss&&t.overthrow&&(t.toss=t.overthrow.toss),void 0===t.toss||s?(a.scrollLeft=i,f()):t.toss(a,{left:i,finished:f})}var f,p,c=arguments,d=!0,u="scroll-snap-type",v=t.CSS&&t.CSS.supports&&(t.CSS.supports(u,"mandatory")||t.CSS.supports("-webkit-"+u,"mandatory")||t.CSS.supports("-ms-"+u,"mandatory"));return f=this.each(function(){function n(){var t=S.attr("data-autoplay")||S.attr("data-snapper-autoplay"),e=!1;if(t){try{t=parseInt(t,10)}catch(t){e=!0}if(!t||e){throw new Error("Snapper: `data-autoplay` must have an natural number value.")}}return t}function f(){var e=D.attr("style");D.attr("style","");var r=q.eq(0).attr("style");q.eq(0).attr("style","");var a=b.width(),n=q.eq(0).width(),i=t.getComputedStyle(q[0],null),s=parseFloat(i.getPropertyValue("margin-left")),o=parseFloat(i.getPropertyValue("margin-right")),l=n+s+o;q.eq(0).attr("style",r),D.attr("style",e);var f=F/Math.round(a/l)*100,p=n/a*100,c=o/a*100,d=s/a*100,u=p+d+c,v=p/u,h=c/u,g=d/u;D.css("width",f+"%"),q.css("width",100/F*v+"%"),q.css("margin-left",100/F*g+"%"),q.css("margin-right",100/F*h+"%")}function d(){if(B)N=!0;else{var t=b[0].scrollLeft,e=D.width(),r=q[1]?q[1].offsetLeft:i(q.eq(0)),a=Math.round(t/r)*r,n=e-b.width();a>n&&(a=n),t!==a&&(v?(o(b[0],a),o(b[0],a,"after")):l(b[0],a)),N=!1}}function u(t){var e=b[0].scrollLeft,a=D.width()-i(b)-5;return t?e>=a?(S.addClass(r+"-looping"),m()):h():0===e?(S.addClass(r+"-looping"),y()):g()}function h(){l(b[0],b[0].scrollLeft+D.width()/F,!1,function(){b.trigger(r+".after-next")})}function g(){l(b[0],b[0].scrollLeft-D.width()/F,!1,function(){b.trigger(r+".after-prev")})}function m(){l(b[0],0)}function y(){l(b[0],D.width()-b.width())}function _(e,r,a){void 0!==t.toss?t.toss(e,{left:r,top:a}):(e.scrollLeft=r,e.scrollTop=a)}function w(t){var e=(new Date).getTime();if(!(!t&&O&&e-O<200)){O=e;var r=b[0].scrollLeft,a=i(D),n=i(I),o=s(I),l=Math.round(r/a*F)||0,f=I.find("a").removeClass(M).eq(l).addClass(M),p=f[0].offsetLeft-n/2,c=f[0].offsetTop-o/2;_(V[0],p,c)}}function x(t){t&&(C=setTimeout(function(){var t=n();t&&(u(!0),x(t))},t))}if(void 0===p){var C,L=this,S=e(L),T=S.is("[data-"+r+"-nextprev]"),b=e("."+r+"_pane",L),k=r+"-enhanced",D=b.find("."+r+"_items"),q=D.children();q.addClass(r+"_item");var F=q.length,I=e("."+r+"_nav",L),M=r+"_nav_item-selected",P="false"!==S.attr("data-snapper-deeplinking");if("string"!=typeof a){var V=I.find("."+r+"_nav_inner");if(V.length||(V=e('<div class="'+r+'_nav_inner"></div>').append(I.children()).appendTo(I)),b.attr("tabindex","0"),f(),e(L).addClass(k),T){var j=e('<ul class="snapper_nextprev"><li class="snapper_nextprev_item"><a href="#prev" class="snapper_nextprev_prev">Prev</a></li><li class="snapper_nextprev_item"><a href="#next" class="snapper_nextprev_next">Next</a></li></ul>'),z=e(".snapper_nextprev_contain",L);z.length||(z=e(L)),j.appendTo(z)}e("a",this).bind("click",function(r){clearTimeout(C);var a=e(this).attr("href");if(e(this).is(".snapper_nextprev_next"))return r.preventDefault(),u(!0);if(e(this).is(".snapper_nextprev_prev"))return r.preventDefault(),u(!1);if(0===a.indexOf("#")&&a.length>1){r.preventDefault();var n=e(a,L);n.length&&(l(b[0],n[0].offsetLeft),P&&"replaceState"in t.history&&t.history.replaceState({},document.title,a))}}),e(this).bind("keydown",function(t){37!==t.keyCode&&38!==t.keyCode||(clearTimeout(C),t.preventDefault(),t.stopImmediatePropagation(),u(!1)),39!==t.keyCode&&40!==t.keyCode||(clearTimeout(C),t.preventDefault(),t.stopImmediatePropagation(),u(!0))});var A,E,N=!1;if(e(t).bind("resize",function(){var t=b[0].scrollLeft,e=q.length,r=D.width();void 0===A&&(A=Math.round(t/r*e)),E&&clearTimeout(E),E=setTimeout(function(){f(),l(b[0],q[A].offsetLeft,!0),A=E=void 0},50)}),I.length){var O;w(),b.bind("scroll",w)}var Q,W=0;b.bind("scroll",function(t){W=(new Date).getTime(),Q=!0}),setInterval(function(){Q&&W<=(new Date).getTime()-150&&(d(),w&&w(!0),Q=!1)},150);var B=!1;b.bind("touchstart",function(){clearTimeout(C),B=!0}),b.bind("touchend",function(){B=!1,N&&!Q&&(d(),Q=!1)}),x(n())}else{var G,H=Array.prototype.slice.call(c,1),J=D.width()/F;switch(a){case"goto":G=H[0]%F,offset=J*G,l(b[0],offset,!1,function(){d(),"function"==typeof H[1]&&H[1]()});break;case"getIndex":p=Math.floor((b[0].scrollLeft+1)/J);break;case"updateWidths":f()}}}}),void 0!==p?p:f}}(this,jQuery);