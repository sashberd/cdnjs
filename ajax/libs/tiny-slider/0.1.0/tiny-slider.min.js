/**
 * tiny-slider
 * @version 0.0.0
 * @author William Lin
 * @license The MIT License (MIT)
 * @todo lazyload
 **/
!function(t){window.tinySlider=t()}(function(){"usr strict";function t(){for(var t,e,i,n=arguments[0]||{},s=1,a=arguments.length;a>s;s++)if(null!==(t=arguments[s]))for(e in t)i=t[e],n!==i&&void 0!==i&&(n[e]=i);return n}function e(t,e,i){t=t||window;var n=e+Math.round(99999999*Math.random());t.attachEvent?(t["e"+n]=i,t[n]=function(){t["e"+n](window.event)},t.attachEvent("on"+e,t[n])):t.addEventListener(e,i,!1)}function i(t,e){var i=" "+e;-1===t.className.indexOf(i)&&(t.className+=i)}function n(t,e){var i=" "+e;-1!==t.className.indexOf(i)&&(t.className=t.className.replace(i,""))}function s(t,e){for(var i=[],n=0;n<e.length;n++){var s=e[n];i.push(t[s])}return i}function a(){var t=document,e=window,i=e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth;return i}function o(t,e,i){var n=a();if(void 0===t.length||void 0===e||t.length!==e.length)return i;if(n<t[0])return i;if(n>=t[t.length-1])return e[e.length-1];for(var s=0;s<t.length-1;s++)if(n>=t[s]&&n<=t[s+1])return e[s]}function h(t){for(var e=document.documentElement,i=0;i<t.length;i++)if(t[i]in e.style)return t[i]}function d(t){for(var e=void 0===t.container.length?[t.container]:t.container,i=0;i<e.length;i++){var n=t;n.container=e[i];var s=new r(n)}}function r(i){i=t({container:document.querySelector(".slider"),items:1,fixedWidth:!1,maxContainerWidth:!1,slideByPage:!1,nav:!0,navText:["prev","next"],dots:!0,arrowKeys:!1,speed:250,autoplay:!1,autoplayTimeout:5e3,autoplayDirection:"forward",loop:!0,responsive:!1},i||{}),this.container=i.container,this.children=this.container.children,this.childrenLength=this.childrenUpdatedLength=i.childrenLength=this.children.length,this.fixedWidth=i.fixedWidth,this.nav=i.nav,this.navText=i.navText,this.dots=i.dots,this.arrowKeys=i.arrowKeys,this.autoplay=i.autoplay,this.autoplayTimeout=i.autoplayTimeout,this.autoplayDirection="forward"===i.autoplayDirection?1:-1,this.loop=i.loop,this.slideByPage=i.slideByPage,this.responsive=this.fixedWidth?!1:i.responsive,this.bp=this.responsive&&"object"==typeof this.responsive?Object.keys(this.responsive):!1,this.vals=this.responsive&&"object"==typeof this.responsive?s(this.responsive,this.bp):!1,this.itemsMax=void 0!==this.vals.length?Math.max.apply(Math,this.vals):i.items,this.items=o(this.bp,this.vals,i.items),this.speed=this.slideByPage?i.speed*this.items:i.speed,this.animating=!1,this.index=0,this.fixedWidth&&(this.items=Math.floor(this.container.parentNode.offsetWidth/this.fixedWidth),i.maxContainerWidth?this.itemsMax=Math.ceil(i.maxContainerWidth/this.fixedWidth):this.loop=!1),this.childrenLength<this.itemsMax&&(this.itemsMax=this.childrenLength),this.childrenLength<this.items&&(this.items=this.childrenLength),this.init();var n=this,a;if(e(window,"resize",function(){clearTimeout(a),a=setTimeout(function(){n.items=n.fixedWidth?Math.floor(n.container.parentNode.offsetWidth/n.fixedWidth):o(n.bp,n.vals,i.items),n.childrenLength<n.items&&(n.items=n.childrenLength),n.speed=n.slideByPage?i.speed*n.items:i.speed,r.prototype.updateContainer(n),n.dots&&(r.prototype.updateDots(n),r.prototype.updateDotsStatus(n))},100)}),this.nav&&(e(this.next,"click",function(){r.prototype.onNavClick(n,1)}),e(this.prev,"click",function(){r.prototype.onNavClick(n,-1)})),this.arrowKeys&&e(document,"keydown",function(t){t=t||window.event,37===t.keyCode?r.prototype.onNavClick(n,-1):39===t.keyCode&&r.prototype.onNavClick(n,1)}),this.dots)for(var h=0;h<this.allDots.length;h++)e(this.allDots[h],"click",function(t){for(var e,i=0;i<n.allDots.length;i++){var s=t.currentTarget?t.currentTarget:t.srcElement;n.allDots[i]===s&&(e=i)}r.prototype.onDotClick(n,e)});this.autoplay&&setInterval(function(){r.prototype.onNavClick(n,n.autoplayDirection)},n.autoplayTimeout)}Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e=[],i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e});var l=h(["transitionDuration","MozTransitionDuration","WebkitTransitionDuration"]);return r.prototype={init:function(){i(this.container,"tiny-content");var t=this.container.parentNode,e=this.container.nextSibling,n=document.createElement("div"),s=n.cloneNode(!0);if(s.className="tiny-slider",s.appendChild(this.container),e?t.insertBefore(s,e):t.appendChild(s),this.dots){var a=n.cloneNode(!0),o=n.cloneNode(!0);a.className="tiny-dots",o.className="tiny-dot";for(var h=this.childrenLength-1;h>=0;h--){var d=h>0?o.cloneNode(!0):o;a.appendChild(d)}s.appendChild(a),this.allDots=a.querySelectorAll(".tiny-dot")}if(this.nav){var r=n.cloneNode(!0),l=n.cloneNode(!0),c=n.cloneNode(!0);r.className="tiny-nav",l.className="tiny-prev",c.className="tiny-next",2===this.navText.length&&(l.innerHTML=this.navText[0],c.innerHTML=this.navText[1]),r.appendChild(l),r.appendChild(c),s.appendChild(r),this.prev=l,this.next=c}if(this.loop){for(var p=[],f=[],u=this.container.children[0],m=0;m<this.itemsMax;m++){var v=this.children[m].cloneNode(!0),x=this.children[this.children.length-1-m].cloneNode(!0);p.push(v),f.push(x)}for(var g=0;g<p.length;g++)this.container.appendChild(p[g]);for(var y=f.length-1;y>=0;y--)this.container.insertBefore(f[y],u);this.childrenUpdatedLength=this.container.children.length,this.children=this.container.children}for(var L=this.fixedWidth?this.fixedWidth+"px":100/this.childrenUpdatedLength+"%",W=0;W<this.childrenUpdatedLength;W++)this.children[W].style.width=L;this.updateContainer(this),this.dots&&(this.updateDots(this),this.updateDotsStatus(this))},updateContainer:function(t){if(t.loop){var e=t.fixedWidth?-(t.itemsMax*t.fixedWidth)+"px":-(100*t.itemsMax/t.items)+"%";t.container.style.marginLeft=e}else t.index=Math.max(0,Math.min(t.index,t.childrenLength-t.items));var i=t.fixedWidth?t.fixedWidth*t.childrenUpdatedLength+"px":100*t.childrenUpdatedLength/t.items+"%",n=t.fixedWidth?t.fixedWidthGetContainerLeft(t):-(100*t.index/t.items)+"%";t.container.style.width=i,t.container.style.left=n},updateDots:function(t){for(var e=Math.ceil(t.childrenLength/t.items),s=t.allDots,a=0;a<s.length;a++)e>a?n(s[a],"tiny-hide"):i(s[a],"tiny-hide")},updateDotsStatus:function(t){var e,s=t.getAbsIndex(t),a=t.allDots,o=Math.ceil(t.childrenLength/t.items);if(e=t.fixedWidth&&s+t.items+1>=t.childrenUpdatedLength?o-1:Math.floor(s/t.items),!t.loop){var h=/^-?[0-9]+$/,d=h.test(t.childrenLength/t.items);d||t.index!==t.childrenLength-t.items||(e+=1)}for(var r=0;o>r;r++)r===e?i(a[r],"tiny-active"):n(a[r],"tiny-active")},onNavClick:function(t,e){if(!t.animating){l&&(t.container.style[l]=t.speed/1e3+"s",t.animating=!0),t.slideByPage&&(e*=t.items),t.index+=e,t.loop||(t.index=Math.max(0,Math.min(t.index,t.childrenLength-t.items)));var i=t.fixedWidth?t.fixedWidthGetContainerLeft(t):-(100*t.index/t.items)+"%";t.container.style.left=i,t.loop&&setTimeout(function(){r.prototype.navClickFallback(t)},t.speed),setTimeout(function(){t.dots&&r.prototype.updateDotsStatus(t),t.animating=!1},t.speed)}},fixedWidthGetContainerLeft:function(t){var e=t.getAbsIndex(t),i=t.container.parentNode.offsetWidth;return e+t.items+1>=t.childrenUpdatedLength?-(t.childrenUpdatedLength*t.fixedWidth-i)+"px":-(t.fixedWidth*t.index)+"px"},getAbsIndex:function(t){var e=t.index;return 0>e?e+=t.childrenLength:e>=t.childrenLength&&(e-=t.childrenLength),e},navClickFallback:function(t){l&&(t.container.style[l]="0s");var e=t.slideByPage?t.index<-(t.itemsMax-t.items):t.index<=-t.itemsMax,i=t.slideByPage?t.index>t.childrenLength+t.itemsMax-2*t.items-1:t.index>=t.childrenLength+t.itemsMax-t.items;t.fixedWidth&&t.itemsMax&&!t.slideByPage&&(i=t.index>=t.childrenLength+t.itemsMax-t.items-1),e&&(t.index+=t.childrenLength),i&&(t.index-=t.childrenLength);var n=t.fixedWidth?-(t.fixedWidth*t.index)+"px":-(100*t.index/t.items)+"%";t.container.style.left=n},onDotClick:function(t,e){if(!t.animating){l&&(t.container.style[l]=t.speed/1e3+"s",t.animating=!0),t.index=t.loop?e*t.items:Math.min(t.index,t.childrenLength-t.items);var s=t.fixedWidth?t.fixedWidthGetContainerLeft(t):-(100*t.index/t.items)+"%";t.container.style.left=s,setTimeout(function(){for(var s=0;s<t.allDots.length;s++)s===e?i(t.allDots[s],"tiny-active"):n(t.allDots[s],"tiny-active");t.animating=!1},t.speed)}}},d});