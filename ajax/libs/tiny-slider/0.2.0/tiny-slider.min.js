/**
 * tiny-slider
 * @version 0.2.0
 * @author William Lin
 * @license The MIT License (MIT)
 **/
!function(t){window.tinySlider=t()}(function(){"usr strict";function t(){for(var t,e,i,n=arguments[0]||{},a=1,o=arguments.length;o>a;a++)if(null!==(t=arguments[a]))for(e in t)i=t[e],n!==i&&void 0!==i&&(n[e]=i);return n}function e(t,e,i){t=t||window;var n=e+Math.round(99999999*Math.random());t.attachEvent?(t["e"+n]=i,t[n]=function(){t["e"+n](window.event)},t.attachEvent("on"+e,t[n])):t.addEventListener(e,i,!1)}function i(t,e){var i=" "+e;-1===t.className.indexOf(i)&&(t.className+=i)}function n(t,e){var i=" "+e;-1!==t.className.indexOf(i)&&(t.className=t.className.replace(i,""))}function a(t){return t&&"object"==typeof t?Object.keys(t):!1}function o(t,e){if(t&&"object"==typeof t){for(var i=[],n=0;n<e.length;n++){var a=e[n];i.push(t[a])}return i}return!1}function s(){var t=document,e=window,i=e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth;return i}function r(t,e,i){var n=s();if(void 0===t.length||void 0===e||t.length!==e.length)return i;if(n<t[0])return i;if(n>=t[t.length-1])return e[e.length-1];for(var a=0;a<t.length-1;a++)if(n>=t[a]&&n<=t[a+1])return e[a]}function l(t){for(var e=document.documentElement,i=0;i<t.length;i++)if(t[i]in e.style)return t[i]}function c(t){var e;if(null!==t.container){e=void 0===t.container.length?[t.container]:t.container;for(var i=0;i<e.length;i++){var n=t;n.container=e[i];var a=new h(n)}}}function h(i){i=t({container:document.querySelector(".slider"),items:1,fixedWidth:!1,maxContainerWidth:!1,slideByPage:!1,nav:!0,navText:["prev","next"],navContainer:!1,dots:!0,dotsContainer:!1,arrowKeys:!1,speed:250,autoplay:!1,autoplayTimeout:5e3,autoplayDirection:"forward",loop:!0,responsive:!1},i||{}),this.container=i.container,this.children=this.container.children,this.cl=this.cul=i.cl=this.children.length,this.fw=i.fixedWidth,this.nav=i.nav,this.navText=i.navText,this.navContainer=i.navContainer,this.dots=i.dots,this.dotsContainer=i.dotsContainer,this.arrowKeys=i.arrowKeys,this.speed=i.speed,this.autoplay=i.autoplay,this.autoplayTimeout=i.autoplayTimeout,this.autoplayDirection="forward"===i.autoplayDirection?1:-1,this.loop=i.loop,this.slideByPage=i.slideByPage,this.responsive=this.fw?!1:i.responsive,this.bp=a(this.responsive),this.vals=o(this.responsive,this.bp),this.itemsMax=void 0!==this.vals.length?Math.max.apply(Math,this.vals):i.items,this.items=r(this.bp,this.vals,i.items),this.animating=!1,this.index=0,this.fw&&(this.items=Math.floor(this.container.parentNode.offsetWidth/this.fw),i.maxContainerWidth?this.itemsMax=Math.ceil(i.maxContainerWidth/this.fw):this.loop=!1),this.cl<this.itemsMax&&(this.itemsMax=this.cl),this.cl<this.items&&(this.items=this.cl),this.init();var n=this,s;if(e(window,"resize",function(){clearTimeout(s),s=setTimeout(function(){n.items=n.fw?Math.floor(n.container.parentNode.offsetWidth/n.fw):r(n.bp,n.vals,i.items),n.cl<n.items&&(n.items=n.cl),n.speed=n.slideByPage?i.speed*n.items:i.speed,h.prototype.updateContainer(n),n.dots&&!n.dotsContainer&&(h.prototype.updateDots(n),h.prototype.updateDotsStatus(n))},100)}),this.nav&&(e(this.next,"click",function(){h.prototype.onNavClick(n,1)}),e(this.prev,"click",function(){h.prototype.onNavClick(n,-1)})),this.arrowKeys&&e(document,"keydown",function(t){t=t||window.event,37===t.keyCode?h.prototype.onNavClick(n,-1):39===t.keyCode&&h.prototype.onNavClick(n,1)}),this.dots)for(var l=0;l<this.allDots.length;l++)e(this.allDots[l],"click",function(t){for(var e,i=0;i<n.allDots.length;i++){var a=t.currentTarget?t.currentTarget:t.srcElement;n.allDots[i]===a&&(e=i)}h.prototype.onDotClick(n,e)});this.autoplay&&setInterval(function(){h.prototype.onNavClick(n,n.autoplayDirection)},n.autoplayTimeout)}Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e=[],i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e});var d=l(["transitionDuration","MozTransitionDuration","WebkitTransitionDuration"]);return h.prototype={init:function(){i(this.container,"tiny-content");var t=this.container.parentNode,e=this.container.nextSibling,n=document.createElement("div"),a=n.cloneNode(!0);if(a.className="tiny-slider",a.appendChild(this.container),e?t.insertBefore(a,e):t.appendChild(a),this.dots)if(this.dotsContainer)this.allDots=this.dotsContainer.children,i(this.allDots[0],"tiny-active");else{var o=n.cloneNode(!0),s=n.cloneNode(!0);o.className="tiny-dots",s.className="tiny-dot";for(var r=this.cl-1;r>=0;r--){var l=r>0?s.cloneNode(!0):s;o.appendChild(l)}a.appendChild(o),this.allDots=o.querySelectorAll(".tiny-dot")}if(this.nav)if(this.navContainer){var c=this.navContainer.children;this.prev=c[0],this.next=c[1]}else{var c=n.cloneNode(!0),h=n.cloneNode(!0),d=n.cloneNode(!0);c.className="tiny-nav",h.className="tiny-prev",d.className="tiny-next",2===this.navText.length&&(h.innerHTML=this.navText[0],d.innerHTML=this.navText[1]),c.appendChild(h),c.appendChild(d),a.appendChild(c),this.prev=h,this.next=d}if(this.loop){for(var p=[],f=[],u=this.container.children[0],m=0;m<this.itemsMax;m++){var v=this.children[m].cloneNode(!0),y=this.children[this.children.length-1-m].cloneNode(!0);p.push(v),f.push(y)}for(var x=0;x<p.length;x++)this.container.appendChild(p[x]);for(var w=f.length-1;w>=0;w--)this.container.insertBefore(f[w],u);this.cul=this.container.children.length,this.children=this.container.children}for(var g=this.fw?this.fw+"px":100/this.cul+"%",C=0;C<this.cul;C++)this.children[C].style.width=g;this.updateContainer(this),this.dots&&!this.dotsContainer&&(this.updateDots(this),this.updateDotsStatus(this))},updateContainer:function(t){if(t.loop){var e=t.fw?-(t.itemsMax*t.fw)+"px":-(100*t.itemsMax/t.items)+"%";t.container.style.marginLeft=e}else t.index=Math.max(0,Math.min(t.index,t.cl-t.items));var i=t.fw?t.fw*t.cul+"px":100*t.cul/t.items+"%",n=t.fw?t.fwGetContainerLeft(t):-(100*t.index/t.items)+"%";t.container.style.width=i,t.container.style.left=n},updateDots:function(t){for(var e=Math.ceil(t.cl/t.items),a=t.allDots,o=0;o<a.length;o++)e>o?n(a[o],"tiny-hide"):i(a[o],"tiny-hide")},updateDotsStatus:function(t){var e,a=t.getAbsIndex(t),o=t.allDots,s=t.dotsContainer?t.cl:Math.ceil(t.cl/t.items);if(e=t.dotsContainer?a:t.fw&&a+t.items+1>=t.cul?s-1:Math.floor(a/t.items),!t.loop&&!t.dotsContainer){var r=/^-?[0-9]+$/,l=r.test(t.cl/t.items);l||t.index!==t.cl-t.items||(e+=1)}for(var c=0;s>c;c++)c===e?i(o[c],"tiny-active"):n(o[c],"tiny-active")},onNavClick:function(t,e){if(!t.animating){var i=t.index;t.slideByPage&&(e*=t.items),t.index+=e,t.loop||(t.index=Math.max(0,Math.min(t.index,t.cl-t.items))),t.indexGap=Math.abs(t.index-i);var n=t.fw?t.fwGetContainerLeft(t):-(100*t.index/t.items)+"%";d&&(t.container.style[d]=t.speed*t.indexGap/1e3+"s",t.animating=!0),t.container.style.left=n,t.loop&&setTimeout(function(){h.prototype.clickFallback(t)},t.speed*t.indexGap),setTimeout(function(){t.dots&&h.prototype.updateDotsStatus(t),t.animating=!1},t.speed*t.indexGap)}},fwGetContainerLeft:function(t){var e=t.getAbsIndex(t),i=t.container.parentNode.offsetWidth;return e+t.items+1>=t.cul?-(t.cul*t.fw-i)+"px":-(t.fw*t.index)+"px"},getAbsIndex:function(t){var e=t.index;return 0>e?e+=t.cl:e>=t.cl&&(e-=t.cl),e},clickFallback:function(t){var e=t.slideByPage?t.index<-(t.itemsMax-t.items):t.index<=-t.itemsMax,i=t.slideByPage?t.index>t.cl+t.itemsMax-2*t.items-1:t.index>=t.cl+t.itemsMax-t.items;t.fw&&t.itemsMax&&!t.slideByPage&&(i=t.index>=t.cl+t.itemsMax-t.items-1),e&&(t.index+=t.cl),i&&(t.index-=t.cl);var n=t.fw?-(t.fw*t.index)+"px":-(100*t.index/t.items)+"%";d&&(t.container.style[d]="0s"),t.container.style.left=n},onDotClick:function(t,e){if(!t.animating){var a=t.index;t.loop?t.index=t.dotsContainer?e:e*t.items:t.dotsContainer?t.index=Math.min(e,t.cl-t.items):t.index=Math.min(e*t.items,t.cl-t.items),t.indexGap=Math.abs(t.index-a);var o=t.fw?t.fwGetContainerLeft(t):-(100*t.index/t.items)+"%";d&&(t.container.style[d]=t.speed*t.indexGap/1e3+"s",t.animating=!0),t.container.style.left=o,setTimeout(function(){for(var a=0;a<t.allDots.length;a++)a===e?i(t.allDots[a],"tiny-active"):n(t.allDots[a],"tiny-active");h.prototype.clickFallback(t),t.animating=!1},t.speed*t.indexGap)}}},c});