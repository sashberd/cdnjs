!function(t,e){function n(e,n,l){var f=this;n=n||{};var h=t.extend({overwriteCache:!1,complete:null,success:null,error:function(){t(this).each(function(){t(this).html(h.errorMessage)})},errorMessage:"There was an error loading the template.",paged:!1,pageNo:1,elemPerPage:10},l);if("array"===t.type(n))return i.call(this,e,n,h);if(!a(e))var p=t(e);var u=h.isFile||void 0===h.isFile&&(!p||0==p.length);return u&&!h.overwriteCache&&g[e]?r(e,f,n,h):u&&!h.overwriteCache&&g.hasOwnProperty(e)?o(e,f,n,h):u?c(e,f,n,h):s(p,f,n,h),this}function a(t){return"string"==typeof t&&t.indexOf("/")>-1}function i(e,a,i){var o=this;o.html("");var r=a.length,c=0;if((i=i||{}).paged){var s=(i.pageNo-1)*i.elemPerPage;a=a.slice(s,s+i.elemPerPage)}var l=t.extend({},i,{complete:function(){o.append(this.html()),++c==r&&i&&"function"==typeof i.complete&&i.complete()}});return t(a).each(function(){var a=t("<div/>");n.call(a,e,this,l)}),this}function o(t,e,n,a){$[t]?$[t].push({data:n,selection:e,settings:a}):$[t]=[{data:n,selection:e,settings:a}]}function r(t,e,n,a){$templateContainer=g[t].clone(),l.call(e,$templateContainer,n,a.complete),"function"==typeof a.success&&a.success()}function c(e,n,a,i){var o=t("<div/>");g[e]=null,o.load(e,function(t,r,c){"error"==r?f(e,n,a,i):h(o,e,n,a,i)})}function s(e,n,a,i){var o=t("<div/>");e.is("script")&&(e=t.parseHTML(t.trim(e.html()))),o.html(e),l.call(n,o,a,i.complete),"function"==typeof i.success&&i.success()}function l(e,n,a){p(e,n),t(this).each(function(){t(this).html(e.html())}),"function"==typeof a&&a.call(t(this))}function f(e,n,a,i){if("function"==typeof i.error&&i.error.call(n),t($[e]).each(function(t,e){"function"==typeof e.settings.error&&e.settings.error.call(e.selection)}),"function"==typeof i.complete){i.complete.call($that);var o}for(;$[e]&&(o=$[e].shift());)"function"==typeof o.settings.complete&&o.settings.complete.call(o.selection);$[e].length>0&&($[e]=[])}function h(t,e,n,a,i){g[e]=t.clone(),l.call(n,t,a,i.complete),"function"==typeof i.success&&i.success.call($that);for(var o;$[e]&&(o=$[e].shift());)l.call(o.selection,g[e].clone(),o.data,o.settings.complete),"function"==typeof o.settings.success&&o.settings.success.call(o.selection)}function p(e,n){u("data-content",e,n=n||{},function(t,e){t.html(v(t,e,"content"))}),u("data-content-append",e,n,function(t,e){t.append(v(t,e,"content"))}),u("data-content-prepend",e,n,function(t,e){t.prepend(v(t,e,"content"))}),u("data-src",e,n,function(t,e){t.attr("src",v(t,e,"src"))},function(t){t.remove()}),u("data-alt",e,n,function(t,e){t.attr("alt",v(t,e,"alt"))}),u("data-link",e,n,function(e,n){var a=t("<a/>");a.attr("href",v(e,n,"link")),a.html(e.html()),e.html(a)}),u("data-link-wrap",e,n,function(e,n){var a=t("<a/>");a.attr("href",v(e,n,"link-wrap")),e.wrap(a)}),u("data-options",e,n,function(e,n){t(n).each(function(){$option=t("<option/>"),$option.attr("value",this).text(this).appendTo(e)})}),d(e,n)}function u(e,n,a,i,o){t("["+e+"]",n).each(function(){$this=t(this);var n=$this.attr(e);$this.removeAttr(e);var r=m(a,n);r&&i?i($this,r):o&&o($this)})}function d(e,n){t("[data-template-bind]",e).each(function(){$this=t(this);var e=t.parseJSON($this.attr("data-template-bind"));$this.removeAttr("data-template-bind"),t(e).each(function(){var e=m(n,this.value);if(void 0!==e&&this.attribute)switch(this.formatter&&y[this.formatter]&&(e=y[this.formatter](e,this.formatOptions)),this.attribute){case"content":$this.html(e);break;case"contentAppend":$this.append(e);break;case"contentPrepend":$this.prepend(e);break;case"options":t(e).each(function(){$option=t("<option/>"),$option.attr("value",this).text(this).appendTo($this)});break;default:$this.attr(this.attribute,e)}})})}function m(t,e){for(var n,a=e.split("."),i=t;(n=a.shift())&&i;)i=i[n];return i}function v(t,e,n){var a=t.attr("data-format-target");if(a==n||!a&&"content"==n){var i=t.attr("data-format");if(i&&"function"==typeof y[i]){var o=t.attr("data-format-options");return y[i](e,o)}}return e}var g={},$={},y={};t.fn.loadTemplate=n,t.addTemplateFormatter=function(e,n){n?y[e]=n:y=t.extend(y,e)}}(jQuery);