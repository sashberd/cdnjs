!function(t,a){var e={},n={getFormattedDateString:function(t,a){return a=a||"MMMM yyyy",new Date(t).toLocaleDateString(a)}};t.fn.loadTemplate=function(a,r,i){function c(a,e){l(a,e),o.each(function(){t(this).html(a.html())}),f.callback&&"function"==typeof f.callback&&f.callback()}function l(a,e){function r(e,n,r,i){t("["+e+"]",a).each(function(a,c){var l=t(c).attr(e);t(c).removeAttr(e),n[l]&&r?r(t(c),n[l]):i&&i(t(c))})}r("data-content",e=e||{},function(t,a){var e=t.attr("data-format");if(e&&"function"==typeof n[e]){var r=t.attr("data-format-template");t.html(n[e](a,r))}else t.html(a)}),r("data-src",e,function(t,a){t.attr("src",a)},function(t){t.remove()}),r("data-alt",e,function(t,a){t.attr("alt",a)}),r("data-link",e,function(a,e){var n=t("<a/>");n.attr("href",e),n.html(a.html()),a.html(n)}),r("data-link-wrap",e,function(a,e){var n=t("<a/>");n.attr("href",e),a.wrap(n)})}var o=this,f=t.extend({overwriteCache:!1,callback:null,errorMessage:"There was an error loading the template"},i);if(!function(t){return"string"==typeof t&&t.indexOf("/")>-1}(a))var u=t(a);var h=f.isFile||void 0===f.isFile&&(!u||0==u.length);if(h&&!f.overwriteCache&&e[a])c(m=e[a],r);else if(h)(m=t("<div/>")).load(a,function(n,i,l){"error"==i?(o.each(function(){t(this).html(f.errorMessage)}),f.callback&&"function"==typeof f.callback&&f.callback()):(e[a]=m,c(m,r))});else{var m=t("<div/>");u.is("script")&&(u=t.parseHTML(u.html().trim())),m.html(u),c(m,r)}return this},t.addTemplateFormatter=function(a,e){e?n[a]=e:n=t.extend(n,a)}}(jQuery);