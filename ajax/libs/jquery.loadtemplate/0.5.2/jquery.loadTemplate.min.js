!function(t,e){function n(e,n,l){var f=this;n=n||{};var u=t.extend({overwriteCache:!1,complete:null,success:null,error:function(){t(this).each(function(){t(this).html(u.errorMessage)})},errorMessage:"There was an error loading the template.",paged:!1,pageNo:1,elemPerPage:10},l);if("array"===t.type(n))return i.call(this,e,n,u);if(!a(e))var h=t(e);var p=u.isFile||void 0===u.isFile&&(!h||0==h.length);return p&&!u.overwriteCache&&$[e]?r(e,f,n,u):p&&!u.overwriteCache&&$.hasOwnProperty(e)?o(e,f,n,u):p?c(e,f,n,u):s(h,f,n,u),this}function a(t){return"string"==typeof t&&t.indexOf("/")>-1}function i(e,a,i){var o=this;o.html("");var r=a.length,c=0;if((i=i||{}).paged){var s=(i.pageNo-1)*i.elemPerPage;a=a.slice(s,s+i.elemPerPage)}var l=t.extend({},i,{complete:function(){o.append(this.html()),++c==r&&i&&"function"==typeof i.complete&&i.complete()}});return t(a).each(function(){var a=t("<div/>");n.call(a,e,this,l)}),this}function o(t,e,n,a){y[t]?y[t].push({data:n,selection:e,settings:a}):y[t]=[{data:n,selection:e,settings:a}]}function r(t,e,n,a){$templateContainer=$[t].clone(),l.call(e,$templateContainer,n,a.complete),"function"==typeof a.success&&a.success()}function c(e,n,a,i){var o=t("<div/>");$[e]=null,o.load(e,function(t,r,c){"error"==r?f(e,n,a,i):u(o,e,n,a,i)})}function s(e,n,a,i){var o=t("<div/>");e.is("script")&&(e=t.parseHTML(t.trim(e.html()))),o.html(e),l.call(n,o,a,i.complete),"function"==typeof i.success&&i.success()}function l(e,n,a){h(e,n),t(this).each(function(){t(this).html(e.html())}),"function"==typeof a&&a.call(t(this))}function f(e,n,a,i){if("function"==typeof i.error&&i.error.call(n),t(y[e]).each(function(t,e){"function"==typeof e.settings.error&&e.settings.error.call(e.selection)}),"function"==typeof i.complete){i.complete.call($that);var o}for(;y[e]&&(o=y[e].shift());)"function"==typeof o.settings.complete&&o.settings.complete.call(o.selection);y[e].length>0&&(y[e]=[])}function u(t,e,n,a,i){$[e]=t.clone(),l.call(n,t,a,i.complete),"function"==typeof i.success&&i.success.call($that);for(var o;y[e]&&(o=y[e].shift());)l.call(o.selection,$[e].clone(),o.data,o.settings.complete),"function"==typeof o.settings.success&&o.settings.success.call(o.selection)}function h(e,n){p("data-content",e,n=n||{},function(t,e){t.html(g(t,e,"content"))}),p("data-content-append",e,n,function(t,e){t.append(g(t,e,"content"))}),p("data-content-prepend",e,n,function(t,e){t.prepend(g(t,e,"content"))}),p("data-src",e,n,function(t,e){t.attr("src",g(t,e,"src"))},function(t){t.remove()}),p("data-alt",e,n,function(t,e){t.attr("alt",g(t,e,"alt"))}),p("data-link",e,n,function(e,n){var a=t("<a/>");a.attr("href",g(e,n,"link")),a.html(e.html()),e.html(a)}),p("data-link-wrap",e,n,function(e,n){var a=t("<a/>");a.attr("href",g(e,n,"link-wrap")),e.wrap(a)}),p("data-options",e,n,function(e,n){t(n).each(function(){$option=t("<option/>"),$option.attr("value",this).text(this).appendTo(e)})}),d(e,n)}function p(e,n,a,i,o){t("["+e+"]",n).each(function(){$this=t(this);var n=$this.attr(e);$this.removeAttr(e);var r=v(a,n);r&&i?i($this,r):o&&o($this)})}function d(e,n){t("[data-template-bind]",e).each(function(){$this=t(this);var e=t.parseJSON($this.attr("data-template-bind"));$this.removeAttr("data-template-bind"),t(e).each(function(){if("object"==typeof this.value)e=v(n,this.value.data);else var e=v(n,this.value);if(void 0!==e&&this.attribute)switch(this.attribute){case"content":$this.html(m(e,this));break;case"contentAppend":$this.append(m(e,this));break;case"contentPrepend":$this.prepend(m(e,this));break;case"options":var a=this;t(e).each(function(){$option=t("<option/>"),$option.attr("value",this[a.value.value]).text(m(this[a.value.content],a)).appendTo($this)});break;default:$this.attr(this.attribute,m(e,this))}})})}function m(t,e){return e.formatter&&b[e.formatter]?b[e.formatter](t,e.formatOptions):t}function v(t,e){for(var n,a=e.split("."),i=t;(n=a.shift())&&i;)i=i[n];return i}function g(t,e,n){var a=t.attr("data-format-target");if(a==n||!a&&"content"==n){var i=t.attr("data-format");if(i&&"function"==typeof b[i]){var o=t.attr("data-format-options");return b[i](e,o)}}return e}var $={},y={},b={};t.fn.loadTemplate=n,t.addTemplateFormatter=function(e,n){n?b[e]=n:b=t.extend(b,e)}}(jQuery);