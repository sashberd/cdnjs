!function(t,e){function n(e,o,i){function s(e,n,c){l(e,n),t(this).each(function(){t(this).html(e.html())}),"function"==typeof c&&c.call(t(this))}function l(e,n){function c(n,c,a,r){t("["+n+"]",e).each(function(e,o){var i=t(o).attr(n);t(o).removeAttr(n),c[i]&&a?a(t(o),c[i]):r&&r(t(o))})}function a(t,e,n){var c=t.attr("data-format-target");if(c==n||!c&&"content"==n){var a=t.attr("data-format");if(a&&"function"==typeof r[a]){var o=t.attr("data-format-template");return r[a](e,o)}}return e}c("data-content",n=n||{},function(t,e){t.html(a(t,e,"content"))}),c("data-src",n,function(t,e){t.attr("src",a(t,e,"src"))},function(t){t.remove()}),c("data-alt",n,function(t,e){t.attr("alt",a(t,e,"alt"))}),c("data-link",n,function(e,n){var c=t("<a/>");c.attr("href",a(e,n,"link")),c.html(e.html()),e.html(c)}),c("data-link-wrap",n,function(e,n){var c=t("<a/>");c.attr("href",a(e,n,"link-wrap")),e.wrap(c)})}var f=this;if("array"===t.type(o)){var u=o.length,h=0;i=i||{};var p=t.extend({},i,{complete:function(){f.append(this),++h==u&&i&&"function"==typeof i.complete&&i.complete()}});return t(o).each(function(){var c=t("<div/>");n.call(c,e,this,p)}),this}var m=t.extend({overwriteCache:!1,complete:null,success:null,error:function(){t(this).each(function(){t(this).html(m.errorMessage)})},errorMessage:"There was an error loading the template."},i);if(!function(t){return"string"==typeof t&&t.indexOf("/")>-1}(e))var d=t(e);var v=m.isFile||void 0===m.isFile&&(!d||0==d.length);if(v&&!m.overwriteCache&&c[e])g=c[e],s.call(f,g,o,m.complete),"function"==typeof m.success&&m.success();else if(v&&!m.overwriteCache&&c.hasOwnProperty(e))a[e]?a[e].push({data:o,selection:f,settings:m}):a[e]=[{data:o,selection:f,settings:m}];else if(v){g=t("<div/>");c[e]=null,g.load(e,function(n,r,i){if("error"==r){if("function"==typeof m.error&&m.error.call(f),t(a[e]).each(function(t,e){"function"==typeof e.settings.error&&e.settings.error.call(e.selection)}),"function"==typeof m.complete){m.complete.call(f)}for(;l=a[e].shift();)"function"==typeof l.settings.complete&&l.settings.complete.call(l.selection);a[e].length>0&&(a[e]=[])}else{c[e]=g.clone(),s.call(f,g,o,m.complete),"success"==r&&"function"==typeof m.success&&m.success.call(f);for(var l;l=a[e].shift();)s.call(l.selection,c[e].clone(),l.data,l.settings.complete),"success"==r&&"function"==typeof l.settings.success&&l.settings.success.call(l.selection)}})}else{var g=t("<div/>");d.is("script")&&(d=t.parseHTML(t.trim(d.html()))),g.html(d),s.call(f,g,o,m.complete),"function"==typeof m.success&&m.success()}return this}var c={},a={},r={getFormattedDateString:function(t,e){return e=e||"MMMM yyyy",new Date(t).toLocaleDateString(e)}};t.fn.loadTemplate=n,t.addTemplateFormatter=function(e,n){n?r[e]=n:r=t.extend(r,e)}}(jQuery);