{"version":3,"file":"Tween.min.js","sources":["../src/dist/toNumber.js","../src/dist/core.js","../src/dist/Easing.js","../src/dist/Interpolation.js","../src/dist/SubTween.js","../src/dist/NodeCache.js","../src/dist/Event.js","../src/dist/Tween.js","../src/dist/PlaybackPosition.js","../src/dist/Timeline.js"],"sourcesContent":["export default function toNumber (val) {\r\n  let floatedVal = parseFloat(val)\r\n  return typeof floatedVal === 'number' && !isNaN(floatedVal) ? floatedVal : val\r\n}\r\n","/* global global, window, Object, document, process, requestAnimationFrame, cancelAnimationFrame, setTimeout, clearTimeout */\n\nlet _tweens = {}\nlet isStarted = false\nlet _autoPlay = false\nlet _tick\nlet root = typeof (window) !== 'undefined' ? window : typeof (global) !== 'undefined' ? global : {}\nlet _nextId = 0\n\nlet _ticker = fn => typeof (requestAnimationFrame) !== 'undefined' ? requestAnimationFrame(fn) : setTimeout(fn, 16.6)\nlet _stopTicker = fn => typeof (cancelAnimationFrame) !== 'undefined' ? cancelAnimationFrame(fn) : clearTimeout(fn)\n\nlet setProp = (o, p, param) => Object.defineProperty(o, p, param)\nsetProp(_tweens, 'length', {enumerable: false, writable: true, value: 0})\n\nconst add = tween => {\n  let {id} = tween\n  _tweens[id] = tween\n  _tweens.length++\n\n  if (_autoPlay && !isStarted) {\n    _tick = _ticker(update)\n    isStarted = true\n  }\n}\n\nconst nextId = () => {\n  let id = _nextId\n  _nextId++\n  return id\n}\n\nconst getAll = () => {\n  return _tweens\n}\n\nconst autoPlay = (state) => {\n  _autoPlay = state\n}\n\nconst removeAll = () => {\n  for (let id in _tweens) {\n    _tweens[id] = null\n    delete _tweens[id]\n  }\n  _tweens.length = 0\n  _stopTicker(_tick)\n}\n\nconst get = tween => {\n  for (let searchTween in _tweens) {\n    if (tween.id === +searchTween) {\n      return _tweens[searchTween]\n    }\n  }\n\n  return null\n}\n\nconst has = tween => {\n  return get(tween) !== null\n}\n\nconst remove = tween => {\n  for (let searchTween in _tweens) {\n    if (tween.id === +searchTween) {\n      delete _tweens[searchTween]\n      _tweens.length--\n    }\n  }\n  if (_tweens.length === 0) {\n    _stopTicker(_tick)\n  }\n}\n\nlet now = (function () {\n  if (typeof (process) !== 'undefined' && process.hrtime !== undefined) {\n    return function () {\n      let time = process.hrtime()\n\n      // Convert [seconds, nanoseconds] to milliseconds.\n      return time[0] * 1000 + time[1] / 1000000\n    }\n  // In a browser, use window.performance.now if it is available.\n  } else if (root.performance !== undefined &&\n   root.performance.now !== undefined) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    return root.performance.now.bind(root.performance)\n  // Use Date.now if it is available.\n  } else {\n    let offset = root.performance && root.performance.timing && root.performance.timing.navigationStart ? root.performance.timing.navigationStart : Date.now()\n    return function () {\n      return Date.now() - offset\n    }\n  }\n}())\n\nconst update = (time, preserve) => {\n  time = time !== undefined ? time : now()\n\n  _tick = _ticker(update)\n\n  let i\n  let length = _tweens.length\n  if (!length) {\n    isStarted = false\n    _stopTicker(_tick)\n    return false\n  }\n\n  for (i in _tweens) {\n    _tweens[i].update(time, preserve)\n  }\n\n  return true\n}\n\nconst isRunning = () => isStarted\n\nconst Plugins = {}\n\n// Normalise time when visiblity is changed (if available) ...\nif (root.document) {\n  let doc = root.document\n  let timeDiff = 0\n  let timePause = 0\n  doc.addEventListener('visibilitychange', () => {\n    if (document.hidden) {\n      timePause = now()\n      _stopTicker(_tick)\n      isStarted = false\n    } else {\n      timeDiff = now() - timePause\n\n      for (let tween in _tweens) {\n        _tweens[tween]._startTime += timeDiff\n      }\n      _tick = _ticker(update)\n      isStarted = true\n    }\n\n    return true\n  })\n}\n\nexport { Plugins, get, has, nextId, getAll, removeAll, remove, add, now, update, autoPlay, isRunning }\n","const Easing = {\n\n  Linear: {\n\n    None (k) {\n      return k\n    }\n\n  },\n\n  Quadratic: {\n\n    In (k) {\n      return k * k\n    },\n\n    Out (k) {\n      return k * (2 - k)\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k\n      }\n\n      return -0.5 * (--k * (k - 2) - 1)\n    }\n\n  },\n\n  Cubic: {\n\n    In (k) {\n      return k * k * k\n    },\n\n    Out (k) {\n      return --k * k * k + 1\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2)\n    }\n\n  },\n\n  Quartic: {\n\n    In (k) {\n      return k * k * k * k\n    },\n\n    Out (k) {\n      return 1 - (--k * k * k * k)\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2)\n    }\n\n  },\n\n  Quintic: {\n\n    In (k) {\n      return k * k * k * k * k\n    },\n\n    Out (k) {\n      return --k * k * k * k * k + 1\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2)\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In (k) {\n      return 1 - Math.cos(k * Math.PI / 2)\n    },\n\n    Out (k) {\n      return Math.sin(k * Math.PI / 2)\n    },\n\n    InOut (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k))\n    }\n\n  },\n\n  Exponential: {\n\n    In (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1)\n    },\n\n    Out (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k)\n    },\n\n    InOut (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1)\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2)\n    }\n\n  },\n\n  Circular: {\n\n    In (k) {\n      return 1 - Math.sqrt(1 - k * k)\n    },\n\n    Out (k) {\n      return Math.sqrt(1 - (--k * k))\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1)\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1)\n    }\n\n  },\n\n  Elastic: {\n\n    In (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n    },\n\n    Out (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1\n    },\n\n    InOut (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      k *= 2\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1\n    }\n\n  },\n\n  Back: {\n\n    In (k) {\n      let s = 1.70158\n\n      return k * k * ((s + 1) * k - s)\n    },\n\n    Out (k) {\n      let s = 1.70158\n\n      return --k * k * ((s + 1) * k + s) + 1\n    },\n\n    InOut (k) {\n      let s = 1.70158 * 1.525\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s))\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2)\n    }\n\n  },\n\n  Bounce: {\n\n    In (k) {\n      return 1 - Easing.Bounce.Out(1 - k)\n    },\n\n    Out (k) {\n      if (k < (1 / 2.75)) {\n        return 7.5625 * k * k\n      } else if (k < (2 / 2.75)) {\n        return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75\n      } else if (k < (2.5 / 2.75)) {\n        return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375\n      } else {\n        return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375\n      }\n    },\n\n    InOut (k) {\n      if (k < 0.5) {\n        return Easing.Bounce.In(k * 2) * 0.5\n      }\n\n      return Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5\n    }\n\n  }\n\n}\n\nexport default Easing\n","const Interpolation = {\n\n  Linear (v, k) {\n    let m = v.length - 1\n    let f = m * k\n    let i = Math.floor(f)\n    let fn = Interpolation.Utils.Linear\n\n    if (k < 0) {\n      return fn(v[0], v[1], f)\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f)\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i)\n  },\n\n  Bezier (v, k) {\n    let b = 0\n    let n = v.length - 1\n    let pw = Math.pow\n    let bn = Interpolation.Utils.Bernstein\n\n    for (let i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i)\n    }\n\n    return b\n  },\n\n  CatmullRom (v, k) {\n    let m = v.length - 1\n    let f = m * k\n    let i = Math.floor(f)\n    let fn = Interpolation.Utils.CatmullRom\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k))\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i)\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0])\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m])\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i)\n    }\n  },\n\n  Utils: {\n\n    Linear (p0, p1, t) {\n      return typeof p0 === 'function' ? p0(t) : (p1 - p0) * t + p0\n    },\n\n    Bernstein (n, i) {\n      let fc = Interpolation.Utils.Factorial\n\n      return fc(n) / fc(i) / fc(n - i)\n    },\n\n    Factorial: (function () {\n      let a = [1]\n\n      return n => {\n        let s = 1\n\n        if (a[n]) {\n          return a[n]\n        }\n\n        for (let i = n; i > 1; i--) {\n          s *= i\n        }\n\n        a[n] = s\n        return s\n      }\n    })(),\n\n    CatmullRom (p0, p1, p2, p3, t) {\n      let v0 = (p2 - p0) * 0.5\n      let v1 = (p3 - p1) * 0.5\n      let t2 = t * t\n      let t3 = t * t2\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1\n    }\n\n  }\n\n}\n\nexport default Interpolation\n","import toNumber from './toNumber'\r\n\r\nlet colorMatch = /rgb|hsl|hsv/g\r\nlet isIncrementReqForColor = /ahsv|ahsl|argb/g\r\n\r\n// Credits:\r\n// @jkroso for string parse library\r\n// Optimized, Extended by @dalisoft\r\nconst numRegExp =\r\n  /\\s+|([A-Za-z?().,{}:\"\"[\\]#]+)|([-+/*%]+=)?([-+*/%]+)?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g\r\nlet hexColor = /^#([0-9a-f]{6}|[0-9a-f]{3})$/i\r\nlet trimRegExp = /\\n|\\r|\\t/g\r\nlet hexReplace = (all, hex) => {\r\n  let r\r\n  let g\r\n  let b\r\n  if (hex.length === 3) {\r\n    r = parseInt(hex[0] + hex[0], 16)\r\n    g = parseInt(hex[1] + hex[1], 16)\r\n    b = parseInt(hex[2] + hex[2], 16)\r\n  } else if (hex.length === 6) {\r\n    r = parseInt(hex.substr(0, 2), 16)\r\n    g = parseInt(hex.substr(2, 2), 16)\r\n    b = parseInt(hex.substr(4, 6), 16)\r\n  }\r\n\r\n  return `rgb(${r},${g},${b})`\r\n}\r\nlet trim = str => typeof str === 'string' ? str.replace(trimRegExp, '') : str\r\n\r\nconst SubTween = (start, end, roundv = 10000) => {\r\n  if (typeof end === 'function' || (end && end.nodeType)) {\r\n    return end\r\n  } else if (start && start.nodeType) {\r\n    return start\r\n  } else if (Array.isArray(start)) {\r\n    let isColorPropsExist = null\r\n    let startIndex = null\r\n    end = end.map((v, i) => typeof v === 'string' && colorMatch.test(v) ? ((isColorPropsExist = v), (startIndex = i), null) : v === start[i] ? null : typeof v === 'number' ? (v - start[i]) : typeof v === 'string' && numRegExp.test(v) ? SubTween(trim(start[i]), trim(v)) : SubTween(start[i], v))\r\n    let endIndex = startIndex !== null ? startIndex + 6 : null\r\n    if (isColorPropsExist && isIncrementReqForColor.test(isColorPropsExist)) {\r\n      startIndex++\r\n      endIndex++\r\n    }\r\n\r\n    let map = [...start]\r\n    return (t) => {\r\n      for (let i = 0, v, length = end.length; i < length; i++) {\r\n        v = end[i]\r\n        if (typeof v === 'function') {\r\n          map[i] = v(t)\r\n        } else if (typeof v === 'number') {\r\n          map[i] = (((start[i] + v * t) * roundv) | 0) / roundv\r\n\r\n          if (startIndex !== null && i > startIndex && i < endIndex) {\r\n            map[i] = map[i] | 0\r\n          }\n        }\r\n      }\r\n\r\n      return map\r\n    }\r\n  } else if (typeof start === 'object') {\r\n    for (let property in end) {\r\n      if (end[property] === start[property]) {\r\n        end[property] = null\r\n      } else if (typeof start[property] === 'number') {\r\n        end[property] -= start[property]\r\n      } else if (typeof end[property] === 'object' || (typeof end[property] === 'string' && numRegExp.test(end[property]))) {\r\n        end[property] = SubTween(start[property], end[property])\r\n      }\r\n    }\r\n\r\n    let map = {...start}\r\n    return (t) => {\r\n      for (let property in end) {\r\n        let to = end[property]\r\n        if (typeof to === 'function') {\r\n          map[property] = to(t)\r\n        } else if (typeof to === 'number') {\r\n          map[property] = (((start[property] + to * t) * roundv) | 0) / roundv\r\n        }\r\n      }\r\n\r\n      return map\r\n    }\r\n  } else if (typeof start === 'number') {\r\n    end -= start\r\n    let isSame = start === end\r\n    return (t) => {\r\n      return isSame ? end : (((start + end * t) * roundv) | 0) / roundv\r\n    }\r\n  } else if ((typeof start === 'string' && typeof end === 'string' && numRegExp.test(start) && numRegExp.test(end)) || (typeof end === 'string' && start && (hexColor.test(start) || hexColor.test(end)))) {\r\n    let _startMap = trim(start).replace(hexColor, hexReplace).match(numRegExp).map(toNumber)\r\n    let _endMap = trim(end).replace(hexColor, hexReplace).match(numRegExp).map(toNumber)\r\n    let _tween = SubTween(_startMap, _endMap)\r\n    return (t) => {\r\n      let _t = _tween(t)\r\n      let i = 0\r\n      let s = ''\r\n      while (i < _t.length) {\r\n        s += _t[i]\r\n        i++\r\n      }\r\n\r\n      return s\r\n    }\r\n  } else if (!Array.isArray(start) && Array.isArray(end)) {\r\n    return end.map((v, i) => SubTween(i === 0 ? start : end[i - 1], v))\r\n  } else {\r\n    return end\r\n  }\r\n}\r\n\r\nexport default SubTween\r\n","let Store = {}\r\nexport default function (node, tween) {\r\n  if (!node) return tween\r\n  if (Store[node]) {\r\n    if (tween) {\r\n      return Object.assign(Store[node], tween)\r\n    }\r\n    return Store[node]\r\n  }\r\n\r\n  Store[node] = tween\r\n  return Store[node]\r\n};\r\n","export default class EventClass {\r\n  constructor () {\r\n    this._events = {}\r\n  }\r\n\r\n  on (event, callback) {\r\n    if (!this._events[event]) {\r\n      this._events[event] = []\r\n    }\r\n\r\n    this._events[event].push(callback)\r\n    return this\r\n  }\r\n\r\n  once (event, callback) {\r\n    if (!this._events[event]) {\r\n      this._events[event] = []\r\n    }\r\n\r\n    let {_events} = this\r\n    let spliceIndex = _events[event].length\r\n    this._events[event].push((...args) => {\r\n      callback.apply(this, args)\r\n      _events[event].splice(spliceIndex, 1)\r\n    })\r\n    return this\r\n  }\r\n\r\n  off (event, callback) {\r\n    let {_events} = this\r\n\r\n    if (event === undefined || !_events[event]) {\r\n      return this\r\n    }\r\n\r\n    if (callback) {\r\n      this._events[event] = this._events[event].filter(cb => cb !== callback)\r\n    } else {\r\n      this._events[event].length = 0\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  emit (event, arg1, arg2, arg3, arg4) {\r\n    let {_events} = this\r\n\r\n    if (event === undefined || !_events[event]) {\r\n      return this\r\n    }\r\n\r\n    let _event = _events[event]\r\n\r\n    for (let i = 0, length = _event.length; i < length; i++) {\n      _event[i](arg1, arg2, arg3, arg4)\n    }\r\n  }\r\n}\r\n","import {\n  add,\n  remove,\n  now,\n  nextId,\n  Plugins\n}\n  from './core'\nimport Easing from './Easing'\nimport Interpolation from './Interpolation'\nimport SubTween from './SubTween'\nimport NodeCache from './NodeCache'\nimport EventClass from './Event'\n\nconst defaultEasing = Easing.Linear.None\n\n// Events list\nexport const EVENT_UPDATE = 'update'\nexport const EVENT_COMPLETE = 'complete'\nexport const EVENT_START = 'start'\nexport const EVENT_REPEAT = 'repeat'\nexport const EVENT_REVERSE = 'reverse'\nexport const EVENT_PAUSE = 'pause'\nexport const EVENT_PLAY = 'play'\nexport const EVENT_RS = 'restart'\nexport const EVENT_STOP = 'stop'\nexport const EVENT_SEEK = 'seek'\n\nclass Tween extends EventClass {\n  timeout (fn, delay) {\n    return new Tween({x: 0}).to({x: 1}, delay).on('complete', fn)\n  }\n  interval (fn, delay) {\n    return new Tween({x: 0}).to({x: 1}, delay).repeat(Infinity).on('repeat', fn)\n  }\n  constructor (node, object) {\n    super()\n\n    this.id = nextId()\n    if (typeof node === 'object' && !object && !node.nodeType) {\n      object = this.object = node\n      node = null\n    } else if (typeof node !== 'undefined') {\n      this.node = node\n      object = this.object = NodeCache(node, object)\n      this.object.node = node\n    }\n    this._valuesStart = Tween.createEmptyConst(object)\n    this._valuesEnd = Tween.createEmptyConst(object)\n\n    this._duration = 1000\n    this._easingFunction = defaultEasing\n    this._interpolationFunction = Interpolation.Linear\n\n    this._startTime = 0\n    this._delayTime = 0\n    this._repeat = 0\n    this._r = 0\n    this._isPlaying = false\n    this._yoyo = false\n    this._reversed = false\n\n    this._onStartCallbackFired = false\n    this._pausedTime = null\n    this._plugins = {}\n    this._isFinite = true\n\n    return this\n  }\n\n  static createEmptyConst (oldObject) {\n    return typeof (oldObject) === 'number' ? 0 : Array.isArray(oldObject) ? [] : typeof (oldObject) === 'object' ? {}\n      : ''\n  }\n\n  static checkValidness (valid) {\n    return valid !== undefined && valid !== null && valid !== '' && ((typeof valid === 'number' && !isNaN(valid)) || typeof valid !== 'number') && valid !== Infinity\n  }\n\n  isPlaying () {\n    return this._isPlaying\n  }\n\n  isStarted () {\n    return this._onStartCallbackFired\n  }\n\n  reverse () {\n    const {\n      _reversed\n    } = this\n\n    this._reversed = !_reversed\n\n    return this\n  }\n\n  reversed () {\n    return this._reversed\n  }\n\n  pause () {\n    if (!this._isPlaying) {\n      return this\n    }\n\n    this._isPlaying = false\n\n    remove(this)\n    this._pausedTime = now()\n\n    return this.emit(EVENT_PAUSE, this.object)\n  }\n\n  play () {\n    if (this._isPlaying) {\n      return this\n    }\n\n    this._isPlaying = true\n\n    this._startTime += now() - this._pausedTime\n    add(this)\n    this._pausedTime = now()\n\n    return this.emit(EVENT_PLAY, this.object)\n  }\n\n  restart (noDelay) {\n    this._repeat = this._r\n    this._startTime = now() + (noDelay ? 0 : this._delayTime)\n\n    if (!this._isPlaying) {\n      add(this)\n    }\n\n    return this.emit(EVENT_RS, this._object)\n  }\n\n  seek (time, keepPlaying) {\n    this._startTime = now() + Math.max(0, Math.min(\n      time, this._duration))\n\n    this.emit(EVENT_SEEK, time, this._object)\n\n    return keepPlaying ? this : this.pause()\n  }\n\n  duration (amount) {\n    this._duration = typeof (amount) === 'function' ? amount(this._duration) : amount\n\n    return this\n  }\n\n  to (properties = {}, duration = 1000) {\n    if (typeof properties === 'object') {\n      this._valuesEnd = properties\n    }\n\n    if (typeof duration === 'number') {\n      this._duration = typeof (duration) === 'function' ? duration(this._duration) : duration\n    } else if (typeof duration === 'object') {\n      for (let prop in duration) {\n        if (this[prop]) {\n          this[prop](...(Array.isArray(duration) ? duration : [duration]))\n        }\n      }\n    }\n\n    return this\n  }\n\n  render () {\n    if (this._rendered) {\n      return this\n    }\n\n    let {\n      _valuesStart,\n      _valuesEnd,\n      object,\n      _plugins\n    } = this\n\n    for (let property in _valuesEnd) {\n      let isPluginProp = Plugins[property]\n      if (isPluginProp) {\n        isPluginProp = _plugins[property] = new Plugins[property](this, object[property], _valuesEnd[property])\n        isPluginProp.preprocess && isPluginProp.preprocess(object[property], _valuesEnd[property])\n      }\n      if (typeof _valuesEnd[property] === 'object' && _valuesEnd[property] && typeof object[property] === 'object') {\n        _valuesEnd[property] = SubTween(object[property], _valuesEnd[property])\n        if (typeof _valuesEnd[property] === 'function') {\n          object[property] = _valuesEnd[property](0)\n        }\n      } else if (typeof _valuesEnd[property] === 'string' && typeof object[property] === 'string') {\n        _valuesEnd[property] = SubTween(object[property], _valuesEnd[property])\n        if (typeof _valuesEnd[property] === 'function') {\n          object[property] = _valuesEnd[property](0)\n        }\n      }\n\n      // If `to()` specifies a property that doesn't exist in the source object,\n      // we should not set that property in the object\n      if (Tween.checkValidness(object[property]) === false) {\n        continue\n      }\n\n      _valuesStart[property] = object[property]\n\n      if (isPluginProp) {\n        isPluginProp.postprocess && isPluginProp.postprocess(object[property], _valuesEnd[property])\n      }\n    }\n\n    return this\n  }\n\n  start (time) {\n    this._startTime = time !== undefined ? time : now()\n    this._startTime += this._delayTime\n\n    this.render()\n    this._rendered = true\n\n    add(this)\n\n    this.emit(EVENT_START, this.object)\n\n    this._isPlaying = true\n\n    return this\n  }\n\n  stop () {\n    let {\n      _isPlaying,\n      object\n    } = this\n\n    if (!_isPlaying) {\n      return this\n    }\n\n    remove(this)\n    this._isPlaying = false\n\n    return this.emit(EVENT_STOP, object)\n  }\n\n  end () {\n    const {\n      _startTime,\n      _duration\n    } = this\n\n    return this.update(_startTime + _duration)\n  }\n\n  delay (amount) {\n    this._delayTime = typeof (amount) === 'function' ? amount(this._delayTime) : amount\n    this._startTime += this._delayTime\n\n    return this\n  }\n\n  repeat (amount) {\n    this._repeat = typeof (amount) === 'function' ? amount(this._repeat) : amount\n    this._r = this._repeat\n    this._isFinite = isFinite(amount)\n\n    return this\n  }\n\n  repeatDelay (amount) {\n    this._repeatDelayTime = typeof (amount) === 'function' ? amount(this._repeatDelayTime) : amount\n\n    return this\n  }\n\n  reverseDelay (amount) {\n    this._reverseDelayTime = typeof (amount) === 'function' ? amount(this._reverseDelayTime) : amount\n\n    return this\n  }\n\n  yoyo (state) {\n    this._yoyo = typeof (state) === 'function' ? state(this._yoyo) : state\n\n    return this\n  }\n\n  easing (fn) {\n    this._easingFunction = fn\n\n    return this\n  }\n\n  interpolation (fn) {\n    this._interpolationFunction = fn\n\n    return this\n  }\n\n  reassignValues () {\n    const {\n      _valuesStart,\n      _valuesEnd,\n      object\n    } = this\n\n    for (let property in _valuesEnd) {\n      let end = _valuesEnd[property]\n      let start = _valuesStart[property]\n\n      if (typeof end === 'number' || typeof end === 'string') {\n        object[property] = start\n      }\n    }\n\n    return this\n  }\n\n  get (time) {\n    this.update(time)\n    return this.object\n  }\n\n  update (time, preserve) {\n    let {\n      _onStartCallbackFired,\n      _easingFunction,\n      _interpolationFunction,\n      _repeat,\n      _repeatDelayTime,\n      _reverseDelayTime,\n      _yoyo,\n      _reversed,\n      _startTime,\n      _duration,\n      _valuesStart,\n      _valuesEnd,\n      _plugins,\n      object,\n      _isFinite\n    } = this\n\n    let property\n    let elapsed\n    let value\n\n    time = time !== undefined ? time : now()\n\n    if (time < _startTime) {\n      return true\n    }\n\n    if (!_onStartCallbackFired) {\n      if (!this._rendered) {\n        this.render()\n\n        this.emit(EVENT_START, object)\n\n        this._rendered = true\n      }\n\n      this._onStartCallbackFired = true\n    }\n\n    elapsed = (time - _startTime) / _duration\n    elapsed = elapsed > 1 ? 1 : elapsed\n    elapsed = _reversed ? 1 - elapsed : elapsed\r\n\r\n    value = typeof _easingFunction === 'function' ? _easingFunction(elapsed) : defaultEasing(elapsed)\n\n    for (property in _valuesEnd) {\n      let start = _valuesStart[property]\n      let end = _valuesEnd[property]\n      let plugin = _plugins[property]\n      value = _easingFunction[property] ? _easingFunction[property](elapsed) : value\n\n      if (plugin && plugin.update) {\n        plugin.update(value, elapsed, _reversed)\n      } else if (start === null || start === undefined) {\n        continue\n      } else if (typeof end === 'function') {\n        object[property] = end(value)\n      } else if (Array.isArray(end)) {\n        object[property] = _interpolationFunction(end, value)\n      } else if (typeof (end) === 'number') {\n        object[property] = start + (end - start) * value\n      } else if (typeof (end) === 'string') {\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n          end = start + parseFloat(end)\n        } else {\n          end = parseFloat(end)\n        }\n\n        // Protect against non numeric properties.\n        if (typeof (end) === 'number') {\n          object[property] = start + (end - start) * value\n        }\n      }\n    }\r\n\r\n    this.emit(EVENT_UPDATE, object, value, elapsed)\n\n    if (elapsed === 1 || (_reversed && elapsed === 0)) {\n      if (_repeat) {\n        if (_isFinite) {\n          this._repeat--\n        }\n\n        for (property in _valuesEnd) {\n          if (typeof (_valuesEnd[property]) === 'string' && typeof (_valuesStart[property]) === 'number') {\n            _valuesStart[property] = _valuesStart[property] + parseFloat(_valuesEnd[property])\n          }\n        }\n\n        // Reassign starting values, restart by making startTime = now\n        this.emit(_reversed ? EVENT_REVERSE : EVENT_REPEAT, object)\n\n        if (_yoyo) {\n          this.reverse()\n        }\n\n        if (!_reversed && _repeatDelayTime) {\n          this._startTime += _duration + _repeatDelayTime\n        } else if (_reversed && _reverseDelayTime) {\n          this._startTime += _duration + _reverseDelayTime\n        } else {\n          this._startTime += _duration\n        }\n\n        return true\n      } else {\n        if (!preserve) {\n          remove(this)\n        }\n        this.emit(EVENT_COMPLETE, object)\n        this._repeat = this._r\n\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\nexport default Tween\n","export default class PlaybackPosition {\r\n  constructor () {\r\n    this.totalTime = 0\r\n    this.labels = []\r\n    this.offsets = []\r\n  }\r\n  parseLabel (name, offset) {\r\n    const { offsets, labels } = this\r\n    let i = labels.indexOf(name)\r\n    if (typeof name === 'string' && name.indexOf('=') !== -1 && !offset && i === -1) {\r\n      const rty = name.substr(name.indexOf('=') - 1, 2)\r\n      let rt = name.split(rty)\r\n      offset = rt.length === 2 ? rty + rt[1] : null\r\n      name = rt[0]\r\n      i = labels.indexOf(name)\r\n    }\r\n    if (i !== -1 && name) {\r\n      let currOffset = offsets[i] || 0\r\n      if (typeof offset === 'number') {\r\n        currOffset = offset\r\n      } else if (typeof offset === 'string') {\r\n        if (offset.indexOf('=') !== -1) {\r\n          const type = offset.charAt(0)\r\n          offset = Number(offset.substr(2))\r\n          if (type === '+' || type === '-') {\r\n            currOffset += parseFloat(type + offset)\r\n          } else if (type === '*') {\r\n            currOffset *= offset\r\n          } else if (type === '/') {\r\n            currOffset /= offset\r\n          } else if (type === '%') {\r\n            currOffset *= offset / 100\r\n          }\r\n        }\r\n      }\r\n      return currOffset\r\n    }\r\n    return typeof offset === 'number' ? offset : 0\r\n  }\r\n  addLabel (name, offset) {\r\n    this.labels.push(name)\r\n    this.offsets.push(this.parseLabel(name, offset))\r\n    return this\r\n  }\r\n  setLabel (name, offset) {\r\n    const i = this.labels.indexOf(name)\r\n    if (i !== -1) {\r\n      this.offsets.splice(i, 1, this.parseLabel(name, offset))\r\n    }\r\n    return this\r\n  }\r\n  eraseLabel (name) {\r\n    const i = this.labels.indexOf(name)\r\n    if (i !== -1) {\r\n      this.labels.splice(i, 1)\r\n      this.offsets.splice(i, 1)\r\n    }\r\n    return this\r\n  }\r\n}\n","import Tween, { EVENT_UPDATE, EVENT_RS, EVENT_REPEAT, EVENT_REVERSE, EVENT_COMPLETE } from './Tween'\r\nimport { add, now } from './core'\r\nimport PlaybackPosition from './PlaybackPosition'\r\n\r\nlet _id = 0\r\nclass Timeline extends Tween {\r\n  constructor (params) {\r\n    super()\r\n    this._totalDuration = 0\r\n    this._startTime = now()\r\n    this._tweens = {}\r\n    this._elapsed = 0\r\n    this._id = _id++\r\n    this._defaultParams = params\r\n    this.position = new PlaybackPosition()\r\n    this.position.addLabel('afterLast', this._totalDuration)\r\n    this.position.addLabel('afterInit', this._startTime)\r\n\r\n    return this\r\n  }\r\n\r\n  addLabel (name, offset) {\r\n    this.position.addLabel(name, offset)\r\n    return this\r\n  }\r\n\r\n  map (fn) {\r\n    for (let tween in this._tweens) {\r\n      let _tween = this._tweens[tween]\r\n      fn(_tween, +tween)\r\n      this._totalDuration = Math.max(this._totalDuration, _tween._duration + _tween._startTime)\r\n    }\r\n    return this\r\n  }\r\n\r\n  add (tween, position) {\n    if (Array.isArray(tween)) {\r\n      tween.map(_tween => {\r\n        this.add(_tween, position)\r\n      })\r\n      return this\r\n    } else if (typeof tween === 'object' && !(tween instanceof Tween)) {\n      tween = new Tween(tween.from).to(tween.to, tween)\n    }\r\n\r\n    let {\r\n      _defaultParams,\r\n      _totalDuration\r\n    } = this\r\n\r\n    if (_defaultParams) {\r\n      for (let method in _defaultParams) {\r\n        tween[method](_defaultParams[method])\r\n      }\r\n    }\r\n\r\n    const offset = typeof position === 'number' ? position : this.position.parseLabel(typeof position !== 'undefined' ? position : 'afterLast', null)\r\n    tween._startTime = this._startTime\r\n    tween._startTime += offset\r\n    this._totalDuration = Math.max(_totalDuration, tween._startTime + tween._delayTime + tween._duration)\r\n    this._tweens[tween.id] = tween\r\n    this.position.setLabel('afterLast', this._totalDuration)\r\n    return this\r\n  }\r\n\r\n  restart () {\r\n    this._startTime += now()\r\n\r\n    add(this)\r\n\r\n    return this.emit(EVENT_RS)\r\n  }\r\n\r\n  easing (easing) {\r\n    return this.map(tween => tween.easing(easing))\r\n  }\r\n\r\n  interpolation (interpolation) {\r\n    return this.map(tween => tween.interpolation(interpolation))\r\n  }\r\n\r\n  reverse () {\r\n    this._reversed = !this._reversed\r\n    return this.emit(EVENT_REVERSE)\r\n  }\r\n\r\n  update (time) {\r\n    let {\r\n      _tweens,\r\n      _totalDuration,\r\n      _repeatDelayTime,\r\n      _reverseDelayTime,\r\n      _startTime,\r\n      _reversed,\r\n      _yoyo,\r\n      _repeat,\r\n      _isFinite\r\n    } = this\r\n\r\n    if (time < _startTime) {\n      return true\n    }\r\n\r\n    let elapsed = Math.min(1, Math.max(0, (time - _startTime) / _totalDuration))\r\n    elapsed = _reversed ? 1 - elapsed : elapsed\r\n    this._elapsed = elapsed\r\n\r\n    let timing = time - _startTime\r\n    let _timing = _reversed ? _totalDuration - timing : timing\r\n\r\n    for (let tween in _tweens) {\r\n      let _tween = _tweens[tween]\r\n      if (_tween.skip) {\r\n        _tween.skip = false\r\n      } else if (_tween.update(_timing)) {\r\n        continue\r\n      } else {\r\n        _tween.skip = true\r\n      }\r\n    }\r\n\r\n    this.emit(EVENT_UPDATE, elapsed, timing)\r\n\r\n    if (elapsed === 1 || (_reversed && elapsed === 0)) {\n      if (_repeat) {\n        if (_isFinite) {\r\n          this._repeat--\r\n        }\r\n\r\n        this.emit(_reversed ? EVENT_REVERSE : EVENT_REPEAT)\r\n\r\n        if (_yoyo) {\r\n          this.reverse()\r\n        }\r\n\r\n        if (!_reversed && _repeatDelayTime) {\r\n          this._startTime += _totalDuration + _repeatDelayTime\r\n        } else if (_reversed && _reverseDelayTime) {\r\n          this._startTime += _totalDuration + _reverseDelayTime\r\n        } else {\r\n          this._startTime += _totalDuration\r\n        }\r\n\r\n        for (let tween in _tweens) {\r\n          let _tween = _tweens[tween]\r\n          if (_tween.skip) {\r\n            _tween.skip = false\r\n          }\r\n          _tween.reassignValues()\r\n        }\r\n\r\n        return true\n      } else {\n        this.emit(EVENT_COMPLETE)\r\n        this._repeat = this._r\r\n\r\n        for (let tween in _tweens) {\r\n          let _tween = _tweens[tween]\r\n          if (_tween.skip) {\r\n            _tween.skip = false\r\n          }\r\n        }\r\n\r\n        return false\n      }\n    }\r\n\r\n    return true\n  }\r\n\r\n  elapsed (value) {\r\n    return value !== undefined ? this.update(value * this._totalDuration) : this._elapsed\r\n  }\r\n\r\n  seek (value) {\r\n    return this.update(value < 1.1 ? value * this._totalDuration : value)\r\n  }\r\n}\r\nexport default Timeline\r\n"],"names":["toNumber","val","let","floatedVal","parseFloat","isNaN","_tick","_tweens","isStarted","_autoPlay","root","window","global","_nextId","_ticker","fn","requestAnimationFrame","setTimeout","_stopTicker","cancelAnimationFrame","clearTimeout","o","p","param","Object","defineProperty","setProp","enumerable","writable","value","const","add","tween","id","length","update","nextId","get","searchTween","remove","now","undefined","process","hrtime","time","performance","bind","offset","timing","navigationStart","Date","preserve","i","Plugins","document","timeDiff","timePause","addEventListener","hidden","_startTime","Easing","Linear","None","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","s","Bounce","Interpolation","v","m","f","floor","Utils","Bezier","b","n","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","a","p2","p3","v0","v1","t2","colorMatch","isIncrementReqForColor","numRegExp","hexColor","trimRegExp","hexReplace","all","hex","r","g","parseInt","substr","trim","str","replace","SubTween","start","end","roundv","nodeType","Array","isArray","isColorPropsExist","startIndex","map","test","endIndex","property","to","isSame","_startMap","match","_endMap","_tween","_t","Store","node","assign","EventClass","this","_events","on","event","callback","push","once","spliceIndex","apply","args","splice","off","filter","cb","emit","arg1","arg2","arg3","arg4","_event","defaultEasing","Tween","object","super","NodeCache","_valuesStart","createEmptyConst","_valuesEnd","_duration","_easingFunction","_interpolationFunction","_delayTime","_repeat","_r","_isPlaying","_yoyo","_reversed","_onStartCallbackFired","_pausedTime","_plugins","_isFinite","timeout","delay","x","interval","repeat","Infinity","oldObject","checkValidness","valid","isPlaying","reverse","reversed","pause","play","restart","noDelay","_object","seek","keepPlaying","max","min","duration","amount","properties","prop","ref","render","_rendered","isPluginProp","preprocess","postprocess","stop","isFinite","repeatDelay","_repeatDelayTime","reverseDelay","_reverseDelayTime","yoyo","state","easing","interpolation","reassignValues","elapsed","plugin","charAt","PlaybackPosition","totalTime","labels","offsets","parseLabel","name","indexOf","rty","rt","split","currOffset","type","Number","addLabel","setLabel","eraseLabel","_id","Timeline","params","_totalDuration","_elapsed","_defaultParams","position","from","method","_timing","skip"],"mappings":"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"}