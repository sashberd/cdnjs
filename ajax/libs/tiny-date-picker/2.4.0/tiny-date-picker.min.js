var TinyDatePicker=function(){"use strict";function e(e,r){function o(e){var t=c.parse(e.target.value);isNaN(t)||c.onChange(t,!0)}var i=[],c=t(e,i,r||{});c.isModal?e.readOnly=!0:c.isPermanent||i.push(v("blur",e,n(5,function(){c.el&&!c.el.contains(document.activeElement)&&x(c)})));var u=n(5,function(){C(c)?x(c):a(c)});return c.isPermanent||(i.push(v("mousedown",e,function(){c.inputFocused()&&u()})),i.push(v("focus",e,u)),i.push(v("input",e,o))),c}function t(e,t,r){e=E(e);var o={input:"dp-permanent"!==r.mode?e:null,container:"dp-permanent"===r.mode?e:null,mode:r.mode||"dp-modal",days:r.days||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:r.months||["January","February","March","April","May","June","July","August","September","October","November","December"],today:r.today||"Today",clear:r.clear||"Clear",txtClose:r.close||"Close",onOpen:r.onOpen||function(){},dateClass:r.dateClass||function(){},inRange:r.inRange||function(){return!0},onSelectYear:r.onSelectYear||function(){},onSelectMonth:r.onSelectMonth||function(){},onChangeDate:r.onChangeDate||function(){},onNavigate:r.onNavigate||function(){},format:r.format||function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},parse:r.parse||function(e){var t=new Date(e);return isNaN(t)?N():t},inputFocused:function(){return!o.container&&e===document.activeElement},onChange:function(t,n){t&&!S(o,t)||(t&&(o.selectedDate=new Date(o.currentDate=t),o.onChangeDate(o)),n||o.isPermanent||(e.value=t?o.format(t):""),o.isModal?w(e):m(D,o),o.isPermanent||e.dispatchEvent(new A("change",{bubbles:!0})))},open:function(){C(o)||a(o)},close:function(){o.el&&(w(e),o.isBelow&&n(10,function(){x(o)})())},openYears:function(){o.open(),m(g,o)},openMonths:function(){o.open(),m(h,o)},setValue:function(e){e=o.parse(e),o.onChange(e)},addMonths:function(e){return M(o.currentDate,o.currentDate.getMonth()+e),o.goToDate(o.currentDate)},addYears:function(e){return o.addMonths(12*e)},goToDate:function(e){return o.currentDate=o.parse(e),m(D,o),o.onNavigate(o),o.selectedDate},weekStartsMonday:r.weekStartsMonday,destroy:function(){o.close(),console.log("DESTROYING... ",t.length),t.forEach(function(e){e()})}};return o.min=k(o,r.min,-100),o.max=k(o,r.max,100),o.isModal="dp-modal"===o.mode,o.isBelow="dp-below"===o.mode,o.isPermanent="dp-permanent"===o.mode,o.preselectedDate=o.parse(r.preselectedDate)||new Date,o.isPermanent&&a(o),o}function n(e,t){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}}function a(e){if(!e.el){var t=e.input,a=document.createElement("div");if(a.className=e.mode,a.innerHTML='<div class="dp"></div>'+(e.isModal?'<a href="#" class="dp-focuser">.</a>':""),e.el=a,!e.isPermanent){var r=a.querySelector(".dp");v("blur",r,n(10,function(){r.contains(document.activeElement)||e.close()}))}switch(c(e),e.mode){case"dp-modal":document.body.appendChild(a);break;case"dp-below":a.style.visibility="hidden",t.parentElement.appendChild(a);break;case"dp-permanent":e.container.appendChild(a)}e.isAbove=null,m(D,e),v("mousedown",a,function(e){e.target!==a&&"A"!==e.target.tagName&&e.preventDefault()}),v("keydown",a,function(t){t.keyCode>=F&&t.keyCode<=j&&t.preventDefault(),a.querySelector(".dp-cal")?u(t,a,e):a.querySelector(".dp-months")?s(t,a,e):a.querySelector(".dp-years")&&l(t,a,e)}),v("click","dp-next",a,function(){M(e.currentDate,e.currentDate.getMonth()+1),m(D,e),e.onNavigate(e)}),v("click","dp-prev",a,function(){M(e.currentDate,e.currentDate.getMonth()-1),m(D,e),e.onNavigate(e)}),v("click","dp-day",a,function(t){e.onChange(new Date(parseInt(t.target.getAttribute("data-date"))))}),v("click","dp-year",a,function(t){e.currentDate.setFullYear(parseInt(t.target.getAttribute("data-year"))),m(D,e),e.onSelectYear(e),e.onNavigate(e)}),v("click","dp-month",a,function(t){e.currentDate.setMonth(parseInt(t.target.getAttribute("data-month"))),m(D,e),e.onSelectMonth(e),e.onNavigate(e)}),v("click","dp-cal-year",a,function(){m(g,e)}),v("click","dp-cal-month",a,function(){m(h,e)}),v("click","dp-today",a,function(){e.onChange(N())}),v("click","dp-clear",a,function(){e.onChange(null)}),v("click","dp-close",a,e.close),e.onOpen(e)}}function r(e){var t=e.input.getBoundingClientRect(),n=document.documentElement;i(e,t,n),o(e,t,n),e.el.style.visibility=""}function o(e,t,n){var a=e.el,r=e.input,o=n.clientWidth,i=a.offsetWidth,c=t.left+i,u=c<o||t.right<i,s=r.offsetLeft-(u?0:c-o);a.style.left=s+"px"}function i(e,t,n){var a=e.el,r=e.input,o=n.clientHeight,i=a.offsetHeight;if(null===e.isAbove){var c=t.bottom+8+i;e.isAbove=c>o&&t.top>i}var u=r.offsetTop+(e.isAbove?-i-8:r.offsetHeight+8);a.style.top=u+"px"}function c(e){var t=e.input||{},n=e.parse(t.value);e.currentDate=t.value&&S(e,n)?n:e.preselectedDate,e.selectedDate=new Date(e.currentDate),t.value&&(t.value=e.format(e.currentDate))}function u(e,t,n){var a=e.keyCode;a===F?f(t,n,-1):a===P?f(t,n,1):a===T?f(t,n,-7):a===j&&f(t,n,7)}function s(e,t,n){var a=e.keyCode;a===F?p(t,n,-1):a===P?p(t,n,1):a===T?p(t,n,-3):a===j&&p(t,n,3)}function l(e,t,n){var a=e.keyCode;a===F||a===T?d(e,t,n,-1):a!==P&&a!==j||d(e,t,n,1)}function d(e,t,n,a){e.preventDefault();var r=n.currentDate.getFullYear()+a,o=Math.min(n.max.getFullYear(),Math.max(n.min.getFullYear(),r));n.currentDate.setFullYear(o),m(g,n),n.onNavigate(n)}function p(e,t,n){var a=(12+(t.currentDate.getMonth()+n))%12;M(t.currentDate,a),m(h,t),t.onNavigate(t)}function f(e,t,n){var a=t.currentDate;a.setDate(a.getDate()+n),m(D,t),t.onNavigate(t)}function v(e,t,n,a){function r(e){t.test(e.target.className)&&a(e)}return a?t=new RegExp("\\b"+t+"\\b"):(a=n,n=t,t=/.*/),n.addEventListener(e,r,!0),function(){n.removeEventListener(e,r,!0)}}function m(e,t){var n=e(t);if(n&&(t.el.firstChild.innerHTML=n),t.isBelow&&r(t),t.isModal||!t.inputFocused()){var a=t.el.querySelector(".dp-current");return a&&a.focus()}}function g(e){var t=e.currentDate.getFullYear(),n=e.selectedDate.getFullYear();return'<div class="dp-years">'+b(e,function(e){var a="dp-year";return a+=e===t?" dp-current":"",'<a tabindex="-1" href="javascript:;" class="'+(a+=e===n?" dp-selected":"")+'" data-year="'+e+'">'+e+"</a>"})+"</div>"}function h(e){var t=e.months,n=e.currentDate,a=n.getMonth();return'<div class="dp-months">'+t.map(function(e,t){var n="dp-month";return'<a tabindex="-1" href="javascript:;" class="'+(n+=a===t?" dp-current":"")+'" data-month="'+t+'">'+e+"</a>"}).join("")+"</div>"}function D(e){var t=e.days,n=e.weekStartsMonday?1:0,a=e.currentDate,r=e.selectedDate,o=a.getMonth(),i=N().getTime();return'<div class="dp-cal"><header class="dp-cal-header"><a tabindex="-1" href="javascript:;" class="dp-prev">Prev</a><a tabindex="-1" href="javascript:;" class="dp-cal-month">'+e.months[o]+'</a><a tabindex="-1" href="javascript:;" class="dp-cal-year">'+a.getFullYear()+'</a><a tabindex="-1" href="javascript:;" class="dp-next">Next</a></header><div class="dp-days">'+t.map(function(e,a){return'<span class="dp-col-header">'+t[(a+n)%t.length]+"</span>"}).join("")+y(a,n,function(t){var n=t.getMonth()!==o,c=!S(e,t),u=t.getTime()===i,s="dp-day";return s+=n?" dp-edge-day":"",s+=Y(t,a)?" dp-current":"",s+=Y(t,r)?" dp-selected":"",s+=c?" dp-day-disabled":"",s+=u?" dp-day-today":"",'<a tabindex="-1" href="javascript:;" class="'+(s+=" "+e.dateClass(t,e))+'" data-date="'+t.getTime()+'">'+t.getDate()+"</a>"})+'</div><footer class="dp-cal-footer"><a tabindex="-1" href="javascript:;" class="dp-today">'+e.today+'</a><a tabindex="-1" href="javascript:;" class="dp-clear">'+e.clear+'</a><a tabindex="-1" href="javascript:;" class="dp-close">'+e.txtClose+"</a></footer></div>"}function y(e,t,n){var a="",r=new Date(e);r.setDate(1),r.setDate(1-r.getDay()+t),t&&2===r.getDate()&&r.setDate(-5);for(var o=0;o<42;++o)a+=n(r),r.setDate(r.getDate()+1);return a}function b(e,t){for(var n="",a=e.max.getFullYear(),r=a;r>=e.min.getFullYear();--r)n+=t(r);return n}function M(e,t){var n=e.getDate();e.setDate(1),e.setMonth(t),e.setDate(n),e.getDate()<n&&e.setDate(1-e.getDate())}function C(e){return e.isModal&&!!e.el}function w(e){e.focus(),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.blur()}function x(e){var t=e.el;t&&t.parentElement.removeChild(t),e.el=void 0}function k(e,t,n){return t?e.parse(t):new Date(N().setFullYear(N().getFullYear()+n))}function S(e,t){return e.inRange(t,e)&&e.min<=t&&e.max>=t}function N(){var e=new Date;return e.setHours(0,0,0,0),e}function Y(e,t){return e.toDateString()===t.toDateString()}function E(e){return"string"==typeof e?document.querySelector(e):e}var F=37,T=38,P=39,j=40,A=function(){var e=window.CustomEvent;return"function"!=typeof e&&(e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},e.prototype=window.Event.prototype),e}();return e}();"undefined"!=typeof module&&module.exports&&(module.exports=TinyDatePicker);
//# sourceMappingURL=tiny-date-picker.min.js.map