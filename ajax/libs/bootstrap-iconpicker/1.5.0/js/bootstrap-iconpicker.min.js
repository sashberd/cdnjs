/* ========================================================================
 * Bootstrap: bootstrap-iconpicker.js v1.5.0 by @recktoner
 * https://victor-valencia.github.com/bootstrap-iconpicker
 * ========================================================================
 * Copyright 2013-2014 Victor Valencia Rico.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */
+function(e){"use strict";var t=function(o,n){this.$element=e(o),this.options=e.extend({},t.DEFAULTS,this.$element.data()),this.options=e.extend({},this.options,n)};t.ICONSET={glyphicon:["adjust","align-center","align-justify","align-left","align-right","arrow-down","arrow-left","arrow-right","arrow-up","asterisk","backward","ban-circle","barcode","bell","bold","book","bookmark","briefcase","bullhorn","calendar","camera","certificate","check","chevron-down","chevron-left","chevron-right","chevron-up","circle-arrow-down","circle-arrow-left","circle-arrow-right","circle-arrow-up","cloud","cloud-download","cloud-upload","cog","collapse-down","collapse-up","comment","compressed","copyright-mark","credit-card","cutlery","dashboard","download","download-alt","earphone","edit","eject","envelope","euro","exclamation-sign","expand","export","eye-close","eye-open","facetime-video","fast-backward","fast-forward","file","film","filter","fire","flag","flash","floppy-disk","floppy-open","floppy-remove","floppy-save","floppy-saved","folder-close","folder-open","font","forward","fullscreen","gbp","gift","glass","globe","hand-down","hand-left","hand-right","hand-up","hd-video","hdd","header","headphones","heart","heart-empty","home","import","inbox","indent-left","indent-right","info-sign","italic","leaf","link","list","list-alt","lock","log-in","log-out","magnet","map-marker","minus","minus-sign","move","music","new-window","off","ok","ok-circle","ok-sign","open","paperclip","pause","pencil","phone","phone-alt","picture","plane","play","play-circle","plus","plus-sign","print","pushpin","qrcode","question-sign","random","record","refresh","registration-mark","remove","remove-circle","remove-sign","repeat","resize-full","resize-horizontal","resize-small","resize-vertical","retweet","road","save","saved","screenshot","sd-video","search","send","share","share-alt","shopping-cart","signal","sort","sort-by-alphabet","sort-by-alphabet-alt","sort-by-attributes","sort-by-attributes-alt","sort-by-order","sort-by-order-alt","sound-5-1","sound-6-1","sound-7-1","sound-dolby","sound-stereo","star","star-empty","stats","step-backward","step-forward","stop","subtitles","tag","tags","tasks","text-height","text-width","th","th-large","th-list","thumbs-down","thumbs-up","time","tint","tower","transfer","trash","tree-conifer","tree-deciduous","unchecked","upload","usd","user","volume-down","volume-off","volume-up","warning-sign","wrench","zoom-in","zoom-out"],fa:e.fontawesome||[]},t.DEFAULTS={iconset:"glyphicon",icon:"",rows:4,cols:4,placement:"bottom",arrowClass:"btn-primary",selectedClass:"btn-warning",unselectedClass:"btn-default",search:!0,searchText:"Search icon"},t.prototype.createButtonBar=function(){for(var t=this.options,o=e("<tr></tr>"),n=0;n<t.cols;n++){var a=e('<button class="btn '+t.arrowClass+'"><span class="glyphicon"></span></button>'),s=e('<td class="text-center"></td>');0==n||n==t.cols-1?(a.val(0==n?-1:1),a.addClass(0==n?"btn-previous":"btn-next"),a.find("span").addClass(0==n?"glyphicon-arrow-left":"glyphicon-arrow-right"),s.append(a),o.append(s)):0==o.find(".page-count").length&&(s.attr("colspan",t.cols-2).append('<span class="page-count"></span>'),o.append(s))}if(t.table.find("thead").append(o),1==t.search){var i=["<tr>",'   <td colspan="'+t.cols+'">','       <input type="text" class="form-control search-control" style="width: '+39*t.cols+'px;" placeholder="'+t.searchText+'">',"   </td>","</tr>"];t.table.find("thead").append(i.join(""))}},t.prototype.updateButtonBar=function(e){var t=this.options,o=Math.ceil(t.icons.length/(t.cols*t.rows));t.table.find(".page-count").html((0==o?0:e)+" / "+o);var n=t.table.find(".btn-previous"),a=t.table.find(".btn-next");1==e?n.addClass("disabled"):n.removeClass("disabled"),e==o||0==o?a.addClass("disabled"):a.removeClass("disabled")},t.prototype.bindEvents=function(){var t=this.options,o=this;t.table.find(".btn-previous, .btn-next").off("click").on("click",function(){var n=parseInt(e(this).val());o.changeList(t.page+n)}),t.table.find(".btn-icon").off("click").on("click",function(){o.select(e(this).val()),o.$element.popover("destroy")}),t.table.find(".search-control").off("keyup").on("keyup",function(){o.changeList(1)})},t.prototype.select=function(t){var o=this.options,n=this.$element;o.selected=e.inArray(t.replace(o.iconClassFix,""),o.icons),-1==o.selected&&(o.selected=0,t=o.iconClassFix+o.icons[o.selected]),""!=t&&o.selected>=0&&(o.icon=t,n.find("input").val(t),n.find("i").attr("class","").addClass(o.iconClass).addClass(t),n.trigger({type:"change",icon:t}),o.table.find("button."+o.selectedClass).removeClass(o.selectedClass))},t.prototype.switchPage=function(t){var o=this.options;if(o.selected=e.inArray(t.replace(o.iconClassFix,""),o.icons),""!=t&&o.selected>=0){var n=Math.ceil((o.selected+1)/(o.cols*o.rows));this.changeList(n)}o.table.find("i."+t).parent().addClass(o.selectedClass)},t.prototype.changeList=function(o){var n=this.options,a="";if(1==n.search)if(a=n.table.find(".search-control").val(),""==a)n.icons=t.ICONSET[n.ic];else{var s=[];e.each(t.ICONSET[n.ic],function(e,t){t.indexOf(a)>-1&&s.push(t)}),n.icons=s}this.updateButtonBar(o);for(var i=n.table.find("tbody").empty(),r=(o-1)*n.rows*n.cols,c=0;c<n.rows;c++){for(var l=e("<tr></tr>"),p=0;p<n.cols;p++){var d=r+c*n.cols+p,h=e('<button class="btn '+n.unselectedClass+' btn-icon"></button>').hide();if(d<n.icons.length){var f=n.iconClassFix+n.icons[d];h=e('<button class="btn '+(n.icon==f?n.selectedClass:n.unselectedClass)+' btn-icon" value="'+f+'" title="'+f+'"><i class="'+n.iconClass+" "+f+'"></i></button>')}var u=e("<td></td>").append(h);l.append(u)}i.append(l)}n.page=o,this.bindEvents()},t.prototype.setIcon=function(e){this.select(e)};var o=e.fn.iconpicker;e.fn.iconpicker=function(o,n){return this.each(function(){var a=e(this),s=a.data("bs.iconpicker"),i="object"==typeof o&&o;if(s||a.data("bs.iconpicker",s=new t(this,i)),"string"==typeof o)s[o](n);else{var r=s.options,c="fontawesome"==r.iconset?"fa":"glyphicon";r=e.extend(r,{ic:c,icons:t.ICONSET[c],iconClass:c,iconClassFix:c+"-",page:1,selected:-1,table:e('<table class="table-icons"><thead></thead><tbody></tbody></table>')});var l="undefined"!=typeof a.attr("name")?'name="'+a.attr("name")+'"':"";a.empty().append("<i></i>").append('<input type="hidden" '+l+"></input>").append('<span class="caret"></span>'),a.addClass("iconpicker"),s.createButtonBar(),s.changeList(1),a.on("click",function(e){e.preventDefault(),a.popover({animation:!1,trigger:"manual",html:!0,content:s.options.table,container:"body",placement:s.options.placement}).on("shown.bs.popover",function(){s.switchPage(r.icon),s.bindEvents()}),a.data("bs.popover").tip().addClass("iconpicker-popover"),a.popover("show")}),s.select(r.icon)}})},e.fn.iconpicker.Constructor=t,e.fn.iconpicker.noConflict=function(){return e.fn.iconpicker=o,this},e(document).on("click","body",function(t){e(".iconpicker").each(function(){e(this).is(t.target)||0!==e(this).has(t.target).length||0!==e(".popover").has(t.target).length||e(this).popover("destroy")})}),e('button[role="iconpicker"]').iconpicker()}(window.jQuery);
