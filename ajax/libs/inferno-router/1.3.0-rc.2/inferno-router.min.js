!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno"),require("inferno-component"),require("inferno-create-element"),require("path-to-regexp-es6")):"function"==typeof define&&define.amd?define(["exports","inferno","inferno-component","inferno-create-element","path-to-regexp-es6"],e):e(t["inferno-router"]=t["inferno-router"]||{},t.Inferno,t.Inferno.Component,t.Inferno.createElement,t.Inferno.pathToRegexp)}(this,function(t,e,n,o,r){"use strict";function i(t,n){var o=n.router,r=t.activeClassName,i=t.activeStyle,p=t.className,c=t.onClick,a=t.to,u=k(t,["activeClassName","activeStyle","className","onClick","to"]),s=I({href:a},u);return p&&(s.className=p),o.location.pathname===a&&(r&&(s.className=(p?p+" ":"")+r),i&&(s.style=Object.assign({},t.style,i))),s.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof c&&c(t),o.push(a,t.target.textContent))},e.createVNode(2,"a",s,t.children)}function p(t){return t.to="/",e.createVNode(8,i,t)}function c(t){return N(t)?t:t?[t]:t}function a(t){return"string"==typeof t}function u(t){return"string"!=typeof t?t:decodeURIComponent(t)}function s(t){return!t||!(N(t)?t:Object.keys(t)).length}function l(t){var e=[];return O(t,e),e}function f(t){return a(t)?t:t.pathname+t.search}function h(t){if(""===t)return{};for(var e=Object.create(null),n=t.split("&"),o=0,r=n.length;o<r;o++){var i=n[o],p=i.split("=").map(v),c=p[0],a=p[1];e[c]?(e[c]=N(e[c])?e[c]:[e[c]],e[c].push(a)):e[c]=a}return e}function d(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function m(t,e){var n={};for(var o in t)e.indexOf(o)<0&&(n[o]=t[o]);return n}function y(t,e){var n=t.props||P,o=e.props||P,r=b(o.path)-b(n.path);return r||(o.path&&n.path?o.path.length-n.path.length:0)}function v(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function g(t){return t.replace(/(^\/+|\/+$)/g,"")}function b(t){return void 0===t&&(t=""),(g(t).match(/\/+/g)||"").length}function O(t,e){for(var n=0,o=t.length;n<o;n++){var r=t[n];N(r)?O(r,e):e.push(r)}}function x(t,e){var n=f(e),o=_(c(t),n,"/");return o}function _(t,e,n,o){void 0===e&&(e="/"),void 0===n&&(n="/"),void 0===o&&(o=!1);var r=N(t)?l(t):c(t),i=e.split("?"),p=i[0];void 0===p&&(p="/");var a=i[1];void 0===a&&(a="");var u=h(a);r.sort(y);for(var f=0,m=r.length;f<m;f++){var v=r[f],g=v.props||P,b=g.from||g.path||"/",O=n+d(b,n).replace(/\/\//g,"/"),x=s(g.children),j=C(x,O,p);if(j){var I=g.children;if(g.from&&(o=g.to),I){var k=_(I,e,O,o);if(k){if(k.redirect)return{location:O,redirect:k.redirect};I=k.matched,Object.assign(u,I.props.params)}else I=null}var L=R.cloneVNode(v,{params:Object.assign(u,j.params),children:I});return{location:O,redirect:o,matched:L}}}}function C(t,e,n){var o=e+"|"+t,i=S.get(o);if(!i){var p=[];i={pattern:r(e,p,{end:t}),keys:p},S.set(o,i)}var c=i.pattern.exec(n);if(!c)return null;for(var a=c[0],s=Object.create(null),l=1,f=c.length;l<f;l+=1)s[i.keys[l-1].name]=u(c[l]);return{path:""===a?"/":a,params:s}}function j(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,replace:t.replace,listen:t.listen,isActive:function(t){return C(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}var R="default"in e?e.default:e;n="default"in n?n.default:n,o="default"in o?o.default:o,r="default"in r?r.default:r;var I=Object.assign||function(t){for(var e,n=arguments,o=1,r=arguments.length;o<r;o++){e=n[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},k=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&(n[o[r]]=t[o[r]]);return n},N=Array.isArray,P={},L=function(t){function e(e,n){var o=this;t.call(this,e,n),this._onComponentResolved=function(t,e){o.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.onEnter,o=this.context,r=o.router;n&&Promise.resolve().then(function(){n({props:t.props,router:r})});var i=this.props,p=i.getComponent;p&&Promise.resolve().then(function(){p({props:t.props,router:r},t._onComponentResolved)})},e.prototype.onLeave=function t(e){void 0===e&&(e=!1);var n=this.props,t=n.onLeave,o=this.context,r=o.router;t&&e&&t({props:this.props,router:r})},e.prototype.onEnter=function t(e){var t=e.onEnter,n=this.context,o=n.router;this.props.path!==e.path&&t&&t({props:e,router:o})},e.prototype.getComponent=function t(e){var t=e.getComponent,n=this.context,o=n.router;this.props.path!==e.path&&t&&t({props:e,router:o},this._onComponentResolved)},e.prototype.componentWillUnmount=function(){this.onLeave(!0)},e.prototype.componentWillReceiveProps=function(t){this.getComponent(t),this.onEnter(t),this.onLeave(this.props.path!==t.path)},e.prototype.render=function(t){var e=t.component,n=t.children,r=m(t,["component","children","path","getComponent"]),i=this.state,p=i.asyncComponent,c=e||p;return c?o(c,r,n):null},e}(n),w=function(t){function e(e,n){t.call(this,e,n),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(L),E=function(t){function e(e,n){t.call(this,e,n),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(L),S=new Map,W=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location}}}},e.prototype.render=function(t){return t.matched},e}(n),q=function(t){function n(e,n){t.call(this,e,n),this.router=j(e.history),this.state={url:e.url||this.router.url}}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(){t.routeTo(t.router.url)}))},n.prototype.componentWillReceiveProps=function(t){this.setState({url:t.url})},n.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.prototype.routeTo=function(t){this.setState({url:t})},n.prototype.render=function(t){var n=this,o=x(t.children,this.state.url);return o.redirect?(setTimeout(function(){n.router.replace(o.redirect)},0),null):e.createVNode(4,W,{location:this.state.url,router:this.router,matched:o.matched})},n}(n),T={Route:L,IndexRoute:w,Redirect:E,IndexRedirect:E,Router:q,RouterContext:W,Link:i,IndexLink:p,match:x};t.Route=L,t.IndexRoute=w,t.Redirect=E,t.IndexRedirect=E,t.Router=q,t.RouterContext=W,t.Link=i,t.IndexLink=p,t.match=x,t.default=T,Object.defineProperty(t,"__esModule",{value:!0})});
