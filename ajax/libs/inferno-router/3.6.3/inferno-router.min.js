!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno-create-element"),require("inferno-component"),require("inferno"),require("path-to-regexp")):"function"==typeof define&&define.amd?define(["exports","inferno-create-element","inferno-component","inferno","path-to-regexp"],e):e((t.Inferno=t.Inferno||{},t.Inferno.Router=t.Inferno.Router||{}),t.Inferno.createElement,t.Inferno.Component,t.Inferno)})(this,(function(t,e,r,n){"use strict";function o(t){return V(t)?t:t?[t]:t}function i(t){return"string"==typeof t}function p(t,e){var r={};if(t)for(var n in t)r[n]=t[n];if(e)for(var o in e)r[o]=e[o];return r}function u(t){return"string"!=typeof t?t:decodeURIComponent(t)}function c(t){return!t||!(V(t)?t:Object.keys(t)).length}function a(t){var e=[];return g(t,e),e}function s(t){return i(t)?t:t.pathname+t.search}function l(t){if(""===t)return{};for(var e=Object.create(null),r=t.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=").map(v).map(decodeURIComponent),p=i[0],u=i[1];e[p]?(e[p]=V(e[p])?e[p]:[e[p]],e[p].push(u)):e[p]=u}return e}function f(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function h(t,e){var r={};for(var n in t)e.indexOf(n)<0&&(r[n]=t[n]);return r}function d(t,e){var r=t.props||H,n=e.props||H;return y(n.path)-y(r.path)||(n.path&&r.path?n.path.length-r.path.length:0)}function v(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function m(t){return t.replace(/(^\/+|\/+$)/g,"")}function y(t){return void 0===t&&(t=""),(m(t).match(/\/+/g)||"").length}function g(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];V(o)?g(o,e):e.push(o)}}function x(t){if(t.indexRoute&&!t.childRoutes)return e(z,t);var r={};for(var n in t)r[n]=t[n];if(r.children=[],r.indexRoute&&(r.children.push(D(r.indexRoute)),delete r.indexRoute),r.childRoutes){var o=V(r.childRoutes)?r.childRoutes:[r.childRoutes];(i=r.children).push.apply(i,G(o)),delete r.childRoutes}return 1===r.children.length&&(r.children=r.children[0]),(V(r.children)&&0===r.children.length||!V(r.children)&&0===Object.keys(r.children).length)&&delete r.children,e(z,r);var i}function R(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r}function b(t,e,r){return n.createVNode(2,"a",t,e,r)}function C(t,e){var r,n=e.router,o=t.activeClassName,i=t.activeStyle,u=t.className,c=t.onClick,a=t.children,s=t.to,l=R(t,["activeClassName","activeStyle","className","onClick","children","to"]);return u&&(r=u),n?(l.href=M?n.createHref({pathname:s}):n.location.baseUrl?n.location.baseUrl+s:s,n.location.pathname===s&&(o&&(r=(u?u+" ":"")+o),i&&(l.style=p(t.style,i))),l.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof c&&c(t),n.push(s,t.target.textContent))},b(r,a,l)):(l.href=s,l.onClick=c,b(r,a,l))}function E(t){return t.to="/",n.createVNode(8,C,null,null,t)}function _(t,e){for(var r,n=[],o=0,i=0,p="",u=e&&e.delimiter||"/";null!=(r=ot.exec(t));){var c=r[0],a=r[1],s=r.index;if(p+=t.slice(i,s),i=s+c.length,a)p+=a[1];else{var l=t[i],f=r[2],h=r[3],d=r[4],v=r[5],m=r[6],y=r[7];p&&(n.push(p),p="");var g=null!=f&&null!=l&&l!==f,x="+"===m||"*"===m,R="?"===m||"*"===m,b=r[2]||u,C=d||v;n.push({name:h||o++,prefix:f||"",delimiter:b,optional:R,repeat:x,partial:g,asterisk:!!y,pattern:C?j(C):y?".*":"[^"+I(b)+"]+?"})}}return i<t.length&&(p+=t.substr(i)),p&&n.push(p),n}function w(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function k(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function O(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var o="",i=r||{},p=(n||{}).pretty?w:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!=typeof c){var a,s=i[c.name];if(null==s){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(Y(s)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(s)+"`");if(0===s.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var l=0;l<s.length;l++){if(a=p(s[l]),!e[u].test(a))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(a)+"`");o+=(0===l?c.prefix:c.delimiter)+a}}else{if(a=c.asterisk?k(s):p(s),!e[u].test(a))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+a+'"');o+=c.prefix+a}}else o+=c}return o}}function I(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function j(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function U(t,e){return t.keys=e,t}function T(t){return t.sensitive?"":"i"}function S(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return U(t,e)}function N(t,e,r){for(var n=[],o=0;o<t.length;o++)n.push(L(t[o],e,r).source);return U(new RegExp("(?:"+n.join("|")+")",T(r)),e)}function A(t,e,r){return $(_(t,r),e,r)}function $(t,e,r){Y(e)||(r=e||r,e=[]);for(var n=(r=r||{}).strict,o=!1!==r.end,i="",p=0;p<t.length;p++){var u=t[p];if("string"==typeof u)i+=I(u);else{var c=I(u.prefix),a="(?:"+u.pattern+")";e.push(u),u.repeat&&(a+="(?:"+c+a+")*"),i+=a=u.optional?u.partial?c+"("+a+")?":"(?:"+c+"("+a+"))?":c+"("+a+")"}}var s=I(r.delimiter||"/"),l=i.slice(-s.length)===s;return n||(i=(l?i.slice(0,-s.length):i)+"(?:"+s+"(?=$))?"),i+=o?"$":n&&l?"":"(?="+s+"|$)",U(new RegExp("^"+i,T(r)),e)}function L(t,e,r){return Y(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?S(t,e):Y(t)?N(t,e,r):A(t,e,r)}function P(t,e){var r=s(e);return W(o(t),encodeURI(r),"/")}function W(t,e,r,n){void 0===e&&(e="/"),void 0===r&&(r="/"),void 0===n&&(n=!1);var i=V(t)?a(t):o(t),u=e.split("?"),s=u[0];void 0===s&&(s="/");var h=u[1];void 0===h&&(h="");var v=l(h);i.sort(d);for(var m=0,y=i.length;m<y;m++){var g=i[m],x=g.props||H,R=r+f(x.from||x.path||"/",r).replace(/\/\//g,"/"),b=q(c(x.children),R,s);if(b){var C=x.children;if(x.from&&(n=x.to),C){var E=W(C,e,R,n);if(E){if(E.redirect)return{location:R,redirect:E.redirect};var _=(C=E.matched).props.params;for(var w in _)v[w]=_[w]}else C=null}return{location:R,matched:K.cloneVNode(g,{children:C,params:p(v,b.params)}),redirect:n}}}}function q(t,e,r){var n=e+"|"+t,o=ct.get(n);if(void 0===o){var i=[];o={pattern:ut(e,i,{end:t}),keys:i},ct.set(n,o)}var p=o.pattern.exec(r);if(!p)return null;for(var c=p[0],a=Object.create(null),s=1,l=p.length;s<l;s+=1)a[o.keys[s-1].name]=u(p[s]);return{params:a,path:""===c?"/":c}}function F(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{createHref:t.createHref,listen:t.listen,push:t.push,replace:t.replace,isActive:function(t){return q(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}e=e&&"default"in e?e.default:e,r=r&&"default"in r?r.default:r;var K="default"in n?n.default:n,M=!("undefined"==typeof window||!window.document),V=Array.isArray,H={},J=Promise.resolve(),z=(function(t){function r(e,r){var n=this;t.call(this,e,r),this._onComponentResolved=function(t,e){n.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this,e=this.props.onEnter,r=this.context.router;e&&J.then((function(){e({props:t.props,router:r})}));var n=this.props.getComponent;n&&J.then((function(){n({props:t.props,router:r},t._onComponentResolved)}))},r.prototype.onLeave=function(t){void 0===t&&(t=!1);var e=this.props.onLeave,r=this.context.router;e&&t&&e({props:this.props,router:r})},r.prototype.onEnter=function(t){var e=t.onEnter,r=this.context.router;this.props.path!==t.path&&e&&e({props:t,router:r})},r.prototype.getComponent=function(t){var e=t.getComponent,r=this.context.router;this.props.path!==t.path&&e&&e({props:t,router:r},this._onComponentResolved)},r.prototype.componentWillUnmount=function(){this.onLeave(!0)},r.prototype.componentWillReceiveProps=function(t){this.getComponent(t),this.onEnter(t),this.onLeave(this.props.path!==t.path)},r.prototype.render=function(t){var r=t.component,n=t.children,o=h(t,["component","children","path","getComponent"]),i=this.state.asyncComponent,p=r||i;return p?e(p,o,n):V(n)?null:n},r})(r),D=function(t){return e(z,t)},B=function(t){return x(t)},G=function(t){return t.map(B)},Q=function(t){return t.map(x)},X=(function(t){function e(e,r){t.call(this,e,r),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(z),Y=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Z=L,tt=_,et=function(t,e){return O(_(t,e))},rt=O,nt=$,ot=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Z.parse=tt,Z.compile=et,Z.tokensToFunction=rt,Z.tokensToRegExp=nt;var it=Object.freeze({default:Z,__moduleExports:Z,parse:tt,compile:et,tokensToFunction:rt,tokensToRegExp:nt}),pt=it&&Z||it,ut=(function(t,e){return e={exports:{}},t(e,e.exports),e.exports})((function(t){t.exports=pt,t.exports.parse=pt.parse,t.exports.compile=pt.compile,t.exports.tokensToFunction=pt.tokensToFunction,t.exports.tokensToRegExp=pt.tokensToRegExp,t.exports.default=t.exports})),ct=new Map,at=(function(t){function e(e,r){t.call(this,e,r),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(z),st=(function(t){function e(e,r){t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{baseUrl:this.props.baseUrl,pathname:this.props.location}}}},e.prototype.render=function(t){return t.matched},e})(r),lt=(function(t){function e(e,r){t.call(this,e,r),this.router=F(e.history),this.state={url:e.url||this.router.url}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen((function(){t.routeTo(t.router.url)})))},e.prototype.componentWillReceiveProps=function(t){var e=this;this.setState({url:t.url},this.props.onUpdate?function(){return e.props.onUpdate()}:void 0)},e.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},e.prototype.routeTo=function(t){var e=this;this.setState({url:t},this.props.onUpdate?function(){return e.props.onUpdate()}:void 0)},e.prototype.render=function(t){var e=this,r=P(t.children,this.state.url);return r.redirect?(setTimeout((function(){e.router.replace(r.redirect)}),0),null):n.createVNode(4,st,null,null,{location:this.state.url,matched:r.matched,router:this.router})},e})(r),ft={IndexLink:E,IndexRedirect:at,IndexRoute:X,Link:C,Redirect:at,Route:z,Router:lt,RouterContext:st,createRoutes:Q,match:P};t.IndexLink=E,t.IndexRedirect=at,t.IndexRoute=X,t.Link=C,t.Redirect=at,t.Route=z,t.Router=lt,t.RouterContext=st,t.createRoutes=Q,t.match=P,t.default=ft,Object.defineProperty(t,"__esModule",{value:!0})}));
