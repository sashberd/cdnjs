!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno"),require("inferno-component"),require("inferno-create-element"),require("path-to-regexp-es6")):"function"==typeof define&&define.amd?define(["exports","inferno","inferno-component","inferno-create-element","path-to-regexp-es6"],e):e(t["inferno-router"]=t["inferno-router"]||{},t.Inferno,t.Inferno.Component,t.Inferno.createElement,t.Inferno.pathToRegexp)}(this,function(t,e,r,n,o){"use strict";function i(t,r){var n=r.router,o=t.activeClassName,i=t.activeStyle,c=t.className,p=t.onClick,a=t.to,u=k(t,["activeClassName","activeStyle","className","onClick","to"]),s=I({href:a},u);return c&&(s.className=c),n.location.pathname===a&&(o&&(s.className=(c?c+" ":"")+o),i&&(s.style=Object.assign({},t.style,i))),s.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof p&&p(t),n.push(a,t.target.textContent))},e.createVNode(2,"a",s,t.children)}function c(t){return t.to="/",e.createVNode(8,i,t)}function p(t){return N(t)?t:t?[t]:t}function a(t){return"string"==typeof t}function u(t){return"string"!=typeof t?t:decodeURIComponent(t)}function s(t){return!t||!(N(t)?t:Object.keys(t)).length}function l(t){var e=[];return O(t,e),e}function f(t){return a(t)?t:t.pathname+t.search}function h(t){if(""===t)return{};for(var e=Object.create(null),r=t.split("&"),n=0,o=r.length;n<o;n++){var i=r[n],c=i.split("=").map(v),p=c[0],a=c[1];e[p]?(e[p]=N(e[p])?e[p]:[e[p]],e[p].push(a)):e[p]=a}return e}function d(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function y(t,e){var r={};for(var n in t)e.indexOf(n)<0&&(r[n]=t[n]);return r}function m(t,e){var r=t.props||P,n=e.props||P,o=b(n.path)-b(r.path);return o||(n.path&&r.path?n.path.length-r.path.length:0)}function v(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function g(t){return t.replace(/(^\/+|\/+$)/g,"")}function b(t){return void 0===t&&(t=""),(g(t).match(/\/+/g)||"").length}function O(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];N(o)?O(o,e):e.push(o)}}function _(t,e){var r=f(e),n=x(p(t),r,"/");return n}function x(t,e,r,n){void 0===e&&(e="/"),void 0===r&&(r="/"),void 0===n&&(n=!1);var o=N(t)?l(t):p(t),i=e.split("?"),c=i[0];void 0===c&&(c="/");var a=i[1];void 0===a&&(a="");var u=h(a);o.sort(m);for(var f=0,y=o.length;f<y;f++){var v=o[f],g=v.props||P,b=g.from||g.path||"/",O=r+d(b,r).replace(/\/\//g,"/"),_=s(g.children),R=j(_,O,c);if(R){var I=g.children;if(g.from&&(n=g.to),I){var k=x(I,e,O,n);if(k){if(k.redirect)return{location:O,redirect:k.redirect};I=k.matched,Object.assign(u,I.props.params)}else I=null}var L=C.cloneVNode(v,{params:Object.assign(u,R.params),children:I});return{location:O,redirect:n,matched:L}}}}function j(t,e,r){var n=e+"|"+t,i=W.get(n);if(!i){var c=[];i={pattern:o(e,c,{end:t}),keys:c},W.set(n,i)}var p=i.pattern.exec(r);if(!p)return null;for(var a=p[0],s=Object.create(null),l=1,f=p.length;l<f;l+=1)s[i.keys[l-1].name]=u(p[l]);return{path:""===a?"/":a,params:s}}function R(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,replace:t.replace,listen:t.listen,isActive:function(t){return j(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}var C="default"in e?e.default:e;r="default"in r?r.default:r,n="default"in n?n.default:n,o="default"in o?o.default:o;var I=Object.assign||function(t){for(var e,r=arguments,n=1,o=arguments.length;n<o;n++){e=r[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},k=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r},N=Array.isArray,P={},L=function(t){function e(e,r){var n=this;t.call(this,e,r),this._onComponentResolved=function(t,e){n.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this,e=this.props,r=e.onEnter,n=this.context,o=n.router;r&&Promise.resolve().then(function(){r({props:t.props,router:o})});var i=this.props,c=i.getComponent;c&&Promise.resolve().then(function(){c({props:t.props,router:o},t._onComponentResolved)})},e.prototype.onLeave=function t(e){void 0===e&&(e=!1);var r=this.props,t=r.onLeave,n=this.context,o=n.router;t&&e&&t({props:this.props,router:o})},e.prototype.componentWillUnmount=function(){this.onLeave(!0)},e.prototype.componentWillReceiveProps=function(t){this.onLeave(this.props.path!==t.path)},e.prototype.render=function(t){var e=t.component,r=t.children,o=y(t,["component","children","path"]),i=this.state,c=i.asyncComponent,p=e||c;return p?n(p,o,r):null},e}(r),w=function(t){function e(e,r){t.call(this,e,r),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(L),S=function(t){function e(e,r){t.call(this,e,r),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(L),W=new Map,q=function(t){function e(e,r){t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location}}}},e.prototype.render=function(t){return t.matched},e}(r),T=function(t){function r(e,r){t.call(this,e,r),this.router=R(e.history),this.state={url:e.url||this.router.url}}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(){t.routeTo(t.router.url)}))},r.prototype.componentWillReceiveProps=function(t){this.setState({url:t.url})},r.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.prototype.routeTo=function(t){this.setState({url:t})},r.prototype.render=function(t){var r=this,n=_(t.children,this.state.url);return n.redirect?(setTimeout(function(){r.router.replace(n.redirect)},0),null):e.createVNode(4,q,{location:this.state.url,router:this.router,matched:n.matched})},r}(r),E={Route:L,IndexRoute:w,Redirect:S,IndexRedirect:S,Router:T,RouterContext:q,Link:i,IndexLink:c,match:_};t.Route=L,t.IndexRoute=w,t.Redirect=S,t.IndexRedirect=S,t.Router=T,t.RouterContext=q,t.Link=i,t.IndexLink=c,t.match=_,t.default=E,Object.defineProperty(t,"__esModule",{value:!0})});
