!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno"),require("inferno-component"),require("inferno-create-element"),require("path-to-regexp-es6")):"function"==typeof define&&define.amd?define(["exports","inferno","inferno-component","inferno-create-element","path-to-regexp-es6"],e):e(t["inferno-router"]=t["inferno-router"]||{},t.Inferno,t.Inferno.Component,t.Inferno.createElement,t.Inferno.pathToRegexp)}(this,function(t,e,o,n,r){"use strict";function i(t){return k(t)?t:t?[t]:t}function p(t){return"string"==typeof t}function c(t,o){var n=o.router,r=t.activeClassName,i=t.activeStyle,p=t.className,c=t.onClick,a=t.to,u=w(t,["activeClassName","activeStyle","className","onClick","to"]),s=Object.assign({href:I?n.createHref({pathname:a}):n.location.baseUrl?n.location.baseUrl+a:a},u);return p&&(s.className=p),n.location.pathname===a&&(r&&(s.className=(p?p+" ":"")+r),i&&(s.style=Object.assign({},t.style,i))),s.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof c&&c(t),n.push(a,t.target.textContent))},e.createVNode(2,"a",s,t.children)}function a(t){return t.to="/",e.createVNode(8,c,t)}function u(t){return"string"!=typeof t?t:decodeURIComponent(t)}function s(t){return!t||!(k(t)?t:Object.keys(t)).length}function l(t){var e=[];return x(t,e),e}function f(t){return p(t)?t:t.pathname+t.search}function h(t){if(""===t)return{};for(var e=Object.create(null),o=t.split("&"),n=0,r=o.length;n<r;n++){var i=o[n],p=i.split("=").map(v),c=p[0],a=p[1];e[c]?(e[c]=k(e[c])?e[c]:[e[c]],e[c].push(a)):e[c]=a}return e}function d(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function m(t,e){var o={};for(var n in t)e.indexOf(n)<0&&(o[n]=t[n]);return o}function y(t,e){var o=t.props||N,n=e.props||N,r=b(n.path)-b(o.path);return r||(n.path&&o.path?n.path.length-o.path.length:0)}function v(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function g(t){return t.replace(/(^\/+|\/+$)/g,"")}function b(t){return void 0===t&&(t=""),(g(t).match(/\/+/g)||"").length}function x(t,e){for(var o=0,n=t.length;o<n;o++){var r=t[o];k(r)?x(r,e):e.push(r)}}function O(t,e){var o=f(e),n=_(i(t),o,"/");return n}function _(t,e,o,n){void 0===e&&(e="/"),void 0===o&&(o="/"),void 0===n&&(n=!1);var r=k(t)?l(t):i(t),p=e.split("?"),c=p[0];void 0===c&&(c="/");var a=p[1];void 0===a&&(a="");var u=h(a);r.sort(y);for(var f=0,m=r.length;f<m;f++){var v=r[f],g=v.props||N,b=g.from||g.path||"/",x=o+d(b,o).replace(/\/\//g,"/"),O=s(g.children),j=C(O,x,c);if(j){var I=g.children;if(g.from&&(n=g.to),I){var w=_(I,e,x,n);if(w){if(w.redirect)return{location:x,redirect:w.redirect};I=w.matched,Object.assign(u,I.props.params)}else I=null}var L=R.cloneVNode(v,{params:Object.assign(u,j.params),children:I});return{location:x,redirect:n,matched:L}}}}function C(t,e,o){var n=e+"|"+t,i=E.get(n);if(!i){var p=[];i={pattern:r(e,p,{end:t}),keys:p},E.set(n,i)}var c=i.pattern.exec(o);if(!c)return null;for(var a=c[0],s=Object.create(null),l=1,f=c.length;l<f;l+=1)s[i.keys[l-1].name]=u(c[l]);return{path:""===a?"/":a,params:s}}function j(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,replace:t.replace,listen:t.listen,createHref:t.createHref,isActive:function(t){return C(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}var R="default"in e?e.default:e;o="default"in o?o.default:o,n="default"in n?n.default:n,r="default"in r?r.default:r;var I="undefined"!=typeof window&&window.document,k=Array.isArray,w=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]]);return o},N={},L=function(t){function e(e,o){var n=this;t.call(this,e,o),this._onComponentResolved=function(t,e){n.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this,e=this.props,o=e.onEnter,n=this.context,r=n.router;o&&Promise.resolve().then(function(){o({props:t.props,router:r})});var i=this.props,p=i.getComponent;p&&Promise.resolve().then(function(){p({props:t.props,router:r},t._onComponentResolved)})},e.prototype.onLeave=function t(e){void 0===e&&(e=!1);var o=this.props,t=o.onLeave,n=this.context,r=n.router;t&&e&&t({props:this.props,router:r})},e.prototype.onEnter=function t(e){var t=e.onEnter,o=this.context,n=o.router;this.props.path!==e.path&&t&&t({props:e,router:n})},e.prototype.getComponent=function t(e){var t=e.getComponent,o=this.context,n=o.router;this.props.path!==e.path&&t&&t({props:e,router:n},this._onComponentResolved)},e.prototype.componentWillUnmount=function(){this.onLeave(!0)},e.prototype.componentWillReceiveProps=function(t){this.getComponent(t),this.onEnter(t),this.onLeave(this.props.path!==t.path)},e.prototype.render=function(t){var e=t.component,o=t.children,r=m(t,["component","children","path","getComponent"]),i=this.state,p=i.asyncComponent,c=e||p;return c?n(c,r,o):null},e}(o),P=function(t){function e(e,o){t.call(this,e,o),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(L),U=function(t){function e(e,o){t.call(this,e,o),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(L),E=new Map,S=function(t){function e(e,o){t.call(this,e,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location,baseUrl:this.props.baseUrl}}}},e.prototype.render=function(t){return t.matched},e}(o),W=function(t){function o(e,o){t.call(this,e,o),this.router=j(e.history),this.state={url:e.url||this.router.url}}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(){t.routeTo(t.router.url)}))},o.prototype.componentWillReceiveProps=function(t){this.setState({url:t.url})},o.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},o.prototype.routeTo=function(t){this.setState({url:t})},o.prototype.render=function(t){var o=this,n=O(t.children,this.state.url);return n.redirect?(setTimeout(function(){o.router.replace(n.redirect)},0),null):e.createVNode(4,S,{location:this.state.url,router:this.router,matched:n.matched})},o}(o),q={Route:L,IndexRoute:P,Redirect:U,IndexRedirect:U,Router:W,RouterContext:S,Link:c,IndexLink:a,match:O};t.Route=L,t.IndexRoute=P,t.Redirect=U,t.IndexRedirect=U,t.Router=W,t.RouterContext=S,t.Link=c,t.IndexLink=a,t.match=O,t.default=q,Object.defineProperty(t,"__esModule",{value:!0})});
