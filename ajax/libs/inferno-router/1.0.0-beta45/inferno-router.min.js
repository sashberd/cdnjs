!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("./inferno-create-element"),require("./inferno-component"),require("./inferno")):"function"==typeof define&&define.amd?define(["inferno-create-element","inferno-component","inferno"],e):(t.Inferno=t.Inferno||{},t.Inferno.Router=e(t.Inferno.createElement,t.Inferno.Component,t.Inferno))}(this,function(t,e,r){"use strict";function n(e,r){var n=r.router,o=e.activeClassName,i=e.activeStyle,p=e.className,a=e.onClick,u=e.to,c={href:u};return p&&(c.className=p),n.location.pathname===u&&(o&&(c.className=(p?p+" ":"")+o),i&&(c.style=Object.assign({},e.style,i))),c.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||(t.preventDefault(),"function"==typeof a&&a(),n.push(u,t.target.textContent))},t("a",c,e.children)}function o(t){return S(t)?t:t?[t]:t}function i(t){return"string"==typeof t}function p(t){return"string"!=typeof t?t:decodeURIComponent(t)}function a(t){return!t||!(S(t)?t:Object.keys(t)).length}function u(t){var e=[];return y(t,e),e}function c(t){return i(t)?t:t.pathname+t.search}function s(t){if(""===t)return q;for(var e=Object.create(null),r=t.split("&"),n=0;n<r.length;n++){var o=r[n].split("=").map(d),i=o[0],p=o[1];e[i]?(e[i]=S(e[i])?e[i]:[e[i]],e[i].push(p)):e[i]=p}return e}function l(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function f(t,e){var r={};for(var n in t)e.indexOf(n)<0&&(r[n]=t[n]);return r}function h(t,e){var r=t.props||q,n=e.props||q;return v(n.path)-v(r.path)||(n.path&&r.path?n.path.length-r.path.length:0)}function d(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function m(t){return t.replace(/(^\/+|\/+$)/g,"")}function v(t){return void 0===t&&(t=""),(m(t).match(/\/+/g)||"").length}function y(t,e){for(var r=0;r<t.length;r++){var n=t[r];S(n)?y(n,e):e.push(n)}}function g(t,e){for(var r,n=[],o=0,i=0,p="",a=e&&e.delimiter||"/";null!=(r=K.exec(t));){var u=r[0],c=r[1],s=r.index;if(p+=t.slice(i,s),i=s+u.length,c)p+=c[1];else{var l=t[i],f=r[2],h=r[3],d=r[4],m=r[5],v=r[6],y=r[7];p&&(n.push(p),p="");var g=null!=f&&null!=l&&l!==f,x="+"===v||"*"===v,E="?"===v||"*"===v,b=r[2]||a,k=d||m;n.push({name:h||o++,prefix:f||"",delimiter:b,optional:E,repeat:x,partial:g,asterisk:!!y,pattern:k?R(k):y?".*":"[^"+w(b)+"]+?"})}}return i<t.length&&(p+=t.substr(i)),p&&n.push(p),n}function x(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function E(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function b(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var o="",i=r||{},p=(n||{}).pretty?x:encodeURIComponent,a=0;a<t.length;a++){var u=t[a];if("string"!=typeof u){var c,s=i[u.name];if(null==s){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(F(s)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(s)+"`");if(0===s.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var l=0;l<s.length;l++){if(c=p(s[l]),!e[a].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(c)+"`");o+=(0===l?u.prefix:u.delimiter)+c}}else{if(c=u.asterisk?E(s):p(s),!e[a].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+c+'"');o+=u.prefix+c}}else o+=u}return o}}function w(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function R(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function k(t,e){return t.keys=e,t}function j(t){return t.sensitive?"":"i"}function O(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return k(t,e)}function _(t,e,r){for(var n=[],o=0;o<t.length;o++)n.push(I(t[o],e,r).source);return k(new RegExp("(?:"+n.join("|")+")",j(r)),e)}function T(t,e,r){return C(g(t,r),e,r)}function C(t,e,r){F(e)||(r=e||r,e=[]);for(var n=(r=r||{}).strict,o=!1!==r.end,i="",p=0;p<t.length;p++){var a=t[p];if("string"==typeof a)i+=w(a);else{var u=w(a.prefix),c="(?:"+a.pattern+")";e.push(a),a.repeat&&(c+="(?:"+u+c+")*"),i+=c=a.optional?a.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")"}}var s=w(r.delimiter||"/"),l=i.slice(-s.length)===s;return n||(i=(l?i.slice(0,-s.length):i)+"(?:"+s+"(?=$))?"),i+=o?"$":n&&l?"":"(?="+s+"|$)",k(new RegExp("^"+i,j(r)),e)}function I(t,e,r){return F(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?O(t,e):F(t)?_(t,e,r):T(t,e,r)}function N(t,e){var r=c(e);return U(o(t),r,"/")}function U(t,e,n){void 0===e&&(e="/"),void 0===n&&(n="/");var i=S(t)?u(t):o(t),p=e.split("?"),c=p[0];void 0===c&&(c="/");var f=p[1];void 0===f&&(f="");var d=s(f);i.sort(h);for(var m=0;m<i.length;m++){var v=i[m],y=n+l(v.props&&v.props.path||"/",n).replace(/\/\//g,"/"),g=$(!v.props||a(v.props.children),y,c);if(g){var x=null;if(v.props&&v.props.children){var E=U(v.props.children,c,y);E?(x=E.matched,Object.assign(d,E.matched.props.params)):v.props.children=null}return{location:y,matched:r.cloneVNode(v,{params:Object.assign(d,g.params)},x)}}}}function $(t,e,r){var n=e+"|"+t,o=z.get(n);if(!o){var i=[];o={pattern:V(e,i,{end:t}),keys:i},z.set(n,o)}var a=o.pattern.exec(r);if(!a)return null;for(var u=a[0],c=Object.create(null),s=1;s<a.length;s+=1)c[o.keys[s-1].name]=p(a[s]);return{path:""===u?"/":u,params:c}}function A(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,listen:t.listen,get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}t="default"in t?t.default:t,e="default"in e?e.default:e,r="default"in r?r.default:r;var S=Array.isArray,q=Object.create(null),L=function(e){function r(t,r){e.call(this,t,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this,e=this.props.onEnter,r=this.context.router;e&&Promise.resolve().then(function(){e({props:t.props,router:r})})},r.prototype.onLeave=function(t){void 0===t&&(t=!1);var e=this.props.onLeave,r=this.context.router;e&&t&&e({props:this.props,router:r})},r.prototype.componentWillUnmount=function(){this.onLeave(!0)},r.prototype.componentWillReceiveProps=function(t){this.onLeave(this.props.path!==t.path)},r.prototype.render=function(e){var r=e.component,n=e.children,o=f(e,["component","children","path"]);return t(r,o,n)},r}(e),W=function(t){function e(e,r){t.call(this,e,r),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(L),F=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},M=I,P=g,D=b,J=C,K=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");M.parse=P,M.compile=function(t,e){return b(g(t,e))},M.tokensToFunction=D,M.tokensToRegExp=J;var V=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t){var e=M;t.exports=e,t.exports.parse=e.parse,t.exports.compile=e.compile,t.exports.tokensToFunction=e.tokensToFunction,t.exports.tokensToRegExp=e.tokensToRegExp,t.exports.default=t.exports}),z=new Map,B=function(t){function e(e,r){if(t.call(this,e,r),"production"!==process.env.NODE_ENV){if(!e.matched&&!e.location)throw new TypeError('"inferno-router" requires a "location" prop passed');if(!e.matched&&!e.routes)throw new TypeError('"inferno-router" requires a "matched" prop passed or "Route" children defined')}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location}}}},e.prototype.render=function(t){var e=t.routes,r=t.matched,n=t.location;return r||N(e,n).matched},e}(e);return{Route:L,IndexRoute:W,Router:function(e){function r(t,r){e.call(this,t,r),this.router=A(t.history),this.state={url:t.url||this.router.url}}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(e){t.routeTo(e.pathname)}))},r.prototype.componentWillReceiveProps=function(t){this.setState({url:t.url})},r.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.prototype.routeTo=function(t){this.setState({url:t})},r.prototype.render=function(){return t(B,{location:this.state.url,router:this.router,routes:this.props.children})},r}(e),RouterContext:B,Link:n,IndexLink:function(e){return e.to="/",t(n,e)},match:N}});