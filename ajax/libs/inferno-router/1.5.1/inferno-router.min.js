!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno"),require("inferno-component"),require("inferno-create-element"),require("path-to-regexp-es6")):"function"==typeof define&&define.amd?define(["exports","inferno","inferno-component","inferno-create-element","path-to-regexp-es6"],e):e((t.Inferno=t.Inferno||{},t.Inferno.Router=t.Inferno.Router||{}),t.Inferno,t.Inferno.Component,t.Inferno.createElement,t.Inferno.pathToRegexp)})(this,(function(t,e,n,r,o){"use strict";function i(t){return w(t)?t:t?[t]:t}function u(t){return"string"==typeof t}function p(t,e){var n,r={};if(t)for(n in t)r[n]=t[n];if(e)for(n in e)r[n]=e[n];return r}function c(t,n){var r,o=n.router,i=t.activeClassName,u=t.activeStyle,c=t.className,a=t.onClick,s=t.to,l=L(t,["activeClassName","activeStyle","className","onClick","to"]),f=Object.assign({href:U?o.createHref({pathname:s}):o.location.baseUrl?o.location.baseUrl+s:s},l);return c&&(r=c),o.location.pathname===s&&(i&&(r=(c?c+" ":"")+i),u&&(f.style=p(t.style,u))),f.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof a&&a(t),o.push(s,t.target.textContent))},e.createVNode(2,"a",r,t.children,f)}function a(t){return t.to="/",e.createVNode(8,c,null,null,t)}function s(t){return"string"!=typeof t?t:decodeURIComponent(t)}function l(t){return!t||!(w(t)?t:Object.keys(t)).length}function f(t){var e=[];return b(t,e),e}function h(t){return u(t)?t:t.pathname+t.search}function d(t){if(""===t)return{};for(var e=Object.create(null),n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r],u=i.split("=").map(g),p=u[0],c=u[1];e[p]?(e[p]=w(e[p])?e[p]:[e[p]],e[p].push(c)):e[p]=c}return e}function v(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function m(t,e){var n={};for(var r in t)e.indexOf(r)<0&&(n[r]=t[r]);return n}function y(t,e){var n=t.props||N,r=e.props||N;return x(r.path)-x(n.path)||(r.path&&n.path?r.path.length-n.path.length:0)}function g(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function R(t){return t.replace(/(^\/+|\/+$)/g,"")}function x(t){return void 0===t&&(t=""),(R(t).match(/\/+/g)||"").length}function b(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];w(o)?b(o,e):e.push(o)}}function _(t,e){var n=h(e);return C(i(t),n,"/")}function C(t,e,n,r){void 0===e&&(e="/"),void 0===n&&(n="/"),void 0===r&&(r=!1);var o=w(t)?f(t):i(t),u=e.split("?"),c=u[0];void 0===c&&(c="/");var a=u[1];void 0===a&&(a="");var s=d(a);o.sort(y);for(var h=0,m=o.length;h<m;h++){var g=o[h],R=g.props||N,x=R.from||R.path||"/",b=n+v(x,n).replace(/\/\//g,"/"),_=l(R.children),j=O(_,b,c);if(j){var I=R.children;if(R.from&&(r=R.to),I){var U=C(I,e,b,r);if(U){if(U.redirect)return{location:b,redirect:U.redirect};I=U.matched;var L=I.props.params;for(var E in L)s[E]=L[E]}else I=null}return{location:b,redirect:r,matched:k.cloneVNode(g,{params:p(s,j.params),children:I})}}}}function O(t,e,n){var r=e+"|"+t,i=q.get(r);if(!i){var u=[];i={pattern:o(e,u,{end:t}),keys:u},q.set(r,i)}var p=i.pattern.exec(n);if(!p)return null;for(var c=p[0],a=Object.create(null),l=1,f=p.length;l<f;l+=1)a[i.keys[l-1].name]=s(p[l]);return{path:""===c?"/":c,params:a}}function j(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,replace:t.replace,listen:t.listen,createHref:t.createHref,isActive:function(t){return O(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}function I(t){if(t.indexRoute&&!t.childRoutes)return r(P,t);var e={};for(var n in t)e[n]=t[n];if(e.children=[],e.indexRoute&&(e.children.push(M(e.indexRoute)),delete e.indexRoute),e.childRoutes){var o=w(e.childRoutes)?e.childRoutes:[e.childRoutes];(i=e.children).push.apply(i,A(o)),delete e.childRoutes}return 1===e.children.length&&(e.children=e.children[0]),(w(e.children)&&0===e.children.length||!w(e.children)&&0===Object.keys(e.children).length)&&delete e.children,r(P,e);var i}var k="default"in e?e.default:e;n="default"in n?n.default:n,r="default"in r?r.default:r,o="default"in o?o.default:o;var U=!("undefined"==typeof window||!window.document),w=Array.isArray,L=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},N={},E=Promise.resolve(),P=(function(t){function e(e,n){var r=this;t.call(this,e,n),this._onComponentResolved=function(t,e){r.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.onEnter,r=this.context,o=r.router;n&&E.then((function(){n({props:t.props,router:o})}));var i=this.props,u=i.getComponent;u&&E.then((function(){u({props:t.props,router:o},t._onComponentResolved)}))},e.prototype.onLeave=function t(e){void 0===e&&(e=!1);var n=this.props,t=n.onLeave,r=this.context,o=r.router;t&&e&&t({props:this.props,router:o})},e.prototype.onEnter=function t(e){var t=e.onEnter,n=this.context,r=n.router;this.props.path!==e.path&&t&&t({props:e,router:r})},e.prototype.getComponent=function t(e){var t=e.getComponent,n=this.context,r=n.router;this.props.path!==e.path&&t&&t({props:e,router:r},this._onComponentResolved)},e.prototype.componentWillUnmount=function(){this.onLeave(!0)},e.prototype.componentWillReceiveProps=function(t){this.getComponent(t),this.onEnter(t),this.onLeave(this.props.path!==t.path)},e.prototype.render=function(t){var e=t.component,n=t.children,o=m(t,["component","children","path","getComponent"]),i=this.state,u=i.asyncComponent,p=e||u;return p?r(p,o,n):null},e})(n),S=(function(t){function e(e,n){t.call(this,e,n),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(P),W=(function(t){function e(e,n){t.call(this,e,n),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(P),q=new Map,T=(function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location,baseUrl:this.props.baseUrl}}}},e.prototype.render=function(t){return t.matched},e})(n),K=(function(t){function n(e,n){t.call(this,e,n),this.router=j(e.history),this.state={url:e.url||this.router.url}}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen((function(){t.routeTo(t.router.url)})))},n.prototype.componentWillReceiveProps=function(t){var e=this;this.setState({url:t.url},this.props.onUpdate?function(){return e.props.onUpdate()}:null)},n.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.prototype.routeTo=function(t){var e=this;this.setState({url:t},this.props.onUpdate?function(){return e.props.onUpdate()}:null)},n.prototype.render=function(t){var n=this,r=_(t.children,this.state.url);return r.redirect?(setTimeout((function(){n.router.replace(r.redirect)}),0),null):e.createVNode(4,T,null,null,{location:this.state.url,router:this.router,matched:r.matched})},n})(n),M=function(t){return r(P,t)},V=function(t){return I(t)},A=function(t){return t.map(V)},H=function(t){return t.map(I)},D={Route:P,IndexRoute:S,Redirect:W,IndexRedirect:W,Router:K,RouterContext:T,Link:c,IndexLink:a,match:_,createRoutes:H};t.Route=P,t.IndexRoute=S,t.Redirect=W,t.IndexRedirect=W,t.Router=K,t.RouterContext=T,t.Link=c,t.IndexLink=a,t.match=_,t.createRoutes=H,t.default=D,Object.defineProperty(t,"__esModule",{value:!0})}));
