!(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("inferno-create-element"),require("inferno-component"),require("inferno"),require("path-to-regexp")):"function"==typeof define&&define.amd?define(["exports","inferno-create-element","inferno-component","inferno","path-to-regexp"],t):t((e.Inferno=e.Inferno||{},e.Inferno.Router=e.Inferno.Router||{}),e.Inferno.createElement,e.Inferno.Component,e.Inferno)})(this,(function(e,t,r,n){"use strict";function o(e){return M(e)?e:e?[e]:e}function i(e){return"string"==typeof e}function p(e,t){var r={};if(e)for(var n in e)r[n]=e[n];if(t)for(var o in t)r[o]=t[o];return r}function u(e){return"string"!=typeof e?e:decodeURIComponent(e)}function c(e){return!e||!(M(e)?e:Object.keys(e)).length}function a(e){var t=[];return g(e,t),t}function s(e){return i(e)?e:e.pathname+e.search}function l(e){if(""===e)return{};for(var t=Object.create(null),r=e.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=").map(v).map(decodeURIComponent),p=i[0],u=i[1];t[p]?(t[p]=M(t[p])?t[p]:[t[p]],t[p].push(u)):t[p]=u}return t}function f(e,t){return 0===e.indexOf(t)?e.substr(t.length):e}function h(e,t){var r={};for(var n in e)t.indexOf(n)<0&&(r[n]=e[n]);return r}function d(e,t){var r=e.props||V,n=t.props||V;return y(n.path)-y(r.path)||(n.path&&r.path?n.path.length-r.path.length:0)}function v(e,t){return decodeURIComponent(0|t?e:e.replace("[]",""))}function m(e){return e.replace(/(^\/+|\/+$)/g,"")}function y(e){return void 0===e&&(e=""),(m(e).match(/\/+/g)||"").length}function g(e,t){for(var r=0,n=e.length;r<n;r++){var o=e[r];M(o)?g(o,t):t.push(o)}}function x(e){if(e.indexRoute&&!e.childRoutes)return t(J,e);var r={};for(var n in e)r[n]=e[n];if(r.children=[],r.indexRoute&&(r.children.push(z(r.indexRoute)),delete r.indexRoute),r.childRoutes){var o=M(r.childRoutes)?r.childRoutes:[r.childRoutes];(i=r.children).push.apply(i,B(o)),delete r.childRoutes}return 1===r.children.length&&(r.children=r.children[0]),(M(r.children)&&0===r.children.length||!M(r.children)&&0===Object.keys(r.children).length)&&delete r.children,t(J,r);var i}function R(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r}function b(e,t,r){return n.createVNode(1,"a",e,t,r)}function C(e,t){var r,n=t.router,o=e.activeClassName,i=e.activeStyle,u=e.className,c=e.onClick,a=e.children,s=e.to,l=R(e,["activeClassName","activeStyle","className","onClick","children","to"]);return u&&(r=u),n?(l.href=K?n.createHref({pathname:s}):n.location.baseUrl?n.location.baseUrl+s:s,n.location.pathname===s&&(o&&(r=(u?u+" ":"")+o),i&&(l.style=p(e.style,i))),l.onclick=function(e){0!==e.button||e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||(e.preventDefault(),"function"==typeof c&&c(e),n.push(s,e.target.textContent))},b(r,a,l)):(l.href=s,l.onClick=c,b(r,a,l))}function E(e){return e.to="/",n.createVNode(4,C,null,null,e)}function _(e,t){for(var r,n=[],o=0,i=0,p="",u=t&&t.delimiter||"/";null!=(r=ne.exec(e));){var c=r[0],a=r[1],s=r.index;if(p+=e.slice(i,s),i=s+c.length,a)p+=a[1];else{var l=e[i],f=r[2],h=r[3],d=r[4],v=r[5],m=r[6],y=r[7];p&&(n.push(p),p="");var g=null!=f&&null!=l&&l!==f,x="+"===m||"*"===m,R="?"===m||"*"===m,b=r[2]||u,C=d||v;n.push({name:h||o++,prefix:f||"",delimiter:b,optional:R,repeat:x,partial:g,asterisk:!!y,pattern:C?j(C):y?".*":"[^"+I(b)+"]+?"})}}return i<e.length&&(p+=e.substr(i)),p&&n.push(p),n}function w(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function k(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function O(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$"));return function(r,n){for(var o="",i=r||{},p=(n||{}).pretty?w:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!=typeof c){var a,s=i[c.name];if(null==s){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(X(s)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(s)+"`");if(0===s.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var l=0;l<s.length;l++){if(a=p(s[l]),!t[u].test(a))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(a)+"`");o+=(0===l?c.prefix:c.delimiter)+a}}else{if(a=c.asterisk?k(s):p(s),!t[u].test(a))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+a+'"');o+=c.prefix+a}}else o+=c}return o}}function I(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function j(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function U(e,t){return e.keys=t,e}function T(e){return e.sensitive?"":"i"}function S(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return U(e,t)}function N(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(L(e[o],t,r).source);return U(new RegExp("(?:"+n.join("|")+")",T(r)),t)}function A(e,t,r){return $(_(e,r),t,r)}function $(e,t,r){X(t)||(r=t||r,t=[]);for(var n=(r=r||{}).strict,o=!1!==r.end,i="",p=0;p<e.length;p++){var u=e[p];if("string"==typeof u)i+=I(u);else{var c=I(u.prefix),a="(?:"+u.pattern+")";t.push(u),u.repeat&&(a+="(?:"+c+a+")*"),i+=a=u.optional?u.partial?c+"("+a+")?":"(?:"+c+"("+a+"))?":c+"("+a+")"}}var s=I(r.delimiter||"/"),l=i.slice(-s.length)===s;return n||(i=(l?i.slice(0,-s.length):i)+"(?:"+s+"(?=$))?"),i+=o?"$":n&&l?"":"(?="+s+"|$)",U(new RegExp("^"+i,T(r)),t)}function L(e,t,r){return X(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?S(e,t):X(e)?N(e,t,r):A(e,t,r)}function P(e,t){var r=s(t);return W(o(e),encodeURI(r),"/")}function W(e,t,r,i){void 0===t&&(t="/"),void 0===r&&(r="/"),void 0===i&&(i=!1);var u=M(e)?a(e):o(e),s=t.split("?"),h=s[0];void 0===h&&(h="/");var v=s[1];void 0===v&&(v="");var m=l(v);u.sort(d);for(var y=0,g=u.length;y<g;y++){var x=u[y],R=x.props||V,b=r+f(R.from||R.path||"/",r).replace(/\/\//g,"/"),C=q(c(R.children),b,h);if(C){var E=R.children;if(R.from&&(i=R.to),E){var _=W(E,t,b,i);if(_){if(_.redirect)return{location:b,redirect:_.redirect};var w=(E=_.matched).props.params;for(var k in w)m[k]=w[k]}else E=null}return{location:b,matched:n.createVNode(x.flags,x.type,x.className,null,{children:E,params:p(m,C.params)}),redirect:i}}}}function q(e,t,r){var n=t+"|"+e,o=ue.get(n);if(void 0===o){var i=[];o={pattern:pe(t,i,{end:e}),keys:i},ue.set(n,o)}var p=o.pattern.exec(r);if(!p)return null;for(var c=p[0],a=Object.create(null),s=1,l=p.length;s<l;s+=1)a[o.keys[s-1].name]=u(p[s]);return{params:a,path:""===c?"/":c}}function F(e){if(!e)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{createHref:e.createHref,listen:e.listen,push:e.push,replace:e.replace,isActive:function(e){return q(!0,e,this.url)},get location(){return"blank"!==e.location.pathname?e.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}t=t&&"default"in t?t.default:t,r=r&&"default"in r?r.default:r;var K=!("undefined"==typeof window||!window.document),M=Array.isArray,V={},H=Promise.resolve(),J=(function(e){function r(t,r){var n=this;e.call(this,t,r),this._onComponentResolved=function(e,t){n.setState({asyncComponent:t})},this.state={asyncComponent:null}}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var e=this,t=this.props.onEnter,r=this.context.router;t&&H.then((function(){t({props:e.props,router:r})}));var n=this.props.getComponent;n&&H.then((function(){n({props:e.props,router:r},e._onComponentResolved)}))},r.prototype.onLeave=function(e){void 0===e&&(e=!1);var t=this.props.onLeave,r=this.context.router;t&&e&&t({props:this.props,router:r})},r.prototype.onEnter=function(e){var t=e.onEnter,r=this.context.router;this.props.path!==e.path&&t&&t({props:e,router:r})},r.prototype.getComponent=function(e){var t=e.getComponent,r=this.context.router;this.props.path!==e.path&&t&&t({props:e,router:r},this._onComponentResolved)},r.prototype.componentWillUnmount=function(){this.onLeave(!0)},r.prototype.componentWillReceiveProps=function(e){this.getComponent(e),this.onEnter(e),this.onLeave(this.props.path!==e.path)},r.prototype.render=function(e){var r=e.component,n=e.children,o=h(e,["component","children","path","getComponent"]),i=this.state.asyncComponent,p=r||i;return p?t(p,o,n):M(n)?null:n},r})(r),z=function(e){return t(J,e)},D=function(e){return x(e)},B=function(e){return e.map(D)},G=function(e){return e.map(x)},Q=(function(e){function t(t,r){e.call(this,t,r),t.path="/"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(J),X=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Y=L,Z=_,ee=function(e,t){return O(_(e,t))},te=O,re=$,ne=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Y.parse=Z,Y.compile=ee,Y.tokensToFunction=te,Y.tokensToRegExp=re;var oe=Object.freeze({default:Y,__moduleExports:Y,parse:Z,compile:ee,tokensToFunction:te,tokensToRegExp:re}),ie=oe&&Y||oe,pe=(function(e,t){return t={exports:{}},e(t,t.exports),t.exports})((function(e){e.exports=ie,e.exports.parse=ie.parse,e.exports.compile=ie.compile,e.exports.tokensToFunction=ie.tokensToFunction,e.exports.tokensToRegExp=ie.tokensToRegExp,e.exports.default=e.exports})),ue=new Map,ce=(function(e){function t(t,r){e.call(this,t,r),t.to||(t.to="/")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(J),ae=(function(e){function t(t,r){e.call(this,t,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getChildContext=function(){return{router:this.props.router||{location:{baseUrl:this.props.baseUrl,pathname:this.props.location}}}},t.prototype.render=function(e){return e.matched},t})(r),se=(function(e){function t(t,r){e.call(this,t,r),this.router=F(t.history),this.state={url:t.url||this.router.url}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.componentWillMount=function(){var e=this;this.router&&(this.unlisten=this.router.listen((function(){e.routeTo(e.router.url)})))},t.prototype.componentWillReceiveProps=function(e){var t=this;this.setState({url:e.url},this.props.onUpdate?function(){return t.props.onUpdate()}:void 0)},t.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},t.prototype.routeTo=function(e){var t=this;this.setState({url:e},this.props.onUpdate?function(){return t.props.onUpdate()}:void 0)},t.prototype.render=function(e){var t=this,r=P(e.children,this.state.url);return r.redirect?(setTimeout((function(){t.router.replace(r.redirect)}),0),null):n.createVNode(2,ae,null,null,{location:this.state.url,matched:r.matched,router:this.router})},t})(r),le={IndexLink:E,IndexRedirect:ce,IndexRoute:Q,Link:C,Redirect:ce,Route:J,Router:se,RouterContext:ae,createRoutes:G,match:P};e.IndexLink=E,e.IndexRedirect=ce,e.IndexRoute=Q,e.Link=C,e.Redirect=ce,e.Route=J,e.Router=se,e.RouterContext=ae,e.createRoutes=G,e.match=P,e.default=le,Object.defineProperty(e,"__esModule",{value:!0})}));
