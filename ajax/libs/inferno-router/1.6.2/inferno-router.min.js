!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno-create-element"),require("inferno-component"),require("inferno")):"function"==typeof define&&define.amd?define(["exports","inferno-create-element","inferno-component","inferno"],e):e((t.Inferno=t.Inferno||{},t.Inferno.Router=t.Inferno.Router||{}),t.Inferno.createElement,t.Inferno.Component,t.Inferno)})(this,(function(t,e,n,r){"use strict";function o(t){return V(t)?t:t?[t]:t}function i(t){return"string"==typeof t}function p(t,e){var n,r={};if(t)for(n in t)r[n]=t[n];if(e)for(n in e)r[n]=e[n];return r}function u(t){return"string"!=typeof t?t:decodeURIComponent(t)}function c(t){return!t||!(V(t)?t:Object.keys(t)).length}function a(t){var e=[];return g(t,e),e}function l(t){return i(t)?t:t.pathname+t.search}function s(t){if(""===t)return{};for(var e=Object.create(null),n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r],p=i.split("=").map(v),u=p[0],c=p[1];e[u]?(e[u]=V(e[u])?e[u]:[e[u]],e[u].push(c)):e[u]=c}return e}function f(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function h(t,e){var n={};for(var r in t)e.indexOf(r)<0&&(n[r]=t[r]);return n}function d(t,e){var n=t.props||F,r=e.props||F;return y(r.path)-y(n.path)||(r.path&&n.path?r.path.length-n.path.length:0)}function v(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function m(t){return t.replace(/(^\/+|\/+$)/g,"")}function y(t){return void 0===t&&(t=""),(m(t).match(/\/+/g)||"").length}function g(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];V(o)?g(o,e):e.push(o)}}function x(t){if(t.indexRoute&&!t.childRoutes)return e(J,t);var n={};for(var r in t)n[r]=t[r];if(n.children=[],n.indexRoute&&(n.children.push(D(n.indexRoute)),delete n.indexRoute),n.childRoutes){var o=V(n.childRoutes)?n.childRoutes:[n.childRoutes];(i=n.children).push.apply(i,B(o)),delete n.childRoutes}return 1===n.children.length&&(n.children=n.children[0]),(V(n.children)&&0===n.children.length||!V(n.children)&&0===Object.keys(n.children).length)&&delete n.children,e(J,n);var i}function R(t,e){var n=e.router,o=t.activeClassName,i=t.activeStyle,u=t.className,c=t.onClick,a=t.children,l=t.to,s=Q(t,["activeClassName","activeStyle","className","onClick","children","to"]);s.href=M?n.createHref({pathname:l}):n.location.baseUrl?n.location.baseUrl+l:l;var f;return u&&(f=u),n.location.pathname===l&&(o&&(f=(u?u+" ":"")+o),i&&(s.style=p(t.style,i))),s.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof c&&c(t),n.push(l,t.target.textContent))},r.createVNode(2,"a",f,a,s)}function b(t){return t.to="/",r.createVNode(8,R,null,null,t)}function C(t,e){for(var n,r=[],o=0,i=0,p="",u=e&&e.delimiter||"/";null!=(n=ot.exec(t));){var c=n[0],a=n[1],l=n.index;if(p+=t.slice(i,l),i=l+c.length,a)p+=a[1];else{var s=t[i],f=n[2],h=n[3],d=n[4],v=n[5],m=n[6],y=n[7];p&&(r.push(p),p="");var g=null!=f&&null!=s&&s!==f,x="+"===m||"*"===m,R="?"===m||"*"===m,b=n[2]||u,C=d||v;r.push({name:h||o++,prefix:f||"",delimiter:b,optional:R,repeat:x,partial:g,asterisk:!!y,pattern:C?k(C):y?".*":"[^"+j(b)+"]+?"})}}return i<t.length&&(p+=t.substr(i)),p&&r.push(p),r}function w(t,e){return _(C(t,e))}function E(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function O(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function _(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",i=n||{},p=r||{},u=p.pretty?E:encodeURIComponent,c=0;c<t.length;c++){var a=t[c];if("string"!=typeof a){var l,s=i[a.name];if(null==s){if(a.optional){a.partial&&(o+=a.prefix);continue}throw new TypeError('Expected "'+a.name+'" to be defined')}if(Y(s)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received `'+JSON.stringify(s)+"`");if(0===s.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var f=0;f<s.length;f++){if(l=u(s[f]),!e[c].test(l))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received `'+JSON.stringify(l)+"`");o+=(0===f?a.prefix:a.delimiter)+l}}else{if(l=a.asterisk?O(s):u(s),!e[c].test(l))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+l+'"');o+=a.prefix+l}}else o+=a}return o}}function j(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function k(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function I(t,e){return t.keys=e,t}function U(t){return t.sensitive?"":"i"}function T(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return I(t,e)}function S(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push($(t[o],e,n).source);return I(new RegExp("(?:"+r.join("|")+")",U(n)),e)}function N(t,e,n){return A(C(t,n),e,n)}function A(t,e,n){Y(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,o=!1!==n.end,i="",p=0;p<t.length;p++){var u=t[p];if("string"==typeof u)i+=j(u);else{var c=j(u.prefix),a="(?:"+u.pattern+")";e.push(u),u.repeat&&(a+="(?:"+c+a+")*"),a=u.optional?u.partial?c+"("+a+")?":"(?:"+c+"("+a+"))?":c+"("+a+")",i+=a}}var l=j(n.delimiter||"/"),s=i.slice(-l.length)===l;return r||(i=(s?i.slice(0,-l.length):i)+"(?:"+l+"(?=$))?"),i+=o?"$":r&&s?"":"(?="+l+"|$)",I(new RegExp("^"+i,U(n)),e)}function $(t,e,n){return Y(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?T(t,e):Y(t)?S(t,e,n):N(t,e,n)}function L(t,e){var n=l(e);return P(o(t),n,"/")}function P(t,e,n,r){void 0===e&&(e="/"),void 0===n&&(n="/"),void 0===r&&(r=!1);var i=V(t)?a(t):o(t),u=e.split("?"),l=u[0];void 0===l&&(l="/");var h=u[1];void 0===h&&(h="");var v=s(h);i.sort(d);for(var m=0,y=i.length;m<y;m++){var g=i[m],x=g.props||F,R=x.from||x.path||"/",b=n+f(R,n).replace(/\/\//g,"/"),C=c(x.children),w=W(C,b,l);if(w){var E=x.children;if(x.from&&(r=x.to),E){var O=P(E,e,b,r);if(O){if(O.redirect)return{location:b,redirect:O.redirect};E=O.matched;var _=E.props.params;for(var j in _)v[j]=_[j]}else E=null}return{location:b,redirect:r,matched:K.cloneVNode(g,{params:p(v,w.params),children:E})}}}}function W(t,e,n){var r=e+"|"+t,o=pt.get(r);if(!o){var i=[];o={pattern:it(e,i,{end:t}),keys:i},pt.set(r,o)}var p=o.pattern.exec(n);if(!p)return null;for(var c=p[0],a=Object.create(null),l=1,s=p.length;l<s;l+=1)a[o.keys[l-1].name]=u(p[l]);return{path:""===c?"/":c,params:a}}function q(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,replace:t.replace,listen:t.listen,createHref:t.createHref,isActive:function(t){return W(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}e="default"in e?e.default:e,n="default"in n?n.default:n;var K="default"in r?r.default:r,M=!("undefined"==typeof window||!window.document),V=Array.isArray,F={},H=Promise.resolve(),J=(function(t){function n(e,n){var r=this;t.call(this,e,n),this._onComponentResolved=function(t,e){r.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.onEnter,r=this.context,o=r.router;n&&H.then((function(){n({props:t.props,router:o})}));var i=this.props,p=i.getComponent;p&&H.then((function(){p({props:t.props,router:o},t._onComponentResolved)}))},n.prototype.onLeave=function(t){void 0===t&&(t=!1);var e=this.props,n=e.onLeave,r=this.context,o=r.router;n&&t&&n({props:this.props,router:o})},n.prototype.onEnter=function(t){var e=t.onEnter,n=this.context,r=n.router;this.props.path!==t.path&&e&&e({props:t,router:r})},n.prototype.getComponent=function(t){var e=t.getComponent,n=this.context,r=n.router;this.props.path!==t.path&&e&&e({props:t,router:r},this._onComponentResolved)},n.prototype.componentWillUnmount=function(){this.onLeave(!0)},n.prototype.componentWillReceiveProps=function(t){this.getComponent(t),this.onEnter(t),this.onLeave(this.props.path!==t.path)},n.prototype.render=function(t){var n=t.component,r=t.children,o=h(t,["component","children","path","getComponent"]),i=this.state,p=i.asyncComponent,u=n||p;return u?e(u,o,r):null},n})(n),D=function(t){return e(J,t)},z=function(t){return x(t)},B=function(t){return t.map(z)},G=function(t){return t.map(x)},Q=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},X=(function(t){function e(e,n){t.call(this,e,n),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(J),Y=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Z=$,tt=C,et=w,nt=_,rt=A,ot=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Z.parse=tt,Z.compile=et,Z.tokensToFunction=nt,Z.tokensToRegExp=rt;var it=(function(t,e){return e={exports:{}},t(e,e.exports),e.exports})((function(t){t.exports=Z,t.exports.parse=Z.parse,t.exports.compile=Z.compile,t.exports.tokensToFunction=Z.tokensToFunction,t.exports.tokensToRegExp=Z.tokensToRegExp,t.exports.default=t.exports})),pt=new Map,ut=(function(t){function e(e,n){t.call(this,e,n),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(J),ct=(function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location,baseUrl:this.props.baseUrl}}}},e.prototype.render=function(t){return t.matched},e})(n),at=(function(t){function e(e,n){t.call(this,e,n),this.router=q(e.history),this.state={url:e.url||this.router.url}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen((function(){t.routeTo(t.router.url)})))},e.prototype.componentWillReceiveProps=function(t){var e=this;this.setState({url:t.url},this.props.onUpdate?function(){return e.props.onUpdate()}:null)},e.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},e.prototype.routeTo=function(t){var e=this;this.setState({url:t},this.props.onUpdate?function(){return e.props.onUpdate()}:null)},e.prototype.render=function(t){var e=this,n=L(t.children,this.state.url);return n.redirect?(setTimeout((function(){e.router.replace(n.redirect)}),0),null):r.createVNode(4,ct,null,null,{location:this.state.url,router:this.router,matched:n.matched})},e})(n),lt={Route:J,IndexRoute:X,Redirect:ut,IndexRedirect:ut,Router:at,RouterContext:ct,Link:R,IndexLink:b,match:L,createRoutes:G};t.Route=J,t.IndexRoute=X,t.Redirect=ut,t.IndexRedirect=ut,t.Router=at,t.RouterContext=ct,t.Link=R,t.IndexLink=b,t.match=L,t.createRoutes=G,t.default=lt,Object.defineProperty(t,"__esModule",{value:!0})}));
