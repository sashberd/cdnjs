!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno-create-element"),require("inferno-component"),require("inferno")):"function"==typeof define&&define.amd?define(["exports","inferno-create-element","inferno-component","inferno"],e):e((t.Inferno=t.Inferno||{},t.Inferno.Router=t.Inferno.Router||{}),t.Inferno.createElement,t.Inferno.Component,t.Inferno)})(this,(function(t,e,n,r){"use strict";function o(t){return F(t)?t:t?[t]:t}function i(t){return"string"==typeof t}function p(t,e){var n={};if(t)for(var r in t)n[r]=t[r];if(e)for(var o in e)n[o]=e[o];return n}function u(t){return"string"!=typeof t?t:decodeURIComponent(t)}function c(t){return!t||!(F(t)?t:Object.keys(t)).length}function a(t){var e=[];return g(t,e),e}function s(t){return i(t)?t:t.pathname+t.search}function l(t){if(""===t)return{};for(var e=Object.create(null),n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r],p=i.split("=").map(v).map(decodeURIComponent),u=p[0],c=p[1];e[u]?(e[u]=F(e[u])?e[u]:[e[u]],e[u].push(c)):e[u]=c}return e}function f(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function h(t,e){var n={};for(var r in t)e.indexOf(r)<0&&(n[r]=t[r]);return n}function d(t,e){var n=t.props||H,r=e.props||H;return y(r.path)-y(n.path)||(r.path&&n.path?r.path.length-n.path.length:0)}function v(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function m(t){return t.replace(/(^\/+|\/+$)/g,"")}function y(t){return void 0===t&&(t=""),(m(t).match(/\/+/g)||"").length}function g(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];F(o)?g(o,e):e.push(o)}}function x(t){if(t.indexRoute&&!t.childRoutes)return e(D,t);var n={};for(var r in t)n[r]=t[r];if(n.children=[],n.indexRoute&&(n.children.push(z(n.indexRoute)),delete n.indexRoute),n.childRoutes){var o=F(n.childRoutes)?n.childRoutes:[n.childRoutes];(i=n.children).push.apply(i,G(o)),delete n.childRoutes}return 1===n.children.length&&(n.children=n.children[0]),(F(n.children)&&0===n.children.length||!F(n.children)&&0===Object.keys(n.children).length)&&delete n.children,e(D,n);var i}function R(t,e,n){return r.createVNode(2,"a",t,e,n)}function b(t,e){var n,r=e.router,o=t.activeClassName,i=t.activeStyle,u=t.className,c=t.onClick,a=t.children,s=t.to,l=X(t,["activeClassName","activeStyle","className","onClick","children","to"]);return u&&(n=u),r?(l.href=V?r.createHref({pathname:s}):r.location.baseUrl?r.location.baseUrl+s:s,r.location.pathname===s&&(o&&(n=(u?u+" ":"")+o),i&&(l.style=p(t.style,i))),l.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof c&&c(t),r.push(s,t.target.textContent))},R(n,a,l)):(l.href=s,l.onClick=c,R(n,a,l))}function C(t){return t.to="/",r.createVNode(8,b,null,null,t)}function w(t,e){for(var n,r=[],o=0,i=0,p="",u=e&&e.delimiter||"/";null!=(n=it.exec(t));){var c=n[0],a=n[1],s=n.index;if(p+=t.slice(i,s),i=s+c.length,a)p+=a[1];else{var l=t[i],f=n[2],h=n[3],d=n[4],v=n[5],m=n[6],y=n[7];p&&(r.push(p),p="");var g=null!=f&&null!=l&&l!==f,x="+"===m||"*"===m,R="?"===m||"*"===m,b=n[2]||u,C=d||v;r.push({name:h||o++,prefix:f||"",delimiter:b,optional:R,repeat:x,partial:g,asterisk:!!y,pattern:C?I(C):y?".*":"[^"+k(b)+"]+?"})}}return i<t.length&&(p+=t.substr(i)),p&&r.push(p),r}function E(t,e){return j(w(t,e))}function O(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function _(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function j(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",i=n||{},p=r||{},u=p.pretty?O:encodeURIComponent,c=0;c<t.length;c++){var a=t[c];if("string"!=typeof a){var s,l=i[a.name];if(null==l){if(a.optional){a.partial&&(o+=a.prefix);continue}throw new TypeError('Expected "'+a.name+'" to be defined')}if(Z(l)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var f=0;f<l.length;f++){if(s=u(l[f]),!e[c].test(s))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===f?a.prefix:a.delimiter)+s}}else{if(s=a.asterisk?_(l):u(l),!e[c].test(s))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+s+'"');o+=a.prefix+s}}else o+=a}return o}}function k(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function I(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function U(t,e){return t.keys=e,t}function T(t){return t.sensitive?"":"i"}function S(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return U(t,e)}function N(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(L(t[o],e,n).source);return U(new RegExp("(?:"+r.join("|")+")",T(n)),e)}function A(t,e,n){return $(w(t,n),e,n)}function $(t,e,n){Z(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,o=!1!==n.end,i="",p=0;p<t.length;p++){var u=t[p];if("string"==typeof u)i+=k(u);else{var c=k(u.prefix),a="(?:"+u.pattern+")";e.push(u),u.repeat&&(a+="(?:"+c+a+")*"),a=u.optional?u.partial?c+"("+a+")?":"(?:"+c+"("+a+"))?":c+"("+a+")",i+=a}}var s=k(n.delimiter||"/"),l=i.slice(-s.length)===s;return r||(i=(l?i.slice(0,-s.length):i)+"(?:"+s+"(?=$))?"),i+=o?"$":r&&l?"":"(?="+s+"|$)",U(new RegExp("^"+i,T(n)),e)}function L(t,e,n){return Z(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?S(t,e):Z(t)?N(t,e,n):A(t,e,n)}function P(t,e){var n=s(e);return W(o(t),encodeURI(n),"/")}function W(t,e,n,r){void 0===e&&(e="/"),void 0===n&&(n="/"),void 0===r&&(r=!1);var i=F(t)?a(t):o(t),u=e.split("?"),s=u[0];void 0===s&&(s="/");var h=u[1];void 0===h&&(h="");var v=l(h);i.sort(d);for(var m=0,y=i.length;m<y;m++){var g=i[m],x=g.props||H,R=x.from||x.path||"/",b=n+f(R,n).replace(/\/\//g,"/"),C=c(x.children),w=q(C,b,s);if(w){var E=x.children;if(x.from&&(r=x.to),E){var O=W(E,e,b,r);if(O){if(O.redirect)return{location:b,redirect:O.redirect};E=O.matched;var _=E.props.params;for(var j in _)v[j]=_[j]}else E=null}return{location:b,redirect:r,matched:M.cloneVNode(g,{params:p(v,w.params),children:E})}}}}function q(t,e,n){var r=e+"|"+t,o=ut.get(r);if(void 0===o){var i=[];o={pattern:pt(e,i,{end:t}),keys:i},ut.set(r,o)}var p=o.pattern.exec(n);if(!p)return null;for(var c=p[0],a=Object.create(null),s=1,l=p.length;s<l;s+=1)a[o.keys[s-1].name]=u(p[s]);return{path:""===c?"/":c,params:a}}function K(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{createHref:t.createHref,listen:t.listen,push:t.push,replace:t.replace,isActive:function(t){return q(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}e="default"in e?e.default:e,n="default"in n?n.default:n;var M="default"in r?r.default:r,V=!("undefined"==typeof window||!window.document),F=Array.isArray,H={},J=Promise.resolve(),D=(function(t){function n(e,n){var r=this;t.call(this,e,n),this._onComponentResolved=function(t,e){r.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.onEnter,r=this.context,o=r.router;n&&J.then((function(){n({props:t.props,router:o})}));var i=this.props,p=i.getComponent;p&&J.then((function(){p({props:t.props,router:o},t._onComponentResolved)}))},n.prototype.onLeave=function(t){void 0===t&&(t=!1);var e=this.props,n=e.onLeave,r=this.context,o=r.router;n&&t&&n({props:this.props,router:o})},n.prototype.onEnter=function(t){var e=t.onEnter,n=this.context,r=n.router;this.props.path!==t.path&&e&&e({props:t,router:r})},n.prototype.getComponent=function(t){var e=t.getComponent,n=this.context,r=n.router;this.props.path!==t.path&&e&&e({props:t,router:r},this._onComponentResolved)},n.prototype.componentWillUnmount=function(){this.onLeave(!0)},n.prototype.componentWillReceiveProps=function(t){this.getComponent(t),this.onEnter(t),this.onLeave(this.props.path!==t.path)},n.prototype.render=function(t){var n=t.component,r=t.children,o=h(t,["component","children","path","getComponent"]),i=this.state,p=i.asyncComponent,u=n||p;return u?e(u,o,r):F(r)?null:r},n})(n),z=function(t){return e(D,t)},B=function(t){return x(t)},G=function(t){return t.map(B)},Q=function(t){return t.map(x)},X=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},Y=(function(t){function e(e,n){t.call(this,e,n),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(D),Z=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},tt=L,et=w,nt=E,rt=j,ot=$,it=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");tt.parse=et,tt.compile=nt,tt.tokensToFunction=rt,tt.tokensToRegExp=ot;var pt=(function(t,e){return e={exports:{}},t(e,e.exports),e.exports})((function(t){t.exports=tt,t.exports.parse=tt.parse,t.exports.compile=tt.compile,t.exports.tokensToFunction=tt.tokensToFunction,t.exports.tokensToRegExp=tt.tokensToRegExp,t.exports.default=t.exports})),ut=new Map,ct=(function(t){function e(e,n){t.call(this,e,n),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(D),at=(function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{baseUrl:this.props.baseUrl,pathname:this.props.location}}}},e.prototype.render=function(t){return t.matched},e})(n),st=(function(t){function e(e,n){t.call(this,e,n),this.router=K(e.history),this.state={url:e.url||this.router.url}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen((function(){t.routeTo(t.router.url)})))},e.prototype.componentWillReceiveProps=function(t){var e=this;this.setState({url:t.url},this.props.onUpdate?function(){return e.props.onUpdate()}:void 0)},e.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},e.prototype.routeTo=function(t){var e=this;this.setState({url:t},this.props.onUpdate?function(){return e.props.onUpdate()}:void 0)},e.prototype.render=function(t){var e=this,n=P(t.children,this.state.url);return n.redirect?(setTimeout((function(){e.router.replace(n.redirect)}),0),null):r.createVNode(4,at,null,null,{location:this.state.url,matched:n.matched,router:this.router})},e})(n),lt={Route:D,IndexRoute:Y,Redirect:ct,IndexRedirect:ct,Router:st,RouterContext:at,Link:b,IndexLink:C,match:P,createRoutes:Q};t.Route=D,t.IndexRoute=Y,t.Redirect=ct,t.IndexRedirect=ct,t.Router=st,t.RouterContext=at,t.Link=b,t.IndexLink=C,t.match=P,t.createRoutes=Q,t.default=lt,Object.defineProperty(t,"__esModule",{value:!0})}));
