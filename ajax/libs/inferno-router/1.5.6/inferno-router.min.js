!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno"),require("inferno-component"),require("inferno-create-element")):"function"==typeof define&&define.amd?define(["exports","inferno","inferno-component","inferno-create-element"],e):e((t.Inferno=t.Inferno||{},t.Inferno.Router=t.Inferno.Router||{}),t.Inferno,t.Inferno.Component,t.Inferno.createElement)})(this,(function(t,e,n,r){"use strict";function o(t){return V(t)?t:t?[t]:t}function i(t){return"string"==typeof t}function p(t,e){var n,r={};if(t)for(n in t)r[n]=t[n];if(e)for(n in e)r[n]=e[n];return r}function u(t,n){var r,o=n.router,i=t.activeClassName,u=t.activeStyle,c=t.className,a=t.onClick,s=t.to,l=F(t,["activeClassName","activeStyle","className","onClick","to"]),f=Object.assign({href:M?o.createHref({pathname:s}):o.location.baseUrl?o.location.baseUrl+s:s},l);return c&&(r=c),o.location.pathname===s&&(i&&(r=(c?c+" ":"")+i),u&&(f.style=p(t.style,u))),f.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof a&&a(t),o.push(s,t.target.textContent))},e.createVNode(2,"a",r,t.children,f)}function c(t){return t.to="/",e.createVNode(8,u,null,null,t)}function a(t){return"string"!=typeof t?t:decodeURIComponent(t)}function s(t){return!t||!(V(t)?t:Object.keys(t)).length}function l(t){var e=[];return R(t,e),e}function f(t){return i(t)?t:t.pathname+t.search}function h(t){if(""===t)return{};for(var e=Object.create(null),n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r],p=i.split("=").map(y),u=p[0],c=p[1];e[u]?(e[u]=V(e[u])?e[u]:[e[u]],e[u].push(c)):e[u]=c}return e}function d(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function v(t,e){var n={};for(var r in t)e.indexOf(r)<0&&(n[r]=t[r]);return n}function m(t,e){var n=t.props||H,r=e.props||H;return x(r.path)-x(n.path)||(r.path&&n.path?r.path.length-n.path.length:0)}function y(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function g(t){return t.replace(/(^\/+|\/+$)/g,"")}function x(t){return void 0===t&&(t=""),(g(t).match(/\/+/g)||"").length}function R(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];V(o)?R(o,e):e.push(o)}}function b(t,e){for(var n,r=[],o=0,i=0,p="",u=e&&e.delimiter||"/";null!=(n=et.exec(t));){var c=n[0],a=n[1],s=n.index;if(p+=t.slice(i,s),i=s+c.length,a)p+=a[1];else{var l=t[i],f=n[2],h=n[3],d=n[4],v=n[5],m=n[6],y=n[7];p&&(r.push(p),p="");var g=null!=f&&null!=l&&l!==f,x="+"===m||"*"===m,R="?"===m||"*"===m,b=n[2]||u,C=d||v;r.push({name:h||o++,prefix:f||"",delimiter:b,optional:R,repeat:x,partial:g,asterisk:!!y,pattern:C?j(C):y?".*":"[^"+_(b)+"]+?"})}}return i<t.length&&(p+=t.substr(i)),p&&r.push(p),r}function C(t,e){return E(b(t,e))}function w(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function O(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function E(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",i=n||{},p=r||{},u=p.pretty?w:encodeURIComponent,c=0;c<t.length;c++){var a=t[c];if("string"!=typeof a){var s,l=i[a.name];if(null==l){if(a.optional){a.partial&&(o+=a.prefix);continue}throw new TypeError('Expected "'+a.name+'" to be defined')}if(G(l)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var f=0;f<l.length;f++){if(s=u(l[f]),!e[c].test(s))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===f?a.prefix:a.delimiter)+s}}else{if(s=a.asterisk?O(l):u(l),!e[c].test(s))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+s+'"');o+=a.prefix+s}}else o+=a}return o}}function _(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function j(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function k(t,e){return t.keys=e,t}function I(t){return t.sensitive?"":"i"}function U(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return k(t,e)}function T(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(A(t[o],e,n).source);return k(new RegExp("(?:"+r.join("|")+")",I(n)),e)}function S(t,e,n){return N(b(t,n),e,n)}function N(t,e,n){G(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,o=n.end!==!1,i="",p=0;p<t.length;p++){var u=t[p];if("string"==typeof u)i+=_(u);else{var c=_(u.prefix),a="(?:"+u.pattern+")";e.push(u),u.repeat&&(a+="(?:"+c+a+")*"),a=u.optional?u.partial?c+"("+a+")?":"(?:"+c+"("+a+"))?":c+"("+a+")",i+=a}}var s=_(n.delimiter||"/"),l=i.slice(-s.length)===s;return r||(i=(l?i.slice(0,-s.length):i)+"(?:"+s+"(?=$))?"),i+=o?"$":r&&l?"":"(?="+s+"|$)",k(new RegExp("^"+i,I(n)),e)}function A(t,e,n){return G(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?U(t,e):G(t)?T(t,e,n):S(t,e,n)}function $(t,e){var n=f(e);return L(o(t),n,"/")}function L(t,e,n,r){void 0===e&&(e="/"),void 0===n&&(n="/"),void 0===r&&(r=!1);var i=V(t)?l(t):o(t),u=e.split("?"),c=u[0];void 0===c&&(c="/");var a=u[1];void 0===a&&(a="");var f=h(a);i.sort(m);for(var v=0,y=i.length;v<y;v++){var g=i[v],x=g.props||H,R=x.from||x.path||"/",b=n+d(R,n).replace(/\/\//g,"/"),C=s(x.children),w=P(C,b,c);if(w){var O=x.children;if(x.from&&(r=x.to),O){var E=L(O,e,b,r);if(E){if(E.redirect)return{location:b,redirect:E.redirect};O=E.matched;var _=O.props.params;for(var j in _)f[j]=_[j]}else O=null}return{location:b,redirect:r,matched:K.cloneVNode(g,{params:p(f,w.params),children:O})}}}}function P(t,e,n){var r=e+"|"+t,o=rt.get(r);if(!o){var i=[];o={pattern:nt(e,i,{end:t}),keys:i},rt.set(r,o)}var p=o.pattern.exec(n);if(!p)return null;for(var u=p[0],c=Object.create(null),s=1,l=p.length;s<l;s+=1)c[o.keys[s-1].name]=a(p[s]);return{path:""===u?"/":u,params:c}}function W(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,replace:t.replace,listen:t.listen,createHref:t.createHref,isActive:function(t){return P(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}function q(t){if(t.indexRoute&&!t.childRoutes)return r(D,t);var e={};for(var n in t)e[n]=t[n];if(e.children=[],e.indexRoute&&(e.children.push(pt(e.indexRoute)),delete e.indexRoute),e.childRoutes){var o=V(e.childRoutes)?e.childRoutes:[e.childRoutes];(i=e.children).push.apply(i,ct(o)),delete e.childRoutes}return 1===e.children.length&&(e.children=e.children[0]),(V(e.children)&&0===e.children.length||!V(e.children)&&0===Object.keys(e.children).length)&&delete e.children,r(D,e);var i}var K="default"in e?e.default:e;n="default"in n?n.default:n,r="default"in r?r.default:r;var M=!("undefined"==typeof window||!window.document),V=Array.isArray,F=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},H={},J=Promise.resolve(),D=(function(t){function e(e,n){var r=this;t.call(this,e,n),this._onComponentResolved=function(t,e){r.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.onEnter,r=this.context,o=r.router;n&&J.then((function(){n({props:t.props,router:o})}));var i=this.props,p=i.getComponent;p&&J.then((function(){p({props:t.props,router:o},t._onComponentResolved)}))},e.prototype.onLeave=function(t){void 0===t&&(t=!1);var e=this.props,n=e.onLeave,r=this.context,o=r.router;n&&t&&n({props:this.props,router:o})},e.prototype.onEnter=function(t){var e=t.onEnter,n=this.context,r=n.router;this.props.path!==t.path&&e&&e({props:t,router:r})},e.prototype.getComponent=function(t){var e=t.getComponent,n=this.context,r=n.router;this.props.path!==t.path&&e&&e({props:t,router:r},this._onComponentResolved)},e.prototype.componentWillUnmount=function(){this.onLeave(!0)},e.prototype.componentWillReceiveProps=function(t){this.getComponent(t),this.onEnter(t),this.onLeave(this.props.path!==t.path)},e.prototype.render=function(t){var e=t.component,n=t.children,o=v(t,["component","children","path","getComponent"]),i=this.state,p=i.asyncComponent,u=e||p;return u?r(u,o,n):null},e})(n),z=(function(t){function e(e,n){t.call(this,e,n),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(D),B=(function(t){function e(e,n){t.call(this,e,n),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(D),G=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Q=A,X=b,Y=C,Z=E,tt=N,et=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Q.parse=X,Q.compile=Y,Q.tokensToFunction=Z,Q.tokensToRegExp=tt;var nt=(function(t,e){return e={exports:{}},t(e,e.exports),e.exports})((function(t){t.exports=Q,t.exports.parse=Q.parse,t.exports.compile=Q.compile,t.exports.tokensToFunction=Q.tokensToFunction,t.exports.tokensToRegExp=Q.tokensToRegExp,t.exports.default=t.exports})),rt=new Map,ot=(function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location,baseUrl:this.props.baseUrl}}}},e.prototype.render=function(t){return t.matched},e})(n),it=(function(t){function n(e,n){t.call(this,e,n),this.router=W(e.history),this.state={url:e.url||this.router.url}}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen((function(){t.routeTo(t.router.url)})))},n.prototype.componentWillReceiveProps=function(t){var e=this;this.setState({url:t.url},this.props.onUpdate?function(){return e.props.onUpdate()}:null)},n.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.prototype.routeTo=function(t){var e=this;this.setState({url:t},this.props.onUpdate?function(){return e.props.onUpdate()}:null)},n.prototype.render=function(t){var n=this,r=$(t.children,this.state.url);return r.redirect?(setTimeout((function(){n.router.replace(r.redirect)}),0),null):e.createVNode(4,ot,null,null,{location:this.state.url,router:this.router,matched:r.matched})},n})(n),pt=function(t){return r(D,t)},ut=function(t){return q(t)},ct=function(t){return t.map(ut)},at=function(t){return t.map(q)},st={Route:D,IndexRoute:z,Redirect:B,IndexRedirect:B,Router:it,RouterContext:ot,Link:u,IndexLink:c,match:$,createRoutes:at};t.Route=D,t.IndexRoute=z,t.Redirect=B,t.IndexRedirect=B,t.Router=it,t.RouterContext=ot,t.Link=u,t.IndexLink=c,t.match=$,t.createRoutes=at,t.default=st,Object.defineProperty(t,"__esModule",{value:!0})}));
