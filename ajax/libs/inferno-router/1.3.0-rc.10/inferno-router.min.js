!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("inferno"),require("inferno-component"),require("inferno-create-element"),require("path-to-regexp-es6")):"function"==typeof define&&define.amd?define(["exports","inferno","inferno-component","inferno-create-element","path-to-regexp-es6"],e):e(t["inferno-router"]=t["inferno-router"]||{},t.Inferno,t.Inferno.Component,t.Inferno.createElement,t.Inferno.pathToRegexp)}(this,function(t,e,n,r,o){"use strict";function i(t){return L(t)?t:t?[t]:t}function p(t){return a(t)||c(t)}function u(t){return"string"==typeof t}function c(t){return null===t}function a(t){return void 0===t}function s(t){for(var e=arguments,n=1,r=arguments.length;n<r;n++){var o=e[n];if(!p(o))for(var i=Object.keys(o),u=0,c=i.length;u<c;u++){var a=i[u];t[a]=o[a]}}return t}function l(t,n){var r=n.router,o=t.activeClassName,i=t.activeStyle,p=t.className,u=t.onClick,c=t.to,a=P(t,["activeClassName","activeStyle","className","onClick","to"]),l=Object.assign({href:N?r.createHref({pathname:c}):r.location.baseUrl?r.location.baseUrl+c:c},a);return p&&(l.className=p),r.location.pathname===c&&(o&&(l.className=(p?p+" ":"")+o),i&&(l.style=s({},t.style,i))),l.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof u&&u(t),r.push(c,t.target.textContent))},e.createVNode(2,"a",l,t.children)}function f(t){return t.to="/",e.createVNode(8,l,t)}function h(t){return"string"!=typeof t?t:decodeURIComponent(t)}function d(t){return!t||!(L(t)?t:Object.keys(t)).length}function m(t){var e=[];return R(t,e),e}function v(t){return u(t)?t:t.pathname+t.search}function y(t){if(""===t)return{};for(var e=Object.create(null),n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r],p=i.split("=").map(_),u=p[0],c=p[1];e[u]?(e[u]=L(e[u])?e[u]:[e[u]],e[u].push(c)):e[u]=c}return e}function g(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function b(t,e){var n={};for(var r in t)e.indexOf(r)<0&&(n[r]=t[r]);return n}function x(t,e){var n=t.props||E,r=e.props||E;return O(r.path)-O(n.path)||(r.path&&n.path?r.path.length-n.path.length:0)}function _(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function C(t){return t.replace(/(^\/+|\/+$)/g,"")}function O(t){return void 0===t&&(t=""),(C(t).match(/\/+/g)||"").length}function R(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];L(o)?R(o,e):e.push(o)}}function j(t,e){var n=v(e);return I(i(t),n,"/")}function I(t,e,n,r){void 0===e&&(e="/"),void 0===n&&(n="/"),void 0===r&&(r=!1);var o=L(t)?m(t):i(t),p=e.split("?"),u=p[0];void 0===u&&(u="/");var c=p[1];void 0===c&&(c="");var a=y(c);o.sort(x);for(var l=0,f=o.length;l<f;l++){var h=o[l],v=h.props||E,b=v.from||v.path||"/",_=n+g(b,n).replace(/\/\//g,"/"),C=d(v.children),O=k(C,_,u);if(O){var R=v.children;if(v.from&&(r=v.to),R){var j=I(R,e,_,r);if(j){if(j.redirect)return{location:_,redirect:j.redirect};R=j.matched,s(a,R.props.params)}else R=null}return{location:_,redirect:r,matched:w.cloneVNode(h,{params:s(a,O.params),children:R})}}}}function k(t,e,n){var r=e+"|"+t,i=T.get(r);if(!i){var p=[];i={pattern:o(e,p,{end:t}),keys:p},T.set(r,i)}var u=i.pattern.exec(n);if(!u)return null;for(var c=u[0],a=Object.create(null),s=1,l=u.length;s<l;s+=1)a[i.keys[s-1].name]=h(u[s]);return{path:""===c?"/":c,params:a}}function U(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,replace:t.replace,listen:t.listen,createHref:t.createHref,isActive:function(t){return k(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}var w="default"in e?e.default:e;n="default"in n?n.default:n,r="default"in r?r.default:r,o="default"in o?o.default:o;var N="undefined"!=typeof window&&window.document,L=Array.isArray,P=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},E={},S=function(t){function e(e,n){var r=this;t.call(this,e,n),this._onComponentResolved=function(t,e){r.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.onEnter,r=this.context,o=r.router;n&&Promise.resolve().then(function(){n({props:t.props,router:o})});var i=this.props,p=i.getComponent;p&&Promise.resolve().then(function(){p({props:t.props,router:o},t._onComponentResolved)})},e.prototype.onLeave=function t(e){void 0===e&&(e=!1);var n=this.props,t=n.onLeave,r=this.context,o=r.router;t&&e&&t({props:this.props,router:o})},e.prototype.onEnter=function t(e){var t=e.onEnter,n=this.context,r=n.router;this.props.path!==e.path&&t&&t({props:e,router:r})},e.prototype.getComponent=function t(e){var t=e.getComponent,n=this.context,r=n.router;this.props.path!==e.path&&t&&t({props:e,router:r},this._onComponentResolved)},e.prototype.componentWillUnmount=function(){this.onLeave(!0)},e.prototype.componentWillReceiveProps=function(t){this.getComponent(t),this.onEnter(t),this.onLeave(this.props.path!==t.path)},e.prototype.render=function(t){var e=t.component,n=t.children,o=b(t,["component","children","path","getComponent"]),i=this.state,p=i.asyncComponent,u=e||p;return u?r(u,o,n):null},e}(n),W=function(t){function e(e,n){t.call(this,e,n),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),q=function(t){function e(e,n){t.call(this,e,n),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),T=new Map,K=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location,baseUrl:this.props.baseUrl}}}},e.prototype.render=function(t){return t.matched},e}(n),M=function(t){function n(e,n){t.call(this,e,n),this.router=U(e.history),this.state={url:e.url||this.router.url}}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(){t.routeTo(t.router.url)}))},n.prototype.componentWillReceiveProps=function(t){var e=this;this.setState({url:t.url},this.props.onUpdate?function(){return e.props.onUpdate()}:null)},n.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.prototype.routeTo=function(t){var e=this;this.setState({url:t},this.props.onUpdate?function(){return e.props.onUpdate()}:null)},n.prototype.render=function(t){var n=this,r=j(t.children,this.state.url);return r.redirect?(setTimeout(function(){n.router.replace(r.redirect)},0),null):e.createVNode(4,K,{location:this.state.url,router:this.router,matched:r.matched})},n}(n),V={Route:S,IndexRoute:W,Redirect:q,IndexRedirect:q,Router:M,RouterContext:K,Link:l,IndexLink:f,match:j};t.Route=S,t.IndexRoute=W,t.Redirect=q,t.IndexRedirect=q,t.Router=M,t.RouterContext=K,t.Link=l,t.IndexLink=f,t.match=j,t.default=V,Object.defineProperty(t,"__esModule",{value:!0})});
